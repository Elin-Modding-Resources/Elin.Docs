---
exclude: true
aside: false
footer: false
editLink: false
lastUpdated: false
description: 29 files modified. 3 new files created.
version: EA 23.50 Nightly
changes: AI_Idle/ActPlan/ActionMode/Card/Chara/CharaBody/CharaGenes/CharaRenderer/DNA/Dialog/DramaCustomSequence/ELEMENT/ENC/FACTION/FEAT/FOOD/FactionBranch/FoodEffect/InvOwnerGene/MUTATION/Map/POLICY/Player/SKILL/Steam/Thing/ThingGen/Trait/+TraitBitchDancer/+TraitEQ/+TraitEQFlower/Zone
---

# EA 23.50 Nightly

December 6, 2024

29 files modified. 3 new files created.

## Breaking Changes

Click file name to view the chunk.

### [CharaGenes (1)](#charagenes)
```cs:no-line-numbers
public int GetGeneSlot() // [!code --]
public int GetGeneSlot(Chara c) // [!code ++]
```
## AI_Idle

[`@@ -49,10 +49,10 @@ public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/AI_Idle.cs#L49)
```cs:line-numbers=49
		}
		if (EClass.rnd(owner.IsPCParty ? 10 : 100) == 0 && owner.hunger.GetPhase() >= 3)
		{
			Thing thing = owner.things.Find((Thing a) => owner.CanEat(a, owner.IsPCFaction), recursive: false); // [!code --]
			Thing thing = owner.things.Find((Thing a) => owner.CanEat(a, owner.IsPCFaction) && !a.c_isImportant, recursive: false); // [!code ++]
			if (thing == null && owner.IsPCFaction)
			{
				thing = owner.things.Find((Thing a) => owner.CanEat(a), recursive: false); // [!code --]
				thing = owner.things.Find((Thing a) => owner.CanEat(a) && !a.c_isImportant, recursive: false); // [!code ++]
			}
			if (thing == null && owner.IsPCFaction && EClass._zone.IsPCFaction)
			{
```

## ActPlan

[`@@ -677,13 +677,13 @@ public void _Update(PointTarget target)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ActPlan.cs#L677)
```cs:line-numbers=677
					Thing t = _c.Thing;
					if (input == ActInput.AllAction)
					{
						if (EClass.debug.enable) // [!code --]
						if (EClass.debug.enable || EClass.player.HasKeyItem("license_illumination")) // [!code ++]
						{
							if (t.LightData != null)
							{
								if (t.c_lightColor != 0)
								{
									TrySetAct("(debug) Clear Light", delegate // [!code --]
									TrySetAct("actClearLight", delegate // [!code ++]
									{
										t.c_lightColor = 0;
										t.RecalculateFOV();
```

[`@@ -691,7 +691,7 @@ public void _Update(PointTarget target)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ActPlan.cs#L691)
```cs:line-numbers=691
										return false;
									}, t);
								}
								TrySetAct("(debug) Set Light", delegate // [!code --]
								TrySetAct("actSetLight", delegate // [!code ++]
								{
									Color lightColor = t.LightColor;
									EClass.ui.AddLayer<LayerColorPicker>().SetColor(lightColor, lightColor, delegate(PickerState state, Color _c)
```

## ActionMode

[`@@ -831,6 +831,10 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ActionMode.cs#L831)
```cs:line-numbers=831
					source = EClass.sources.materials.rows;
				}
				SourceMaterial.Row row = (flag2 ? source.NextItem(currentMat) : source.PrevItem(currentMat));
				if (row == null) // [!code ++]
				{ // [!code ++]
					row = card2.DyeMat; // [!code ++]
				} // [!code ++]
				if (EInput.isAltDown)
				{
					row = lastEditorMat;
```

## Card

[`@@ -54,6 +54,8 @@ public enum MoveType`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Card.cs#L54)
```cs:line-numbers=54

	public CardRenderer renderer;

	public CardRow hat; // [!code ++]
 // [!code ++]
	public int turn;

	public int _colorInt;
```

[`@@ -2678,6 +2680,7 @@ public void AddExp(int a)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Card.cs#L2678)
```cs:line-numbers=2678
			a = a * Mathf.Clamp(100 + Chara.affinity.value / 10, 50, 100) / 100;
		}
	}
	a = a * (100 + Evalue(1237) * 30) / 100; // [!code ++]
	exp += a;
	while (exp >= ExpToNext)
	{
```

[`@@ -3779,6 +3782,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Card.cs#L3779)
```cs:line-numbers=3779
		renderer.PlayAnime(AnimeID.HitObj);
		hp = MaxHP;
	}
	Chara target; // [!code ++]
	if (hp < 0)
	{
		if ((attackSource == AttackSource.Melee || attackSource == AttackSource.Range) && origin != null && (origin.isSynced || IsPC))
```

[`@@ -3821,38 +3825,40 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Card.cs#L3821)
```cs:line-numbers=3821
				Chara.AddCondition<ConInvulnerable>();
				return;
			}
			foreach (Chara chara4 in EClass._map.charas) // [!code --]
			foreach (Chara chara3 in EClass._map.charas) // [!code ++]
			{
				if (Chara.IsFriendOrAbove(chara4) && chara4.HasElement(1408) && chara4.faith == EClass.game.religions.Healing && EClass.world.date.GetRawDay() != chara4.GetInt(58) && (!chara4.IsPCFaction || IsPCFaction)) // [!code --]
				if (Chara.IsFriendOrAbove(chara3) && chara3.HasElement(1408) && chara3.faith == EClass.game.religions.Healing && EClass.world.date.GetRawDay() != chara3.GetInt(58) && (!chara3.IsPCFaction || IsPCFaction)) // [!code ++]
				{
					Msg.alwaysVisible = true;
					Msg.Say("layhand", chara4, this); // [!code --]
					Msg.Say("layhand", chara3, this); // [!code ++]
					Msg.Say("pray_heal", this);
					hp = MaxHP;
					Chara.AddCondition<ConInvulnerable>();
					PlayEffect("revive");
					PlaySound("revive");
					chara4.SetInt(58, EClass.world.date.GetRawDay()); // [!code --]
					chara3.SetInt(58, EClass.world.date.GetRawDay()); // [!code ++]
					return;
				}
			}
		}
		if (zoneInstanceBout != null)
		{
			Chara chara3 = EClass._map.FindChara(zoneInstanceBout.uidTarget); // [!code --]
			if (chara3 != null) // [!code --]
			target = EClass._map.FindChara(zoneInstanceBout.uidTarget); // [!code ++]
			if (target != null) // [!code ++]
			{
				if (IsPC)
				{
					EClass.pc.hp = 0;
					chara3.ShowDialog("_chara", "bout_lose"); // [!code --]
					Heal(); // [!code ++]
					target.ShowDialog("_chara", "bout_lose"); // [!code ++]
					return;
				}
				if (chara3 == this) // [!code --]
				if (target == this) // [!code ++]
				{
					hp = 0;
					chara3.ModAffinity(EClass.pc, 10); // [!code --]
					chara3.ShowDialog("_chara", "bout_win"); // [!code --]
					Heal(); // [!code ++]
					target.ModAffinity(EClass.pc, 10); // [!code ++]
					target.ShowDialog("_chara", "bout_win"); // [!code ++]
					return;
				}
			}
```

[`@@ -4204,6 +4210,14 @@ void EvadeDeath()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Card.cs#L4204)
```cs:line-numbers=4204
				Chara.mana.value = 0;
			}
		}
		void Heal() // [!code ++]
		{ // [!code ++]
			target.Cure(CureType.Death); // [!code ++]
			foreach (Chara member in EClass.pc.party.members) // [!code ++]
			{ // [!code ++]
				member.Cure(CureType.Death); // [!code ++]
			} // [!code ++]
		} // [!code ++]
	}

	public virtual void Die(Element e = null, Card origin = null, AttackSource attackSource = AttackSource.None)
```

## Chara

[`@@ -872,7 +872,7 @@ public int CurrentGeneSlot`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L872)
```cs:line-numbers=872
	{
		if (base.c_genes != null)
		{
			return base.c_genes.GetGeneSlot(); // [!code --]
			return base.c_genes.GetGeneSlot(this); // [!code ++]
		}
		return 0;
	}
```

[`@@ -1605,11 +1605,16 @@ public void RefreshSpeed(Element.BonusInfo info = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L1605)
```cs:line-numbers=1605
	{
		_Speed -= 25;
	}
	int num = 100; // [!code --]
	if (parasite != null)
	{
		_Speed = _Speed * 100 / Mathf.Clamp(120 + parasite.LV * 2 - base.STR - Evalue(227) * 2, 100, 1000);
	}
	if (_Speed < elements.ValueWithoutLink(79) / 3) // [!code ++]
	{ // [!code ++]
		_Speed = elements.ValueWithoutLink(79) / 3; // [!code ++]
		info?.AddText("minSpeed".lang((elements.ValueWithoutLink(79) / 3).ToString() ?? "")); // [!code ++]
	} // [!code ++]
	int num = 100; // [!code ++]
	if (IsPCFaction)
	{
		switch (burden.GetPhase())
```

[`@@ -1679,6 +1684,7 @@ public void RefreshSpeed(Element.BonusInfo info = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L1679)
```cs:line-numbers=1679
	else if (base.LV >= 1000)
	{
		num += EClass.curve((base.LV - 900) / 100 * 10, 500, 100);
		info?.AddFix(EClass.curve((base.LV - 900) / 100 * 10, 500, 100), "enemySpeedBuff".lang()); // [!code ++]
	}
	if (HasCondition<ConGravity>())
	{
```

[`@@ -1689,6 +1695,7 @@ public void RefreshSpeed(Element.BonusInfo info = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L1689)
```cs:line-numbers=1689
	if (_Speed < 10)
	{
		_Speed = 10;
		info?.AddText("minSpeed".lang(10.ToString() ?? "")); // [!code ++]
	}
	dirtySpeed = false;
}
```

[`@@ -6409,7 +6416,7 @@ public void TryTakeSharedItems(IEnumerable<Thing> containers, bool msg = true, b`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L6409)
```cs:line-numbers=6409
					_ListItems.Add(thing4);
					num3 -= thing4.Num;
				}
				else if (num4 > 0 && thing4.trait is TraitBlanketColdproof) // [!code --]
				else if (num4 > 0 && !HasElement(1236) && thing4.trait is TraitBlanketColdproof) // [!code ++]
				{
					_ListItems.Add(thing4);
					num4 -= thing4.Num;
```

[`@@ -6419,7 +6426,7 @@ public void TryTakeSharedItems(IEnumerable<Thing> containers, bool msg = true, b`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L6419)
```cs:line-numbers=6419
					_ListItems.Add(thing4);
					num5 -= thing4.Num;
				}
				else if (num > 0 && CanEat(thing4, shouldEat)) // [!code --]
				else if (num > 0 && CanEat(thing4, shouldEat) && !thing4.c_isImportant) // [!code ++]
				{
					_ListItems.Add(thing4);
					num -= thing4.Num;
```

[`@@ -6495,11 +6502,11 @@ public void InstantEat(Thing t = null, bool sound = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L6495)
```cs:line-numbers=6495
{
	if (t == null)
	{
		t = things.Find((Thing a) => CanEat(a, shouldEat: true)); // [!code --]
		t = things.Find((Thing a) => CanEat(a, shouldEat: true) && !a.c_isImportant); // [!code ++]
	}
	if (t == null)
	{
		t = things.Find((Thing a) => CanEat(a)); // [!code --]
		t = things.Find((Thing a) => CanEat(a) && !a.c_isImportant); // [!code ++]
	}
	if (t != null)
	{
```

[`@@ -6519,7 +6526,7 @@ public bool CanEat(Thing t, bool shouldEat = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L6519)
```cs:line-numbers=6519
	{
		return false;
	}
	if (shouldEat && !(t.trait is TraitFoodPrepared)) // [!code --]
	if (shouldEat && (!(t.trait is TraitFoodPrepared) || t.c_isImportant)) // [!code ++]
	{
		return false;
	}
```

[`@@ -8329,7 +8336,7 @@ public void Cure(CureType type, int p = 100, BlessedState state = BlessedState.N`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Chara.cs#L8329)
```cs:line-numbers=8329
		}
		CureCondition<ConWait>();
		CureCondition<ConSleep>();
		if (type == CureType.Death) // [!code --]
		if (type == CureType.Death && hunger.value > 30) // [!code ++]
		{
			hunger.value = 30;
		}
```

## CharaBody

[`@@ -41,6 +41,7 @@ public void SetOwner(Chara chara, bool deserialized = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/CharaBody.cs#L41)
```cs:line-numbers=41
			}
			slots[num].thing = thing;
			thing.elements.SetParent(owner);
			thing.trait.OnEquip(owner, onSetOwner: true); // [!code ++]
		}
	}
}
```

[`@@ -76,6 +77,7 @@ public void Unequip(BodySlot slot, bool refresh = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/CharaBody.cs#L76)
```cs:line-numbers=76
		EClass.pc.faction.charaElements.OnUnequip(owner, thing);
	}
	thing.elements.SetParent();
	thing.trait.OnUnequip(owner); // [!code ++]
	thing.c_equippedSlot = 0;
	slot.thing = null;
	if (owner.IsPC)
```

[`@@ -207,6 +209,7 @@ public bool Equip(Thing thing, BodySlot slot = null, bool msg = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/CharaBody.cs#L207)
```cs:line-numbers=207
	slot.thing = thing;
	thing.c_equippedSlot = slot.index + 1;
	thing.elements.SetParent(owner);
	thing.trait.OnEquip(owner, onSetOwner: false); // [!code ++]
	if (EClass.pc != null)
	{
		EClass.pc.faction.charaElements.OnEquip(owner, thing);
```

## CharaGenes

[`@@ -27,12 +27,17 @@ public int GetTotalCost()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/CharaGenes.cs#L27)
```cs:line-numbers=27
		return num;
	}

	public int GetGeneSlot() // [!code --]
	public int GetGeneSlot(Chara c) // [!code ++]
	{
		int num = 0;
		foreach (DNA item in items)
		{
			num += item.slot; // [!code --]
			int num2 = item.slot; // [!code ++]
			if (num2 > 1 && c.HasElement(1237)) // [!code ++]
			{ // [!code ++]
				num2--; // [!code ++]
			} // [!code ++]
			num += num2; // [!code ++]
		}
		return num;
	}
```

## CharaRenderer

[`@@ -84,7 +84,7 @@ public override void OnEnterScreen()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/CharaRenderer.cs#L84)
```cs:line-numbers=84
public override void Draw(RenderParam p, ref Vector3 v, bool drawShadow)
{
	base.Draw(p, ref v, drawShadow);
	if (Zone.sourceHat != null && owner.Pref.hatY != 0f && owner.host == null) // [!code --]
	if ((Zone.sourceHat != null || owner.hat != null) && owner.Pref.hatY != 0f && owner.host == null) // [!code ++]
	{
		DrawHat();
	}
```

[`@@ -298,8 +298,8 @@ public void DrawHat()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/CharaRenderer.cs#L298)
```cs:line-numbers=298
{
	if (pccData == null || !owner.IsDeadOrSleeping)
	{
		CardRow sourceHat = Zone.sourceHat; // [!code --]
		_ = sourceHat.pref; // [!code --]
		CardRow cardRow = Zone.sourceHat ?? owner.hat; // [!code ++]
		SourcePref pref = cardRow.pref; // [!code ++]
		bool flag = currentDir == 1 || currentDir == 3;
		int liquidLv = RenderObject.currentParam.liquidLv;
		float num = ((replacer != null) ? replacer.pref.hatY : owner.Pref.hatY);
```

[`@@ -308,9 +308,11 @@ public void DrawHat()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/CharaRenderer.cs#L308)
```cs:line-numbers=308
			num += RenderObject.renderSetting.hatPos[actor.GetFrame()].y;
		}
		RenderObject.currentParam.liquidLv = 0;
		RenderObject.currentParam.y += num; // [!code --]
		RenderObject.currentParam.tile = sourceHat._tiles[owner.uid % sourceHat._tiles.Length] * ((!flag) ? 1 : (-1)); // [!code --]
		sourceHat.renderData.Draw(RenderObject.currentParam); // [!code --]
		RenderObject.currentParam.x += 0.01f * (float)pref.equipX; // [!code ++]
		RenderObject.currentParam.y += num + 0.01f * (float)pref.equipY; // [!code ++]
		RenderObject.currentParam.z -= pref.hatY; // [!code ++]
		RenderObject.currentParam.tile = cardRow._tiles[owner.uid % cardRow._tiles.Length] * ((!flag) ? 1 : (-1)); // [!code ++]
		cardRow.renderData.Draw(RenderObject.currentParam); // [!code ++]
		RenderObject.currentParam.y -= num;
		RenderObject.currentParam.liquidLv = liquidLv;
	}
```

## DNA

[`@@ -200,7 +200,8 @@ public bool CanRemove()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/DNA.cs#L200)
```cs:line-numbers=200
{
	for (int i = 0; i < vals.Count; i += 2)
	{
		if (vals[i] == 1415) // [!code --]
		int num = vals[i]; // [!code ++]
		if (num == 1202 || num == 1237 || num == 1415) // [!code ++]
		{
			return false;
		}
```

[`@@ -485,7 +486,7 @@ public string GetText()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/DNA.cs#L485)
```cs:line-numbers=485

	public void WriteNote(UINote n)
	{
		if (slot > 1) // [!code --]
		if (slot >= 1) // [!code ++]
		{
			n.AddText("isGeneReqSlots".lang(slot.ToString() ?? ""), FontColor.Warning);
		}
```

## Dialog

[`@@ -122,7 +122,7 @@ private void Update()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Dialog.cs#L122)
```cs:line-numbers=122

	public override void OnUpdateInput()
	{
		if ((bool)input && option.canClose && Input.GetKeyDown(KeyCode.Return)) // [!code --]
		if ((bool)input && option.canClose && (Input.GetKeyDown(KeyCode.Return) || Input.GetKeyDown(KeyCode.KeypadEnter))) // [!code ++]
		{
			isInputEnter = true;
			Close();
```

## DramaCustomSequence

[`@@ -226,13 +226,16 @@ public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/DramaCustomSequence.cs#L226)
```cs:line-numbers=226
		{
			Choice2("daSellFame", "_sellFame");
		}
		if (c.trait.CanInvestTown && Guild.GetCurrentGuild() == null) // [!code --]
		if (EClass._zone.AllowInvest) // [!code ++]
		{
			Choice2("daInvest", "_investZone"); // [!code --]
		} // [!code --]
		if (c.trait.CanInvest) // [!code --]
		{ // [!code --]
			Choice2("daInvest", "_investShop"); // [!code --]
			if (c.trait.CanInvestTown && Guild.GetCurrentGuild() == null) // [!code ++]
			{ // [!code ++]
				Choice2("daInvest", "_investZone"); // [!code ++]
			} // [!code ++]
			if (c.trait.CanInvest) // [!code ++]
			{ // [!code ++]
				Choice2("daInvest", "_investShop"); // [!code ++]
			} // [!code ++]
		}
		if (c.trait.CanIdentify)
		{
```

## ELEMENT

[`@@ -86,6 +86,21 @@ public class BonusInfo`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ELEMENT.cs#L86)
```cs:line-numbers=86

		public int total;

		public void CheckFirst() // [!code ++]
		{ // [!code ++]
			if (first) // [!code ++]
			{ // [!code ++]
				first = false; // [!code ++]
				n.Space(8); // [!code ++]
			} // [!code ++]
		} // [!code ++]
 // [!code ++]
		public void AddText(string text) // [!code ++]
		{ // [!code ++]
			CheckFirst(); // [!code ++]
			n.AddText("_bullet".lang() + text, FontColor.Warning); // [!code ++]
		} // [!code ++]
 // [!code ++]
		public void AddText(int v, string text, string textBad = null)
		{
			if (v != 0)
```

[`@@ -95,11 +110,7 @@ public void AddText(int v, string text, string textBad = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ELEMENT.cs#L95)
```cs:line-numbers=95
			{
				text2 = textBad;
			}
			if (first) // [!code --]
			{ // [!code --]
				first = false; // [!code --]
				n.Space(8); // [!code --]
			} // [!code --]
			CheckFirst(); // [!code ++]
			total += v;
			n.AddText("_bullet".lang() + text2 + " " + ((v > 0) ? "+" : "") + v, (v > 0) ? FontColor.Good : FontColor.Bad);
		}
```

[`@@ -109,11 +120,7 @@ public void AddFix(int v, string text)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ELEMENT.cs#L109)
```cs:line-numbers=109
	{
		if (v != 0)
		{
			if (first) // [!code --]
			{ // [!code --]
				first = false; // [!code --]
				n.Space(8); // [!code --]
			} // [!code --]
			CheckFirst(); // [!code ++]
			n.AddText("_bullet".lang() + text + " " + ((v > 0) ? "+" : "") + v + "%", (v > 0) ? FontColor.Good : FontColor.Bad);
		}
	}
```

## ENC

[`@@ -52,7 +52,7 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ENC.cs#L52)
```cs:line-numbers=52

	public const int mod_rapid = 602;

	public const int sustain_WIL = 445; // [!code --]
	public const int sustain_MAG = 446; // [!code ++]

	public const int mod_ammo = 600;

```

[`@@ -66,6 +66,8 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ENC.cs#L66)
```cs:line-numbers=66

	public const int negateSleep = 424;

	public const int mod_reload = 601; // [!code ++]
 // [!code ++]
	public const int negateParalysis = 422;

	public const int negateBlind = 421;
```

[`@@ -76,9 +78,9 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ENC.cs#L76)
```cs:line-numbers=76

	public const int invisibility = 415;

	public const int slowCorruption = 412; // [!code --]
	public const int breathing = 429; // [!code ++]

	public const int encSpell = 411; // [!code --]
	public const int slowCorruption = 412; // [!code ++]

	public const int throwReturn = 410;

```

[`@@ -102,7 +104,7 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ENC.cs#L102)
```cs:line-numbers=102

	public const int negateTeleport = 400;

	public const int breathing = 429; // [!code --]
	public const int encSpell = 411; // [!code ++]

	public const int sustain_STR = 440;

```

[`@@ -130,13 +132,11 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ENC.cs#L130)
```cs:line-numbers=130

	public const int bane_fairy = 462;

	public const int bane_undead = 461; // [!code --]
 // [!code --]
	public const int bane_dragon = 460;

	public const int mod_reload = 601; // [!code --]
	public const int bane_undead = 461; // [!code ++]

	public const int sustain_MAG = 446; // [!code --]
	public const int sustain_WIL = 445; // [!code ++]

	public const int sustain_LER = 444;

```

[`@@ -152,11 +152,11 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ENC.cs#L152)
```cs:line-numbers=152
	{
		653, 652, 651, 650, 641, 607, 604, 605, 606, 654,
		640, 655, 852, 660, 661, 662, 663, 664, 665, 666,
		865, 603, 850, 851, 656, 602, 445, 600, 428, 427, // [!code --]
		426, 425, 424, 422, 421, 420, 416, 415, 412, 411, // [!code --]
		410, 409, 408, 407, 406, 405, 404, 403, 402, 401, // [!code --]
		400, 429, 440, 423, 468, 483, 482, 481, 480, 467, // [!code --]
		466, 465, 464, 463, 462, 461, 460, 601, 446, 444, // [!code --]
		865, 603, 850, 851, 656, 602, 446, 600, 428, 427, // [!code ++]
		426, 425, 424, 601, 422, 421, 420, 416, 415, 429, // [!code ++]
		412, 410, 409, 408, 407, 406, 405, 404, 403, 402, // [!code ++]
		401, 400, 411, 440, 423, 468, 483, 482, 481, 480, // [!code ++]
		467, 466, 465, 464, 463, 462, 460, 461, 445, 444, // [!code ++]
		443, 442, 441, 447
	};
}
```

## FACTION

[`@@ -4,58 +4,58 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FACTION.cs#L4)
```cs:line-numbers=4

public class FACTION
{
	public const int fRation = 2207; // [!code --]
	public const int bfSnow = 3602; // [!code ++]

	public const int bfCave = 3500;

	public const int bfPlain = 3600;

	public const int bfGeyser = 3701; // [!code ++]
 // [!code ++]
	public const int bfFertile = 3700; // [!code ++]
 // [!code ++]
	public const int bfForest = 3601;

	public const int bfBeach = 3604;

	public const int bfHill = 3603;

	public const int bfSea = 3605; // [!code --]
 // [!code --]
	public const int bfFertile = 3700; // [!code --]
 // [!code --]
	public const int bfGeyser = 3701; // [!code --]
	public const int fRation = 2207; // [!code ++]

	public const int bfSnow = 3602; // [!code --]
	public const int bfSea = 3605; // [!code ++]

	public const int fAttraction = 2206;

	public const int fMoral = 2203; // [!code --]
	public const int fHeirloom = 2120; // [!code ++]

	public const int fFood = 2204;

	public const int fMoral = 2203; // [!code ++]
 // [!code ++]
	public const int fPromo = 2202;

	public const int fElec = 2201;

	public const int fTaxEvasion = 2119; // [!code --]
	public const int fSoil = 2200; // [!code ++]

	public const int fLuck = 2118; // [!code --]
	public const int fConstruction = 2003; // [!code ++]

	public const int fLoyal = 2117; // [!code --]
	public const int fAdmin = 2115; // [!code ++]

	public const int fEducation = 2116;

	public const int fHeirloom = 2120; // [!code --]
 // [!code --]
	public const int fAdmin = 2115; // [!code --]
	public const int fLoyal = 2117; // [!code ++]

	public const int bfRuin = 3702; // [!code --]
	public const int fLuck = 2118; // [!code ++]

	public const int fConstruction = 2003; // [!code --]
	public const int fTaxEvasion = 2119; // [!code ++]

	public const int fSafety = 2205;

	public const int fSoil = 2200; // [!code --]
 // [!code --]
	public const int bfTranquil = 3703;

	public const int bfRuin = 3702; // [!code ++]
 // [!code ++]
	public const int bfHunt = 3705;

	public const int bfVolcano = 3704;
```

[`@@ -86,36 +86,36 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FACTION.cs#L86)
```cs:line-numbers=86

	public const int bfCoal = 3800;

	public const int bfLandmark5 = 3784; // [!code --]
 // [!code --]
	public const int bfLandmark4 = 3783; // [!code --]
	public const int bfMushroom = 3801; // [!code ++]

	public const int bfLandmark3 = 3782; // [!code --]
	public const int bfMonster = 3707; // [!code ++]

	public const int bfLandmark2 = 3781; // [!code --]
	public const int bfFreshAir = 3708; // [!code ++]

	public const int bfLandmark1 = 3780; // [!code --]
	public const int bfBasin = 3709; // [!code ++]

	public const int bfBreed = 3710;

	public const int bfBasin = 3709; // [!code --]
	public const int bfFish = 3706; // [!code ++]

	public const int bfFreshAir = 3708; // [!code --]
	public const int bfLandmark2 = 3781; // [!code ++]

	public const int bfMonster = 3707; // [!code --]
	public const int bfLandmark3 = 3782; // [!code ++]

	public const int bfFish = 3706; // [!code --]
	public const int bfLandmark4 = 3783; // [!code ++]

	public const int bfMushroom = 3801; // [!code --]
	public const int bfLandmark5 = 3784; // [!code ++]
 // [!code ++]
	public const int bfLandmark1 = 3780; // [!code ++]

	public static readonly int[] IDS = new int[52]
	{
		2207, 3500, 3600, 3601, 3604, 3603, 3605, 3700, 3701, 3602, // [!code --]
		2206, 2203, 2204, 2202, 2201, 2119, 2118, 2117, 2116, 2120, // [!code --]
		2115, 3702, 2003, 2205, 2200, 3703, 3705, 3704, 4004, 4003, // [!code --]
		3602, 3500, 3600, 3701, 3700, 3601, 3604, 3603, 2207, 3605, // [!code ++]
		2206, 2120, 2204, 2203, 2202, 2201, 2200, 2003, 2115, 2116, // [!code ++]
		2117, 2118, 2119, 2205, 3703, 3702, 3705, 3704, 4004, 4003, // [!code ++]
		4002, 4001, 4000, 3900, 4006, 3805, 3804, 3803, 3802, 4005,
		3800, 3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707, // [!code --]
		3706, 3801 // [!code --]
		3800, 3801, 3707, 3708, 3709, 3710, 3706, 3781, 3782, 3783, // [!code ++]
		3784, 3780 // [!code ++]
	};
}
public class Faction : EClass
```

## FEAT

[`@@ -3,27 +3,27 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L3)
```cs:line-numbers=3

public class FEAT
{
	public const int featStamina = 1612; // [!code --]
	public const int featMana = 1611; // [!code ++]

	public const int featSTR = 1620; // [!code --]
	public const int featWIL = 1626; // [!code ++]

	public const int featDEX = 1621; // [!code --]
	public const int featMAG = 1625; // [!code ++]

	public const int featCHA = 1627; // [!code --]
	public const int featLER = 1624; // [!code ++]

	public const int featPER = 1623;

	public const int featLER = 1624; // [!code --]
	public const int featEND = 1622; // [!code ++]

	public const int featMAG = 1625; // [!code --]
	public const int featDEX = 1621; // [!code ++]

	public const int featWIL = 1626; // [!code --]
	public const int featSTR = 1620; // [!code ++]

	public const int featEND = 1622; // [!code --]
	public const int featStamina = 1612; // [!code ++]

	public const int featMana = 1611; // [!code --]
	public const int featCHA = 1627; // [!code ++]

	public const int featSwordsage = 1418; // [!code --]
	public const int featWitch = 1417; // [!code ++]

	public const int featManaMeat = 1421;

```

[`@@ -31,7 +31,7 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L31)
```cs:line-numbers=31

	public const int featMilitant = 1419;

	public const int featWitch = 1417; // [!code --]
	public const int featSwordsage = 1418; // [!code ++]

	public const int featInquisitor = 1416;

```

[`@@ -43,6 +43,8 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L43)
```cs:line-numbers=43

	public const int featLuckyCat = 1412;

	public const int featEarthStrength = 1411; // [!code ++]
 // [!code ++]
	public const int featLuck = 1628;

	public const int featLife = 1610;
```

[`@@ -53,7 +55,7 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L53)
```cs:line-numbers=53

	public const int featDefense = 1631;

	public const int featEarthStrength = 1411; // [!code --]
	public const int featReboot = 1410; // [!code ++]

	public const int featManaCost = 1657;

```

[`@@ -63,7 +65,7 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L63)
```cs:line-numbers=63

	public const int featHeavyCasting = 1654;

	public const int featRapidArrow = 1652; // [!code --]
	public const int featDreamWaker = 1653; // [!code ++]

	public const int featMagicManner = 1651;

```

[`@@ -99,11 +101,11 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L99)
```cs:line-numbers=99

	public const int featLonelySoul = 1646;

	public const int featReboot = 1410; // [!code --]
	public const int featBoost = 1409; // [!code ++]

	public const int featDreamWaker = 1653; // [!code --]
	public const int featRapidArrow = 1652; // [!code ++]

	public const int featPaladin2 = 1408; // [!code --]
	public const int featPaladin = 1407; // [!code ++]

	public const int featAcidBody = 1223;

```

[`@@ -121,7 +123,7 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L121)
```cs:line-numbers=121

	public const int featAdam = 1230;

	public const int featBaby = 1232; // [!code --]
	public const int featNirvana = 1231; // [!code ++]

	public const int featSplit = 1222;

```

[`@@ -129,6 +131,10 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L129)
```cs:line-numbers=129

	public const int featLightEater = 1235;

	public const int featNorland = 1236; // [!code ++]
 // [!code ++]
	public const int featRoran = 1237; // [!code ++]
 // [!code ++]
	public const int featGod_element1 = 1300;

	public const int featGod_earth1 = 1305;
```

[`@@ -141,19 +147,15 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L141)
```cs:line-numbers=141

	public const int featGod_harvest1 = 1325;

	public const int featGod_luck1 = 1330; // [!code --]
 // [!code --]
	public const int featGod_harmony1 = 1335; // [!code --]
 // [!code --]
	public const int featHeavyEater = 1234;

	public const int featGod_oblivion1 = 1340; // [!code --]
	public const int featGod_luck1 = 1330; // [!code ++]

	public const int featSpike = 1221;

	public const int featElderCrab = 1219;

	public const int featBoost = 1409; // [!code --]
	public const int featPaladin2 = 1408; // [!code ++]

	public const int featSlowFood = 1200;

```

[`@@ -195,15 +197,19 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L195)
```cs:line-numbers=195

	public const int featFluffyTail = 1209;

	public const int featGod_trickery1 = 1345; // [!code --]
	public const int featGod_harmony1 = 1335; // [!code ++]

	public const int featNirvana = 1231; // [!code --]
	public const int featBaby = 1232; // [!code ++]
 // [!code ++]
	public const int featGod_oblivion1 = 1340; // [!code ++]
 // [!code ++]
	public const int featGod_trickery1 = 1345; // [!code ++]

	public const int featGod_moonshadow1 = 1350;

	public const int featGod_strife1 = 1355;

	public const int featWarrior = 1400; // [!code --]
	public const int featThief = 1401; // [!code ++]

	public const int featWizard = 1402;

```

[`@@ -211,27 +217,25 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FEAT.cs#L211)
```cs:line-numbers=211

	public const int featArcher = 1404;

	public const int featPianist = 1405; // [!code --]
	public const int featWarrior = 1400; // [!code ++]

	public const int featTourist = 1406;

	public const int featThief = 1401; // [!code --]
 // [!code --]
	public const int featPaladin = 1407; // [!code --]
	public const int featPianist = 1405; // [!code ++]

	public static readonly int[] IDS = new int[108] // [!code --]
	public static readonly int[] IDS = new int[110] // [!code ++]
	{
		1612, 1620, 1621, 1627, 1623, 1624, 1625, 1626, 1622, 1611, // [!code --]
		1418, 1421, 1420, 1419, 1417, 1416, 1415, 1414, 1413, 1412, // [!code --]
		1628, 1610, 1629, 1645, 1631, 1411, 1657, 1656, 1655, 1654, // [!code --]
		1652, 1651, 1650, 1649, 1648, 1630, 1647, 1644, 1643, 1642, // [!code --]
		1641, 1640, 1636, 1635, 1634, 1633, 1632, 1646, 1410, 1653, // [!code --]
		1408, 1223, 1224, 1225, 1226, 1227, 1228, 1229, 1230, 1232, // [!code --]
		1222, 1233, 1235, 1300, 1305, 1310, 1315, 1320, 1325, 1330, // [!code --]
		1335, 1234, 1340, 1221, 1219, 1409, 1200, 1201, 1202, 1203, // [!code --]
		1204, 1205, 1206, 1207, 1220, 1208, 1210, 1211, 1212, 1213, // [!code --]
		1214, 1215, 1216, 1217, 1218, 1209, 1345, 1231, 1350, 1355, // [!code --]
		1400, 1402, 1403, 1404, 1405, 1406, 1401, 1407 // [!code --]
		1611, 1626, 1625, 1624, 1623, 1622, 1621, 1620, 1612, 1627, // [!code ++]
		1417, 1421, 1420, 1419, 1418, 1416, 1415, 1414, 1413, 1412, // [!code ++]
		1411, 1628, 1610, 1629, 1645, 1631, 1410, 1657, 1656, 1655, // [!code ++]
		1654, 1653, 1651, 1650, 1649, 1648, 1630, 1647, 1644, 1643, // [!code ++]
		1642, 1641, 1640, 1636, 1635, 1634, 1633, 1632, 1646, 1409, // [!code ++]
		1652, 1407, 1223, 1224, 1225, 1226, 1227, 1228, 1229, 1230, // [!code ++]
		1231, 1222, 1233, 1235, 1236, 1237, 1300, 1305, 1310, 1315, // [!code ++]
		1320, 1325, 1234, 1330, 1221, 1219, 1408, 1200, 1201, 1202, // [!code ++]
		1203, 1204, 1205, 1206, 1207, 1220, 1208, 1210, 1211, 1212, // [!code ++]
		1213, 1214, 1215, 1216, 1217, 1218, 1209, 1335, 1232, 1340, // [!code ++]
		1345, 1350, 1355, 1401, 1402, 1403, 1404, 1400, 1406, 1405 // [!code ++]
	};
}
public class Feat : Element
```

## FOOD

[`@@ -1,5 +1,7 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FOOD.cs#L1)
```cs:line-numbers=1
public class FOOD
{
	public const int food_cat = 701; // [!code ++]
 // [!code ++]
	public const int food_poison = 702;

	public const int food_love = 703;
```

[`@@ -10,9 +12,7 @@ public class FOOD`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FOOD.cs#L10)
```cs:line-numbers=10

	public const int loseWeight = 706;

	public const int food_cat = 701; // [!code --]
 // [!code --]
	public const int food_CHA = 700;

	public static readonly int[] IDS = new int[7] { 702, 703, 704, 705, 706, 701, 700 }; // [!code --]
	public static readonly int[] IDS = new int[7] { 701, 702, 703, 704, 705, 706, 700 }; // [!code ++]
}
```

## FactionBranch

[`@@ -1032,7 +1032,7 @@ void GetIncome(ref int n, ref int stat, string lang, bool tax)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FactionBranch.cs#L1032)
```cs:line-numbers=1032

	public Thing GetMeal(Chara c)
	{
		Thing thing = EClass._zone.TryGetThingFromSharedContainer((Thing t) => c.CanEat(t, shouldEat: true)); // [!code --]
		Thing thing = EClass._zone.TryGetThingFromSharedContainer((Thing t) => c.CanEat(t, shouldEat: true) && !t.c_isImportant); // [!code ++]
		if (thing != null)
		{
			thing = thing.Split(1);
```

## FoodEffect

[`@@ -339,7 +339,7 @@ public static void Proc(Chara c, Thing food)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/FoodEffect.cs#L339)
```cs:line-numbers=339
	{
		num3 *= 2;
	}
	num3 = num3 * (100 + c.Evalue(1235) * 10) / (100 + c.Evalue(1234) * 10); // [!code --]
	num3 = num3 * (100 + c.Evalue(1235) * 10) / (100 + c.Evalue(1234) * 10 + c.Evalue(1236) * 15); // [!code ++]
	c.hunger.Mod(-num3);
	if (flag2)
	{
```

## InvOwnerGene

[`@@ -25,11 +25,19 @@ public override bool ShouldShowGuide(Thing t)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/InvOwnerGene.cs#L25)
```cs:line-numbers=25
public override void _OnProcess(Thing t)
{
	DNA.Type type = t.c_DNA.type;
	if (type != 0 && tg.c_genes != null && tg.CurrentGeneSlot >= tg.MaxGeneSlot) // [!code --]
	if (type != 0 && tg.c_genes != null) // [!code ++]
	{
		SE.Beep(); // [!code --]
		Msg.Say("tooManyGene", tg); // [!code --]
		return; // [!code --]
		int num = t.c_DNA.slot; // [!code ++]
		if (num > 1 && tg.HasElement(1237)) // [!code ++]
		{ // [!code ++]
			num--; // [!code ++]
		} // [!code ++]
		if (tg.CurrentGeneSlot + num > tg.MaxGeneSlot) // [!code ++]
		{ // [!code ++]
			SE.Beep(); // [!code ++]
			Msg.Say("tooManyGene", tg); // [!code ++]
			return; // [!code ++]
		} // [!code ++]
	}
	if (type == DNA.Type.Brain)
	{
```

[`@@ -79,13 +87,18 @@ public override void OnWriteNote(Thing t, UINote n)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/InvOwnerGene.cs#L79)
```cs:line-numbers=79
		{
			n.AddHeader("HeaderAdditionalTrait", "gene_hint");
			_ = tg.c_genes;
			int num = tg.MaxGeneSlot - tg.CurrentGeneSlot; // [!code --]
			int num2 = num - t.c_DNA.slot; // [!code --]
			int num = t.c_DNA.slot; // [!code ++]
			if (num > 1 && tg.HasElement(1237)) // [!code ++]
			{ // [!code ++]
				num--; // [!code ++]
			} // [!code ++]
			int num2 = tg.MaxGeneSlot - tg.CurrentGeneSlot; // [!code ++]
			int num3 = num2 - num; // [!code ++]
			int maxGeneSlot = tg.MaxGeneSlot;
			n.AddText("gene_hint_slot".lang(num.ToString() ?? "", num2.ToString() ?? "", maxGeneSlot.ToString() ?? ""), (num2 >= 0) ? FontColor.Good : FontColor.Bad); // [!code --]
			n.AddText("gene_hint_slot".lang(num2.ToString() ?? "", num3.ToString() ?? "", maxGeneSlot.ToString() ?? ""), (num3 >= 0) ? FontColor.Good : FontColor.Bad); // [!code ++]
			int cost = t.c_DNA.cost;
			int num3 = tg.feat - cost; // [!code --]
			n.AddText("gene_hint_cost".lang(tg.feat.ToString() ?? "", cost + ((cost == t.c_DNA.cost) ? "" : ("(" + t.c_DNA.cost + ")")), num3.ToString() ?? ""), (num3 >= 0) ? FontColor.Good : FontColor.Bad); // [!code --]
			int num4 = tg.feat - cost; // [!code ++]
			n.AddText("gene_hint_cost".lang(tg.feat.ToString() ?? "", cost + ((cost == t.c_DNA.cost) ? "" : ("(" + t.c_DNA.cost + ")")), num4.ToString() ?? ""), (num4 >= 0) ? FontColor.Good : FontColor.Bad); // [!code ++]
		}
	}
}
```

## MUTATION

[`@@ -1,34 +1,32 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/MUTATION.cs#L1)
```cs:line-numbers=1
public class MUTATION
{
	public const int mutationRegenN = 1517; // [!code --]
 // [!code --]
	public const int mutationRegen = 1516;

	public const int mutationDexN = 1515;

	public const int mutationDex = 1514;

	public const int mutationSkinN = 1511; // [!code --]
	public const int mutationSkin = 1510; // [!code ++]

	public const int mutationEye = 1512;

	public const int mutationSkin = 1510; // [!code --]
	public const int mutationSkinN = 1511; // [!code ++]

	public const int etherManaBattery = 1564; // [!code --]
	public const int etherProvoke = 1563; // [!code ++]

	public const int mutationSpeed = 1518; // [!code --]
	public const int mutationRegenN = 1517; // [!code ++]

	public const int mutationEyeN = 1513;

	public const int mutationSpeedN = 1519; // [!code --]
	public const int mutationSpeed = 1518; // [!code ++]

	public const int etherPoisonHand = 1565; // [!code --]
	public const int etherManaBattery = 1564; // [!code ++]

	public const int mutationStrN = 1521; // [!code --]
	public const int mutationStr = 1520; // [!code ++]

	public const int etherProvoke = 1563; // [!code --]
	public const int etherPoisonHand = 1565; // [!code ++]

	public const int mutationStr = 1520; // [!code --]
	public const int mutationSpeedN = 1519; // [!code ++]

	public const int etherStupid = 1561;

```

[`@@ -50,38 +48,40 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/MUTATION.cs#L50)
```cs:line-numbers=50

	public const int etherFeet = 1552;

	public const int etherUgly = 1551; // [!code ++]
 // [!code ++]
	public const int etherArmor = 1562;

	public const int etherGravity = 1550; // [!code --]
	public const int mutationStrN = 1521; // [!code ++]

	public const int etherUgly = 1551; // [!code --]
	public const int mutationBodyN = 1531; // [!code ++]

	public const int mutationChaN = 1523; // [!code --]
	public const int mutationBody = 1530; // [!code ++]

	public const int mutationBrain = 1524; // [!code --]
	public const int mutationLightningN = 1529; // [!code ++]

	public const int mutationBrainN = 1525; // [!code --]
	public const int mutationLightning = 1528; // [!code ++]

	public const int mutationCold = 1526; // [!code --]
	public const int mutationColdN = 1527; // [!code ++]

	public const int mutationCha = 1522; // [!code --]
	public const int mutationCold = 1526; // [!code ++]

	public const int mutationLightning = 1528; // [!code --]
	public const int mutationBrainN = 1525; // [!code ++]

	public const int mutationLightningN = 1529; // [!code --]
	public const int mutationBrain = 1524; // [!code ++]

	public const int mutationBody = 1530; // [!code --]
	public const int mutationChaN = 1523; // [!code ++]

	public const int mutationBodyN = 1531; // [!code --]
	public const int mutationCha = 1522; // [!code ++]

	public const int mutationColdN = 1527; // [!code --]
	public const int etherGravity = 1550; // [!code ++]

	public static readonly int[] IDS = new int[38]
	{
		1517, 1516, 1515, 1514, 1511, 1512, 1510, 1564, 1518, 1513, // [!code --]
		1519, 1565, 1521, 1563, 1520, 1561, 1560, 1559, 1558, 1557, // [!code --]
		1556, 1555, 1554, 1553, 1552, 1562, 1550, 1551, 1523, 1524, // [!code --]
		1525, 1526, 1522, 1528, 1529, 1530, 1531, 1527 // [!code --]
		1516, 1515, 1514, 1510, 1512, 1511, 1563, 1517, 1513, 1518, // [!code ++]
		1564, 1520, 1565, 1519, 1561, 1560, 1559, 1558, 1557, 1556, // [!code ++]
		1555, 1554, 1553, 1552, 1551, 1562, 1521, 1531, 1530, 1529, // [!code ++]
		1528, 1527, 1526, 1525, 1524, 1523, 1522, 1550 // [!code ++]
	};
}
public class Mutation : Feat
```

## Map

[`@@ -1206,33 +1206,39 @@ public void TryShatter(Point pos, int ele, int power)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Map.cs#L1206)
```cs:line-numbers=1206
		if (item.isThing && item.things.Count == 0)
		{
			list.Add(item);
			continue; // [!code --]
		}
		Thing thing = ((ele == 910) ? item.things.FindBest<TraitBlanketFireproof>((Thing t) => -t.c_charges) : item.things.FindBest<TraitBlanketColdproof>((Thing t) => -t.c_charges)); // [!code --]
		if (thing != null) // [!code --]
		else // [!code ++]
		{
			thing.ModCharge(-1); // [!code --]
			Card rootCard2 = item.GetRootCard(); // [!code --]
			if (pos.IsSync) // [!code --]
			if (ele == 911 && item.HasElement(1236)) // [!code ++]
			{
				Msg.Say((item.isChara ? "blanketInv_" : "blanketGround_") + element.source.alias, thing, item); // [!code --]
				continue; // [!code ++]
			}
			if (thing.c_charges <= 0) // [!code --]
			Thing thing = ((ele == 910) ? item.things.FindBest<TraitBlanketFireproof>((Thing t) => -t.c_charges) : item.things.FindBest<TraitBlanketColdproof>((Thing t) => -t.c_charges)); // [!code ++]
			if (thing != null) // [!code ++]
			{
				thing.Die(element); // [!code --]
				if (rootCard2.IsPCParty) // [!code --]
				thing.ModCharge(-1); // [!code ++]
				Card rootCard2 = item.GetRootCard(); // [!code ++]
				if (pos.IsSync) // [!code ++]
				{
					ActionMode.Adv.itemLost++; // [!code --]
					Msg.Say((item.isChara ? "blanketInv_" : "blanketGround_") + element.source.alias, thing, item); // [!code ++]
				}
				if (thing.c_charges <= 0) // [!code ++]
				{ // [!code ++]
					thing.Die(element); // [!code ++]
					if (rootCard2.IsPCParty) // [!code ++]
					{ // [!code ++]
						ActionMode.Adv.itemLost++; // [!code ++]
					} // [!code ++]
				} // [!code ++]
				continue; // [!code ++]
			}
			continue; // [!code --]
		} // [!code --]
		foreach (Thing item2 in item.things.List((Thing a) => a.things.Count == 0)) // [!code --]
		{ // [!code --]
			Card parentCard = item2.parentCard; // [!code --]
			if (parentCard == null || (!(parentCard.trait is TraitChestMerchant) && !parentCard.HasEditorTag(EditorTag.PreciousContainer))) // [!code --]
			foreach (Thing item2 in item.things.List((Thing a) => a.things.Count == 0)) // [!code ++]
			{
				list.Add(item2); // [!code --]
				Card parentCard = item2.parentCard; // [!code ++]
				if (parentCard == null || (!(parentCard.trait is TraitChestMerchant) && !parentCard.HasEditorTag(EditorTag.PreciousContainer))) // [!code ++]
				{ // [!code ++]
					list.Add(item2); // [!code ++]
				} // [!code ++]
			}
		}
	}
```

## POLICY

[`@@ -3,30 +3,32 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/POLICY.cs#L3)
```cs:line-numbers=3

public class POLICY
{
	public const int store_ripoff = 2816; // [!code --]
 // [!code --]
	public const int incomeTransfer = 2711; // [!code --]
	public const int mass_exhibition = 2814; // [!code ++]

	public const int home_discount = 2800; // [!code --]
	public const int suite_room = 2813; // [!code ++]

	public const int open_business = 2810; // [!code --]
	public const int bed_quality = 2812; // [!code ++]

	public const int tourist_safety = 2811;

	public const int bed_quality = 2812; // [!code --]
	public const int noAnimal = 2709; // [!code ++]

	public const int noMother = 2710; // [!code --]
	public const int home_discount = 2800; // [!code ++]

	public const int suite_room = 2813; // [!code --]
	public const int incomeTransfer = 2711; // [!code ++]

	public const int mass_exhibition = 2814; // [!code --]
	public const int noMother = 2710; // [!code ++]

	public const int platinum_ticket = 2815;

	public const int store_premium = 2817; // [!code --]
	public const int open_business = 2810; // [!code ++]
 // [!code ++]
	public const int store_ripoff = 2816; // [!code ++]

	public const int legendary_exhibition = 2823;

	public const int license_food = 2818; // [!code ++]
 // [!code ++]
	public const int license_furniture = 2819;

	public const int license_general = 2820;
```

[`@@ -45,18 +47,14 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/POLICY.cs#L45)
```cs:line-numbers=45

	public const int license_slaver = 2828;

	public const int noAnimal = 2709; // [!code --]
 // [!code --]
	public const int license_food = 2818; // [!code --]
	public const int store_premium = 2817; // [!code ++]

	public const int noDM = 2708;

	public const int human_right = 2506; // [!code --]
	public const int legal_drug = 2505; // [!code ++]

	public const int demon_invocation = 2706;

	public const int auto_farm = 2707; // [!code --]
 // [!code --]
	public const int wealth_tax = 2500;

	public const int faith_tax = 2501;
```

[`@@ -67,17 +65,19 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/POLICY.cs#L67)
```cs:line-numbers=67

	public const int impressment = 2504;

	public const int human_right = 2506; // [!code ++]
 // [!code ++]
	public const int inquisition = 2507;

	public const int nocturnal_life = 2508;

	public const int vaccination = 2509; // [!code --]
	public const int auto_farm = 2707; // [!code ++]

	public const int ban_radio = 2510;

	public const int self_sufficient = 2511;

	public const int legal_drug = 2505; // [!code --]
	public const int vaccination = 2509; // [!code ++]

	public const int resident_wanted = 2513;

```

[`@@ -95,19 +95,19 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/POLICY.cs#L95)
```cs:line-numbers=95

	public const int weed_no = 2703;

	public const int resident_tax = 2512; // [!code --]
 // [!code --]
	public const int border_watch = 2704;

	public const int taxTransfer = 2705;

	public const int resident_tax = 2512; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[49]
	{
		2816, 2711, 2800, 2810, 2811, 2812, 2710, 2813, 2814, 2815, // [!code --]
		2817, 2823, 2819, 2820, 2821, 2822, 2824, 2825, 2826, 2827, // [!code --]
		2828, 2709, 2818, 2708, 2506, 2706, 2707, 2500, 2501, 2502, // [!code --]
		2503, 2504, 2507, 2508, 2509, 2510, 2511, 2505, 2513, 2514, // [!code --]
		2515, 2516, 2700, 2701, 2702, 2703, 2512, 2704, 2705 // [!code --]
		2814, 2813, 2812, 2811, 2709, 2800, 2711, 2710, 2815, 2810, // [!code ++]
		2816, 2823, 2818, 2819, 2820, 2821, 2822, 2824, 2825, 2826, // [!code ++]
		2827, 2828, 2817, 2708, 2505, 2706, 2500, 2501, 2502, 2503, // [!code ++]
		2504, 2506, 2507, 2508, 2707, 2510, 2511, 2509, 2513, 2514, // [!code ++]
		2515, 2516, 2700, 2701, 2702, 2703, 2704, 2705, 2512 // [!code ++]
	};
}
public class Policy : EClass
```

## Player

[`@@ -1888,6 +1888,11 @@ public void ModKeyItem(int id, int num = 1, bool msg = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Player.cs#L1888)
```cs:line-numbers=1888
		}
	}

	public bool HasKeyItem(string alias) // [!code ++]
	{ // [!code ++]
		return CountKeyItem(EClass.sources.keyItems.alias[alias].id) > 0; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public int CountKeyItem(string alias)
	{
		return CountKeyItem(EClass.sources.keyItems.alias[alias].id);
```

## SKILL

[`@@ -10,18 +10,18 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/SKILL.cs#L10)
```cs:line-numbers=10

	public const int shield = 123;

	public const int weaponScythe = 110; // [!code --]
	public const int fireproof = 50; // [!code ++]

	public const int armorLight = 120;

	public const int weaponBlunt = 111;

	public const int weaponScythe = 110; // [!code ++]
 // [!code ++]
	public const int weaponCrossbow = 109;

	public const int eyeofmind = 134;

	public const int fireproof = 50; // [!code --]
 // [!code --]
	public const int armorHeavy = 122;

	public const int strategy = 135;
```

[`@@ -118,7 +118,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/SKILL.cs#L118)
```cs:line-numbers=118

	public const int weaponGun = 105;

	public const int weaponDagger = 107; // [!code --]
	public const int weaponPolearm = 106; // [!code ++]

	public const int throwing = 108;

```

[`@@ -130,7 +130,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/SKILL.cs#L130)
```cs:line-numbers=130

	public const int gathering = 250;

	public const int weaponPolearm = 106; // [!code --]
	public const int weaponDagger = 107; // [!code ++]

	public const int blacksmith = 256;

```

[`@@ -264,13 +264,13 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/SKILL.cs#L264)
```cs:line-numbers=264

	public static readonly int[] IDS = new int[131]
	{
		133, 132, 131, 130, 123, 110, 120, 111, 109, 134, // [!code --]
		50, 122, 135, 230, 151, 242, 241, 240, 237, 235, // [!code --]
		133, 132, 131, 130, 123, 50, 120, 111, 110, 109, // [!code ++]
		134, 122, 135, 230, 151, 242, 241, 240, 237, 235, // [!code ++]
		51, 150, 227, 225, 220, 210, 207, 200, 152, 226,
		55, 101, 57, 245, 62, 64, 65, 66, 67, 68,
		70, 71, 72, 73, 74, 75, 76, 56, 77, 79,
		80, 90, 91, 92, 100, 102, 103, 104, 105, 107, // [!code --]
		108, 61, 60, 78, 250, 106, 256, 916, 917, 918, // [!code --]
		80, 90, 91, 92, 100, 102, 103, 104, 105, 106, // [!code ++]
		108, 61, 60, 78, 250, 107, 256, 916, 917, 918, // [!code ++]
		920, 921, 922, 923, 924, 925, 950, 951, 952, 953,
		954, 955, 956, 957, 958, 959, 960, 961, 962, 963,
		964, 965, 970, 971, 972, 255, 915, 914, 919, 912,
```

## Steam

[`@@ -184,7 +184,6 @@ public WorkshopItemData CreateItemData(BaseModPackage p)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Steam.cs#L184)
```cs:line-numbers=184
	Debug.Log(App.Client.Owner.id);
	Debug.Log(result.appId);
	Debug.Log(p.id);
	Debug.Log(p.description + "/" + result.description); // [!code --]
	Debug.Log(directoryInfo.Exists + "/" + directoryInfo.FullName);
	Debug.Log(fileInfo.Exists + "/" + fileInfo.FullName);
	return result;
```

## Thing

[`@@ -1291,6 +1291,11 @@ public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Thing.cs#L1291)
```cs:line-numbers=1291
	if (EClass.debug.showExtra)
	{
		n.AddText("decay:" + base.decay);
		n.AddText(base.isDyed + "/" + id + "/" + base.refVal + "/" + base.LV + "/" + trait); // [!code ++]
		if (source.origin != null) // [!code ++]
		{ // [!code ++]
			n.AddText(source.origin.id); // [!code ++]
		} // [!code ++]
	}
	if (id == "statue_weird")
	{
```

## ThingGen

[`@@ -169,7 +169,7 @@ public static Thing CreateScroll(int ele, int num = 1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/ThingGen.cs#L169)
```cs:line-numbers=169

	public static Thing CreatePotion(int ele, int num = 1)
	{
		Thing thing = Create("potion").SetNum(num); // [!code --]
		Thing thing = Create("1163").SetNum(num); // [!code ++]
		thing.refVal = ele;
		return thing;
	}
```

## Trait

[`@@ -598,6 +598,14 @@ public virtual void OnCreate(int lv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Trait.cs#L598)
```cs:line-numbers=598
	{
	}

	public virtual void OnEquip(Chara c, bool onSetOwner) // [!code ++]
	{ // [!code ++]
	} // [!code ++]
 // [!code ++]
	public virtual void OnUnequip(Chara c) // [!code ++]
	{ // [!code ++]
	} // [!code ++]
 // [!code ++]
	public virtual void OnChangePlaceState(PlaceState state)
	{
	}
```

[`@@ -1519,6 +1527,7 @@ public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Trait.cs#L1519)
```cs:line-numbers=1519
	case ShopType.Deed:
		Add("deed", 1, 0);
		Add("deed_move", 2 + EClass.rnd(5), 0);
		Add("license_illumination", 1, 0); // [!code ++]
		Add("license_void", 1, 0);
		Add("license_adv", 1, 0);
		break;
```

## +TraitBitchDancer

::: details File Created
```cs
public class TraitBitchDancer : TraitCitizen
{
	public override string IDRumor => "bitch";

	public override bool CanWhore => true;
}
```

:::
## +TraitEQ

::: details File Created
```cs
public class TraitEQ : Trait
{
}
```

:::
## +TraitEQFlower

::: details File Created
```cs
public class TraitEQFlower : TraitEQ
{
	public override void OnEquip(Chara c, bool onSetOwner)
	{
		c.hat = owner.sourceCard;
	}

	public override void OnUnequip(Chara c)
	{
		c.hat = null;
	}
}
```

:::
## Zone

[`@@ -226,6 +226,18 @@ public virtual bool MakeEnemiesNeutral`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/f6fce50f1bd816cda6b3d6c52d4ea48c2279809c/Elin/Zone.cs#L226)
```cs:line-numbers=226

	public virtual bool AllowCriminal => !HasLaw;

	public virtual bool AllowInvest // [!code ++]
	{ // [!code ++]
		get // [!code ++]
		{ // [!code ++]
			if (!IsTown) // [!code ++]
			{ // [!code ++]
				return IsPCFaction; // [!code ++]
			} // [!code ++]
			return true; // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	public virtual bool AllowNewZone => true;

	public virtual bool WillAutoSave => true;
```

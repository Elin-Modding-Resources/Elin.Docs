---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 10 files modified. 1 new file created.
version: EA 23.179 Nightly
changes: Affinity/Card/CraftUtil/FactionBranch/FoodEffect/Hobby/LayerSleep/Thing/Trait/+TraitLunch/TraitLunchLove
---

# EA 23.179 Nightly

August 14, 2025

10 files modified. 1 new file created.

## Important Changes

**None.**
## Affinity

[`public int GetLunchChance()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Affinity.cs#L97-L105)
```cs:line-numbers=97
				}
				return 10;
			}
			return 25; // [!code --]
			return 40; // [!code ++]
		}
		return 50; // [!code --]
		return 80; // [!code ++]
	}
	return 100;
}
```

## Card

[`public Thing TryMakeRandomItem(int lv = -1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Card.cs#L5208-L5214)
```cs:line-numbers=5208
	case "_meat":
	case "meat_marble":
	case "dattamono":
	case "deadbody": // [!code --]
	{
		string text = "c_wilds";
		if (id == "_meat" || id == "meat_marble")
```

[`public Thing TryMakeRandomItem(int lv = -1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Card.cs#L5217-L5223)
```cs:line-numbers=5217
		}
		for (int i = 0; i < 20; i++)
		{
			CardRow cardRow = SpawnList.Get(text).Select(lv); // [!code --]
			CardRow cardRow = SpawnList.Get(text).Select(lv + i); // [!code ++]
			if (cardRow.model.Chara.race.corpse[0] != "_meat" && id != "milk" && id != "_egg" && id != "egg_fertilized")
			{
				continue;
```

[`public Thing TryMakeRandomItem(int lv = -1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Card.cs#L5233-L5240)
```cs:line-numbers=5233
			{
				MakeFoodFrom(cardRow.model);
			}
			break; // [!code --]
			return this as Thing; // [!code ++]
		}
		MakeFoodFrom(EClass.sources.charas.map.Values.Where((SourceChara.Row r) => r.chance > 0 && r.quality == 0).RandomItem().model); // [!code ++]
		break;
	}
	}
```

## CraftUtil

[`public static void MakeDish(Thing food, int lv, Chara crafter = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/CraftUtil.cs#L65-L71)
```cs:line-numbers=65
	int num = Mathf.Min(EClass.rnd(lv), 50);
	foreach (Recipe.Ingredient ingredient in recipeSource.GetIngredients())
	{
		Thing thing = ThingGen.Create(ingredient.id).TryMakeRandomItem(lv); // [!code --]
		Thing thing = ThingGen.Create(ingredient.id, -1, lv); // [!code ++]
		if (thing.id == "deadbody") // [!code ++]
		{ // [!code ++]
			thing = ThingGen.Create("_meat"); // [!code ++]
		} // [!code ++]
		thing = thing.TryMakeRandomItem(lv); // [!code ++]
		TraitSeed.LevelSeed(thing, null, EClass.rnd(lv / 4) + 1);
		thing.SetEncLv(thing.encLV / 2);
		if (num > 0 && EClass.rnd(3) == 0)
```

## FactionBranch

[`void GetOutcome(Hobby h)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/FactionBranch.cs#L830-L835)
```cs:line-numbers=830
			{
				string text = h.source.things[j];
				int num5 = Mathf.Max(1, h.source.things[j + 1].ToInt() * num3 / 1000);
				Debug.Log(i.Name + "/" + num3 + "/" + num5); // [!code ++]
				int num6 = num5 / 1000;
				if (num5 % 1000 > EClass.rnd(1000))
				{
```

## FoodEffect

[``](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/FoodEffect.cs#L3-L8)
```cs:line-numbers=3

public class FoodEffect : EClass
{
	public static bool IsLeftoverable(Thing food) // [!code ++]
	{ // [!code ++]
		return food.trait is TraitLunch; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public static void Proc(Chara c, Thing food, bool consume = true)
	{
		food.CheckJustCooked();
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/FoodEffect.cs#L21-L27)
```cs:line-numbers=21
	bool flag3 = food.HasElement(709);
	bool flag4 = c.HasElement(1205);
	bool flag5 = food.IsDecayed || flag3;
	bool flag6 = food.trait is TraitLunchLove; // [!code --]
	bool flag6 = IsLeftoverable(food); // [!code ++]
	c.AddFoodHistory(food);
	if (c.IsPCFaction && !c.IsPC)
	{
```

## Hobby

[`using System;`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Hobby.cs#L1-L4)
```cs:line-numbers=1
using System;
using UnityEngine; // [!code ++]

public class Hobby : EClass
{
```

[`public int GetLv(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Hobby.cs#L22-L30)
```cs:line-numbers=22
	{
		if (!source.skill.IsEmpty())
		{
			return c.Evalue(source.skill); // [!code --]
			return Mathf.Min(c.Evalue(source.skill), 100000); // [!code ++]
		}
		return c.LV; // [!code --]
		return Mathf.Min(c.LV, 100000); // [!code ++]
	}

	public int GetEfficiency(Chara c)
```

## LayerSleep

[`public void Advance()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/LayerSleep.cs#L63-L68)
```cs:line-numbers=63
			if (chara.affinity.GetLunchChance() > ELayer.rnd(100) && chara.GetInt(71) == -1)
			{
				chara.SetInt(71, -2);
				if (!chara.elements.Has(287)) // [!code ++]
				{ // [!code ++]
					chara.elements.Learn(287); // [!code ++]
				} // [!code ++]
				for (int i = 0; i < 5; i++) // [!code ++]
				{ // [!code ++]
					chara.elements.ModExp(287, 2000f); // [!code ++]
				} // [!code ++]
			}
		}
		foreach (Chara member in ELayer.pc.party.members)
```

## Thing

[`public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Thing.cs#L1095-L1104)
```cs:line-numbers=1095
	{
		AddText("isNoMix", FontColor.Default);
	}
	if (trait is TraitFoodFishSlice) // [!code --]
	{ // [!code --]
		AddText("isNoProcessIng", FontColor.Default); // [!code --]
	} // [!code --]
	if (!trait.CanBeDestroyed)
	{
		AddText("isIndestructable", FontColor.Default);
```

[`public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Thing.cs#L1210-L1219)
```cs:line-numbers=1210
	{
		AddText("isThrowWeaponEnemy", FontColor.Default);
	}
	if (trait is TraitFoodFishSlice) // [!code ++]
	{ // [!code ++]
		AddText("isNoProcessIng", FontColor.Default); // [!code ++]
	} // [!code ++]
	if (HasElement(10))
	{
		AddText("isEdible", FontColor.Default);
	}
	if (FoodEffect.IsLeftoverable(this)) // [!code ++]
	{ // [!code ++]
		AddText("isLeftoverable", FontColor.Default); // [!code ++]
	} // [!code ++]
	if (HasTag(CTAG.rareResource))
	{
		AddText("isRareResource", FontColor.Great);
```

## Trait

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/Trait.cs#L1833-L1839)
```cs:line-numbers=1833
			{
			case ShopType.Moyer:
			{
				for (int num10 = 1; num10 <= 6; num10++) // [!code --]
				for (int num10 = 1; num10 <= 7; num10++) // [!code ++]
				{
					AddAdvWeek(num10);
				}
```

## +TraitLunch

::: details File Created
```cs
public class TraitLunch : TraitMixedFood
{
}
```

:::
## TraitLunchLove

[`public class TraitLunchLove : TraitMixedFood`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e4b1492a81d52e56b1e94bcd8e0ec1a3ed7b899d/Elin/TraitLunchLove.cs#L1-L3)
```cs:line-numbers=1
public class TraitLunchLove : TraitMixedFood // [!code --]
public class TraitLunchLove : TraitLunch // [!code ++]
{
}
```

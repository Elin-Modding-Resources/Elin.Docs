---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 15 files modified. 3 new files created.
version: EA 23.190 Nightly
changes: ABILITY/ActMelee/+ActMeleeParry/ActRush/AttackProcess/Card/Chara/CoreDebug/DOMAIN/ELEMENT/ENC/FACTION/FOOD/MATERIAL/SourceElement/Thing/+Zone_CurryRuin/+Zone_CurryRuinDungeon
---

# EA 23.190 Nightly

August 30, 2025

15 files modified. 3 new files created.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [ActMelee (1)](#actmelee)
```cs:no-line-numbers
public bool Attack(float dmgMulti = 1f, bool maxRoll = false) // [!code --]
public bool Attack(float dmgMulti = 1f) // [!code ++]
```
## ABILITY

[``](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ABILITY.cs#L2-L11)
```cs:line-numbers=2

public class ABILITY
{
	public const int ActPick = 5047; // [!code --]
 // [!code --]
	public const int ActInstall = 5046;

	public const int ActPick = 5047; // [!code ++]
 // [!code ++]
	public const int ActItem = 5048;

	public const int AI_OpenLock = 5049;
```

[`public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ABILITY.cs#L254-L260)
```cs:line-numbers=254

	public static readonly int[] IDS = new int[125]
	{
		5047, 5046, 5048, 5049, 5050, 5051, 5052, 5053, 5054, 5055, // [!code --]
		5046, 5047, 5048, 5049, 5050, 5051, 5052, 5053, 5054, 5055, // [!code ++]
		6001, 6003, 6011, 6012, 6013, 5045, 6015, 6019, 6020, 6050,
		6400, 6410, 6420, 6450, 6500, 6601, 6602, 6603, 6604, 6610,
		6611, 6018, 6612, 5044, 5042, 5012, 5013, 5014, 5015, 5016,
```

## ActMelee

[``](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ActMelee.cs#L3-L8)
```cs:line-numbers=3

public class ActMelee : ActBaseAttack
{
	public virtual bool ShouldRollMax => false; // [!code ++]
 // [!code ++]
	public virtual float BaseDmgMTP => 1f;

	public virtual bool UseWeaponDist => true;
```

[`public override bool Perform()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ActMelee.cs#L96-L102)
```cs:line-numbers=96
		return result;
	}

	public bool Attack(float dmgMulti = 1f, bool maxRoll = false) // [!code --]
	public bool Attack(float dmgMulti = 1f) // [!code ++]
	{
		Act.CC.combatCount = 10;
		Act.CC.LookAt(Act.TC);
```

[`public bool Attack(float dmgMulti = 1f, bool maxRoll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ActMelee.cs#L126-L139)
```cs:line-numbers=126
	bool hasHit = false;
	bool usedWeapon = false;
	bool usedTalisman = false;
	bool maxRoll = ShouldRollMax; // [!code ++]
	int count = 0;
	int dist = Act.CC.Dist(Act.TC);
	Point orgPos = Act.TC.pos.Copy();
	Chara cC = Act.CC; // [!code ++]
	Card orgTC = Act.TC;
	bool safety = Act.CC.HasElement(486) && Act.CC.IsPCFactionOrMinion;
	bool parried = false; // [!code ++]
	foreach (BodySlot slot in Act.CC.body.slots)
	{
		_Attack(slot);
		if (parried) // [!code ++]
		{ // [!code ++]
			break; // [!code ++]
		} // [!code ++]
	}
	if (!usedWeapon)
	{
```

[`public bool Attack(float dmgMulti = 1f, bool maxRoll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ActMelee.cs#L143-L156)
```cs:line-numbers=143
	{
		EClass.Wait(0.25f, Act.CC);
	}
	if (!hasHit) // [!code --]
	{ // [!code --]
		Act.CC.PlaySound("miss"); // [!code --]
	} // [!code --]
	if (EClass.rnd(2) == 0)
	{
		Act.CC.RemoveCondition<ConInvisibility>();
	}
	if (parried && orgTC.isChara && orgTC != cC && ACT.Melee.CanPerform(orgTC.Chara, cC)) // [!code ++]
	{ // [!code ++]
		new ActMeleeParry().Perform(orgTC.Chara, cC); // [!code ++]
	} // [!code ++]
	else if (!hasHit) // [!code ++]
	{ // [!code ++]
		Act.CC.PlaySound("miss"); // [!code ++]
	} // [!code ++]
	return true;
	void _Attack(BodySlot slot)
	{
```

[`void _Attack(BodySlot slot)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ActMelee.cs#L206-L267)
```cs:line-numbers=206
					}
				}
				AttackWithFlurry(Act.TC, Act.TP, 1f, subAttack: false);
				if (num2 > 0) // [!code --]
				if (!parried) // [!code ++]
				{
					foreach (Point item in list2) // [!code --]
					if (num2 > 0) // [!code ++]
					{
						if (!item.Equals(orgPos)) // [!code --]
						foreach (Point item in list2) // [!code ++]
						{
							Chara firstChara = item.FirstChara; // [!code --]
							if (firstChara != null && firstChara.IsHostile(Act.CC)) // [!code --]
							if (!item.Equals(orgPos)) // [!code ++]
							{
								AttackWithFlurry(firstChara, item, 1f, subAttack: false); // [!code --]
								Chara firstChara = item.FirstChara; // [!code ++]
								if (firstChara != null && firstChara.IsHostile(Act.CC)) // [!code ++]
								{ // [!code ++]
									AttackWithFlurry(firstChara, item, 1f, subAttack: false); // [!code ++]
								} // [!code ++]
							}
						}
					}
				} // [!code --]
				else if (scatter > 0) // [!code --]
				{ // [!code --]
					Act.TP.ForeachNeighbor(delegate(Point p) // [!code --]
					else if (scatter > 0) // [!code ++]
					{
						if (!p.Equals(orgPos)) // [!code --]
						Act.TP.ForeachNeighbor(delegate(Point p) // [!code ++]
						{
							Chara firstChara2 = p.FirstChara; // [!code --]
							if (firstChara2 != null && firstChara2.IsHostile(Act.CC)) // [!code --]
							if (!p.Equals(orgPos)) // [!code ++]
							{
								AttackWithFlurry(firstChara2, p, Mathf.Min(0.5f + 0.05f * Mathf.Sqrt(scatter), 1f + 0.01f * Mathf.Sqrt(scatter)), subAttack: true); // [!code --]
								Chara firstChara2 = p.FirstChara; // [!code ++]
								if (firstChara2 != null && firstChara2.IsHostile(Act.CC)) // [!code ++]
								{ // [!code ++]
									AttackWithFlurry(firstChara2, p, Mathf.Min(0.5f + 0.05f * Mathf.Sqrt(scatter), 1f + 0.01f * Mathf.Sqrt(scatter)), subAttack: true); // [!code ++]
								} // [!code ++]
							}
						} // [!code --]
					}); // [!code --]
				} // [!code --]
				else if (num3 > 0) // [!code --]
				{ // [!code --]
					List<Point> list = new List<Point>(); // [!code --]
					Act.TP.ForeachNeighbor(delegate(Point p) // [!code --]
					{ // [!code --]
						if (!p.Equals(Act.TP)) // [!code --]
						{ // [!code --]
							list.Add(p.Copy()); // [!code --]
						} // [!code --]
					}); // [!code --]
					list.Shuffle(); // [!code --]
					int num4 = 0; // [!code --]
					for (int i = 0; i < 9 && num3 > EClass.rnd(10 + (int)Mathf.Pow(3f, i + 2)); i++) // [!code --]
					{ // [!code --]
						num4++; // [!code --]
						}); // [!code ++]
					}
					foreach (Point item2 in list) // [!code --]
					else if (num3 > 0) // [!code ++]
					{
						foreach (Card item3 in item2.ListCards().Copy()) // [!code --]
						List<Point> list = new List<Point>(); // [!code ++]
						Act.TP.ForeachNeighbor(delegate(Point p) // [!code ++]
						{
							if (num4 <= 0 || !Act.CC.IsAliveInCurrentZone) // [!code --]
							if (!p.Equals(Act.TP)) // [!code ++]
							{
								break; // [!code --]
								list.Add(p.Copy()); // [!code ++]
							}
							if (item3.trait.CanBeAttacked || (item3.isChara && item3.Chara.IsHostile(Act.CC))) // [!code --]
						}); // [!code ++]
						list.Shuffle(); // [!code ++]
						int num4 = 0; // [!code ++]
						for (int i = 0; i < 9 && num3 > EClass.rnd(10 + (int)Mathf.Pow(3f, i + 2)); i++) // [!code ++]
						{ // [!code ++]
							num4++; // [!code ++]
						} // [!code ++]
						foreach (Point item2 in list) // [!code ++]
						{ // [!code ++]
							foreach (Card item3 in item2.ListCards().Copy()) // [!code ++]
							{
								AttackWithFlurry(item3, item2, 1f, subAttack: true); // [!code --]
								num4--; // [!code --]
								if (num4 <= 0 || !Act.CC.IsAliveInCurrentZone) // [!code ++]
								{ // [!code ++]
									break; // [!code ++]
								} // [!code ++]
								if (item3.trait.CanBeAttacked || (item3.isChara && item3.Chara.IsHostile(Act.CC))) // [!code ++]
								{ // [!code ++]
									AttackWithFlurry(item3, item2, 1f, subAttack: true); // [!code ++]
									if (parried) // [!code ++]
									{ // [!code ++]
										break; // [!code ++]
									} // [!code ++]
									num4--; // [!code ++]
								} // [!code ++]
							}
						}
					}
```

[`void AttackWithFlurry(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ActMelee.cs#L436-L441)
```cs:line-numbers=436
				{
					break;
				}
				if (!_tc.IsDisabled && _tc.Evalue(437) > 0 && EClass.rnd(100) < EClass.curve(5 + _tc.Evalue(437) / 3, 10, 3, 70)) // [!code ++]
				{ // [!code ++]
					_tc.Say("parry"); // [!code ++]
					_tc.PlaySound("parry"); // [!code ++]
					parried = true; // [!code ++]
					break; // [!code ++]
				} // [!code ++]
				if (m > 0)
				{
					Act.CC.Say("attack_flurry");
```

## +ActMeleeParry

::: details File Created
```cs
public class ActMeleeParry : ActMelee
{
	public override bool ShouldRollMax => true;

	public override float BaseDmgMTP => 1.5f;
}
```

:::
## ActRush

[`public class ActRush : ActMelee`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ActRush.cs#L2-L7)
```cs:line-numbers=2
{
	public override bool ShowMapHighlight => true;

	public override bool ShouldRollMax => true; // [!code ++]
 // [!code ++]
	public override int PerformDistance => 6;

	public override void OnMarkMapHighlights()
```

[`public override bool Perform()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ActRush.cs#L70-L75)
```cs:line-numbers=70
		Act.CC.Say("rush", Act.CC, Act.TC);
		Act.CC.PlaySound("rush");
		Act.CC.pos.PlayEffect("vanish");
		return Attack(1f + 0.1f * (float)num, maxRoll: true); // [!code --]
		return Attack(1f + 0.1f * (float)num); // [!code ++]
	}
}
```

## AttackProcess

[`public int GetRawDamage(float dmgMulti, bool crit, bool maxRoll)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/AttackProcess.cs#L442-L447)
```cs:line-numbers=442
		return Mathf.Clamp(num, 0, 9999999);
	}

	public static void ProcAbility(List<Element> list, Chara CC, Card TC, int bonus, bool subAttack = false) // [!code ++]
	{ // [!code ++]
		if (list == null) // [!code ++]
		{ // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		foreach (Element item in list) // [!code ++]
		{ // [!code ++]
			ProcAbility(item, CC, TC, bonus, subAttack); // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	public static void ProcAbility(Element e, Chara CC, Card TC, int bonus, bool subAttack = false) // [!code ++]
	{ // [!code ++]
		if (!(e is Ability)) // [!code ++]
		{ // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		int num = 10 + e.Value / 5; // [!code ++]
		int power = EClass.curve((100 + e.Value * 10) * (100 + bonus) / 100, 400, 100); // [!code ++]
		if (num <= EClass.rnd(100)) // [!code ++]
		{ // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		Act obj = e as Act; // [!code ++]
		Card card = (obj.TargetType.CanSelectSelf ? CC : TC); // [!code ++]
		string text = ((e.source.proc.Length >= 2) ? e.source.proc[1] : ""); // [!code ++]
		string text2 = obj.source.abilityType.TryGet(0); // [!code ++]
		switch (text2) // [!code ++]
		{ // [!code ++]
		case "buff": // [!code ++]
			if (CC.HasCondition(text)) // [!code ++]
			{ // [!code ++]
				return; // [!code ++]
			} // [!code ++]
			card = CC; // [!code ++]
			break; // [!code ++]
		case "debuff": // [!code ++]
		case "attack": // [!code ++]
		case "dot": // [!code ++]
			card = TC; // [!code ++]
			break; // [!code ++]
		} // [!code ++]
		if (subAttack) // [!code ++]
		{ // [!code ++]
			if (card == CC) // [!code ++]
			{ // [!code ++]
				return; // [!code ++]
			} // [!code ++]
			switch (text2) // [!code ++]
			{ // [!code ++]
			case "summon": // [!code ++]
				return; // [!code ++]
			case "teleport": // [!code ++]
				return; // [!code ++]
			case "suicide": // [!code ++]
				return; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		if (card.IsAliveInCurrentZone) // [!code ++]
		{ // [!code ++]
			Card tC = Act.TC; // [!code ++]
			ActEffect.ProcAt(e.source.proc[0].ToEnum<EffectId>(), power, BlessedState.Normal, CC, card, card.pos, isNeg: false, new ActRef // [!code ++]
			{ // [!code ++]
				n1 = text, // [!code ++]
				aliasEle = e.source.aliasRef, // [!code ++]
				noFriendlyFire = true // [!code ++]
			}); // [!code ++]
			Act.TC = tC; // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll = false, bool subAttack = false)
	{
		bool flag = CC.HasCondition<ConReload>();
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/AttackProcess.cs#L460-L474)
```cs:line-numbers=460
	{
		num /= 2;
	}
	List<Element> list2 = new List<Element>(); // [!code --]
	List<Element> list = new List<Element>(); // [!code ++]
	int num2 = CC.Evalue(91);
	int num3 = 0;
	if (weapon != null)
	{
		list2 = weapon.elements.dict.Values.ToList(); // [!code --]
		list = weapon.elements.dict.Values.ToList(); // [!code ++]
		if (ammo != null && !flag)
		{
			list2 = list2.Concat(ammo.elements.dict.Values).ToList(); // [!code --]
			list = list.Concat(ammo.elements.dict.Values).ToList(); // [!code ++]
		}
		num2 += weapon.Evalue(91, ignoreGlobalElement: true);
		num3 += weapon.Evalue(603, ignoreGlobalElement: true);
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/AttackProcess.cs#L478-L484)
```cs:line-numbers=478
		string id = CC.id;
		if (id == "rabbit_vopal" || id == "mantis_killer")
		{
			list2.Add(Element.Create(6650, 100)); // [!code --]
			list.Add(Element.Create(6650, 100)); // [!code ++]
		}
	}
	int bane;
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/AttackProcess.cs#L505-L511)
```cs:line-numbers=505
		{
			if (value.Value > 0)
			{
				list2.Add(value); // [!code --]
				list.Add(value); // [!code ++]
			}
		}
	}
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/AttackProcess.cs#L553-L559)
```cs:line-numbers=553
			ModExpDef(150, 90);
			ModExpDef(151, 90);
		}
		Proc(list2); // [!code --]
		ProcAbility(list, CC, TC, weaponSkill.Value, subAttack); // [!code ++]
		return false;
	}
	if (TC.IsPC)
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/AttackProcess.cs#L661-L669)
```cs:line-numbers=661
		TC.Chara.AddCondition<ConParalyze>(30 + EClass.rnd(30));
		TC.Chara.AddCondition<ConGravity>();
	}
	if (list2.Count > 0 && !flag2) // [!code --]
	if (list.Count > 0 && !flag2) // [!code ++]
	{
		foreach (Element item in list2) // [!code --]
		foreach (Element item in list) // [!code ++]
		{
			if (!TC.IsAliveInCurrentZone)
			{
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/AttackProcess.cs#L683-L689)
```cs:line-numbers=683
				}
			}
		}
		Proc(list2); // [!code --]
		ProcAbility(list, CC, TC, weaponSkill.Value, subAttack); // [!code ++]
	}
	if (!CC.IsAliveInCurrentZone || !TC.IsAliveInCurrentZone)
	{
```

[`void PlayHitEffect()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/AttackProcess.cs#L806-L874)
```cs:line-numbers=806
			}
			CC.PlaySound(id2);
		}
		void Proc(List<Element> list) // [!code --]
		{ // [!code --]
			if (list == null) // [!code --]
			{ // [!code --]
				return; // [!code --]
			} // [!code --]
			foreach (Element item2 in list) // [!code --]
			{ // [!code --]
				if (item2 is Ability) // [!code --]
				{ // [!code --]
					int num12 = 10 + item2.Value / 5; // [!code --]
					int power = EClass.curve((100 + item2.Value * 10) * (100 + weaponSkill.Value) / 100, 400, 100); // [!code --]
					if (num12 > EClass.rnd(100)) // [!code --]
					{ // [!code --]
						Act obj = item2 as Act; // [!code --]
						Card card = (obj.TargetType.CanSelectSelf ? CC : TC); // [!code --]
						string text = ((item2.source.proc.Length >= 2) ? item2.source.proc[1] : ""); // [!code --]
						string text2 = obj.source.abilityType.TryGet(0); // [!code --]
						switch (text2) // [!code --]
						{ // [!code --]
						case "buff": // [!code --]
							if (CC.HasCondition(text)) // [!code --]
							{ // [!code --]
								continue; // [!code --]
							} // [!code --]
							card = CC; // [!code --]
							break; // [!code --]
						case "debuff": // [!code --]
						case "attack": // [!code --]
						case "dot": // [!code --]
							card = TC; // [!code --]
							break; // [!code --]
						} // [!code --]
						if (subAttack) // [!code --]
						{ // [!code --]
							if (card == CC) // [!code --]
							{ // [!code --]
								continue; // [!code --]
							} // [!code --]
							switch (text2) // [!code --]
							{ // [!code --]
							case "attackArea": // [!code --]
							case "summon": // [!code --]
							case "teleport": // [!code --]
							case "suicide": // [!code --]
								continue; // [!code --]
							} // [!code --]
						} // [!code --]
						if (card.IsAliveInCurrentZone) // [!code --]
						{ // [!code --]
							Card tC = TC; // [!code --]
							ActEffect.ProcAt(item2.source.proc[0].ToEnum<EffectId>(), power, BlessedState.Normal, CC, card, card.pos, isNeg: false, new ActRef // [!code --]
							{ // [!code --]
								n1 = text, // [!code --]
								aliasEle = item2.source.aliasRef, // [!code --]
								noFriendlyFire = true // [!code --]
							}); // [!code --]
							TC = tC; // [!code --]
						} // [!code --]
					} // [!code --]
				} // [!code --]
			} // [!code --]
		} // [!code --]
	}

	private bool Crit()
```

## Card

[`public void LevelUp()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L2975-L2981)
```cs:line-numbers=2975
		{
			if (Evalue(1644) < i + 1)
			{
				Chara.SetFeat(1644, i + 1); // [!code --]
				Chara.SetFeat(1644, i + 1, msg: true); // [!code ++]
			}
		}
	}
```

[`public bool CanAddRune(TraitMod mod)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L3586-L3591)
```cs:line-numbers=3586
	{
		switch (encSlot)
		{
		case "shield": // [!code ++]
			if (!category.IsChildOf("shield")) // [!code ++]
			{ // [!code ++]
				return false; // [!code ++]
			} // [!code ++]
			break; // [!code ++]
		default:
		{
			bool flag = false;
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L3964-L3982)
```cs:line-numbers=3964
		return;
	}
	bool flag = originalTarget != null;
	if (isChara && !HasElement(1241)) // [!code --]
	if (isChara && !HasElement(1241) && !flag) // [!code ++]
	{
		AttackSource attackSource2 = attackSource;
		if ((uint)(attackSource2 - 3) > 1u && (uint)(attackSource2 - 13) > 4u)
		{
			foreach (Chara chara3 in EClass._map.charas)
			{
				int num = chara3.Evalue(1241); // [!code --]
				if (num != 0 && !chara3.IsDisabled && !chara3.isRestrained && !chara3.IsDeadOrSleeping && chara3 != this && !chara3.IsHostile(Chara) && (!IsPCFactionOrMinion || chara3.IsPCFactionOrMinion) && chara3.Dist(this) <= num) // [!code --]
				if (chara3 != this && !chara3.IsHostile(Chara)) // [!code ++]
				{
					Say("wall_flesh", chara3, this); // [!code --]
					chara3.DamageHP(dmg, ele, eleP, attackSource, origin, showEffect, weapon, Chara); // [!code --]
					return; // [!code --]
					int num = chara3.Evalue(1241); // [!code ++]
					int num2 = chara3.Evalue(438); // [!code ++]
					if ((num != 0 || num2 != 0) && !chara3.IsDisabled && !chara3.isRestrained && (!IsPCFactionOrMinion || chara3.IsPCFactionOrMinion) && chara3.Dist(this) <= Mathf.Max(num, (num2 > 0) ? 1 : 0) && (num2 <= 0 || hp * 100 / MaxHP <= chara3.hp * 100 / chara3.MaxHP)) // [!code ++]
					{ // [!code ++]
						Say((num2 == 0) ? "wall_flesh" : "wall_knightly", chara3, this); // [!code ++]
						chara3.DamageHP(dmg, ele, eleP, attackSource, origin, showEffect, weapon, Chara); // [!code ++]
						return; // [!code ++]
					} // [!code ++]
				}
			}
		}
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4003-L4014)
```cs:line-numbers=4003
		}
		if (!e.source.aliasRef.IsEmpty() && attackSource != AttackSource.ManaBackfire)
		{
			int num2 = ((origin != null) ? origin.Evalue(1238) : 0); // [!code --]
			int num3 = ((origin != null) ? origin.Evalue(1238) : 0); // [!code ++]
			if (attackSource == AttackSource.MagicSword)
			{
				num2 += 2; // [!code --]
				num3 += 2; // [!code ++]
			}
			dmg = Element.GetResistDamage(dmg, Evalue(e.source.aliasRef), num2); // [!code --]
			dmg = Element.GetResistDamage(dmg, Evalue(e.source.aliasRef), num3); // [!code ++]
			dmg = dmg * 100 / (100 + Mathf.Clamp(Evalue(961) * 5, -50, 200));
			dmg = dmg * Mathf.Max(100 - Evalue(93), 10) / 100;
		}
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4050-L4061)
```cs:line-numbers=4050
		}
		if (EClass.game.principal.enableDamageReduction && IsPCFaction)
		{
			int num3 = ((origin != null) ? origin.LV : EClass._zone.DangerLv); // [!code --]
			if (num3 > 50) // [!code --]
			int num4 = ((origin != null) ? origin.LV : EClass._zone.DangerLv); // [!code ++]
			if (num4 > 50) // [!code ++]
			{
				dmg = dmg * (100 - (int)Mathf.Min(95f, Mathf.Sqrt(num3 - 50))) / 100; // [!code --]
				dmg = dmg * (100 - (int)Mathf.Min(95f, Mathf.Sqrt(num4 - 50))) / 100; // [!code ++]
			}
		}
		if (attackSource == AttackSource.Throw || attackSource == AttackSource.Range) // [!code ++]
		{ // [!code ++]
			dmg = dmg * 100 / (100 + Evalue(435) * 2); // [!code ++]
		} // [!code ++]
		dmg = dmg * Mathf.Max(0, 100 - Mathf.Min(Evalue((e == Element.Void || e.id == 926) ? 55 : 56), 100) / ((!flag) ? 1 : 2)) / 100;
		if (origin != null && origin.IsPC && EClass.player.codex.Has(id))
		{
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4075-L4100)
```cs:line-numbers=4075
		}
		if (EClass.pc.HasElement(1207) && isChara)
		{
			int num4 = 0; // [!code --]
			int num5 = 0;
			int num6 = 0; // [!code ++]
			foreach (Condition condition2 in Chara.conditions)
			{
				if (condition2.Type == ConditionType.Buff)
				{
					num4++; // [!code --]
					num5++; // [!code ++]
				}
				else if (condition2.Type == ConditionType.Debuff)
				{
					num5++; // [!code --]
					num6++; // [!code ++]
				}
			}
			if (IsPCParty)
			{
				dmg = dmg * 100 / Mathf.Min(100 + num4 * 5, 120); // [!code --]
				dmg = dmg * 100 / Mathf.Min(100 + num5 * 5, 120); // [!code ++]
			}
			else
			{
				dmg = dmg * Mathf.Min(100 + num5 * 5, 120) / 100; // [!code --]
				dmg = dmg * Mathf.Min(100 + num6 * 5, 120) / 100; // [!code ++]
			}
		}
		if (IsPCParty && EClass.pc.ai is GoalAutoCombat)
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4111-L4120)
```cs:line-numbers=4111
		}
		if (dmg >= MaxHP / 10 && Evalue(68) > 0)
		{
			int num6 = MaxHP / 10; // [!code --]
			int num7 = dmg - num6; // [!code --]
			num7 = num7 * 100 / (200 + Evalue(68) * 10); // [!code --]
			dmg = num6 + num7; // [!code --]
			int num7 = MaxHP / 10; // [!code ++]
			int num8 = dmg - num7; // [!code ++]
			num8 = num8 * 100 / (200 + Evalue(68) * 10); // [!code ++]
			dmg = num7 + num8; // [!code ++]
		}
	}
	if (origin != null && origin.IsPC && EClass.pc.Evalue(654) > 0)
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4125-L4143)
```cs:line-numbers=4125
	{
		dmg = 0;
	}
	int num8 = Mathf.Clamp(dmg * 6 / MaxHP, 0, 4) + ((dmg > 0) ? 1 : 0); // [!code --]
	int num9 = Mathf.Clamp(dmg * 6 / MaxHP, 0, 4) + ((dmg > 0) ? 1 : 0); // [!code ++]
	int num10 = hp; // [!code ++]
	if (Evalue(1421) > 0)
	{
		int num9 = 0; // [!code --]
		int num10 = dmg; // [!code --]
		int num11 = 0; // [!code ++]
		int num12 = dmg; // [!code ++]
		if (hp > 0)
		{
			num10 = dmg - hp; // [!code --]
			num12 = dmg - hp; // [!code ++]
			hp -= dmg;
			num9 += dmg; // [!code --]
			num11 += dmg; // [!code ++]
			if (hp < 0 && Chara.mana.value >= 0)
			{
				num9 += hp; // [!code --]
				num11 += hp; // [!code ++]
				hp = 0;
			}
		}
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4145-L4166)
```cs:line-numbers=4145
		{
			if (Evalue(1421) >= 2)
			{
				num10 /= 2; // [!code --]
				num12 /= 2; // [!code ++]
			}
			dmg = num10; // [!code --]
			dmg = num12; // [!code ++]
			if (Chara.mana.value > 0)
			{
				num10 -= Chara.mana.value; // [!code --]
				num12 -= Chara.mana.value; // [!code ++]
				Chara.mana.value -= dmg;
				num9 += dmg; // [!code --]
				num11 += dmg; // [!code ++]
			}
			if (Chara.mana.value <= 0)
			{
				hp -= num10; // [!code --]
				num9 += num10; // [!code --]
				hp -= num12; // [!code ++]
				num11 += num12; // [!code ++]
			}
		}
		dmg = num9; // [!code --]
		dmg = num11; // [!code ++]
	}
	else
	{
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4186-L4191)
```cs:line-numbers=4186
	}
	ZoneInstanceBout zoneInstanceBout = EClass._zone.instance as ZoneInstanceBout;
	bool flag2 = false;
	bool flag3 = false; // [!code ++]
	if (hp < 0 && Religion.recentWrath == null)
	{
		if (isRestrained && IsPCFaction && EClass._zone.IsPCFaction && (!IsPC || (Chara.ai is AI_Torture && Chara.ai.IsRunning)))
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4223-L4267)
```cs:line-numbers=4223
				EvadeDeath();
				flag2 = true;
			}
			else if (zoneInstanceBout != null && (bool)LayerDrama.Instance) // [!code --]
			{ // [!code --]
				EvadeDeath(); // [!code --]
			} // [!code --]
			else if (LayerDrama.IsActive() && IsPC) // [!code --]
			{ // [!code --]
				EvadeDeath(); // [!code --]
			} // [!code --]
			else
			{
				if (attackSource != AttackSource.Finish && IsPCParty && Chara.host == null) // [!code --]
				if (origin != null && origin != this && Evalue(436) > 0) // [!code ++]
				{
					if (EClass.pc.ai is GoalAutoCombat && !EClass.player.invlunerable && (EClass.pc.ai as GoalAutoCombat).listHealthy.Contains(Chara)) // [!code --]
					{ // [!code --]
						EClass.core.actionsNextFrame.Add(delegate // [!code --]
						{ // [!code --]
							Msg.Say(IsPC ? "abort_damage" : "abort_damgeAlly"); // [!code --]
						}); // [!code --]
						EClass.player.invlunerable = true; // [!code --]
						EClass.player.TryAbortAutoCombat(); // [!code --]
						EClass.pc.stamina.Mod(-EClass.pc.stamina.max / 5); // [!code --]
					} // [!code --]
					if (EClass.player.invlunerable) // [!code --]
					int num13 = (HasElement(1218) ? MaxHP : (MaxHP / 2)); // [!code ++]
					if (num10 > num13) // [!code ++]
					{
						EvadeDeath();
						goto IL_0d0e; // [!code --]
						flag3 = true; // [!code ++]
						hp = Mathf.Min(num13 * (int)Mathf.Sqrt(Evalue(436) * 2) / 100, MaxHP / 3); // [!code ++]
						goto IL_0e2d; // [!code ++]
					}
				}
				if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2) // [!code --]
				if (zoneInstanceBout != null && (bool)LayerDrama.Instance) // [!code ++]
				{
					Chara.stamina.Mod(-Chara.stamina.max / 2); // [!code --]
					Chara.AddCondition<ConInvulnerable>(); // [!code --]
					EvadeDeath();
				}
				else if (LayerDrama.IsActive() && IsPC) // [!code ++]
				{ // [!code ++]
					EvadeDeath(); // [!code ++]
				} // [!code ++]
				else // [!code ++]
				{ // [!code ++]
					if (attackSource != AttackSource.Finish && IsPCParty && Chara.host == null) // [!code ++]
					{ // [!code ++]
						if (EClass.pc.ai is GoalAutoCombat && !EClass.player.invlunerable && (EClass.pc.ai as GoalAutoCombat).listHealthy.Contains(Chara)) // [!code ++]
						{ // [!code ++]
							EClass.core.actionsNextFrame.Add(delegate // [!code ++]
							{ // [!code ++]
								Msg.Say(IsPC ? "abort_damage" : "abort_damgeAlly"); // [!code ++]
							}); // [!code ++]
							EClass.player.invlunerable = true; // [!code ++]
							EClass.player.TryAbortAutoCombat(); // [!code ++]
							EClass.pc.stamina.Mod(-EClass.pc.stamina.max / 5); // [!code ++]
						} // [!code ++]
						if (EClass.player.invlunerable) // [!code ++]
						{ // [!code ++]
							EvadeDeath(); // [!code ++]
							goto IL_0e2d; // [!code ++]
						} // [!code ++]
					} // [!code ++]
					if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2) // [!code ++]
					{ // [!code ++]
						Chara.stamina.Mod(-Chara.stamina.max / 2); // [!code ++]
						Chara.AddCondition<ConInvulnerable>(); // [!code ++]
						EvadeDeath(); // [!code ++]
					} // [!code ++]
				} // [!code ++]
			}
		}
	}
	goto IL_0d0e; // [!code --]
	IL_0d0e: // [!code --]
	goto IL_0e2d; // [!code ++]
	IL_0e2d: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4442-L4464)
```cs:line-numbers=4442
	}
	else if ((attackSource == AttackSource.Melee || attackSource == AttackSource.Range) && origin != null && originalTarget == null)
	{
		(IsPC ? EClass.pc : origin).Say("dmgMelee" + num8 + (IsPC ? "pc" : ""), origin, this); // [!code --]
		(IsPC ? EClass.pc : origin).Say("dmgMelee" + num9 + (IsPC ? "pc" : ""), origin, this); // [!code ++]
	}
	else if (isChara)
	{
		int num11 = ((attackSource != AttackSource.Condition && attackSource != AttackSource.WeaponEnchant) ? 1 : 2); // [!code --]
		if (num8 >= num11) // [!code --]
		int num14 = ((attackSource != AttackSource.Condition && attackSource != AttackSource.WeaponEnchant) ? 1 : 2); // [!code ++]
		if (num9 >= num14) // [!code ++]
		{
			if (e != Element.Void)
			{
				Say("dmg_" + e.source.alias, this);
			}
			if (e == Element.Void || num8 >= 2) // [!code --]
			if (e == Element.Void || num9 >= 2) // [!code ++]
			{
				Say("dmg" + num8, this); // [!code --]
				Say("dmg" + num9, this); // [!code ++]
			}
		}
	}
	if (flag3) // [!code ++]
	{ // [!code ++]
		Say("guts", this); // [!code ++]
	} // [!code ++]
	if (isChara)
	{
		if (flag2)
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4477-L4484)
```cs:line-numbers=4477
			}
			if (attackSource == AttackSource.Melee || attackSource == AttackSource.Range)
			{
				int num12 = origin.Dist(this); // [!code --]
				if (attackSource == AttackSource.Melee && HasElement(1221) && num12 <= Evalue(1221)) // [!code --]
				int num15 = origin.Dist(this); // [!code ++]
				if (attackSource == AttackSource.Melee && HasElement(1221) && num15 <= Evalue(1221)) // [!code ++]
				{
					int ele2 = ((Chara.MainElement == Element.Void) ? 924 : Chara.MainElement.id);
					if (id == "hedgehog_ether")
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4488-L4494)
```cs:line-numbers=4488
					Say("reflect_thorne", this, origin);
					origin.DamageHP(Mathf.Clamp(dmg / 10, 1, MaxHP / (origin.IsPowerful ? 200 : 20)), ele2, Power, AttackSource.Condition, this);
				}
				if (HasElement(1223) && num12 <= Evalue(1223)) // [!code --]
				if (HasElement(1223) && num15 <= Evalue(1223)) // [!code ++]
				{
					int ele3 = ((Chara.MainElement == Element.Void) ? 923 : Chara.MainElement.id);
					Say("reflect_acid", this, origin);
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4515-L4531)
```cs:line-numbers=4515
			}
		}
	}
	int num13 = ((EClass.rnd(2) == 0) ? 1 : 0); // [!code --]
	int num16 = ((EClass.rnd(2) == 0) ? 1 : 0); // [!code ++]
	if (attackSource == AttackSource.Condition)
	{
		num13 = 1 + EClass.rnd(2); // [!code --]
		num16 = 1 + EClass.rnd(2); // [!code ++]
	}
	if (num13 > 0) // [!code --]
	if (num16 > 0) // [!code ++]
	{
		bool flag3 = Chara.HasCondition<ConPoison>() || ((e.id == 915 || e.id == 923) && ResistLv(Evalue(955)) < 4); // [!code --]
		AddBlood(num13, flag3 ? 6 : (-1)); // [!code --]
		bool flag4 = Chara.HasCondition<ConPoison>() || ((e.id == 915 || e.id == 923) && ResistLv(Evalue(955)) < 4); // [!code ++]
		AddBlood(num16, flag4 ? 6 : (-1)); // [!code ++]
	}
	bool flag4 = true; // [!code --]
	bool flag5 = true; // [!code ++]
	switch (e.id)
	{
	case 910:
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4566-L4579)
```cs:line-numbers=4566
		}
		break;
	case 918:
		flag4 = false; // [!code --]
		flag5 = false; // [!code ++]
		if (Chance(30 + eleP / 5, 100))
		{
			Chara.AddCondition<ConParalyze>(eleP);
		}
		break;
	case 914:
		flag4 = false; // [!code --]
		flag5 = false; // [!code ++]
		if (EClass.rnd(3) != 0)
		{
			if (Chance(30 + eleP / 5, 100))
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4613-L4619)
```cs:line-numbers=4613
		}
		break;
	case 920:
		flag4 = false; // [!code --]
		flag5 = false; // [!code ++]
		if (Chance(5 + eleP / 25, 40))
		{
			Chara.AddCondition<ConBlind>(eleP / 2);
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4665-L4684)
```cs:line-numbers=4665
		Chara.AddCondition<ConGravity>(2000);
		Condition.ignoreEffect = false;
	}
	if (Chara.conSleep != null && flag4) // [!code --]
	if (Chara.conSleep != null && flag5) // [!code ++]
	{
		Chara.conSleep.Kill();
	}
	if (IsPC)
	{
		float num14 = (float)hp / (float)MaxHP; // [!code --]
		float num17 = (float)hp / (float)MaxHP; // [!code ++]
		if (Evalue(1421) > 0)
		{
			num14 = (float)Chara.mana.value / (float)Chara.mana.max; // [!code --]
			num17 = (float)Chara.mana.value / (float)Chara.mana.max; // [!code ++]
		}
		if (num14 < 0.3f) // [!code --]
		if (num17 < 0.3f) // [!code ++]
		{
			PlaySound("heartbeat", 1f - num14 * 2f); // [!code --]
			PlaySound("heartbeat", 1f - num17 * 2f); // [!code ++]
		}
	}
	if (!IsPC && hp < MaxHP / 5 && Evalue(423) <= 0 && dmg * 100 / MaxHP + 10 > EClass.rnd(IsPowerful ? 400 : 150) && !HasCondition<ConFear>())
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4701-L4706)
```cs:line-numbers=4701
	{
		ActEffect.Proc(EffectId.Duplicate, this);
	}
	if (origin != null) // [!code ++]
	{ // [!code ++]
		foreach (BodySlot slot in Chara.body.slots) // [!code ++]
		{ // [!code ++]
			if (slot.elementId == 35 && slot.thing != null && slot.thing.category.IsChildOf("shield")) // [!code ++]
			{ // [!code ++]
				AttackProcess.ProcAbility(slot.thing.elements.dict.Values.ToList(), Chara, origin, Evalue(123)); // [!code ++]
			} // [!code ++]
		} // [!code ++]
	} // [!code ++]
	if (hp < MaxHP / 3 && HasElement(1409) && !Chara.HasCooldown(1409))
	{
		Chara.AddCooldown(1409);
```

[`void ProcAbsorb()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L4751-L4779)
```cs:line-numbers=4751
			int valueOrDefault2 = (origin.Evalue(661) + weapon?.Evalue(661, ignoreGlobalElement: true)).GetValueOrDefault();
			if (valueOrDefault > 0 && attackSource == AttackSource.Melee && origin.isChara && !origin.Chara.ignoreSPAbsorb && Chara.IsHostile(origin as Chara))
			{
				int num15 = EClass.rnd(3 + Mathf.Clamp(dmg / 100, 0, valueOrDefault / 10)); // [!code --]
				origin.Chara.stamina.Mod(num15); // [!code --]
				int num18 = EClass.rnd(3 + Mathf.Clamp(dmg / 100, 0, valueOrDefault / 10)); // [!code ++]
				origin.Chara.stamina.Mod(num18); // [!code ++]
				if (IsAliveInCurrentZone)
				{
					Chara.stamina.Mod(-num15); // [!code --]
					Chara.stamina.Mod(-num18); // [!code ++]
				}
			}
			if (origin.HasElement(1350) && attackSource == AttackSource.Melee)
			{
				int num16 = EClass.rndHalf(2 + Mathf.Clamp(dmg / 10, 0, origin.Chara.GetPietyValue() + 10)); // [!code --]
				origin.Chara.mana.Mod(num16); // [!code --]
				int num19 = EClass.rndHalf(2 + Mathf.Clamp(dmg / 10, 0, origin.Chara.GetPietyValue() + 10)); // [!code ++]
				origin.Chara.mana.Mod(num19); // [!code ++]
				if (IsAliveInCurrentZone)
				{
					Chara.mana.Mod(-num16); // [!code --]
					Chara.mana.Mod(-num19); // [!code ++]
				}
			}
			if (valueOrDefault2 > 0 && attackSource == AttackSource.Melee)
			{
				int num17 = EClass.rnd(2 + Mathf.Clamp(dmg / 10, 0, valueOrDefault2 + 10)); // [!code --]
				origin.Chara.mana.Mod(num17); // [!code --]
				int num20 = EClass.rnd(2 + Mathf.Clamp(dmg / 10, 0, valueOrDefault2 + 10)); // [!code ++]
				origin.Chara.mana.Mod(num20); // [!code ++]
				if (IsAliveInCurrentZone)
				{
					Chara.mana.Mod(-num17); // [!code --]
					Chara.mana.Mod(-num20); // [!code ++]
				}
			}
		}
```

[`public static string ApplyTone(Chara c, ref string text, string _tones, int gend`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Card.cs#L6558-L6564)
```cs:line-numbers=6558
	string key = array[0];
	string text2 = "";
	MOD.tones.Initialize();
	Debug.Log(c.Name); // [!code --]
	if (!Lang.setting.useTone || MOD.tones.list.Count == 0)
	{
		text2 = text.Replace("{", "").Replace("}", "");
```

## Chara

[`public void RestockEquip(bool onCreate)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Chara.cs#L4774-L4780)
```cs:line-numbers=4774
	if (trait is TraitBard)
	{
		AddThing(ThingGen.Create("lute"));
		if (EClass.debug.enable || EClass.rnd(50) == 0) // [!code --]
		if (EClass.debug.enable || EClass.rnd(100) == 0) // [!code ++]
		{
			EQ_ID("shield_lute");
		}
```

[`public int CalcCastingChance(Element e, int num = 1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Chara.cs#L5927-L5934)
```cs:line-numbers=5927
	}
	if (attackStyle == AttackStyle.Shield)
	{
		num4 += 5; // [!code --]
		num5 += 10 - Evalue(1654) * 4; // [!code --]
		num4 += 10; // [!code ++]
		num5 += 20 - Evalue(1654) * 8; // [!code ++]
	}
	if (isConfused)
	{
```

## CoreDebug

[`public void QuickStart()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/CoreDebug.cs#L444-L450)
```cs:line-numbers=444
			{
				thing.AddCard(thing2);
			}
			thing2 = ThingGen.CreateFromCategory("armor", EClass.pc.LV); // [!code --]
			thing2 = ThingGen.CreateFromCategory("armor", EClass.pc.LV + 100); // [!code ++]
			thing2.elements.SetBase(653, 1);
			thing.AddCard(thing2);
		}
```

## DOMAIN

[`public class DOMAIN`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/DOMAIN.cs#L20-L29)
```cs:line-numbers=20

	public const int domHarmony = 815;

	public const int domElement = 806; // [!code --]
 // [!code --]
	public const int domComm = 805;

	public const int domElement = 806; // [!code ++]
 // [!code ++]
	public const int domHealing = 811;

	public const int domSurvival = 801;
```

[`public class DOMAIN`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/DOMAIN.cs#L36-L43)
```cs:line-numbers=36

	public static readonly int[] IDS = new int[16]
	{
		812, 813, 810, 809, 808, 814, 802, 807, 815, 806, // [!code --]
		805, 811, 801, 803, 804, 800 // [!code --]
		812, 813, 810, 809, 808, 814, 802, 807, 815, 805, // [!code ++]
		806, 811, 801, 803, 804, 800 // [!code ++]
	};
}
public class Domain : EClass
```

## ELEMENT

[`public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ELEMENT.cs#L31-L41)
```cs:line-numbers=31

	public const int _void = 0;

	public const int d = 3; // [!code --]
	public const int quality = 2; // [!code ++]

	public const int lv = 1;

	public const int quality = 2; // [!code --]
	public const int d = 3; // [!code ++]

	public const int socket = 5;

```

[`public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ELEMENT.cs#L47-L53)
```cs:line-numbers=47

	public const int hardness = 13;

	public const int growth = 14; // [!code --]
	public const int water = 15; // [!code ++]

	public const int heat = 16;

```

[`public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ELEMENT.cs#L55-L61)
```cs:line-numbers=55

	public const int taste = 18;

	public const int water = 15; // [!code --]
	public const int growth = 14; // [!code ++]

	public const int fire = 21;

```

[`public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ELEMENT.cs#L78-L85)
```cs:line-numbers=78
	public static readonly int[] IDS = new int[35]
	{
		763, 761, 751, 752, 753, 754, 755, 756, 759, 760,
		762, 750, 0, 3, 1, 2, 5, 10, 11, 12, // [!code --]
		13, 14, 16, 17, 18, 15, 21, 22, 23, 24, // [!code --]
		762, 750, 0, 2, 1, 3, 5, 10, 11, 12, // [!code ++]
		13, 15, 16, 17, 18, 14, 21, 22, 23, 24, // [!code ++]
		25, 26, 29, 85, 20
	};
}
```

[`public void AddEncNote(UINote n, Card Card, ElementContainer.NoteMode mode = Ele`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ELEMENT.cs#L819-L825)
```cs:line-numbers=819
		bool flag3 = (source.tag.Contains("neg") ? (Value > 0) : (Value < 0));
		int num = Mathf.Abs(Value);
		bool flag4 = Card?.ShowFoodEnc ?? false;
		bool flag5 = Card != null && Card.IsWeapon && this is Ability; // [!code --]
		bool flag5 = Card != null && this is Ability && (Card.IsWeapon || Card.category.slot == 35); // [!code ++]
		if (IsTrait || (flag4 && IsFoodTrait))
		{
			string[] textArray = source.GetTextArray("textAlt");
```

## ENC

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ENC.cs#L1-L7)
```cs:line-numbers=1
public class ENC
{
	public const int living = 653; // [!code --]
 // [!code --]
	public const int eco = 652;

	public const int r_PV = 651;
```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ENC.cs#L10-L31)
```cs:line-numbers=10

	public const int r_mana = 641;

	public const int mod_frustration = 624; // [!code --]
	public const int r_life = 640; // [!code ++]

	public const int mod_flurry = 621; // [!code --]
	public const int mod_chaser = 620; // [!code ++]
 // [!code ++]
	public const int mod_feint = 623; // [!code ++]
 // [!code ++]
	public const int mod_talisman = 609; // [!code ++]

	public const int mod_cleave = 622;

	public const int mod_feint = 623; // [!code --]
	public const int mod_flurry = 621; // [!code ++]

	public const int noDamage = 654; // [!code --]
	public const int living = 653; // [!code ++]

	public const int r_life = 640; // [!code --]
	public const int mod_frustration = 624; // [!code ++]

	public const int onlyPet = 655; // [!code --]
	public const int noDamage = 654; // [!code ++]

	public const int convertCold = 851;

	public const int permaCurse = 656; // [!code ++]
 // [!code ++]
	public const int absorbHP = 660;

	public const int absorbMP = 661;
```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ENC.cs#L42-L60)
```cs:line-numbers=42

	public const int convertFire = 850;

	public const int mod_chaser = 620; // [!code --]
	public const int mod_splash = 608; // [!code ++]

	public const int convertImpact = 865;

	public const int convertLightning = 852;

	public const int permaCurse = 656; // [!code --]
	public const int onlyPet = 655; // [!code ++]

	public const int mod_talisman = 609; // [!code --]
	public const int mod_scatter = 607; // [!code ++]

	public const int negateSleep = 424; // [!code --]
	public const int negateSteal = 426; // [!code ++]

	public const int mod_scatter = 607; // [!code --]
	public const int mod_precision = 605; // [!code ++]
 // [!code ++]
	public const int defense_range = 435; // [!code ++]

	public const int negateShockwave = 430;

```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ENC.cs#L64-L73)
```cs:line-numbers=64

	public const int negateNeckHunt = 427;

	public const int negateSteal = 426; // [!code --]
 // [!code --]
	public const int negateConfusion = 425;

	public const int negateSleep = 424; // [!code ++]
 // [!code ++]
	public const int negateFear = 423;

	public const int negateParalysis = 422;
```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ENC.cs#L82-L90)
```cs:line-numbers=82

	public const int loving = 417;

	public const int seeInvisible = 416; // [!code --]
	public const int guts = 436; // [!code ++]

	public const int invisibility = 415; // [!code --]
	public const int seeInvisible = 416; // [!code ++]

	public const int encHit = 414;

```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ENC.cs#L96-L104)
```cs:line-numbers=96

	public const int corruption = 409;

	public const int resWeather = 408; // [!code --]
	public const int mod_drill = 606; // [!code ++]

	public const int mod_splash = 608; // [!code --]
	public const int travelSpeed = 407; // [!code ++]

	public const int resMutation = 406;

```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ENC.cs#L114-L126)
```cs:line-numbers=114

	public const int negateTeleport = 400;

	public const int sustain_STR = 440; // [!code --]
	public const int invisibility = 415; // [!code ++]

	public const int sustain_END = 441; // [!code --]
	public const int parry = 437; // [!code ++]

	public const int travelSpeed = 407; // [!code --]
	public const int resWeather = 408; // [!code ++]

	public const int sustain_PER = 443; // [!code --]
	public const int sustain_STR = 440; // [!code ++]
 // [!code ++]
	public const int strongStomach = 480; // [!code ++]
 // [!code ++]
	public const int revealFaith = 481; // [!code ++]

	public const int force_weapon = 482;

```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/ENC.cs#L130-L200)
```cs:line-numbers=130

	public const int nonLethal = 485;

	public const int safetyMeasure = 486; // [!code --]
 // [!code --]
	public const int creativeChef = 487; // [!code --]
	public const int bane_all = 468; // [!code ++]

	public const int revealFaith = 481; // [!code --]
	public const int safetyMeasure = 486; // [!code ++]

	public const int deathagony = 488; // [!code --]
	public const int mod_ammo = 600; // [!code ++]

	public const int mod_reload = 601;

	public const int mod_rapid = 602; // [!code ++]
 // [!code ++]
	public const int mod_ammo_knockback = 603;

	public const int mod_ammo_recover = 604;

	public const int mod_precision = 605; // [!code --]
	public const int knightly = 438; // [!code ++]

	public const int mod_drill = 606; // [!code --]
	public const int creativeChef = 487; // [!code ++]

	public const int sustain_DEX = 442; // [!code --]
	public const int bane_fish = 467; // [!code ++]

	public const int mod_ammo = 600; // [!code --]
	public const int deathagony = 488; // [!code ++]

	public const int strongStomach = 480; // [!code --]
	public const int bane_machine = 465; // [!code ++]

	public const int mod_rapid = 602; // [!code --]
	public const int bane_god = 466; // [!code ++]

	public const int bane_fish = 467; // [!code --]
	public const int sustain_DEX = 442; // [!code ++]

	public const int bane_all = 468; // [!code --]
	public const int sustain_PER = 443; // [!code ++]

	public const int sustain_WIL = 445; // [!code --]
	public const int sustain_LER = 444; // [!code ++]
 // [!code ++]
	public const int sustain_END = 441; // [!code ++]

	public const int sustain_MAG = 446;

	public const int sustain_LER = 444; // [!code --]
	public const int sustain_CHA = 447; // [!code ++]

	public const int sustain_figure = 450; // [!code --]
	public const int sustain_WIL = 445; // [!code ++]

	public const int bane_dragon = 460;

	public const int bane_undead = 461;

	public const int sustain_CHA = 447; // [!code --]
 // [!code --]
	public const int bane_fairy = 462;

	public const int bane_animal = 463;

	public const int bane_man = 464; // [!code --]
 // [!code --]
	public const int bane_machine = 465; // [!code --]
	public const int sustain_figure = 450; // [!code ++]

	public const int bane_god = 466; // [!code --]
	public const int bane_man = 464; // [!code ++]

	public static readonly int[] IDS = new int[92] // [!code --]
	public static readonly int[] IDS = new int[96] // [!code ++]
	{
		653, 652, 651, 650, 641, 624, 621, 622, 623, 654, // [!code --]
		640, 655, 851, 660, 661, 662, 663, 664, 665, 666, // [!code --]
		850, 620, 865, 852, 656, 609, 424, 607, 430, 429, // [!code --]
		428, 427, 426, 425, 423, 422, 421, 420, 419, 418, // [!code --]
		417, 416, 415, 414, 412, 411, 410, 409, 408, 608, // [!code --]
		406, 405, 404, 403, 402, 401, 400, 440, 441, 407, // [!code --]
		443, 482, 483, 484, 485, 486, 487, 481, 488, 601, // [!code --]
		603, 604, 605, 606, 442, 600, 480, 602, 467, 468, // [!code --]
		445, 446, 444, 450, 460, 461, 447, 462, 463, 464, // [!code --]
		465, 466 // [!code --]
		652, 651, 650, 641, 640, 620, 623, 609, 622, 621, // [!code ++]
		653, 624, 654, 851, 656, 660, 661, 662, 663, 664, // [!code ++]
		665, 666, 850, 608, 865, 852, 655, 607, 426, 605, // [!code ++]
		435, 430, 429, 428, 427, 425, 424, 423, 422, 421, // [!code ++]
		420, 419, 418, 417, 436, 416, 414, 412, 411, 410, // [!code ++]
		409, 606, 407, 406, 405, 404, 403, 402, 401, 400, // [!code ++]
		415, 437, 408, 440, 480, 481, 482, 483, 484, 485, // [!code ++]
		468, 486, 600, 601, 602, 603, 604, 438, 487, 467, // [!code ++]
		488, 465, 466, 442, 443, 444, 441, 446, 447, 445, // [!code ++]
		460, 461, 462, 463, 450, 464 // [!code ++]
	};
}
```

## FACTION

[``](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/FACTION.cs#L4-L32)
```cs:line-numbers=4

public class FACTION
{
	public const int bfFertile = 3700; // [!code --]
 // [!code --]
	public const int bfRuin = 3702; // [!code --]
	public const int bfGeyser = 3701; // [!code ++]

	public const int bfUndersea = 3606; // [!code --]
	public const int bfPlain = 3600; // [!code ++]

	public const int bfSea = 3605; // [!code --]
	public const int bfForest = 3601; // [!code ++]

	public const int bfBeach = 3604; // [!code --]
	public const int bfSnow = 3602; // [!code ++]

	public const int bfHill = 3603;

	public const int bfSnow = 3602; // [!code --]
	public const int bfSea = 3605; // [!code ++]

	public const int bfForest = 3601; // [!code --]
	public const int bfUndersea = 3606; // [!code ++]

	public const int bfPlain = 3600; // [!code --]
	public const int bfRuin = 3702; // [!code ++]

	public const int bfGeyser = 3701; // [!code --]
	public const int bfFertile = 3700; // [!code ++]
 // [!code ++]
	public const int bfBeach = 3604; // [!code ++]

	public const int bfCave = 3500;

	public const int fPromo = 2202; // [!code --]
	public const int fElec = 2201; // [!code ++]

	public const int fAttraction = 2206;

```

[`public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/FACTION.cs#L36-L54)
```cs:line-numbers=36

	public const int fMoral = 2203;

	public const int fElec = 2201; // [!code --]
	public const int fPromo = 2202; // [!code ++]

	public const int fSoil = 2200;

	public const int fHeirloom = 2120;

	public const int fLuck = 2118; // [!code --]
	public const int fTaxEvasion = 2119; // [!code ++]

	public const int bfTranquil = 3703;

	public const int fEducation = 2116;

	public const int fLoyal = 2117; // [!code --]
	public const int fLuck = 2118; // [!code ++]

	public const int fRation = 2207;

```

[`public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/FACTION.cs#L108-L123)
```cs:line-numbers=108

	public const int fConstruction = 2003;

	public const int fTaxEvasion = 2119; // [!code --]
	public const int fLoyal = 2117; // [!code ++]

	public static readonly int[] IDS = new int[53]
	{
		3700, 3702, 3606, 3605, 3604, 3603, 3602, 3601, 3600, 3701, // [!code --]
		3500, 2202, 2206, 2205, 2204, 2203, 2201, 2200, 2120, 2118, // [!code --]
		3703, 2116, 2117, 2207, 3704, 3804, 3706, 2115, 4006, 4005, // [!code --]
		3701, 3600, 3601, 3602, 3603, 3605, 3606, 3702, 3700, 3604, // [!code ++]
		3500, 2201, 2206, 2205, 2204, 2203, 2202, 2200, 2120, 2119, // [!code ++]
		3703, 2116, 2118, 2207, 3704, 3804, 3706, 2115, 4006, 4005, // [!code ++]
		4004, 4003, 4002, 4001, 4000, 3900, 3805, 3803, 3802, 3801,
		3800, 3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707,
		3705, 2003, 2119 // [!code --]
		3705, 2003, 2117 // [!code ++]
	};
}
public class Faction : EClass
```

## FOOD

[`public class FOOD`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/FOOD.cs#L14-L34)
```cs:line-numbers=14

	public const int kirimi = 707;

	public const int creativeDish = 764; // [!code ++]
 // [!code ++]
	public const int food_human = 708;

	public const int food_undead = 709;

	public const int justcooked = 757;

	public const int creativeDish = 764; // [!code --]
 // [!code --]
	public const int food_god = 758;

	public const int loseWeight = 706;

	public static readonly int[] IDS = new int[13]
	{
		700, 701, 702, 703, 705, 704, 707, 708, 709, 757, // [!code --]
		764, 758, 706 // [!code --]
		700, 701, 702, 703, 705, 704, 707, 764, 708, 709, // [!code ++]
		757, 758, 706 // [!code ++]
	};
}
```

## MATERIAL

[`public class MATERIAL : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/MATERIAL.cs#L44-L49)
```cs:line-numbers=44

	public static SourceMaterial.Row sourceWaterSea => EClass.sources.materials.rows[88];

	public static SourceMaterial.Row FromElement(int id) // [!code ++]
	{ // [!code ++]
		return EClass.sources.materials.alias["rubinus"]; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public static SourceMaterial.Row GetRandomMaterial(int lv, string group = null, bool tryLevelMatTier = false)
	{
		if (group == null)
```

## SourceElement

[`public bool IsEncAppliable(SourceCategory.Row cat)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/SourceElement.cs#L256-L271)
```cs:line-numbers=256
			{
				return IsWeaponEnc;
			}
			string text = encSlot; // [!code --]
			if (!(text == "all")) // [!code --]
			return encSlot switch // [!code ++]
			{
				if (text == "weapon") // [!code --]
				{ // [!code --]
					return cat.IsChildOf("weapon"); // [!code --]
				} // [!code --]
				return encSlot.Contains(EClass.sources.elements.map[slot].alias); // [!code --]
			} // [!code --]
			return true; // [!code --]
				"all" => true,  // [!code ++]
				"weapon" => cat.IsChildOf("weapon"),  // [!code ++]
				"shield" => cat.IsChildOf("shield"),  // [!code ++]
				_ => encSlot.Contains(EClass.sources.elements.map[slot].alias),  // [!code ++]
			}; // [!code ++]
		}
	}

```

## Thing

[`public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/94a416b00721c8a7f62c94be1c6be1ffd9e169a1/Elin/Thing.cs#L280-L285)
```cs:line-numbers=280
			}
		}
	}
	if (id == "shield_flower") // [!code ++]
	{ // [!code ++]
		SourceElement.Row randomElement = Element.GetRandomElement(genLv); // [!code ++]
		elements.SetBase(randomElement.alias.Replace("ele", "miasma_"), 20); // [!code ++]
	} // [!code ++]
	if ((bp.rarity != 0 || bp.qualityBonus != 0) && base.rarity < Rarity.Artifact && base.category.tag.Contains("enc"))
	{
		int num4 = 0;
```

## +Zone_CurryRuin

::: details File Created
```cs
public class Zone_CurryRuin : Zone_Civilized
{
	public override string GetNewZoneID(int level)
	{
		if (level <= -1)
		{
			return "curryruin_dungeon";
		}
		return base.GetNewZoneID(level);
	}
}
```

:::
## +Zone_CurryRuinDungeon

::: details File Created
```cs
using UnityEngine;

public class Zone_CurryRuinDungeon : Zone_QuestDungeon
{
	public const int LvBoss = -8;

	public bool IsBossLv => base.lv == -8;

	public override int DangerLv => 5 + Mathf.Abs(base.lv);

	public override bool LockExit
	{
		get
		{
			if (base.lv == -1)
			{
				return EClass.game.quests.GetPhase<QuestVernis>() < 7;
			}
			return false;
		}
	}

	public override float OreChance => 4f;

	public override string idExport
	{
		get
		{
			if (base.lv != -8)
			{
				return base.idExport;
			}
			return "vernis_mine_boss";
		}
	}

	public override string GetDungenID()
	{
		return "DungeonMine";
	}

	public override void OnGenerateMap()
	{
		if (IsBossLv)
		{
			return;
		}
		PlaceRail();
		EClass._map.ForeachCell(delegate(Cell c)
		{
			if (EClass.rnd(5) != 0 && c._block != 0 && !c.HasObj && !c.isSurrounded && !c.hasDoor)
			{
				c.GetSharedPoint().SetObj(24, 1, EClass.rnd(3));
			}
		});
		base.OnGenerateMap();
	}
}
```

:::
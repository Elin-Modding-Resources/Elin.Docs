---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 27 files modified.
version: EA 23.123 Nightly
changes: AI_UseCrafter/ActPlan/AttackProcess/CalcMoney/Card/Chara/CharaBody/CoreDebug/DramaCustomSequence/ELEMENT/FACTION/FEAT/FOOD/GuildMerchant/InvOwnerDeliver/MUTATION/SKILL/SLOT/SPELL/Thing/Trait/TraitBrewery/TraitTent/TraitTicketFurniture/UIDragGridIngredients/UIInventory/Zone
---

# EA 23.123 Nightly

April 12, 2025

27 files modified.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [CalcMoney (1)](#calcmoney)
```cs:no-line-numbers
public static int Invest(int a, float mod = 2f) // [!code --]
public static int Invest(long a, float mod = 2f) // [!code ++]
```
### [GuildMerchant (1)](#guildmerchant)
```cs:no-line-numbers
public int InvestPrice(int a) // [!code --]
public long InvestPrice(long a) // [!code ++]
```
## AI_UseCrafter

[`@@ -264,6 +264,7 @@ public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/AI_UseCrafter.cs#L264-L269)
```cs:line-numbers=264
				for (int n = 0; n < num; n++)
				{
					owner.RemoveCondition<ConInvulnerable>();
					EClass.player.invlunerable = false; // [!code ++]
					owner.elements.ModExp(orCreateElement.id, costSP * 12 * (100 + duration * 2) / 100);
					owner.stamina.Mod(-costSP);
					if (owner == null || owner.isDead)
```

## ActPlan

[`@@ -501,72 +501,62 @@ public void _Update(PointTarget target)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/ActPlan.cs#L501-L572)
```cs:line-numbers=501
		}
		items.ForeachReverse(delegate(Card _c)
		{
			if (_c.isThing) // [!code --]
			Chara c2 = _c.Chara; // [!code ++]
			if (c2 != null && !c2.IsPC && EClass.pc.CanSee(c2)) // [!code ++]
			{
				if (_c.trait.CanBeAttacked && !(_c.trait is TraitTrainingDummy)) // [!code --]
				int num = c2.Dist(EClass.pc); // [!code ++]
				if (num <= 1 || !EClass.pc.isBlind) // [!code ++]
				{
					TrySetAct(ACT.Melee, _c); // [!code --]
				} // [!code --]
			} // [!code --]
			else // [!code --]
			{ // [!code --]
				Chara c2 = _c.Chara; // [!code --]
				if (c2 != null && !c2.IsPC && EClass.pc.CanSee(c2)) // [!code --]
				{ // [!code --]
					int num = c2.Dist(EClass.pc); // [!code --]
					if (num <= 1 || !EClass.pc.isBlind) // [!code --]
					if (!EClass.pc.isBlind && !c2.IsHostile() && (input == ActInput.AllAction || !(c2.IsPCParty || c2.IsMinion || isKey)) && (input == ActInput.AllAction || !c2.IsNeutral() || c2.quest != null || EClass.game.quests.IsDeliverTarget(c2)) && c2.isSynced && num <= 2) // [!code ++]
					{
						if (!EClass.pc.isBlind && !c2.IsHostile() && (input == ActInput.AllAction || !(c2.IsPCParty || c2.IsMinion || isKey)) && (input == ActInput.AllAction || !c2.IsNeutral() || c2.quest != null || EClass.game.quests.IsDeliverTarget(c2)) && c2.isSynced && num <= 2) // [!code --]
						bool flag5 = !c2.HasCondition<ConSuspend>() && (!c2.isRestrained || !c2.IsPCFaction); // [!code ++]
						if (EClass._zone.instance is ZoneInstanceMusic && !c2.IsPCFactionOrMinion) // [!code ++]
						{
							bool flag5 = !c2.HasCondition<ConSuspend>() && (!c2.isRestrained || !c2.IsPCFaction); // [!code --]
							if (EClass._zone.instance is ZoneInstanceMusic && !c2.IsPCFactionOrMinion) // [!code --]
							{ // [!code --]
								flag5 = false; // [!code --]
							} // [!code --]
							if (flag5 || altAction) // [!code --]
							flag5 = false; // [!code ++]
						} // [!code ++]
						if (flag5 || altAction) // [!code ++]
						{ // [!code ++]
							if (EClass.pc.HasElement(1216) && c2.HasCondition<ConSleep>()) // [!code ++]
							{
								if (EClass.pc.HasElement(1216) && c2.HasCondition<ConSleep>()) // [!code --]
								TrySetAct(new AI_Fuck // [!code ++]
								{
									TrySetAct(new AI_Fuck // [!code --]
									{ // [!code --]
										target = c2, // [!code --]
										succubus = true // [!code --]
									}, c2); // [!code --]
								} // [!code --]
								TrySetAct(ACT.Chat, c2); // [!code --]
									target = c2, // [!code ++]
									succubus = true // [!code ++]
								}, c2); // [!code ++]
							}
							TrySetAct(ACT.Chat, c2); // [!code ++]
						}
						if (c2.host != EClass.pc) // [!code --]
					} // [!code ++]
					if (c2.host != EClass.pc) // [!code ++]
					{ // [!code ++]
						TraitShackle traitShackle = c2.pos.FindThing<TraitShackle>(); // [!code ++]
						if (c2.IsRestrainedResident) // [!code ++]
						{
							TraitShackle traitShackle = c2.pos.FindThing<TraitShackle>(); // [!code --]
							if (c2.IsRestrainedResident) // [!code --]
							if (traitShackle != null && traitShackle.AllowTraining) // [!code ++]
							{
								if (traitShackle != null && traitShackle.AllowTraining) // [!code --]
								TrySetAct(new AI_PracticeDummy // [!code ++]
								{
									TrySetAct(new AI_PracticeDummy // [!code --]
									{ // [!code --]
										target = c2 // [!code --]
									}); // [!code --]
								} // [!code --]
							} // [!code --]
							else if ((c2.IsHostile() || altAction || c2.isRestrained) && c2.IsAliveInCurrentZone) // [!code --]
							{ // [!code --]
								TrySetAct(ACT.Melee, c2); // [!code --]
									target = c2 // [!code ++]
								}); // [!code ++]
							}
						}
						if (c2.IsPCPartyMinion && !c2.Chara.IsEscorted() && altAction) // [!code --]
						else if ((c2.IsHostile() || altAction || c2.isRestrained) && c2.IsAliveInCurrentZone) // [!code ++]
						{
							TrySetAct("ActBanishSummon", delegate // [!code --]
							{ // [!code --]
								EClass.pc.Say("summon_vanish", c2); // [!code --]
								c2.pos.PlayEffect("vanish"); // [!code --]
								c2.pos.PlaySound("vanish"); // [!code --]
								c2.pos.PlayEffect("teleport"); // [!code --]
								c2.Destroy(); // [!code --]
								return true; // [!code --]
							}, c2, null, 99); // [!code --]
							TrySetAct(ACT.Melee, c2); // [!code ++]
						}
					}
					if (c2.IsPCPartyMinion && !c2.Chara.IsEscorted() && altAction) // [!code ++]
					{ // [!code ++]
						TrySetAct("ActBanishSummon", delegate // [!code ++]
						{ // [!code ++]
							EClass.pc.Say("summon_vanish", c2); // [!code ++]
							c2.pos.PlayEffect("vanish"); // [!code ++]
							c2.pos.PlaySound("vanish"); // [!code ++]
							c2.pos.PlayEffect("teleport"); // [!code ++]
							c2.Destroy(); // [!code ++]
							return true; // [!code ++]
						}, c2, null, 99); // [!code ++]
					} // [!code ++]
				}
			}
		});
```

[`@@ -886,6 +876,17 @@ void func()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/ActPlan.cs#L886-L891)
```cs:line-numbers=886
				pos = pos.Copy()
			});
		}
		if (list.Count != 0 && input != ActInput.AllAction) // [!code ++]
		{ // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		items.ForeachReverse(delegate(Card _c) // [!code ++]
		{ // [!code ++]
			if (_c.isThing && _c.trait.CanBeAttacked && !(_c.trait is TraitTrainingDummy)) // [!code ++]
			{ // [!code ++]
				TrySetAct(ACT.Melee, _c); // [!code ++]
			} // [!code ++]
		}); // [!code ++]
	}
	else
	{
```

## AttackProcess

[`@@ -944,7 +944,7 @@ public bool CalcHit()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/AttackProcess.cs#L944-L950)
```cs:line-numbers=944
	}
	if (CC.Evalue(1420) > 0)
	{
		int num3 = Mathf.Min(100, 100 - CC.hp * 100 / CC.MaxHP); // [!code --]
		int num3 = Mathf.Min(100, 100 - CC.hp * 100 / CC.MaxHP) * (50 + CC.Evalue(1420) * 50) / 100; // [!code ++]
		if (num3 >= 50 && num3 * num3 * num3 * num3 / 3 > EClass.rnd(100000000))
		{
			return Crit();
```

## CalcMoney

[`@@ -4,12 +4,17 @@ public class CalcMoney : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/CalcMoney.cs#L4-L15)
```cs:line-numbers=4
{
	public static int Negotiate(int a, float mod = 1.5f)
	{
		return (int)Mathf.Max((long)a * 100L / (long)(100f + (float)Mathf.Max(0, EClass.pc.CHA / 2 + EClass.pc.Evalue(291)) * mod), 1f); // [!code --]
		return Mathf.Max((int)((float)((long)a * 100L) / (100f + (float)Mathf.Max(0, EClass.pc.CHA / 2 + EClass.pc.Evalue(291)) * mod)), 1); // [!code ++]
	}

	public static int Invest(int a, float mod = 2f) // [!code --]
	public static int Invest(long a, float mod = 2f) // [!code ++]
	{
		return (int)Mathf.Max((long)a * 100L / (long)(100f + (float)Mathf.Max(0, EClass.pc.CHA / 2 + EClass.pc.Evalue(292)) * mod), 1f); // [!code --]
		long num = a * 100 / (long)(100f + (float)Mathf.Max(0, EClass.pc.CHA / 2 + EClass.pc.Evalue(292)) * mod); // [!code ++]
		if (num >= 0 && num < 100000000) // [!code ++]
		{ // [!code ++]
			return (int)num; // [!code ++]
		} // [!code ++]
		return 100000000; // [!code ++]
	}

	public static int Meal(Chara c)
```

[`@@ -61,11 +66,13 @@ public static int Whore(Chara seller, Chara buyer)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/CalcMoney.cs#L61-L71)
```cs:line-numbers=61

	public static int InvestShop(Chara c, Chara tc)
	{
		return Invest(Guild.Merchant.InvestPrice(Mathf.Max(tc.c_invest * 700, Mathf.Min(tc.c_invest, 4000) * Mathf.Min(tc.c_invest, 4000) * 80) + 200)); // [!code --]
		long a = Guild.Merchant.InvestPrice(tc.c_invest * 700); // [!code ++]
		return Mathf.Max(b: Invest(Guild.Merchant.InvestPrice(tc.c_invest * tc.c_invest * 80 + 200)), a: Invest(a)); // [!code ++]
	}

	public static int InvestZone(Chara c)
	{
		return Invest((int)Mathf.Max((long)EClass._zone.development * 50L, Mathf.Min(EClass._zone.development, 80000) * Mathf.Min(EClass._zone.development, 80000) / 4) + 500); // [!code --]
		long a = EClass._zone.development * 50; // [!code ++]
		return Mathf.Max(b: Invest((long)EClass._zone.development * (long)EClass._zone.development / 4 + 500), a: Invest(a)); // [!code ++]
	}
}
```

## Card

[`@@ -2054,7 +2054,7 @@ public bool IsInheritFoodTraits`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L2054-L2060)
```cs:line-numbers=2054
{
	get
	{
		if (!IsFood && !category.IsChildOf("seed") && !(id == "pasture")) // [!code --]
		if (!IsFood && !category.IsChildOf("seed") && !category.IsChildOf("drink") && !(id == "pasture")) // [!code ++]
		{
			return id == "grass";
		}
```

[`@@ -2066,9 +2066,13 @@ public bool ShowFoodEnc`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L2066-L2074)
```cs:line-numbers=2066
{
	get
	{
		if (!IsInheritFoodTraits && (Evalue(10) <= 0 || IsEquipmentOrRangedOrAmmo)) // [!code --]
		if (!IsInheritFoodTraits) // [!code ++]
		{
			return category.IsChildOf("drug"); // [!code --]
			if (Evalue(10) > 0) // [!code ++]
			{ // [!code ++]
				return !IsEquipmentOrRangedOrAmmo; // [!code ++]
			} // [!code ++]
			return false; // [!code ++]
		}
		return true;
	}
```

[`@@ -2410,7 +2414,7 @@ public bool IsExcludeFromCraft()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L2410-L2416)
```cs:line-numbers=2410
		{
			return true;
		}
		if (card.isSale) // [!code --]
		if (card.isSale || !card.trait.CanUseContent) // [!code ++]
		{
			return true;
		}
```

[`@@ -3085,7 +3089,6 @@ public void RemoveThing(Thing thing)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L3085-L3091)
```cs:line-numbers=3085
			EClass.player.RefreshCurrentHotItem();
			ActionMode.AdvOrRegion.updatePlans = true;
			LayerInventory.SetDirty(thing);
			Debug.Log(thing); // [!code --]
		}
		RecalculateFOV();
	}
```

[`@@ -3687,11 +3690,16 @@ public virtual void HealHPHost(int a, HealSource origin = HealSource.None)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L3687-L3697)
```cs:line-numbers=3687

	public virtual void HealHP(int a, HealSource origin = HealSource.None)
	{
		long num = a; // [!code ++]
		if (origin == HealSource.Magic)
		{
			a = (int)Mathf.Min(a * Mathf.Max(100 - Evalue(93), 1) / 100, 100000000f); // [!code --]
			num = (long)a * (long)Mathf.Max(100 - Evalue(93), 1) / 100; // [!code ++]
		} // [!code ++]
		if (num > 100000000) // [!code ++]
		{ // [!code ++]
			num = 100000000L; // [!code ++]
		}
		hp += a; // [!code --]
		hp += (int)num; // [!code ++]
		if (hp > MaxHP)
		{
			hp = MaxHP;
```

[`@@ -3981,6 +3989,10 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L3981-L3986)
```cs:line-numbers=3981
			else if (Chara.host != null)
			{
				EvadeDeath();
				if (!Chara.HasCondition<ConFaint>()) // [!code ++]
				{ // [!code ++]
					Chara.AddCondition<ConFaint>(200, force: true); // [!code ++]
				} // [!code ++]
			}
			else if (zoneInstanceBout != null && (bool)LayerDrama.Instance)
			{
```

[`@@ -4007,7 +4019,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L4007-L4013)
```cs:line-numbers=4007
					if (EClass.player.invlunerable)
					{
						EvadeDeath();
						goto IL_0b2d; // [!code --]
						goto IL_0b4f; // [!code ++]
					}
				}
				if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2)
```

[`@@ -4019,8 +4031,8 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L4019-L4026)
```cs:line-numbers=4019
			}
		}
	}
	goto IL_0b2d; // [!code --]
	IL_0b2d: // [!code --]
	goto IL_0b4f; // [!code ++]
	IL_0b4f: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

[`@@ -4411,10 +4423,6 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Card.cs#L4411-L4420)
```cs:line-numbers=4411
	{
		Chara.conSleep.Kill();
	}
	if (Chara.host != null && hp == 0 && !Chara.HasCondition<ConFaint>()) // [!code --]
	{ // [!code --]
		Chara.AddCondition<ConFaint>(200, force: true); // [!code --]
	} // [!code --]
	if (IsPC)
	{
		float num12 = (float)hp / (float)MaxHP;
```

## Chara

[`@@ -1989,6 +1989,7 @@ public void ApplyRace(bool remove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L1989-L1994)
```cs:line-numbers=1989
				}
			}
		}
		body.RefreshBodyParts(); // [!code ++]
		elements.ApplyElementMap(base.uid, SourceValueType.Chara, race.elementMap, base.DefaultLV, remove, applyFeat: true);
	}

```

[`@@ -2899,7 +2900,7 @@ public void DestroyPath(Point pos)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L2899-L2905)
```cs:line-numbers=2899
					{
						t.Destroy();
					}
					else // [!code --]
					else if (!t.IsUnique && !t.trait.CanBeDestroyed) // [!code ++]
					{
						t.SetPlaceState(PlaceState.roaming);
					}
```

[`@@ -5252,15 +5253,25 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5252-L5266)
```cs:line-numbers=5252
	{
		return false;
	}
	int num = 1; // [!code --]
	if (a.source.proc.TryGet(0) == "Heal" && HasElement(1422)) // [!code ++]
	{ // [!code ++]
		List<int> list = new List<int> { 8400, 8401, 8402, 8403, 8404, 8405 }; // [!code ++]
		int num = list.IndexOf(a.id); // [!code ++]
		if (num != -1) // [!code ++]
		{ // [!code ++]
			int num2 = list.TryGet(num + Evalue(1422)); // [!code ++]
			a = elements.GetElement(num2)?.act ?? ACT.Create(num2); // [!code ++]
		} // [!code ++]
	} // [!code ++]
	int num3 = 1; // [!code ++]
	Act.Cost cost = a.GetCost(this);
	a.GetPower(this);
	int i = 1;
	int num2 = 0; // [!code --]
	int num4 = 0; // [!code ++]
	bool flag = a.IsTargetHostileParty();
	if (IsPC && HasCondition<StanceManaCost>())
	{
		num2 = Evalue(1657); // [!code --]
		num4 = Evalue(1657); // [!code ++]
	}
	_pts.Clear();
	if (a.TargetType.ForceParty)
```

[`@@ -5292,15 +5303,15 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5292-L5306)
```cs:line-numbers=5292
		_pts.Add(this);
		pt = false;
	}
	int num3 = 100; // [!code --]
	int num5 = 100; // [!code ++]
	if (!a.TargetType.ForceParty && i > 1)
	{
		num3 = (IsPC ? (i * 100) : (50 + i * 50)); // [!code --]
		num5 = (IsPC ? (i * 100) : (50 + i * 50)); // [!code ++]
	}
	int num4 = cost.cost * num3 / 100; // [!code --]
	int num6 = cost.cost * num5 / 100; // [!code ++]
	if (cost.type == Act.CostType.MP && Evalue(483) > 0)
	{
		num4 = num4 * 100 / (100 + (int)Mathf.Sqrt(Evalue(483) * 10) * 3); // [!code --]
		num6 = num6 * 100 / (100 + (int)Mathf.Sqrt(Evalue(483) * 10) * 3); // [!code ++]
	}
	if (i == 0)
	{
```

[`@@ -5316,7 +5327,7 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5316-L5322)
```cs:line-numbers=5316
	}
	if (IsPC)
	{
		if (!Dialog.warned && cost.type == Act.CostType.MP && cost.cost > 0 && mana.value < num4 && !EClass.debug.godMode) // [!code --]
		if (!Dialog.warned && cost.type == Act.CostType.MP && cost.cost > 0 && mana.value < num6 && !EClass.debug.godMode) // [!code ++]
		{
			ActPlan.warning = true;
			Dialog.TryWarnMana(delegate
```

[`@@ -5345,7 +5356,7 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5345-L5351)
```cs:line-numbers=5345
	}
	if (a.CanRapidFire && HasElement(1648))
	{
		num = 1 + Evalue(1648); // [!code --]
		num3 = 1 + Evalue(1648); // [!code ++]
	}
	if (IsPC && cost.cost > 0 && a.Value == 0)
	{
```

[`@@ -5368,10 +5379,10 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5368-L5377)
```cs:line-numbers=5368
				EInput.Consume();
				return false;
			}
			if (num2 > 0 && a.vPotential >= i * 2) // [!code --]
			if (num4 > 0 && a.vPotential >= i * 2) // [!code ++]
			{
				a.vPotential -= i * 2;
				num4 = num4 * (100 - num2 * 20) / 100; // [!code --]
				num6 = num6 * (100 - num4 * 20) / 100; // [!code ++]
			}
			else
			{
```

[`@@ -5386,9 +5397,9 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5386-L5394)
```cs:line-numbers=5386
		string text2 = ((a.source.langAct.Length >= 2) ? a.source.langAct[1] : "");
		if (text == "spell_hand")
		{
			string[] list = Lang.GetList("attack" + race.meleeStyle.IsEmpty("Touch")); // [!code --]
			string @ref = text2.lang(list[4]); // [!code --]
			Say(tc.IsPCParty ? "cast_hand_ally" : "cast_hand", this, tc, @ref, tc.IsPCParty ? list[1] : list[2]); // [!code --]
			string[] list2 = Lang.GetList("attack" + race.meleeStyle.IsEmpty("Touch")); // [!code ++]
			string @ref = text2.lang(list2[4]); // [!code ++]
			Say(tc.IsPCParty ? "cast_hand_ally" : "cast_hand", this, tc, @ref, tc.IsPCParty ? list2[1] : list2[2]); // [!code ++]
		}
		else
		{
```

[`@@ -5404,18 +5415,18 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5404-L5421)
```cs:line-numbers=5404
	case Act.CostType.MP:
		if (Evalue(1421) >= 2 && base.hp <= MaxHP / (9 - Evalue(1421) * 2))
		{
			num4 /= 2; // [!code --]
			num6 /= 2; // [!code ++]
		}
		PlayEffect("cast");
		mana.Mod(-num4); // [!code --]
		mana.Mod(-num6); // [!code ++]
		if (isDead)
		{
			return true;
		}
		elements.ModExp(304, Mathf.Clamp(num4 * 2, 1, 200)); // [!code --]
		elements.ModExp(304, Mathf.Clamp(num6 * 2, 1, 200)); // [!code ++]
		break;
	case Act.CostType.SP:
		stamina.Mod(-num4); // [!code --]
		stamina.Mod(-num6); // [!code ++]
		ignoreSPAbsorb = true;
		break;
	}
```

[`@@ -5428,7 +5439,7 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5428-L5434)
```cs:line-numbers=5428
	{
		return true;
	}
	int spellExp = elements.GetSpellExp(this, a, num3); // [!code --]
	int spellExp = elements.GetSpellExp(this, a, num5); // [!code ++]
	if (EClass.rnd(100) >= CalcCastingChance(a, i) && !EClass.debug.godMode)
	{
		Say("fizzle", this);
```

[`@@ -5468,7 +5479,7 @@ public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5468-L5474)
```cs:line-numbers=5468
	}
	else
	{
		for (int j = 0; j < num; j++) // [!code --]
		for (int j = 0; j < num3; j++) // [!code ++]
		{
			if (a.TargetType != TargetType.SelfParty && tc != null && !tc.IsAliveInCurrentZone)
			{
```

[`@@ -5504,18 +5515,18 @@ void ForeachEnemy(Action<Chara> action)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5504-L5521)
```cs:line-numbers=5504
	{
		if (_pts.Count == 0)
		{
			for (int num8 = EClass._map.charas.Count - 1; num8 >= 0; num8--) // [!code --]
			for (int num10 = EClass._map.charas.Count - 1; num10 >= 0; num10--) // [!code ++]
			{
				Chara chara3 = EClass._map.charas[num8]; // [!code --]
				Chara chara3 = EClass._map.charas[num10]; // [!code ++]
				if (chara3 != this && CanSeeLos(chara3) && chara3.IsHostile(this))
				{
					_pts.Add(chara3);
				}
			}
		}
		for (int num9 = _pts.Count - 1; num9 >= 0; num9--) // [!code --]
		for (int num11 = _pts.Count - 1; num11 >= 0; num11--) // [!code ++]
		{
			action(_pts[num9]); // [!code --]
			action(_pts[num11]); // [!code ++]
		}
	}
	void ForeachParty(Action<Chara> action)
```

[`@@ -5524,9 +5535,9 @@ void ForeachParty(Action<Chara> action)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5524-L5532)
```cs:line-numbers=5524
		{
			if (IsPCParty)
			{
				for (int num5 = EClass.pc.party.members.Count - 1; num5 >= 0; num5--) // [!code --]
				for (int num7 = EClass.pc.party.members.Count - 1; num7 >= 0; num7--) // [!code ++]
				{
					Chara chara = EClass.pc.party.members[num5]; // [!code --]
					Chara chara = EClass.pc.party.members[num7]; // [!code ++]
					if (chara == this || chara.host != null || CanSeeLos(chara))
					{
						_pts.Add(chara);
```

[`@@ -5535,9 +5546,9 @@ void ForeachParty(Action<Chara> action)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5535-L5543)
```cs:line-numbers=5535
			}
			else
			{
				for (int num6 = EClass._map.charas.Count - 1; num6 >= 0; num6--) // [!code --]
				for (int num8 = EClass._map.charas.Count - 1; num8 >= 0; num8--) // [!code ++]
				{
					Chara chara2 = EClass._map.charas[num6]; // [!code --]
					Chara chara2 = EClass._map.charas[num8]; // [!code ++]
					if ((chara2 == this || (chara2.IsFriendOrAbove(this) && CanSeeLos(chara2))) && (chara2 == tc || _pts.Count < 3 || EClass.rnd(_pts.Count * _pts.Count) > 6))
					{
						_pts.Add(chara2);
```

[`@@ -5545,9 +5556,9 @@ void ForeachParty(Action<Chara> action)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L5545-L5553)
```cs:line-numbers=5545
				}
			}
		}
		for (int num7 = _pts.Count - 1; num7 >= 0; num7--) // [!code --]
		for (int num9 = _pts.Count - 1; num9 >= 0; num9--) // [!code ++]
		{
			action(_pts[num7]); // [!code --]
			action(_pts[num9]); // [!code ++]
		}
	}
}
```

[`@@ -8507,7 +8518,7 @@ public Condition AddCondition(Condition c, bool force = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Chara.cs#L8507-L8513)
```cs:line-numbers=8507
		Element defenseAttribute = c.GetDefenseAttribute(this);
		if (defenseAttribute != null)
		{
			c.power = 100 * c.power / (100 + defenseAttribute.Value); // [!code --]
			c.power = 100 * c.power / Mathf.Max(100 + defenseAttribute.Value, 1); // [!code ++]
		}
		if (c.source.resistance.Length != 0)
		{
```

## CharaBody

[`@@ -286,23 +286,29 @@ public void AddBodyPart(int ele, Thing thing = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/CharaBody.cs#L286-L308)
```cs:line-numbers=286

	public void RefreshBodyParts()
	{
		foreach (BodySlot slot in slots) // [!code --]
		for (int i = 0; i < slots.Count; i++) // [!code ++]
		{
			int elementId = slot.elementId; // [!code --]
			BodySlot bodySlot = slots[i]; // [!code ++]
			bodySlot.index = i; // [!code ++]
			int elementId = bodySlot.elementId; // [!code ++]
			if (elementId == 35)
			{
				if (slotMainHand == null)
				{
					slotMainHand = slot; // [!code --]
					slotMainHand = bodySlot; // [!code ++]
				}
				else if (slotOffHand == null)
				{
					slotOffHand = slot; // [!code --]
					slotOffHand = bodySlot; // [!code ++]
				}
			}
			if (elementId == 41)
			{
				slotRange = slot; // [!code --]
				slotRange = bodySlot; // [!code ++]
			} // [!code ++]
			if (bodySlot.thing != null) // [!code ++]
			{ // [!code ++]
				bodySlot.thing.c_equippedSlot = i + 1; // [!code ++]
			}
		}
	}
```

## CoreDebug

[`@@ -925,6 +925,8 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/CoreDebug.cs#L925-L930)
```cs:line-numbers=925
	}
	if (Input.GetKeyDown(KeyCode.F2))
	{
		EClass._zone.development += 10; // [!code ++]
		EClass._zone.development *= EClass._zone.development; // [!code ++]
		EClass.pc.Pick(ThingGen.CreateSpellbook(8550));
		EClass.pc.Pick(ThingGen.CreatePotion(8550));
		EClass.pc.Pick(ThingGen.CreateSpellbook(9004));
```

## DramaCustomSequence

[`@@ -853,7 +853,7 @@ public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/DramaCustomSequence.cs#L853-L859)
```cs:line-numbers=853
	{
		int cost5 = CalcMoney.InvestZone(EClass.pc);
		GameLang.refDrama1 = cost5.ToString() ?? "";
		GameLang.refDrama2 = EClass._zone.investment.ToString() ?? ""; // [!code --]
		GameLang.refDrama2 = ((EClass._zone.investment < 0) ? int.MaxValue : EClass._zone.investment).ToString() ?? ""; // [!code ++]
		TempTalkTopic("invest1", null);
		Choice("yes", delegate
		{
```

## ELEMENT

[`@@ -909,7 +909,7 @@ public void AddEncNote(UINote n, Card Card, ElementContainer.NoteMode mode = Ele`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/ELEMENT.cs#L909-L915)
```cs:line-numbers=909
					sprite = EClass.core.refs.icons.enc.card;
				}
			}
			if (thing.IsFood && IsFoodTrait) // [!code --]
			if (thing.ShowFoodEnc && IsFoodTrait) // [!code ++]
			{
				sprite = EClass.core.refs.icons.enc.traitFood;
			}
```

## FACTION

[`@@ -24,7 +24,7 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FACTION.cs#L24-L30)
```cs:line-numbers=24

	public const int bfPlain = 3600;

	public const int fTaxEvasion = 2119; // [!code --]
	public const int fLuck = 2118; // [!code ++]

	public const int fPromo = 2202;

```

[`@@ -36,17 +36,17 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FACTION.cs#L36-L52)
```cs:line-numbers=36

	public const int fMoral = 2203;

	public const int fElec = 2201; // [!code --]
 // [!code --]
	public const int fSoil = 2200;

	public const int fHeirloom = 2120;

	public const int fLoyal = 2117; // [!code --]
	public const int fTaxEvasion = 2119; // [!code ++]
 // [!code ++]
	public const int fEducation = 2116; // [!code ++]

	public const int bfTranquil = 3703;

	public const int fLuck = 2118; // [!code --]
	public const int fLoyal = 2117; // [!code ++]

	public const int fRation = 2207;

```

[`@@ -60,7 +60,7 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FACTION.cs#L60-L66)
```cs:line-numbers=60

	public const int actBuildRecipe = 4005;

	public const int fEducation = 2116; // [!code --]
	public const int fAdmin = 2115; // [!code ++]

	public const int actBuildCollect = 4004;

```

[`@@ -104,18 +104,18 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FACTION.cs#L104-L121)
```cs:line-numbers=104

	public const int bfHunt = 3705;

	public const int fAdmin = 2115; // [!code --]
 // [!code --]
	public const int fConstruction = 2003;

	public const int fElec = 2201; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[52]
	{
		3702, 3701, 3700, 3500, 3605, 3604, 3603, 3602, 3601, 3600,
		2119, 2202, 2206, 2205, 2204, 2203, 2201, 2200, 2120, 2117, // [!code --]
		3703, 2118, 2207, 3704, 3803, 3706, 4006, 4005, 2116, 4004, // [!code --]
		2118, 2202, 2206, 2205, 2204, 2203, 2200, 2120, 2119, 2116, // [!code ++]
		3703, 2117, 2207, 3704, 3803, 3706, 4006, 4005, 2115, 4004, // [!code ++]
		4003, 4002, 4001, 4000, 3900, 3805, 3804, 3802, 3801, 3800,
		3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707, 3705,
		2115, 2003 // [!code --]
		2003, 2201 // [!code ++]
	};
}
public class Faction : EClass
```

## FEAT

[`@@ -27,10 +27,10 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FEAT.cs#L27-L36)
```cs:line-numbers=27

	public const int featSPD = 1629;

	public const int featSorter = 1643; // [!code --]
 // [!code --]
	public const int featLuck = 1628;

	public const int featCHA = 1627; // [!code ++]
 // [!code ++]
	public const int featWIL = 1626;

	public const int featMAG = 1625;
```

[`@@ -51,13 +51,15 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FEAT.cs#L51-L63)
```cs:line-numbers=51

	public const int featLife = 1610;

	public const int featHealer = 1422; // [!code ++]
 // [!code ++]
	public const int featManaMeat = 1421;

	public const int featCHA = 1627; // [!code --]
	public const int featSorter = 1643; // [!code ++]

	public const int featBodyParts = 1644; // [!code --]
	public const int featExecutioner = 1420; // [!code ++]

	public const int featParty = 1645; // [!code --]
	public const int featBodyParts = 1644; // [!code ++]

	public const int featLonelySoul = 1646;

```

[`@@ -111,7 +113,7 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FEAT.cs#L111-L117)
```cs:line-numbers=111

	public const int featSummoner = 1647;

	public const int featExecutioner = 1420; // [!code --]
	public const int featParty = 1645; // [!code ++]

	public const int featMilitant = 1419;

```

[`@@ -229,20 +231,20 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FEAT.cs#L229-L248)
```cs:line-numbers=229

	public const int featEarthStrength = 1411;

	public static readonly int[] IDS = new int[113] // [!code --]
	public static readonly int[] IDS = new int[114] // [!code ++]
	{
		1214, 1642, 1641, 1640, 1636, 1635, 1634, 1633, 1632, 1631,
		1630, 1629, 1643, 1628, 1626, 1625, 1624, 1623, 1622, 1621, // [!code --]
		1620, 1612, 1611, 1610, 1421, 1627, 1644, 1645, 1646, 1213, // [!code --]
		1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208, 1209, // [!code --]
		1210, 1211, 1658, 1657, 1656, 1655, 1654, 1653, 1652, 1651, // [!code --]
		1650, 1649, 1648, 1647, 1420, 1419, 1212, 1417, 1238, 1239, // [!code --]
		1300, 1305, 1310, 1315, 1320, 1325, 1335, 1237, 1340, 1350, // [!code --]
		1355, 1400, 1401, 1402, 1403, 1404, 1405, 1406, 1345, 1407, // [!code --]
		1236, 1234, 1418, 1216, 1217, 1218, 1219, 1220, 1221, 1222, // [!code --]
		1223, 1235, 1224, 1226, 1227, 1215, 1228, 1229, 1230, 1231, // [!code --]
		1232, 1233, 1225, 1408, 1330, 1410, 1409, 1416, 1414, 1415, // [!code --]
		1412, 1413, 1411 // [!code --]
		1630, 1629, 1628, 1627, 1626, 1625, 1624, 1623, 1622, 1621, // [!code ++]
		1620, 1612, 1611, 1610, 1422, 1421, 1643, 1420, 1644, 1646, // [!code ++]
		1213, 1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208, // [!code ++]
		1209, 1210, 1211, 1658, 1657, 1656, 1655, 1654, 1653, 1652, // [!code ++]
		1651, 1650, 1649, 1648, 1647, 1645, 1419, 1212, 1417, 1238, // [!code ++]
		1239, 1300, 1305, 1310, 1315, 1320, 1325, 1335, 1237, 1340, // [!code ++]
		1350, 1355, 1400, 1401, 1402, 1403, 1404, 1405, 1406, 1345, // [!code ++]
		1407, 1236, 1234, 1418, 1216, 1217, 1218, 1219, 1220, 1221, // [!code ++]
		1222, 1223, 1235, 1224, 1226, 1227, 1215, 1228, 1229, 1230, // [!code ++]
		1231, 1232, 1233, 1225, 1408, 1330, 1410, 1409, 1416, 1414, // [!code ++]
		1415, 1412, 1413, 1411 // [!code ++]
	};
}
public class Feat : Element
```

## FOOD

[`@@ -1,9 +1,5 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FOOD.cs#L1-L9)
```cs:line-numbers=1
public class FOOD
{
	public const int food_god = 758; // [!code --]
 // [!code --]
	public const int justcooked = 757; // [!code --]
 // [!code --]
	public const int loseWeight = 706;

	public const int gainWeight = 705;
```

[`@@ -14,9 +10,13 @@ public class FOOD`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/FOOD.cs#L14-L22)
```cs:line-numbers=14

	public const int food_poison = 702;

	public const int food_cat = 701; // [!code --]
	public const int food_god = 758; // [!code ++]

	public const int food_CHA = 700;

	public static readonly int[] IDS = new int[9] { 758, 757, 706, 705, 704, 703, 702, 701, 700 }; // [!code --]
	public const int justcooked = 757; // [!code ++]
 // [!code ++]
	public const int food_cat = 701; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[9] { 706, 705, 704, 703, 702, 758, 700, 757, 701 }; // [!code ++]
}
```

## GuildMerchant

[`@@ -4,12 +4,12 @@ public class GuildMerchant : Guild`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/GuildMerchant.cs#L4-L15)
```cs:line-numbers=4

	public override bool IsCurrentZone => EClass._zone.id == "guild_merchant";

	public int InvestPrice(int a) // [!code --]
	public long InvestPrice(long a) // [!code ++]
	{
		if (!base.IsMember)
		{
			return a;
		}
		return (int)((long)a * 100L / (110 + relation.rank / 2)); // [!code --]
		return a * 100 / (110 + relation.rank / 2); // [!code ++]
	}
}
```

## InvOwnerDeliver

[`@@ -40,6 +40,10 @@ public override bool ShouldShowGuide(Thing t)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/InvOwnerDeliver.cs#L40-L45)
```cs:line-numbers=40
	case Mode.Bank:
		return t.id == "money";
	case Mode.Crop:
		if (!t.GetBool(115)) // [!code ++]
		{ // [!code ++]
			return false; // [!code ++]
		} // [!code ++]
		if (!(t.category.id == "vegi") && !(t.category.id == "fruit"))
		{
			return t.category.id == "mushroom";
```

## MUTATION

[`@@ -1,5 +1,7 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/MUTATION.cs#L1-L5)
```cs:line-numbers=1
public class MUTATION
{
	public const int mutationRegenN = 1517; // [!code ++]
 // [!code ++]
	public const int mutationStrN = 1521;

	public const int mutationStr = 1520;
```

[`@@ -10,8 +12,6 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/MUTATION.cs#L10-L17)
```cs:line-numbers=10

	public const int mutationEye = 1512;

	public const int mutationDexN = 1515; // [!code --]
 // [!code --]
	public const int mutationDex = 1514;

	public const int mutationEyeN = 1513;
```

[`@@ -22,11 +22,11 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/MUTATION.cs#L22-L32)
```cs:line-numbers=22

	public const int mutationCha = 1522;

	public const int mutationRegen = 1516; // [!code --]
	public const int mutationDexN = 1515; // [!code ++]

	public const int mutationChaN = 1523;

	public const int mutationRegenN = 1517; // [!code --]
	public const int mutationRegen = 1516; // [!code ++]

	public const int mutationBrainN = 1525;

```

[`@@ -78,8 +78,8 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/MUTATION.cs#L78-L85)
```cs:line-numbers=78

	public static readonly int[] IDS = new int[38]
	{
		1521, 1520, 1519, 1518, 1512, 1515, 1514, 1513, 1511, 1510, // [!code --]
		1522, 1516, 1523, 1517, 1525, 1565, 1524, 1563, 1562, 1561, // [!code --]
		1517, 1521, 1520, 1519, 1518, 1512, 1514, 1513, 1511, 1510, // [!code ++]
		1522, 1515, 1523, 1516, 1525, 1565, 1524, 1563, 1562, 1561, // [!code ++]
		1560, 1559, 1558, 1557, 1556, 1555, 1564, 1553, 1526, 1554,
		1528, 1529, 1530, 1527, 1550, 1551, 1552, 1531
	};
```

## SKILL

[`@@ -8,7 +8,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L8-L14)
```cs:line-numbers=8

	public const int armorLight = 120;

	public const int fishing = 245; // [!code --]
	public const int fireproof = 50; // [!code ++]

	public const int weaponScythe = 110;

```

[`@@ -20,7 +20,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L20-L26)
```cs:line-numbers=20

	public const int weaponBlunt = 111;

	public const int tactics = 132; // [!code --]
	public const int fishing = 245; // [!code ++]

	public const int evasion = 150;

```

[`@@ -46,7 +46,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L46-L52)
```cs:line-numbers=46

	public const int spotting = 210;

	public const int fireproof = 50; // [!code --]
	public const int weightlifting = 207; // [!code ++]

	public const int swimming = 200;

```

[`@@ -132,7 +132,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L132-L138)
```cs:line-numbers=132

	public const int gathering = 250;

	public const int weightlifting = 207; // [!code --]
	public const int tactics = 132; // [!code ++]

	public const int blacksmith = 256;

```

[`@@ -142,8 +142,6 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L142-L149)
```cs:line-numbers=142

	public const int eleNerve = 918;

	public const int eleHoly = 919; // [!code --]
 // [!code --]
	public const int eleChaos = 920;

	public const int eleMagic = 921;
```

[`@@ -164,11 +162,11 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L164-L174)
```cs:line-numbers=164

	public const int resLightning = 952;

	public const int elePoison = 915; // [!code --]
 // [!code --]
	public const int resDarkness = 953;

	public const int resPoison = 955; // [!code --]
	public const int elePoison = 915; // [!code ++]
 // [!code ++]
	public const int resMind = 954; // [!code ++]

	public const int resNether = 956;

```

[`@@ -192,19 +190,21 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L192-L210)
```cs:line-numbers=192

	public const int resDecay = 970;

	public const int resDamage = 971; // [!code ++]
 // [!code ++]
	public const int resCurse = 972;

	public const int carpentry = 255;

	public const int resMind = 954; // [!code --]
	public const int resPoison = 955; // [!code ++]

	public const int eleMind = 914;

	public const int resDamage = 971; // [!code --]
	public const int eleHoly = 919; // [!code ++]

	public const int eleLightning = 912;

	public const int eleDarkness = 913; // [!code --]
	public const int alchemy = 257; // [!code ++]

	public const int sculpture = 258;

```

[`@@ -224,7 +224,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L224-L230)
```cs:line-numbers=224

	public const int cooking = 287;

	public const int building = 288; // [!code --]
	public const int eleDarkness = 913; // [!code ++]

	public const int appraising = 289;

```

[`@@ -234,23 +234,25 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L234-L256)
```cs:line-numbers=234

	public const int investing = 292;

	public const int alchemy = 257; // [!code --]
	public const int building = 288; // [!code ++]

	public const int regeneration = 300;

	public const int eleCold = 911;

	public const int eleFire = 910; // [!code --]
	public const int disarmTrap = 293; // [!code ++]

	public const int env = 313;

	public const int fun = 312; // [!code ++]
 // [!code ++]
	public const int bladder = 311;

	public const int hygine = 310;

	public const int memorization = 307; // [!code --]
	public const int eleFire = 910; // [!code ++]

	public const int fun = 312; // [!code --]
	public const int faith = 306; // [!code ++]

	public const int magicDevice = 305;

```

[`@@ -260,28 +262,26 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SKILL.cs#L260-L287)
```cs:line-numbers=260

	public const int controlmana = 302;

	public const int meditation = 301; // [!code --]
 // [!code --]
	public const int faith = 306; // [!code --]
	public const int memorization = 307; // [!code ++]

	public const int disarmTrap = 293; // [!code --]
	public const int meditation = 301; // [!code ++]

	public static readonly int[] IDS = new int[133]
	{
		130, 123, 122, 120, 245, 110, 109, 131, 51, 111, // [!code --]
		132, 150, 134, 242, 241, 240, 237, 235, 230, 227, // [!code --]
		226, 220, 210, 50, 200, 152, 151, 135, 133, 225, // [!code --]
		130, 123, 122, 120, 50, 110, 109, 131, 51, 111, // [!code ++]
		245, 150, 134, 242, 241, 240, 237, 235, 230, 227, // [!code ++]
		226, 220, 210, 207, 200, 152, 151, 135, 133, 225, // [!code ++]
		100, 107, 72, 71, 70, 68, 67, 66, 73, 65,
		62, 61, 60, 57, 56, 55, 64, 108, 74, 76,
		106, 105, 104, 103, 102, 101, 75, 93, 91, 90,
		80, 79, 78, 77, 92, 250, 207, 256, 916, 917, // [!code --]
		918, 919, 920, 921, 922, 923, 924, 925, 926, 950, // [!code --]
		951, 952, 915, 953, 955, 956, 957, 958, 959, 960, // [!code --]
		961, 962, 963, 964, 965, 970, 972, 255, 954, 914, // [!code --]
		971, 912, 913, 258, 259, 260, 261, 280, 281, 285, // [!code --]
		286, 287, 288, 289, 290, 291, 292, 257, 300, 911, // [!code --]
		910, 313, 311, 310, 307, 312, 305, 304, 303, 302, // [!code --]
		301, 306, 293 // [!code --]
		80, 79, 78, 77, 92, 250, 132, 256, 916, 917, // [!code ++]
		918, 920, 921, 922, 923, 924, 925, 926, 950, 951, // [!code ++]
		952, 953, 915, 954, 956, 957, 958, 959, 960, 961, // [!code ++]
		962, 963, 964, 965, 970, 971, 972, 255, 955, 914, // [!code ++]
		919, 912, 257, 258, 259, 260, 261, 280, 281, 285, // [!code ++]
		286, 287, 913, 289, 290, 291, 292, 288, 300, 911, // [!code ++]
		293, 313, 312, 311, 310, 910, 306, 305, 304, 303, // [!code ++]
		302, 307, 301 // [!code ++]
	};
}
public class Skill : Element
```

## SLOT

[`@@ -1,6 +1,12 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SLOT.cs#L1-L6)
```cs:line-numbers=1
public class SLOT
{
	public const int range = 41; // [!code --]
	public const int toolbelt = 44; // [!code ++]
 // [!code ++]
	public const int torso = 32; // [!code ++]
 // [!code ++]
	public const int ammo = 42; // [!code ++]
 // [!code ++]
	public const int foot = 39; // [!code ++]

	public const int lightsource = 45;

```

[`@@ -8,33 +14,27 @@ public class SLOT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SLOT.cs#L8-L40)
```cs:line-numbers=8

	public const int arm = 34;

	public const int neck = 31; // [!code --]
 // [!code --]
	public const int toolbelt = 44; // [!code --]
 // [!code --]
	public const int hand = 35;

	public const int back = 33; // [!code --]
 // [!code --]
	public const int waist = 37;

	public const int head = 30; // [!code --]
 // [!code --]
	public const int tool = 40;

	public const int token = 43; // [!code --]
 // [!code --]
	public const int foot = 39; // [!code --]
	public const int back = 33; // [!code ++]

	public const int ammo = 42; // [!code --]
	public const int neck = 31; // [!code ++]

	public const int finger = 36;

	public const int torso = 32; // [!code --]
	public const int head = 30; // [!code ++]
 // [!code ++]
	public const int token = 43; // [!code ++]
 // [!code ++]
	public const int range = 41; // [!code ++]

	public static readonly int[] IDS = new int[16]
	{
		41, 45, 38, 34, 31, 44, 35, 33, 37, 30, // [!code --]
		40, 43, 39, 42, 36, 32 // [!code --]
		44, 32, 42, 39, 45, 38, 34, 35, 37, 40, // [!code ++]
		33, 31, 36, 30, 43, 41 // [!code ++]
	};
}
```

## SPELL

[`@@ -1,20 +1,12 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L1-L20)
```cs:line-numbers=1
public class SPELL
{
	public const int funnel_Sound = 50607; // [!code --]
 // [!code --]
	public const int hand_Sound = 50407; // [!code --]
 // [!code --]
	public const int miasma_Sound = 50707; // [!code --]
 // [!code --]
	public const int bolt_Sound = 50307; // [!code --]
 // [!code --]
	public const int weapon_Sound = 50807; // [!code --]
	public const int weapon_Poison = 50805; // [!code ++]

	public const int puddle_Sound = 50907; // [!code --]
	public const int ball_Nerve = 50108; // [!code ++]

	public const int arrow_Sound = 50507; // [!code --]
	public const int puddle_Mind = 50904; // [!code ++]

	public const int miasma_Nerve = 50708; // [!code --]
	public const int weapon_Mind = 50804; // [!code ++]

	public const int bolt_Nerve = 50308;

```

[`@@ -24,56 +16,52 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L24-L79)
```cs:line-numbers=24

	public const int funnel_Nerve = 50608;

	public const int miasma_Nerve = 50708; // [!code ++]
 // [!code ++]
	public const int weapon_Nerve = 50808;

	public const int puddle_Nerve = 50908;

	public const int sword_Nerve = 51008; // [!code ++]
 // [!code ++]
	public const int ball_Holy = 50109;

	public const int bolt_Holy = 50309; // [!code --]
	public const int miasma_Mind = 50704; // [!code ++]

	public const int arrow_Holy = 50509; // [!code --]
	public const int sword_Holy = 51009; // [!code ++]

	public const int ball_Nerve = 50108; // [!code --]
	public const int bolt_Holy = 50309; // [!code ++]

	public const int hand_Holy = 50409;

	public const int hand_Poison = 50405; // [!code --]
 // [!code --]
	public const int puddle_Nether = 50906; // [!code --]
	public const int arrow_Holy = 50509; // [!code ++]

	public const int funnel_Holy = 50609;

	public const int bolt_Mind = 50304; // [!code --]
 // [!code --]
	public const int hand_Mind = 50404; // [!code --]
 // [!code --]
	public const int arrow_Mind = 50504; // [!code --]
 // [!code --]
	public const int funnel_Mind = 50604; // [!code --]
 // [!code --]
	public const int miasma_Mind = 50704; // [!code --]
 // [!code --]
	public const int weapon_Mind = 50804; // [!code --]
	public const int miasma_Holy = 50709; // [!code ++]

	public const int puddle_Mind = 50904; // [!code --]
	public const int weapon_Holy = 50809; // [!code ++]

	public const int ball_Poison = 50105; // [!code --]
	public const int puddle_Holy = 50909; // [!code ++]

	public const int bolt_Poison = 50305; // [!code --]
	public const int sword_Sound = 51007; // [!code ++]

	public const int ball_Sound = 50107; // [!code --]
	public const int puddle_Sound = 50907; // [!code ++]

	public const int arrow_Poison = 50505; // [!code --]
	public const int miasma_Sound = 50707; // [!code ++]

	public const int miasma_Poison = 50705;

	public const int weapon_Poison = 50805; // [!code --]
 // [!code --]
	public const int puddle_Poison = 50905;

	public const int funnel_Poison = 50605; // [!code ++]
 // [!code ++]
	public const int sword_Poison = 51005; // [!code ++]
 // [!code ++]
	public const int ball_Nether = 50106;

	public const int arrow_Poison = 50505; // [!code ++]
 // [!code ++]
	public const int bolt_Nether = 50306;

	public const int hand_Nether = 50406;
```

[`@@ -84,22 +72,42 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L84-L105)
```cs:line-numbers=84

	public const int miasma_Nether = 50706;

	public const int weapon_Nether = 50806; // [!code --]
	public const int weapon_Sound = 50807; // [!code ++]

	public const int funnel_Poison = 50605; // [!code --]
	public const int hand_Poison = 50405; // [!code ++]

	public const int miasma_Holy = 50709; // [!code --]
	public const int puddle_Nether = 50906; // [!code ++]

	public const int miasma_Acid = 50713; // [!code --]
	public const int sword_Nether = 51006; // [!code ++]

	public const int puddle_Holy = 50909; // [!code --]
	public const int ball_Sound = 50107; // [!code ++]

	public const int ball_Mind = 50104; // [!code --]
	public const int bolt_Poison = 50305; // [!code ++]

	public const int weapon_Acid = 50813; // [!code --]
	public const int bolt_Sound = 50307; // [!code ++]
 // [!code ++]
	public const int ball_Poison = 50105; // [!code ++]
 // [!code ++]
	public const int sword_Mind = 51004; // [!code ++]
 // [!code ++]
	public const int hand_Sound = 50407; // [!code ++]
 // [!code ++]
	public const int arrow_Sound = 50507; // [!code ++]
 // [!code ++]
	public const int funnel_Sound = 50607; // [!code ++]
 // [!code ++]
	public const int weapon_Nether = 50806; // [!code ++]
 // [!code ++]
	public const int funnel_Mind = 50604; // [!code ++]
 // [!code ++]
	public const int miasma_Acid = 50713; // [!code ++]
 // [!code ++]
	public const int bolt_Chaos = 50310; // [!code ++]

	public const int puddle_Acid = 50913;

	public const int sword_Acid = 51013; // [!code ++]
 // [!code ++]
	public const int ball_Cut = 50114;

	public const int bolt_Cut = 50314;
```

[`@@ -116,6 +124,8 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L116-L121)
```cs:line-numbers=116

	public const int puddle_Cut = 50914;

	public const int sword_Cut = 51014; // [!code ++]
 // [!code ++]
	public const int ball_Impact = 50115;

	public const int bolt_Impact = 50315;
```

[`@@ -132,6 +142,8 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L132-L137)
```cs:line-numbers=132

	public const int puddle_Impact = 50915;

	public const int sword_Impact = 51015; // [!code ++]
 // [!code ++]
	public const int ball_Void = 50116;

	public const int bolt_Void = 50316;
```

[`@@ -144,17 +156,15 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L144-L160)
```cs:line-numbers=144

	public const int miasma_Void = 50716;

	public const int funnel_Acid = 50613; // [!code --]
 // [!code --]
	public const int weapon_Holy = 50809; // [!code --]
 // [!code --]
	public const int arrow_Acid = 50513; // [!code --]
	public const int weapon_Void = 50816; // [!code ++]

	public const int bolt_Acid = 50313; // [!code --]
	public const int weapon_Acid = 50813; // [!code ++]

	public const int ball_Chaos = 50110;

	public const int bolt_Chaos = 50310; // [!code --]
	public const int funnel_Acid = 50613; // [!code ++]
 // [!code ++]
	public const int hand_Acid = 50413; // [!code ++]

	public const int hand_Chaos = 50410;

```

[`@@ -168,6 +178,8 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L168-L173)
```cs:line-numbers=168

	public const int puddle_Chaos = 50910;

	public const int sword_Chaos = 51010; // [!code ++]
 // [!code ++]
	public const int ball_Magic = 50111;

	public const int bolt_Magic = 50311;
```

[`@@ -184,6 +196,8 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L184-L189)
```cs:line-numbers=184

	public const int puddle_Magic = 50911;

	public const int sword_Magic = 51011; // [!code ++]
 // [!code ++]
	public const int ball_Ether = 50112;

	public const int bolt_Ether = 50312;
```

[`@@ -200,19 +214,19 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L200-L218)
```cs:line-numbers=200

	public const int puddle_Ether = 50912;

	public const int ball_Acid = 50113; // [!code --]
	public const int sword_Ether = 51012; // [!code ++]

	public const int hand_Acid = 50413; // [!code --]
	public const int ball_Acid = 50113; // [!code ++]

	public const int puddle_Darkness = 50903; // [!code --]
	public const int bolt_Acid = 50313; // [!code ++]

	public const int ball_Fire = 50100; // [!code --]
	public const int arrow_Acid = 50513; // [!code ++]

	public const int miasma_Darkness = 50703; // [!code --]
	public const int arrow_Mind = 50504; // [!code ++]

	public const int SpMutation = 8380; // [!code --]
	public const int sword_Fire = 51000; // [!code ++]

	public const int SpWish = 8390; // [!code --]
	public const int bolt_Mind = 50304; // [!code ++]

	public const int SpHealLight = 8400;

```

[`@@ -260,13 +274,21 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L260-L272)
```cs:line-numbers=260

	public const int SpSilence = 8700;

	public const int SpLevitate = 8300; // [!code --]
	public const int SpWeakness = 8702; // [!code ++]

	public const int SpReconstruction = 8288; // [!code --]
	public const int SpWeakResEle = 8704; // [!code ++]

	public const int SpChangeMaterialG = 8286; // [!code --]
	public const int SpNightmare = 8705; // [!code ++]

	public const int SpChangeMaterial = 8285; // [!code --]
	public const int SpBane = 8706; // [!code ++]
 // [!code ++]
	public const int SpWish = 8390; // [!code ++]
 // [!code ++]
	public const int SpMutation = 8380; // [!code ++]
 // [!code ++]
	public const int SpLevitate = 8300; // [!code ++]
 // [!code ++]
	public const int SpReconstruction = 8288; // [!code ++]

	public const int ball_ = 7001;

```

[`@@ -292,11 +314,11 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L292-L302)
```cs:line-numbers=292

	public const int SpGate = 8202;

	public const int SpWeakness = 8702; // [!code --]
 // [!code --]
	public const int SpReturn = 8220;

	public const int SpIdentify = 8230; // [!code --]
	public const int SpGravity = 8708; // [!code ++]
 // [!code ++]
	public const int SpEvac = 8221; // [!code ++]

	public const int SpIdentifyG = 8232;

```

[`@@ -320,23 +342,17 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L320-L342)
```cs:line-numbers=320

	public const int SpChangeMaterialLesser = 8284;

	public const int SpEvac = 8221; // [!code --]
 // [!code --]
	public const int SpWeakResEle = 8704; // [!code --]
 // [!code --]
	public const int SpNightmare = 8705; // [!code --]
 // [!code --]
	public const int SpBane = 8706; // [!code --]
	public const int SpChangeMaterial = 8285; // [!code ++]

	public const int arrow_Fire = 50500; // [!code --]
	public const int SpChangeMaterialG = 8286; // [!code ++]

	public const int funnel_Fire = 50600; // [!code --]
	public const int SpIdentify = 8230; // [!code ++]

	public const int miasma_Fire = 50700; // [!code --]
	public const int SpSpeedDown = 8710; // [!code ++]

	public const int weapon_Fire = 50800; // [!code --]
	public const int SpTelepathy = 8770; // [!code ++]

	public const int puddle_Fire = 50900; // [!code --]
	public const int SpInvisibility = 8775; // [!code ++]

	public const int ball_Cold = 50101;

```

[`@@ -352,24 +368,28 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L352-L375)
```cs:line-numbers=352

	public const int weapon_Cold = 50801;

	public const int hand_Fire = 50400; // [!code --]
 // [!code --]
	public const int puddle_Cold = 50901;

	public const int sword_Cold = 51001; // [!code ++]
 // [!code ++]
	public const int ball_Lightning = 50102; // [!code ++]
 // [!code ++]
	public const int bolt_Lightning = 50302;

	public const int hand_Lightning = 50402;

	public const int arrow_Lightning = 50502;

	public const int funnel_Lightning = 50602; // [!code --]
	public const int puddle_Fire = 50900; // [!code ++]

	public const int miasma_Lightning = 50702; // [!code --]
	public const int funnel_Lightning = 50602; // [!code ++]

	public const int weapon_Lightning = 50802;

	public const int puddle_Lightning = 50902;

	public const int sword_Lightning = 51002; // [!code ++]
 // [!code ++]
	public const int ball_Darkness = 50103;

	public const int bolt_Darkness = 50303;
```

[`@@ -380,21 +400,23 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L380-L400)
```cs:line-numbers=380

	public const int funnel_Darkness = 50603;

	public const int ball_Lightning = 50102; // [!code --]
	public const int miasma_Darkness = 50703; // [!code ++]

	public const int weapon_Darkness = 50803;

	public const int bolt_Fire = 50300; // [!code --]
	public const int puddle_Darkness = 50903; // [!code ++]

	public const int SpDrawBacker = 9503; // [!code --]
	public const int sword_Darkness = 51003; // [!code ++]

	public const int SpGravity = 8708; // [!code --]
	public const int ball_Mind = 50104; // [!code ++]

	public const int SpSpeedDown = 8710; // [!code --]
	public const int miasma_Lightning = 50702; // [!code ++]

	public const int SpTelepathy = 8770; // [!code --]
	public const int hand_Mind = 50404; // [!code ++]

	public const int SpInvisibility = 8775; // [!code --]
	public const int weapon_Fire = 50800; // [!code ++]
 // [!code ++]
	public const int funnel_Fire = 50600; // [!code ++]

	public const int SpSeeInvisible = 8776;

```

[`@@ -412,19 +434,19 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L412-L430)
```cs:line-numbers=412

	public const int SpSummonUndeadSister = 9001;

	public const int weapon_Void = 50816; // [!code --]
 // [!code --]
	public const int SpSummonFire = 9002;

	public const int SpSummonTentacle = 9003; // [!code ++]
 // [!code ++]
	public const int SpSummonMonster = 9004;

	public const int SpSummonPawn = 9005;

	public const int SpSummonYeek = 9006;

	public const int SpSummonOrc = 9007; // [!code --]
	public const int miasma_Fire = 50700; // [!code ++]

	public const int SpSummonShadow = 9050; // [!code --]
	public const int SpSummonOrc = 9007; // [!code ++]

	public const int SpMeteor = 9150;

```

[`@@ -440,35 +462,48 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/SPELL.cs#L440-L474)
```cs:line-numbers=440

	public const int SpDrawMetal = 9502;

	public const int SpSummonTentacle = 9003; // [!code --]
	public const int SpDrawBacker = 9503; // [!code ++]
 // [!code ++]
	public const int ball_Fire = 50100; // [!code ++]

	public const int puddle_Void = 50916;

	public static readonly int[] IDS = new int[222] // [!code --]
	public const int bolt_Fire = 50300; // [!code ++]
 // [!code ++]
	public const int hand_Fire = 50400; // [!code ++]
 // [!code ++]
	public const int arrow_Fire = 50500; // [!code ++]
 // [!code ++]
	public const int SpSummonShadow = 9050; // [!code ++]
 // [!code ++]
	public const int sword_Void = 51016; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[239] // [!code ++]
	{
		50607, 50407, 50707, 50307, 50807, 50907, 50507, 50708, 50308, 50408, // [!code --]
		50508, 50608, 50808, 50908, 50109, 50309, 50509, 50108, 50409, 50405, // [!code --]
		50906, 50609, 50304, 50404, 50504, 50604, 50704, 50804, 50904, 50105, // [!code --]
		50305, 50107, 50505, 50705, 50805, 50905, 50106, 50306, 50406, 50506, // [!code --]
		50606, 50706, 50806, 50605, 50709, 50713, 50909, 50104, 50813, 50913, // [!code --]
		50114, 50314, 50414, 50514, 50614, 50714, 50814, 50914, 50115, 50315, // [!code --]
		50415, 50515, 50615, 50715, 50815, 50915, 50116, 50316, 50416, 50516, // [!code --]
		50616, 50716, 50613, 50809, 50513, 50313, 50110, 50310, 50410, 50510, // [!code --]
		50610, 50710, 50810, 50910, 50111, 50311, 50411, 50511, 50611, 50711, // [!code --]
		50811, 50911, 50112, 50312, 50412, 50512, 50612, 50712, 50812, 50912, // [!code --]
		50113, 50413, 50903, 50100, 50703, 8380, 8390, 8400, 8401, 8402, // [!code --]
		8403, 8404, 8405, 8406, 8430, 8450, 8470, 8471, 8480, 8490, // [!code --]
		8491, 8500, 8501, 8502, 8503, 8504, 8506, 8510, 8550, 8700, // [!code --]
		8300, 8288, 8286, 8285, 7001, 7002, 7003, 7004, 7005, 7006, // [!code --]
		7007, 7008, 7800, 8200, 8201, 8202, 8702, 8220, 8230, 8232, // [!code --]
		8240, 8241, 8250, 8251, 8255, 8256, 8260, 8280, 8281, 8284, // [!code --]
		8221, 8704, 8705, 8706, 50500, 50600, 50700, 50800, 50900, 50101, // [!code --]
		50301, 50401, 50501, 50601, 50701, 50801, 50400, 50901, 50302, 50402, // [!code --]
		50502, 50602, 50702, 50802, 50902, 50103, 50303, 50403, 50503, 50603, // [!code --]
		50102, 50803, 50300, 9503, 8708, 8710, 8770, 8775, 8776, 8780, // [!code --]
		8790, 8791, 8800, 8801, 9000, 9001, 50816, 9002, 9004, 9005, // [!code --]
		9006, 9007, 9050, 9150, 9151, 9160, 9200, 9500, 9501, 9502, // [!code --]
		9003, 50916 // [!code --]
		50805, 50108, 50904, 50804, 50308, 50408, 50508, 50608, 50708, 50808, // [!code ++]
		50908, 51008, 50109, 50704, 51009, 50309, 50409, 50509, 50609, 50709, // [!code ++]
		50809, 50909, 51007, 50907, 50707, 50705, 50905, 50605, 51005, 50106, // [!code ++]
		50505, 50306, 50406, 50506, 50606, 50706, 50807, 50405, 50906, 51006, // [!code ++]
		50107, 50305, 50307, 50105, 51004, 50407, 50507, 50607, 50806, 50604, // [!code ++]
		50713, 50310, 50913, 51013, 50114, 50314, 50414, 50514, 50614, 50714, // [!code ++]
		50814, 50914, 51014, 50115, 50315, 50415, 50515, 50615, 50715, 50815, // [!code ++]
		50915, 51015, 50116, 50316, 50416, 50516, 50616, 50716, 50816, 50813, // [!code ++]
		50110, 50613, 50413, 50410, 50510, 50610, 50710, 50810, 50910, 51010, // [!code ++]
		50111, 50311, 50411, 50511, 50611, 50711, 50811, 50911, 51011, 50112, // [!code ++]
		50312, 50412, 50512, 50612, 50712, 50812, 50912, 51012, 50113, 50313, // [!code ++]
		50513, 50504, 51000, 50304, 8400, 8401, 8402, 8403, 8404, 8405, // [!code ++]
		8406, 8430, 8450, 8470, 8471, 8480, 8490, 8491, 8500, 8501, // [!code ++]
		8502, 8503, 8504, 8506, 8510, 8550, 8700, 8702, 8704, 8705, // [!code ++]
		8706, 8390, 8380, 8300, 8288, 7001, 7002, 7003, 7004, 7005, // [!code ++]
		7006, 7007, 7008, 7800, 8200, 8201, 8202, 8220, 8708, 8221, // [!code ++]
		8232, 8240, 8241, 8250, 8251, 8255, 8256, 8260, 8280, 8281, // [!code ++]
		8284, 8285, 8286, 8230, 8710, 8770, 8775, 50101, 50301, 50401, // [!code ++]
		50501, 50601, 50701, 50801, 50901, 51001, 50102, 50302, 50402, 50502, // [!code ++]
		50900, 50602, 50802, 50902, 51002, 50103, 50303, 50403, 50503, 50603, // [!code ++]
		50703, 50803, 50903, 51003, 50104, 50702, 50404, 50800, 50600, 8776, // [!code ++]
		8780, 8790, 8791, 8800, 8801, 9000, 9001, 9002, 9003, 9004, // [!code ++]
		9005, 9006, 50700, 9007, 9150, 9151, 9160, 9200, 9500, 9501, // [!code ++]
		9502, 9503, 50100, 50916, 50300, 50400, 50500, 9050, 51016 // [!code ++]
	};
}
public class Spell : Ability
```

## Thing

[`@@ -1609,6 +1609,10 @@ public override bool CanStackTo(Thing to)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Thing.cs#L1609-L1614)
```cs:line-numbers=1609
	{
		return false;
	}
	if (base.Num + to.Num <= 0) // [!code ++]
	{ // [!code ++]
		return false; // [!code ++]
	} // [!code ++]
	bool flag = false;
	if (to.parent is Card)
	{
```

## Trait

[`@@ -1768,6 +1768,7 @@ public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Trait.cs#L1768-L1773)
```cs:line-numbers=1768
				Add("container_magic", 1, 0);
				Add("container_magic", 1, 0).ChangeMaterial("iron").idSkin = 1;
				Add("container_magic", 1, 0).ChangeMaterial("bamboo").idSkin = 2;
				Add("container_magic", 1, 0).ChangeMaterial("feywood").idSkin = 3; // [!code ++]
				Add("wrench_tent_elec", 1, 0);
				Add("wrench_tent_soil", 1, 0);
				Add("wrench_bed", 1, 0).SetNum(20);
```

## TraitBrewery

[`@@ -45,7 +45,7 @@ public override bool OnChildDecay(Card c, bool firstDecay)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/TraitBrewery.cs#L45-L51)
```cs:line-numbers=45
		{
			return true;
		}
		if (!c.IsFood && !(c.trait is TraitDrinkMilk)) // [!code --]
		if (!c.IsFood && !(c.id == "508") && !(c.id == "778") && !(c.id == "milk")) // [!code ++]
		{
			return true;
		}
```

## TraitTent

[`@@ -34,4 +34,12 @@ public override void OnChangePlaceState(PlaceState state)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/TraitTent.cs#L34-L37)
```cs:line-numbers=34
		}
		owner.ChangeWeight(num);
	}
 // [!code ++]
	public override void SetName(ref string s) // [!code ++]
	{ // [!code ++]
		if (base.zone != null && !base.zone.name.IsEmpty()) // [!code ++]
		{ // [!code ++]
			s = s + "(" + base.zone.name + ")"; // [!code ++]
		} // [!code ++]
	} // [!code ++]
}
```

## TraitTicketFurniture

[`@@ -24,7 +24,7 @@ public override void TrySetHeldAct(ActPlan p)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/TraitTicketFurniture.cs#L24-L30)
```cs:line-numbers=24
	}
	p.pos.Things.ForEach(delegate(Thing t)
	{
		if (t.IsInstalled && t.isNPCProperty && t.trait.CanBeHeld && !t.trait.IsDoor && !t.isMasked && t.source.value != 0 && (EClass._zone is Zone_LittleGarden || t.trait.CanBeDestroyed)) // [!code --]
		if (t.IsInstalled && t.isNPCProperty && t.trait.CanBeHeld && !t.trait.IsDoor && !t.isMasked && t.source.value != 0 && (EClass._zone is Zone_LittleGarden || !(t.trait is TraitNewZone))) // [!code ++]
		{
			int price = GetPrice(t) * t.Num;
			p.TrySetAct("actCollectFurniture".lang(price.ToString() ?? "", t.Name) + ((t.category.ticket >= 10) ? "ticketNotIntended".lang() : ""), delegate
```

## UIDragGridIngredients

[`@@ -43,7 +43,6 @@ public void Update()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/UIDragGridIngredients.cs#L43-L49)
```cs:line-numbers=43

	public void Refresh()
	{
		Debug.Log("Refreshing uiDragGridIngredients"); // [!code --]
		List<Thing> list = new List<Thing>();
		if (layer.owner.AllowStockIngredients && !layer.owner.owner.c_isDisableStockUse)
		{
```

## UIInventory

[`@@ -692,7 +692,7 @@ public void RefreshMenu()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/UIInventory.cs#L692-L698)
```cs:line-numbers=692
						SE.ClickOk();
					});
				}
				if (!con2.isChara && !con2.trait.IsSpecialContainer) // [!code --]
				if (!con2.isChara && (IsMagicChest || !con2.trait.IsSpecialContainer)) // [!code ++]
				{
					uIContextMenu5.AddButton("changeName", delegate
					{
```

## Zone

[`@@ -2310,6 +2310,15 @@ public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Zone.cs#L2310-L2315)
```cs:line-numbers=2310
					EClass._zone.AddCard(t2, randomSurface2).Install();
				}
			}
			num2 = 4 + EClass.rnd(5); // [!code ++]
			for (int k = 0; k < num2; k++) // [!code ++]
			{ // [!code ++]
				Point randomSurface3 = EClass._map.bounds.GetRandomSurface(centered: false, walkable: true, allowWater: true); // [!code ++]
				if (!randomSurface3.HasObj && (randomSurface3.cell.IsTopWaterAndNoSnow || EClass.rnd(6) == 0)) // [!code ++]
				{ // [!code ++]
					EClass._zone.AddCard(ThingGen.Create("70"), randomSurface3); // [!code ++]
				} // [!code ++]
			} // [!code ++]
		}
		if (EClass.rnd(8) == 0)
		{
```

[`@@ -2596,8 +2605,6 @@ public Chara SpawnMob(Point pos = null, SpawnSetting setting = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/bde311d666c1bf70b7ec28147aa9f4aa502badb4/Elin/Zone.cs#L2596-L2603)
```cs:line-numbers=2596
		num = ((dangerLv - 1) % 50 + 5) * 150 / 100;
	}
	CardRow cardRow = (setting.id.IsEmpty() ? spawnList.Select(num, setting.levelRange) : EClass.sources.cards.map[setting.id]);
	Debug.Log(cardRow); // [!code --]
	Debug.Log(cardRow.id); // [!code --]
	int num2 = ((setting.fixedLv == -1) ? cardRow.LV : setting.fixedLv);
	if (ScaleMonsterLevel)
	{
```

---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 27 files modified. 2 new files created.
version: EA 23.191 Nightly
changes: ABILITY/ActEffect/ActMelee/+ActMeleeCounter/ActMeleeParry/AttackProcess/AttackSource/CTAG/Card/Chara/+ConFractured/CoreRef/DOMAIN/ELEMENT/ENC/EffectId/FACTION/FOOD/MUTATION/SLOT/SPELL/SourceElement/ThingGen/TileType/TileTypeBridge/Trait/TraitPoina/TraitRaina/Zone_Specwing
---

# EA 23.191 Nightly

September 1, 2025

27 files modified. 2 new files created.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [ActEffect (1)](#acteffect)
```cs:no-line-numbers
public static void LoveMiracle(Chara tc, Chara c, int power, bool plus = false, BlessedState? state = null) // [!code --]
public static void LoveMiracle(Chara tc, Chara c, int power, EffectId idEffect = EffectId.Love, BlessedState? state = null) // [!code ++]
```
### [AttackProcess (2)](#attackprocess)
```cs:no-line-numbers
public static void ProcAbility(List<Element> list, Chara CC, Card TC, int bonus, bool subAttack = false) // [!code --]
public static void ProcAbility(List<Element> list, Chara CC, Card TC, int bonus, bool subAttack = false, int mtpChance = 100) // [!code ++]
```
```cs:no-line-numbers
public static void ProcAbility(Element e, Chara CC, Card TC, int bonus, bool subAttack = false) // [!code --]
public static void ProcAbility(Element e, Chara CC, Card TC, int bonus, bool subAttack = false, int mtpChance = 100) // [!code ++]
```
### [Chara (2)](#chara)
```cs:no-line-numbers
public void SetFaction(Faction f) // [!code --]
public Chara SetFaction(Faction f) // [!code ++]
```
```cs:no-line-numbers
public void SetHomeZone(Zone zone) // [!code --]
public Chara SetHomeZone(Zone zone) // [!code ++]
```
### [ThingGen (1)](#thinggen)
```cs:no-line-numbers
public static Thing CreateSpellbook(int ele, int num = 1) // [!code --]
public static Thing CreateSpellbook(int ele, int num = 1, int charge = -1) // [!code ++]
```
## ABILITY

[``](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ABILITY.cs#L2-L8)
```cs:line-numbers=2

public class ABILITY
{
	public const int ActInstall = 5046; // [!code --]
	public const int AI_Drink = 5045; // [!code ++]

	public const int ActPick = 5047;

```

[`public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ABILITY.cs#L32-L38)
```cs:line-numbers=32

	public const int AI_PassTime = 6013;

	public const int AI_Drink = 5045; // [!code --]
	public const int ActInstall = 5046; // [!code ++]

	public const int AI_SelfHarm = 6015;

```

[`public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ABILITY.cs#L254-L261)
```cs:line-numbers=254

	public static readonly int[] IDS = new int[125]
	{
		5046, 5047, 5048, 5049, 5050, 5051, 5052, 5053, 5054, 5055, // [!code --]
		6001, 6003, 6011, 6012, 6013, 5045, 6015, 6019, 6020, 6050, // [!code --]
		5045, 5047, 5048, 5049, 5050, 5051, 5052, 5053, 5054, 5055, // [!code ++]
		6001, 6003, 6011, 6012, 6013, 5046, 6015, 6019, 6020, 6050, // [!code ++]
		6400, 6410, 6420, 6450, 6500, 6601, 6602, 6603, 6604, 6610,
		6611, 6018, 6612, 5044, 5042, 5012, 5013, 5014, 5015, 5016,
		5017, 5018, 5019, 5020, 5021, 5022, 5023, 5024, 5025, 5043,
```

## ActEffect

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L56-L62)
```cs:line-numbers=56
		power = power * actref.refThing.material.hardness / 10;
	}
	string text = id.ToString();
	string text2 = (EClass.sources.calc.map.ContainsKey(text) ? text : (text.ToLower() + "_")); // [!code --]
	string text2 = (EClass.sources.calc.map.ContainsKey(text) ? text : (EClass.sources.calc.map.ContainsKey("Sp" + text) ? ("Sp" + text) : (text.ToLower() + "_"))); // [!code ++]
	foreach (Point p in points)
	{
		bool flag2 = true;
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L93-L101)
```cs:line-numbers=93
		switch (id)
		{
		case EffectId.Arrow:
		case EffectId.MoonSpear: // [!code ++]
		{
			effect = Effect.Get("spell_arrow"); // [!code --]
			effect.sr.color = elementRef.colorSprite; // [!code --]
			effect = Effect.Get((id == EffectId.MoonSpear) ? "spell_moonspear" : "spell_arrow"); // [!code ++]
			if (id == EffectId.Arrow) // [!code ++]
			{ // [!code ++]
				effect.sr.color = elementRef.colorSprite; // [!code ++]
			} // [!code ++]
			TrailRenderer componentInChildren = effect.GetComponentInChildren<TrailRenderer>();
			Color startColor = (componentInChildren.endColor = elementRef.colorSprite);
			componentInChildren.startColor = startColor;
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L139-L145)
```cs:line-numbers=139
		}
		if (effect != null)
		{
			if (id == EffectId.Arrow) // [!code --]
			if (id == EffectId.Arrow || id == EffectId.MoonSpear) // [!code ++]
			{
				TryDelay(delegate
				{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L192-L203)
```cs:line-numbers=192
			{
				continue;
			}
			if (((uint)(id - 250) <= 1u || id == EffectId.Sword) && c.isChara && CC.isChara) // [!code --]
			if ((uint)(id - 250) <= 1u || id == EffectId.Sword || id == EffectId.MoonSpear) // [!code ++]
			{
				c.Chara.RequestProtection(CC.Chara, delegate(Chara a) // [!code --]
				if (c.isChara && CC.isChara) // [!code ++]
				{
					c = a; // [!code --]
				}); // [!code --]
					c.Chara.RequestProtection(CC.Chara, delegate(Chara a) // [!code ++]
					{ // [!code ++]
						c = a; // [!code ++]
					}); // [!code ++]
				} // [!code ++]
				if (id == EffectId.MoonSpear) // [!code ++]
				{ // [!code ++]
					attackSource = AttackSource.MoonSpear; // [!code ++]
				} // [!code ++]
			}
			if (id == EffectId.Sword)
			{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L427-L436)
```cs:line-numbers=427
	{
	case EffectId.Earthquake:
	{
		List<Point> list5 = EClass._map.ListPointsInCircle(CC.pos, 12f, mustBeWalkable: false); // [!code --]
		if (list5.Count == 0) // [!code --]
		List<Point> list3 = EClass._map.ListPointsInCircle(CC.pos, 12f, mustBeWalkable: false); // [!code ++]
		if (list3.Count == 0) // [!code ++]
		{
			list5.Add(CC.pos.Copy()); // [!code --]
			list3.Add(CC.pos.Copy()); // [!code ++]
		}
		CC.Say("spell_earthquake", CC, element.Name.ToLower());
		TryDelay(delegate
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L442-L448)
```cs:line-numbers=442
			Shaker.ShakeCam("ball");
		}
		EClass.Wait(1f, CC);
		DamageEle(CC, id, power, element, list5, actRef, "spell_earthquake"); // [!code --]
		DamageEle(CC, id, power, element, list3, actRef, "spell_earthquake"); // [!code ++]
		break;
	}
	case EffectId.Meteor:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L450-L459)
```cs:line-numbers=450
		EffectMeteor.Create(cc.pos, 6, 10, delegate
		{
		});
		List<Point> list = EClass._map.ListPointsInCircle(CC.pos, 10f); // [!code --]
		if (list.Count == 0) // [!code --]
		List<Point> list2 = EClass._map.ListPointsInCircle(CC.pos, 10f); // [!code ++]
		if (list2.Count == 0) // [!code ++]
		{
			list.Add(CC.pos.Copy()); // [!code --]
			list2.Add(CC.pos.Copy()); // [!code ++]
		}
		CC.Say("spell_ball", CC, element.Name.ToLower());
		TryDelay(delegate
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L465-L471)
```cs:line-numbers=465
			Shaker.ShakeCam("ball");
		}
		EClass.Wait(1f, CC);
		DamageEle(CC, id, power, element, list, actRef, "spell_ball"); // [!code --]
		DamageEle(CC, id, power, element, list2, actRef, "spell_ball"); // [!code ++]
		return;
	}
	case EffectId.Hand:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L473-L520)
```cs:line-numbers=473
	case EffectId.DrainMana:
	case EffectId.Sword:
	{
		List<Point> list7 = new List<Point>(); // [!code --]
		list7.Add(tp.Copy()); // [!code --]
		List<Point> list4 = new List<Point>(); // [!code ++]
		list4.Add(tp.Copy()); // [!code ++]
		EClass.Wait(0.3f, CC);
		TryDelay(delegate
		{
			CC.PlaySound("spell_hand");
		});
		Chara cC = CC; // [!code --]
		EffectId id4 = id; // [!code --]
		Element e = element; // [!code --]
		ActRef actref = actRef; // [!code --]
		object lang; // [!code --]
		switch (id) // [!code --]
		{ // [!code --]
		default: // [!code --]
			lang = "spell_hand"; // [!code --]
			break; // [!code --]
		case EffectId.Sword: // [!code --]
			lang = "spell_sword"; // [!code --]
			break; // [!code --]
		case EffectId.DrainBlood: // [!code --]
		case EffectId.DrainMana: // [!code --]
			lang = ""; // [!code --]
			break; // [!code --]
		} // [!code --]
		if (!DamageEle(cC, id4, power, e, list7, actref, (string)lang)) // [!code --]
		if (!DamageEle(CC, id, power, element, list4, actRef, (id == EffectId.DrainBlood || id == EffectId.DrainMana) ? "" : ((id == EffectId.Sword) ? "spell_sword" : "spell_hand"))) // [!code ++]
		{
			CC.Say("spell_hand_miss", CC, element.Name.ToLower());
		}
		return;
	}
	case EffectId.Arrow:
	case EffectId.MoonSpear: // [!code ++]
	{
		List<Point> list4 = new List<Point>(); // [!code --]
		list4.Add(tp.Copy()); // [!code --]
		CC.Say("spell_arrow", CC, element.Name.ToLower()); // [!code --]
		List<Point> list = new List<Point>(); // [!code ++]
		list.Add(tp.Copy()); // [!code ++]
		CC.Say((id == EffectId.MoonSpear) ? "spell_spear" : "spell_arrow", CC, element.Name.ToLower()); // [!code ++]
		EClass.Wait(0.5f, CC);
		TryDelay(delegate
		{
			CC.PlaySound("spell_arrow"); // [!code --]
			CC.PlaySound((id == EffectId.MoonSpear) ? "spell_moonspear" : "spell_arrow"); // [!code ++]
		});
		DamageEle(CC, id, power, element, list4, actRef, "spell_arrow"); // [!code --]
		DamageEle(CC, id, power, element, list, actRef, (id == EffectId.MoonSpear) ? "spell_spear" : "spell_arrow"); // [!code ++]
		return;
	}
	case EffectId.Summon:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L716-L725)
```cs:line-numbers=716
	}
	case EffectId.Breathe:
	{
		List<Point> list3 = EClass._map.ListPointsInArc(CC.pos, tp, 7, 35f); // [!code --]
		if (list3.Count == 0) // [!code --]
		List<Point> list5 = EClass._map.ListPointsInArc(CC.pos, tp, 7, 35f); // [!code ++]
		if (list5.Count == 0) // [!code ++]
		{
			list3.Add(CC.pos.Copy()); // [!code --]
			list5.Add(CC.pos.Copy()); // [!code ++]
		}
		CC.Say("spell_breathe", CC, element.Name.ToLower());
		EClass.Wait(0.8f, CC);
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L731-L737)
```cs:line-numbers=731
		{
			Shaker.ShakeCam("breathe");
		}
		DamageEle(CC, id, power, element, list3, actRef, "spell_breathe"); // [!code --]
		DamageEle(CC, id, power, element, list5, actRef, "spell_breathe"); // [!code ++]
		return;
	}
	case EffectId.Scream:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L776-L785)
```cs:line-numbers=776
			}
		}
		bool flag5 = id == EffectId.Explosive || id == EffectId.Suicide;
		List<Point> list6 = EClass._map.ListPointsInCircle(cc.pos, radius2, !flag5, !flag5); // [!code --]
		if (list6.Count == 0) // [!code --]
		List<Point> list7 = EClass._map.ListPointsInCircle(cc.pos, radius2, !flag5, !flag5); // [!code ++]
		if (list7.Count == 0) // [!code ++]
		{
			list6.Add(cc.pos.Copy()); // [!code --]
			list7.Add(cc.pos.Copy()); // [!code ++]
		}
		cc.Say((id == EffectId.Suicide) ? "abSuicide" : "spell_ball", cc, element.Name.ToLower());
		EClass.Wait(0.8f, cc);
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L791-L797)
```cs:line-numbers=791
		{
			Shaker.ShakeCam("ball");
		}
		DamageEle(actRef.origin ?? cc, id, power, element, list6, actRef, (id == EffectId.Suicide) ? "suicide" : "spell_ball"); // [!code --]
		DamageEle(actRef.origin ?? cc, id, power, element, list7, actRef, (id == EffectId.Suicide) ? "suicide" : "spell_ball"); // [!code ++]
		if (id == EffectId.Suicide && CC.IsAliveInCurrentZone)
		{
			CC.Die();
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L800-L809)
```cs:line-numbers=800
	}
	case EffectId.Bolt:
	{
		List<Point> list2 = EClass._map.ListPointsInLine(CC.pos, tp, 10); // [!code --]
		if (list2.Count == 0) // [!code --]
		List<Point> list6 = EClass._map.ListPointsInLine(CC.pos, tp, 10); // [!code ++]
		if (list6.Count == 0) // [!code ++]
		{
			list2.Add(CC.pos.Copy()); // [!code --]
			list6.Add(CC.pos.Copy()); // [!code ++]
		}
		CC.Say("spell_bolt", CC, element.Name.ToLower());
		EClass.Wait(0.8f, CC);
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L815-L821)
```cs:line-numbers=815
		{
			Shaker.ShakeCam("bolt");
		}
		DamageEle(CC, id, power, element, list2, actRef, "spell_bolt"); // [!code --]
		DamageEle(CC, id, power, element, list6, actRef, "spell_bolt"); // [!code ++]
		return;
	}
	case EffectId.Bubble:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L829-L841)
```cs:line-numbers=829
		}
		tp.PlaySound("vomit");
		int num = 2 + EClass.rnd(3);
		int id2 = id switch // [!code --]
		{ // [!code --]
			EffectId.MistOfDarkness => 6,  // [!code --]
			EffectId.Bubble => 5,  // [!code --]
			EffectId.Puddle => 4,  // [!code --]
			_ => 7,  // [!code --]
		}; // [!code --]
		int id2 = ((id == EffectId.Puddle) ? 4 : ((id == EffectId.Bubble) ? 5 : ((id == EffectId.MistOfDarkness) ? 6 : 7))); // [!code ++]
		EffectId idEffect = ((id == EffectId.Bubble) ? EffectId.BallBubble : EffectId.PuddleEffect);
		Color matColor = EClass.Colors.elementColors.TryGetValue(element.source.alias);
		if (id == EffectId.Bubble && CC.id == "cancer")
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L885-L891)
```cs:line-numbers=885
			{
				CC.DoHostileAction(item2);
			}
			if (actRef.refThing == null || !(actRef.refThing.trait is TraitRod) || (uint)(id - 200) <= 4u) // [!code --]
			if (actRef.refThing == null || !(actRef.refThing.trait is TraitRod)) // [!code ++]
			{ // [!code ++]
				return; // [!code ++]
			} // [!code ++]
			EffectId effectId = id; // [!code ++]
			if ((uint)(effectId - 200) <= 4u) // [!code ++]
			{
				return;
			}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L2325-L2331)
```cs:line-numbers=2325
		}
		else
		{
			LoveMiracle(TC, CC, power, id == EffectId.LovePlus, state); // [!code --]
			LoveMiracle(TC, CC, power, id, state); // [!code ++]
		}
		break;
	case EffectId.HairGrowth:
```

[`public static void Poison(Chara tc, Chara c, int power)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L2389-L2395)
```cs:line-numbers=2389
		}
	}

	public static void LoveMiracle(Chara tc, Chara c, int power, bool plus = false, BlessedState? state = null) // [!code --]
	public static void LoveMiracle(Chara tc, Chara c, int power, EffectId idEffect = EffectId.Love, BlessedState? state = null) // [!code ++]
	{
		if (c == tc)
		{
```

[`public static void LoveMiracle(Chara tc, Chara c, int power, bool plus = false,`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActEffect.cs#L2400-L2415)
```cs:line-numbers=2400
		tc.Say("love_chara", c, tc);
	}
	tc.ModAffinity(EClass.pc, power / 4);
	if ((plus || EClass.rnd(2) != 0) && (!EClass._zone.IsUserZone || tc.IsPCFaction || !EClass.game.principal.disableUsermapBenefit)) // [!code --]
	if ((idEffect != EffectId.Love || EClass.rnd(2) != 0) && (!EClass._zone.IsUserZone || tc.IsPCFaction || !EClass.game.principal.disableUsermapBenefit)) // [!code ++]
	{
		if (!plus && EClass.rnd(2) == 0) // [!code --]
		if (idEffect == EffectId.MoonSpear && EClass.rnd(EClass.debug.enable ? 2 : 20) == 0) // [!code ++]
		{ // [!code ++]
			Thing thing = tc.MakeGene(); // [!code ++]
			tc.GiveBirth(thing, effect: true); // [!code ++]
			tc.Say("item_drop", thing); // [!code ++]
		} // [!code ++]
		else if (idEffect != EffectId.LovePlus && EClass.rnd(2) == 0) // [!code ++]
		{
			Thing c2 = tc.MakeMilk(effect: true, 1, addToZone: true, state);
			tc.Say("item_drop", c2);
		}
		else
		{
			Thing c3 = tc.MakeEgg(effect: true, 1, addToZone: true, plus ? 3 : 20, state); // [!code --]
			Thing c3 = tc.MakeEgg(effect: true, 1, addToZone: true, (idEffect == EffectId.LovePlus) ? 3 : 20, state); // [!code ++]
			tc.Say("item_drop", c3);
		}
	}
```

## ActMelee

[``](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMelee.cs#L3-L8)
```cs:line-numbers=3

public class ActMelee : ActBaseAttack
{
	public virtual bool AllowCounter => true; // [!code ++]
 // [!code ++]
	public virtual bool AllowParry => true; // [!code ++]
 // [!code ++]
	public virtual bool ShouldRollMax => false;

	public virtual float BaseDmgMTP => 1f;
```

[`public bool Attack(float dmgMulti = 1f)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMelee.cs#L126-L131)
```cs:line-numbers=126
		return true;
	}
	bool hasHit = false;
	bool hasMissed = false; // [!code ++]
	bool usedWeapon = false;
	bool usedTalisman = false;
	bool maxRoll = ShouldRollMax;
```

[`public bool Attack(float dmgMulti = 1f)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMelee.cs#L156-L166)
```cs:line-numbers=156
	{
		Act.CC.RemoveCondition<ConInvisibility>();
	}
	if (parried && orgTC.isChara && orgTC != cC && ACT.Melee.CanPerform(orgTC.Chara, cC)) // [!code --]
	if (orgTC.isChara && orgTC.ExistsOnMap && orgTC != cC && !orgTC.IsRestrainedResident && ACT.Melee.CanPerform(orgTC.Chara, cC)) // [!code ++]
	{
		new ActMeleeParry().Perform(orgTC.Chara, cC); // [!code --]
		if (parried) // [!code ++]
		{ // [!code ++]
			new ActMeleeParry().Perform(orgTC.Chara, cC); // [!code ++]
		} // [!code ++]
		else if (AllowCounter && hasMissed && !cC.HasElement(439) && orgTC.HasElement(380)) // [!code ++]
		{ // [!code ++]
			orgTC.Say("counter"); // [!code ++]
			new ActMeleeCounter().Perform(orgTC.Chara, cC); // [!code ++]
		} // [!code ++]
	}
	else if (!hasHit) // [!code --]
	if (!hasHit) // [!code ++]
	{
		Act.CC.PlaySound("miss");
	}
```

[`void Attack(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMelee.cs#L294-L312)
```cs:line-numbers=294
			Act.TC = _tc;
			Act.TP = _tp;
			AttackProcess.Current.Prepare(Act.CC, w, Act.TC, Act.TP, count);
			int num5 = 1; // [!code --]
			if (AllowParry && !Act.TC.IsDisabled && !Act.TC.IsRestrainedResident) // [!code ++]
			{ // [!code ++]
				int num5 = Act.TC.Evalue(437); // [!code ++]
				if (num5 > 0 && !Act.CC.HasElement(439)) // [!code ++]
				{ // [!code ++]
					int num6 = EClass.curve(5 + num5 / 3, 10, 3, 70); // [!code ++]
					num6 = num6 * 100 / (int)Mathf.Clamp((float)AttackProcess.Current.weaponSkill.Value / (float)Act.TC.Evalue(123) * 100f, 50f, 150f); // [!code ++]
					if (EClass.rnd(100) < num6) // [!code ++]
					{ // [!code ++]
						Act.TC.Say("parry"); // [!code ++]
						Act.TC.PlaySound("parry"); // [!code ++]
						parried = true; // [!code ++]
						return; // [!code ++]
					} // [!code ++]
				} // [!code ++]
			} // [!code ++]
			int num7 = 1; // [!code ++]
			if (chaser > 0)
			{
				for (int j = 0; j < 10; j++)
				{
					if (chaser > EClass.rnd(4 + (int)Mathf.Pow(4f, j + 2)))
					{
						num5++; // [!code --]
						num7++; // [!code ++]
					}
				}
			}
			bool flag = false;
			for (int k = 0; k < num5; k++) // [!code --]
			for (int k = 0; k < num7; k++) // [!code ++]
			{
				if (!Act.CC.IsAliveInCurrentZone)
				{
```

[`void Attack(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMelee.cs#L321-L332)
```cs:line-numbers=321
					Act.CC.Say("attack_chaser");
				}
				flag = AttackProcess.Current.Perform(count, hasHit, dmgMulti * mtp * BaseDmgMTP, maxRoll, subAttack);
				if (!flag && frustration > 0 && 10f + 2f * Mathf.Sqrt(frustration) > (float)EClass.rnd(100)) // [!code --]
				if (!flag && frustration > 0 && !Act.TC.HasElement(439) && 10f + 2f * Mathf.Sqrt(frustration) > (float)EClass.rnd(100)) // [!code ++]
				{
					AttackProcess.Current.critFury = true;
					flag = AttackProcess.Current.Perform(count, hasHit, dmgMulti * mtp, maxRoll, subAttack);
					AttackProcess.Current.critFury = false;
				}
				if (flag) // [!code ++]
				{ // [!code ++]
					hasHit = true; // [!code ++]
				} // [!code ++]
				else // [!code ++]
				{ // [!code ++]
					hasMissed = true; // [!code ++]
				} // [!code ++]
				if (flag || !Act.CC.IsAliveInCurrentZone || !Act.TC.IsAliveInCurrentZone)
				{
					break;
```

[`void Attack(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMelee.cs#L409-L417)
```cs:line-numbers=409
			}
			if (Act.TC.isChara && !Act.TC.HasCondition<ConGravity>() && Act.TC.ExistsOnMap && knockback > 0 && knockback * 2 + 15 > EClass.rnd(100) && !Act.TC.isRestrained)
			{
				Card.MoveResult num6 = Act.TC.Chara.TryMoveFrom(Act.CC.pos); // [!code --]
				Card.MoveResult num8 = Act.TC.Chara.TryMoveFrom(Act.CC.pos); // [!code ++]
				bool flag3 = Act.CC.id == "tsunami";
				if (num6 == Card.MoveResult.Success) // [!code --]
				if (num8 == Card.MoveResult.Success) // [!code ++]
				{
					Act.TC.renderer.SetFirst(first: true);
					Act.TC.PlaySound("wave_hit_small");
```

[`void Attack(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMelee.cs#L438-L452)
```cs:line-numbers=438
		}
		void AttackWithFlurry(Card _tc, Point _tp, float mtp, bool subAttack)
		{
			int num7 = 1; // [!code --]
			int num9 = 1; // [!code ++]
			if (flurry > 0)
			{
				for (int l = 0; l < 10 && flurry > EClass.rnd(25 + (int)Mathf.Pow(5f, l + 2)); l++)
				{
					num7++; // [!code --]
					num9++; // [!code ++]
				}
			}
			for (int m = 0; m < num7; m++) // [!code --]
			for (int m = 0; m < num9; m++) // [!code ++]
			{
				if (!Act.CC.IsAliveInCurrentZone)
				{
```

[`void AttackWithFlurry(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMelee.cs#L456-L473)
```cs:line-numbers=456
				{
					break;
				}
				if (!_tc.IsDisabled && _tc.Evalue(437) > 0 && EClass.rnd(100) < EClass.curve(5 + _tc.Evalue(437) / 3, 10, 3, 70)) // [!code --]
				{ // [!code --]
					_tc.Say("parry"); // [!code --]
					_tc.PlaySound("parry"); // [!code --]
					parried = true; // [!code --]
					break; // [!code --]
				} // [!code --]
				if (m > 0)
				{
					Act.CC.Say("attack_flurry");
				}
				Attack(_tc, _tp, mtp, subAttack);
				if (parried) // [!code ++]
				{ // [!code ++]
					break; // [!code ++]
				} // [!code ++]
			}
		}
		int GetWeaponEnc(int ele, bool addSelfEnc)
```

## +ActMeleeCounter

::: details File Created
```cs
public class ActMeleeCounter : ActMelee
{
	public float bonus;

	public override bool AllowCounter => false;

	public override bool AllowParry => false;

	public override bool ShouldRollMax => true;

	public override float BaseDmgMTP => 1f + bonus;
}
```

:::
## ActMeleeParry

[`public class ActMeleeParry : ActMelee`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ActMeleeParry.cs#L1-L5)
```cs:line-numbers=1
public class ActMeleeParry : ActMelee
{
	public override bool AllowCounter => false; // [!code ++]
 // [!code ++]
	public override bool AllowParry => false; // [!code ++]
 // [!code ++]
	public override bool ShouldRollMax => true;

	public override float BaseDmgMTP => 1.5f;
```

## AttackProcess

[`public int GetRawDamage(float dmgMulti, bool crit, bool maxRoll)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/AttackProcess.cs#L442-L448)
```cs:line-numbers=442
		return Mathf.Clamp(num, 0, 9999999);
	}

	public static void ProcAbility(List<Element> list, Chara CC, Card TC, int bonus, bool subAttack = false) // [!code --]
	public static void ProcShieldEncs(Chara CC, Card TC, int mtpChance = 100) // [!code ++]
	{ // [!code ++]
		foreach (BodySlot slot in CC.body.slots) // [!code ++]
		{ // [!code ++]
			if (slot.elementId == 35 && slot.thing != null && (slot.thing.category.IsChildOf("shield") || slot.thing.category.IsChildOf("martial"))) // [!code ++]
			{ // [!code ++]
				ProcAbility(slot.thing.elements.dict.Values.ToList(), CC, TC, CC.Evalue(123), subAttack: false, mtpChance); // [!code ++]
			} // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	public static void ProcAbility(List<Element> list, Chara CC, Card TC, int bonus, bool subAttack = false, int mtpChance = 100) // [!code ++]
	{
		if (list == null)
		{
```

[`public static void ProcAbility(List<Element> list, Chara CC, Card TC, int bonus,`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/AttackProcess.cs#L450-L466)
```cs:line-numbers=450
		}
		foreach (Element item in list)
		{
			ProcAbility(item, CC, TC, bonus, subAttack); // [!code --]
			ProcAbility(item, CC, TC, bonus, subAttack, mtpChance); // [!code ++]
		}
	}

	public static void ProcAbility(Element e, Chara CC, Card TC, int bonus, bool subAttack = false) // [!code --]
	public static void ProcAbility(Element e, Chara CC, Card TC, int bonus, bool subAttack = false, int mtpChance = 100) // [!code ++]
	{
		if (!(e is Ability))
		{
			return;
		}
		int num = 10 + e.Value / 5; // [!code --]
		int num = (10 + e.Value / 5) * mtpChance / 100; // [!code ++]
		int power = EClass.curve((100 + e.Value * 10) * (100 + bonus) / 100, 400, 100);
		if (num <= EClass.rnd(100))
		{
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/AttackProcess.cs#L534-L539)
```cs:line-numbers=534
	}
	List<Element> list = new List<Element>();
	int num2 = CC.Evalue(91);
	string id = CC.id; // [!code ++]
	if ((id == "stalker" || id == "stalker_shadow") && TC.isChara && TC.Chara.CanSee(CC)) // [!code ++]
	{ // [!code ++]
		num2 = 0; // [!code ++]
	} // [!code ++]
	int num3 = 0;
	if (weapon != null)
	{
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/AttackProcess.cs#L547-L553)
```cs:line-numbers=547
	}
	else
	{
		string id = CC.id; // [!code --]
		id = CC.id; // [!code ++]
		if (id == "rabbit_vopal" || id == "mantis_killer")
		{
			list.Add(Element.Create(6650, 100));
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/AttackProcess.cs#L764-L773)
```cs:line-numbers=764
	if (!IsRanged && !flag2 && attackStyle == AttackStyle.Shield)
	{
		int num11 = CC.Evalue(123);
		if (CC.elements.ValueWithoutLink(123) >= 10 && Mathf.Clamp(Mathf.Sqrt(num11) - 2f, 8f, 12f) > (float)EClass.rnd(100)) // [!code --]
		int num12 = CC.Evalue(381); // [!code ++]
		if (CC.elements.ValueWithoutLink(123) >= 10 && Mathf.Clamp(Mathf.Sqrt(num11) - 2f, 8f, 15f) + Mathf.Min(Mathf.Sqrt(num12), 25f) > (float)EClass.rnd(100)) // [!code ++]
		{
			num = num7 * Mathf.Min(50 + num11, 200) / 100; // [!code --]
			num = TC.ApplyProtection(num); // [!code --]
			num = num7 * (Mathf.Min(50 + num11 + num12, 200) + (int)Mathf.Min(Mathf.Sqrt(num12), 100f)) / 100; // [!code ++]
			penetration = (int)Mathf.Sqrt(num12); // [!code ++]
			if (penetration > 100) // [!code ++]
			{ // [!code ++]
				penetration = 100; // [!code ++]
			} // [!code ++]
			num9 = num * penetration / 100; // [!code ++]
			num -= num9; // [!code ++]
			num = TC.ApplyProtection(num) + num9; // [!code ++]
			Debug.Log("Bash:" + num + "/" + num7);
			CC.PlaySound("shield_bash");
			CC.Say("shield_bash", CC, TC);
```

[`public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/AttackProcess.cs#L780-L785)
```cs:line-numbers=780
				}
				TC.Chara.AddCondition<ConParalyze>(EClass.rnd(2), force: true);
			}
			ProcShieldEncs(CC, TC, 500 + num12); // [!code ++]
		}
	}
	if (!CC.IsAliveInCurrentZone || !TC.IsAliveInCurrentZone)
```

## AttackSource

[`public enum AttackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/AttackSource.cs#L19-L23)
```cs:line-numbers=19
	ManaBackfire,
	DeathSentense,
	Shockwave,
	MagicSword // [!code --]
	MagicSword, // [!code ++]
	MoonSpear // [!code ++]
}
```

## CTAG

[`public enum CTAG`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/CTAG.cs#L48-L52)
```cs:line-numbers=48
	god,
	dragon,
	plant,
	antiSpider // [!code --]
	antiSpider, // [!code ++]
	shield // [!code ++]
}
```

## Card

[`public bool CanAddRune(TraitMod mod)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L3587-L3593)
```cs:line-numbers=3587
		switch (encSlot)
		{
		case "shield":
			if (!category.IsChildOf("shield")) // [!code --]
			if (!category.IsChildOf("shield") && !category.IsChildOf("martial")) // [!code ++]
			{
				return false;
			}
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L3970-L3979)
```cs:line-numbers=3970
		return;
	}
	bool flag = originalTarget != null;
	if (isChara && !HasElement(1241) && !flag) // [!code --]
	if (isChara && !isRestrained && !HasElement(1241) && !flag) // [!code ++]
	{
		AttackSource attackSource2 = attackSource;
		if ((uint)(attackSource2 - 3) > 1u && (uint)(attackSource2 - 13) > 4u) // [!code --]
		if ((uint)(attackSource2 - 3) > 2u && (uint)(attackSource2 - 13) > 4u) // [!code ++]
		{
			foreach (Chara chara3 in EClass._map.charas)
			{
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L3981-L3987)
```cs:line-numbers=3981
				{
					int num = chara3.Evalue(1241);
					int num2 = chara3.Evalue(438);
					if ((num != 0 || num2 != 0) && !chara3.IsDisabled && !chara3.isRestrained && (!IsPCFactionOrMinion || chara3.IsPCFactionOrMinion) && chara3.Dist(this) <= Mathf.Max(num, (num2 > 0) ? 1 : 0) && (num2 <= 0 || hp * 100 / MaxHP <= chara3.hp * 100 / chara3.MaxHP)) // [!code --]
					if ((num != 0 || num2 != 0) && !chara3.IsDisabled && !chara3.isRestrained && (!IsPCFactionOrMinion || chara3.IsPCFactionOrMinion) && chara3.Dist(this) <= Mathf.Max(num, (num2 > 0) ? 1 : 0) && (num != 0 || num2 <= 0 || hp * 100 / MaxHP <= chara3.hp * 100 / chara3.MaxHP)) // [!code ++]
					{
						Say((num2 == 0) ? "wall_flesh" : "wall_knightly", chara3, this);
						chara3.DamageHP(dmg, ele, eleP, attackSource, origin, showEffect, weapon, Chara);
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L4241-L4255)
```cs:line-numbers=4241
			}
			else
			{
				if (origin != null && origin != this && Evalue(436) > 0) // [!code --]
				if (origin != null && origin != this && Evalue(436) > 0 && !HasCondition<ConFractured>()) // [!code ++]
				{
					int num13 = (HasElement(1218) ? MaxHP : (MaxHP / 2));
					if (num10 > num13)
					{
						EvadeDeath();
						flag3 = true;
						Chara.AddCondition<ConFractured>((int)Mathf.Max(10f, 30f - Mathf.Sqrt(Evalue(436)))); // [!code ++]
						hp = Mathf.Min(num13 * (int)Mathf.Sqrt(Evalue(436) * 2) / 100, MaxHP / 3);
						goto IL_0e2d; // [!code --]
						goto IL_0e7f; // [!code ++]
					}
				}
				if (zoneInstanceBout != null && (bool)LayerDrama.Instance)
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L4277-L4283)
```cs:line-numbers=4277
						if (EClass.player.invlunerable)
						{
							EvadeDeath();
							goto IL_0e2d; // [!code --]
							goto IL_0e7f; // [!code ++]
						}
					}
					if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2)
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L4290-L4297)
```cs:line-numbers=4290
			}
		}
	}
	goto IL_0e2d; // [!code --]
	IL_0e2d: // [!code --]
	goto IL_0e7f; // [!code ++]
	IL_0e7f: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L4396-L4401)
```cs:line-numbers=4396
		}
		if (!isDestroyed)
		{
			if (attackSource == AttackSource.MoonSpear && isChara) // [!code ++]
			{ // [!code ++]
				Rand.SetSeed(uid + EClass.world.date.day); // [!code ++]
				ActEffect.LoveMiracle(Chara, origin?.Chara, 100, EffectId.MoonSpear); // [!code ++]
				Rand.SetSeed(); // [!code ++]
			} // [!code ++]
			Die(e, origin, attackSource, originalTarget);
			if (trait.CanBeSmashedToDeath && !EClass._zone.IsUserZone)
			{
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L4737-L4749)
```cs:line-numbers=4737
	}
	if (origin != null)
	{
		foreach (BodySlot slot in Chara.body.slots) // [!code --]
		{ // [!code --]
			if (slot.elementId == 35 && slot.thing != null && slot.thing.category.IsChildOf("shield")) // [!code --]
			{ // [!code --]
				AttackProcess.ProcAbility(slot.thing.elements.dict.Values.ToList(), Chara, origin, Evalue(123)); // [!code --]
			} // [!code --]
		} // [!code --]
		AttackProcess.ProcShieldEncs(Chara, origin); // [!code ++]
	}
	if (hp < MaxHP / 3 && HasElement(1409) && !Chara.HasCooldown(1409))
	{
```

[`public virtual int GetPrice(CurrencyType currency = CurrencyType.Money, bool sel`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Card.cs#L7071-L7076)
```cs:line-numbers=7071
				return 6;
			case "monsterball":
				return LV / 8;
			case "spellbook": // [!code ++]
				return 6; // [!code ++]
			}
			break;
		}
```

## Chara

[`public override void ChangeRarity(Rarity r)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Chara.cs#L1398-L1414)
```cs:line-numbers=1398
		}
	}

	public void SetFaction(Faction f) // [!code --]
	public Chara SetFaction(Faction f) // [!code ++]
	{
		_faction = null;
		faction = f;
		hostility = faction.GetHostility();
		return this; // [!code ++]
	}

	public void SetHomeZone(Zone zone) // [!code --]
	public Chara SetHomeZone(Zone zone) // [!code ++]
	{
		homeZone = zone;
		SetGlobal();
		return this; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public Chara SetHostility(Hostility h) // [!code ++]
	{ // [!code ++]
		Hostility hostility2 = (base.c_originalHostility = h); // [!code ++]
		this.hostility = hostility2; // [!code ++]
		return this; // [!code ++]
	}

	public void OnBanish()
```

[`public void RestockEquip(bool onCreate)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Chara.cs#L4650-L4655)
```cs:line-numbers=4650
			AddThing("1071");
		}
		break;
	case "lomias": // [!code ++]
		if (onCreate) // [!code ++]
		{ // [!code ++]
			AddThing("bow_vindale"); // [!code ++]
		} // [!code ++]
		break; // [!code ++]
	case "larnneire": // [!code ++]
		if (onCreate) // [!code ++]
		{ // [!code ++]
			EQ_ID("EtherDagger2"); // [!code ++]
		} // [!code ++]
		break; // [!code ++]
	case "seeker":
		if (onCreate)
		{
```

[`public void RestockEquip(bool onCreate)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Chara.cs#L4779-L4784)
```cs:line-numbers=4779
				EQ_ID("shield_lute");
			}
		}
		if (HasTag(CTAG.shield)) // [!code ++]
		{ // [!code ++]
			EQ_CAT("shield"); // [!code ++]
		} // [!code ++]
	}

	public void RestockInventory(bool onCreate)
```

## +ConFractured

::: details File Created
```cs
public class ConFractured : Condition
{
	public override int GetPhase()
	{
		return 0;
	}
}
```

:::
## CoreRef

[`public class Enc`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/CoreRef.cs#L73-L78)
```cs:line-numbers=73
			public Sprite mod;

			public Sprite weaponEnc;
 // [!code ++]
			public Sprite shieldEnc; // [!code ++]
		}

		public Sprite suspend;
```

## DOMAIN

[`public class DOMAIN`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/DOMAIN.cs#L16-L26)
```cs:line-numbers=16

	public const int domFaith = 802;

	public const int domWind = 807; // [!code --]
	public const int domComm = 805; // [!code ++]

	public const int domHarmony = 815;

	public const int domComm = 805; // [!code --]
	public const int domWind = 807; // [!code ++]

	public const int domElement = 806;

```

[`public class DOMAIN`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/DOMAIN.cs#L36-L42)
```cs:line-numbers=36

	public static readonly int[] IDS = new int[16]
	{
		812, 813, 810, 809, 808, 814, 802, 807, 815, 805, // [!code --]
		812, 813, 810, 809, 808, 814, 802, 805, 815, 807, // [!code ++]
		806, 811, 801, 803, 804, 800
	};
}
```

## ELEMENT

[`public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ELEMENT.cs#L31-L40)
```cs:line-numbers=31

	public const int _void = 0;

	public const int quality = 2; // [!code --]
 // [!code --]
	public const int lv = 1;

	public const int quality = 2; // [!code ++]
 // [!code ++]
	public const int d = 3;

	public const int socket = 5;
```

[`public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ELEMENT.cs#L78-L84)
```cs:line-numbers=78
public static readonly int[] IDS = new int[35]
{
	763, 761, 751, 752, 753, 754, 755, 756, 759, 760,
	762, 750, 0, 2, 1, 3, 5, 10, 11, 12, // [!code --]
	762, 750, 0, 1, 2, 3, 5, 10, 11, 12, // [!code ++]
	13, 15, 16, 17, 18, 14, 21, 22, 23, 24,
	25, 26, 29, 85, 20
};
```

[`public void AddEncNote(UINote n, Card Card, ElementContainer.NoteMode mode = Ele`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ELEMENT.cs#L929-L935)
```cs:line-numbers=929
			uIItem.image1.SetActive(enable: true);
			uIItem.image1.sprite = sprite;
		}
		uIItem.image2.SetActive(source.IsWeaponEnc); // [!code --]
		uIItem.image2.SetActive(source.IsWeaponEnc || source.IsShieldEnc); // [!code ++]
		uIItem.image2.sprite = (source.IsWeaponEnc ? EClass.core.refs.icons.enc.weaponEnc : EClass.core.refs.icons.enc.shieldEnc); // [!code ++]
		onAddNote?.Invoke(n, this);
		return;
	}
```

## ENC

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ENC.cs#L1-L7)
```cs:line-numbers=1
public class ENC
{
	public const int eco = 652; // [!code --]
 // [!code --]
	public const int r_PV = 651;

	public const int r_DV = 650;
```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ENC.cs#L10-L18)
```cs:line-numbers=10

	public const int r_life = 640;

	public const int mod_chaser = 620; // [!code --]
 // [!code --]
	public const int mod_feint = 623; // [!code --]
	public const int mod_frustration = 624; // [!code ++]

	public const int mod_talisman = 609;

```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ENC.cs#L20-L33)
```cs:line-numbers=20

	public const int mod_flurry = 621;

	public const int living = 653; // [!code --]
	public const int mod_splash = 608; // [!code ++]

	public const int mod_frustration = 624; // [!code --]
	public const int mod_chaser = 620; // [!code ++]

	public const int noDamage = 654; // [!code --]
	public const int eco = 652; // [!code ++]
 // [!code ++]
	public const int mod_feint = 623; // [!code ++]
 // [!code ++]
	public const int living = 653; // [!code ++]

	public const int convertCold = 851;

	public const int onlyPet = 655; // [!code ++]
 // [!code ++]
	public const int permaCurse = 656;

	public const int absorbHP = 660;
```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ENC.cs#L46-L66)
```cs:line-numbers=46

	public const int convertFire = 850;

	public const int mod_splash = 608; // [!code --]
	public const int mod_scatter = 607; // [!code ++]

	public const int convertImpact = 865;

	public const int convertLightning = 852;

	public const int onlyPet = 655; // [!code --]
	public const int noDamage = 654; // [!code ++]

	public const int mod_scatter = 607; // [!code --]
	public const int mod_drill = 606; // [!code ++]

	public const int negateSteal = 426;

	public const int mod_precision = 605; // [!code --]
 // [!code --]
	public const int defense_range = 435; // [!code --]
	public const int mod_ammo_recover = 604; // [!code ++]

	public const int negateShockwave = 430;

```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ENC.cs#L88-L132)
```cs:line-numbers=88

	public const int loving = 417;

	public const int guts = 436; // [!code --]
 // [!code --]
	public const int seeInvisible = 416;

	public const int invisibility = 415; // [!code ++]
 // [!code ++]
	public const int encHit = 414;

	public const int slowCorruption = 412;

	public const int encSpell = 411; // [!code --]
	public const int counter = 380; // [!code ++]

	public const int throwReturn = 410; // [!code --]
	public const int basher = 381; // [!code ++]

	public const int corruption = 409; // [!code --]
	public const int negateTeleport = 400; // [!code ++]

	public const int mod_drill = 606; // [!code --]
	public const int levitation = 401; // [!code ++]

	public const int travelSpeed = 407; // [!code --]
	public const int searchRange = 402; // [!code ++]

	public const int resMutation = 406; // [!code --]
	public const int expMod = 403; // [!code ++]

	public const int slowDecay = 405; // [!code --]
	public const int defense_range = 435; // [!code ++]

	public const int weightMod = 404;

	public const int expMod = 403; // [!code --]
	public const int resMutation = 406; // [!code ++]

	public const int searchRange = 402; // [!code --]
	public const int mod_precision = 605; // [!code ++]

	public const int levitation = 401; // [!code --]
	public const int resWeather = 408; // [!code ++]

	public const int negateTeleport = 400; // [!code --]
	public const int corruption = 409; // [!code ++]

	public const int invisibility = 415; // [!code --]
	public const int throwReturn = 410; // [!code ++]

	public const int parry = 437; // [!code --]
	public const int encSpell = 411; // [!code ++]

	public const int resWeather = 408; // [!code --]
	public const int slowDecay = 405; // [!code ++]

	public const int sustain_STR = 440; // [!code --]
	public const int guts = 436; // [!code ++]
 // [!code ++]
	public const int travelSpeed = 407; // [!code ++]
 // [!code ++]
	public const int knightly = 438; // [!code ++]
 // [!code ++]
	public const int bane_fish = 467; // [!code ++]
 // [!code ++]
	public const int bane_all = 468; // [!code ++]

	public const int strongStomach = 480;

```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ENC.cs#L140-L149)
```cs:line-numbers=140

	public const int nonLethal = 485;

	public const int bane_all = 468; // [!code --]
 // [!code --]
	public const int safetyMeasure = 486;

	public const int deathagony = 488; // [!code ++]
 // [!code ++]
	public const int mod_ammo = 600;

	public const int mod_reload = 601;
```

[`public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ENC.cs#L152-L208)
```cs:line-numbers=152

	public const int mod_ammo_knockback = 603;

	public const int mod_ammo_recover = 604; // [!code --]
	public const int parry = 437; // [!code ++]

	public const int knightly = 438; // [!code --]
	public const int bane_god = 466; // [!code ++]
 // [!code ++]
	public const int bane_machine = 465; // [!code ++]

	public const int creativeChef = 487;

	public const int bane_fish = 467; // [!code --]
	public const int bane_animal = 463; // [!code ++]

	public const int deathagony = 488; // [!code --]
	public const int negateParry = 439; // [!code ++]

	public const int bane_machine = 465; // [!code --]
	public const int bane_man = 464; // [!code ++]

	public const int bane_god = 466; // [!code --]
	public const int sustain_STR = 440; // [!code ++]

	public const int sustain_DEX = 442; // [!code --]
	public const int sustain_END = 441; // [!code ++]

	public const int sustain_PER = 443; // [!code --]
	public const int sustain_DEX = 442; // [!code ++]

	public const int sustain_LER = 444;

	public const int sustain_END = 441; // [!code --]
	public const int sustain_WIL = 445; // [!code ++]

	public const int sustain_MAG = 446; // [!code --]
	public const int sustain_PER = 443; // [!code ++]

	public const int sustain_CHA = 447;

	public const int sustain_WIL = 445; // [!code --]
	public const int bane_fairy = 462; // [!code ++]
 // [!code ++]
	public const int sustain_figure = 450; // [!code ++]

	public const int bane_dragon = 460;

	public const int bane_undead = 461;

	public const int bane_fairy = 462; // [!code --]
 // [!code --]
	public const int bane_animal = 463; // [!code --]
 // [!code --]
	public const int sustain_figure = 450; // [!code --]
 // [!code --]
	public const int bane_man = 464; // [!code --]
	public const int sustain_MAG = 446; // [!code ++]

	public static readonly int[] IDS = new int[96] // [!code --]
	public static readonly int[] IDS = new int[99] // [!code ++]
	{
		652, 651, 650, 641, 640, 620, 623, 609, 622, 621, // [!code --]
		653, 624, 654, 851, 656, 660, 661, 662, 663, 664, // [!code --]
		665, 666, 850, 608, 865, 852, 655, 607, 426, 605, // [!code --]
		435, 430, 429, 428, 427, 425, 424, 423, 422, 421, // [!code --]
		420, 419, 418, 417, 436, 416, 414, 412, 411, 410, // [!code --]
		409, 606, 407, 406, 405, 404, 403, 402, 401, 400, // [!code --]
		415, 437, 408, 440, 480, 481, 482, 483, 484, 485, // [!code --]
		468, 486, 600, 601, 602, 603, 604, 438, 487, 467, // [!code --]
		488, 465, 466, 442, 443, 444, 441, 446, 447, 445, // [!code --]
		460, 461, 462, 463, 450, 464 // [!code --]
		651, 650, 641, 640, 624, 609, 622, 621, 608, 620, // [!code ++]
		652, 623, 653, 851, 655, 656, 660, 661, 662, 663, // [!code ++]
		664, 665, 666, 850, 607, 865, 852, 654, 606, 426, // [!code ++]
		604, 430, 429, 428, 427, 425, 424, 423, 422, 421, // [!code ++]
		420, 419, 418, 417, 416, 415, 414, 412, 380, 381, // [!code ++]
		400, 401, 402, 403, 435, 404, 406, 605, 408, 409, // [!code ++]
		410, 411, 405, 436, 407, 438, 467, 468, 480, 481, // [!code ++]
		482, 483, 484, 485, 486, 488, 600, 601, 602, 603, // [!code ++]
		437, 466, 465, 487, 463, 439, 464, 440, 441, 442, // [!code ++]
		444, 445, 443, 447, 462, 450, 460, 461, 446 // [!code ++]
	};
}
```

## EffectId

[`public enum EffectId`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/EffectId.cs#L122-L126)
```cs:line-numbers=122
	Gene = 298,
	CatSniff = 299,
	Youth = 300,
	EternalYouth = 301 // [!code --]
	EternalYouth = 301, // [!code ++]
	MoonSpear = 302 // [!code ++]
}
```

## FACTION

[``](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/FACTION.cs#L4-L27)
```cs:line-numbers=4

public class FACTION
{
	public const int bfGeyser = 3701; // [!code --]
 // [!code --]
	public const int bfPlain = 3600; // [!code --]
 // [!code --]
	public const int bfForest = 3601;

	public const int bfSnow = 3602;

	public const int bfHill = 3603;

	public const int bfRuin = 3702; // [!code ++]
 // [!code ++]
	public const int bfSea = 3605;

	public const int bfUndersea = 3606;

	public const int bfRuin = 3702; // [!code --]
	public const int bfPlain = 3600; // [!code ++]

	public const int bfFertile = 3700;

	public const int bfGeyser = 3701; // [!code ++]
 // [!code ++]
	public const int bfBeach = 3604;

	public const int bfCave = 3500;
```

[`public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/FACTION.cs#L44-L52)
```cs:line-numbers=44

	public const int fTaxEvasion = 2119;

	public const int bfTranquil = 3703; // [!code --]
	public const int fLoyal = 2117; // [!code ++]

	public const int fEducation = 2116; // [!code --]
	public const int bfTranquil = 3703; // [!code ++]

	public const int fLuck = 2118;

```

[`public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/FACTION.cs#L54-L60)
```cs:line-numbers=54

	public const int bfVolcano = 3704;

	public const int bfIce = 3804; // [!code --]
	public const int bfChitin = 3805; // [!code ++]

	public const int bfFish = 3706;

```

[`public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/FACTION.cs#L76-L82)
```cs:line-numbers=76

	public const int bfStart = 3900;

	public const int bfChitin = 3805; // [!code --]
	public const int bfIce = 3804; // [!code ++]

	public const int bfGum = 3803;

```

[`public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/FACTION.cs#L108-L123)
```cs:line-numbers=108

	public const int fConstruction = 2003;

	public const int fLoyal = 2117; // [!code --]
	public const int fEducation = 2116; // [!code ++]

	public static readonly int[] IDS = new int[53]
	{
		3701, 3600, 3601, 3602, 3603, 3605, 3606, 3702, 3700, 3604, // [!code --]
		3601, 3602, 3603, 3702, 3605, 3606, 3600, 3700, 3701, 3604, // [!code ++]
		3500, 2201, 2206, 2205, 2204, 2203, 2202, 2200, 2120, 2119,
		3703, 2116, 2118, 2207, 3704, 3804, 3706, 2115, 4006, 4005, // [!code --]
		4004, 4003, 4002, 4001, 4000, 3900, 3805, 3803, 3802, 3801, // [!code --]
		2117, 3703, 2118, 2207, 3704, 3805, 3706, 2115, 4006, 4005, // [!code ++]
		4004, 4003, 4002, 4001, 4000, 3900, 3804, 3803, 3802, 3801, // [!code ++]
		3800, 3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707,
		3705, 2003, 2117 // [!code --]
		3705, 2003, 2116 // [!code ++]
	};
}
public class Faction : EClass
```

## FOOD

[`public class FOOD`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/FOOD.cs#L1-L21)
```cs:line-numbers=1
public class FOOD
{
	public const int food_CHA = 700; // [!code --]
 // [!code --]
	public const int food_cat = 701;

	public const int food_poison = 702;

	public const int food_love = 703;

	public const int food_CHA = 700; // [!code ++]
 // [!code ++]
	public const int gainWeight = 705;

	public const int food_bug = 704;

	public const int kirimi = 707;

	public const int creativeDish = 764; // [!code --]
 // [!code --]
	public const int food_human = 708;

	public const int food_undead = 709;
```

[`public class FOOD`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/FOOD.cs#L24-L34)
```cs:line-numbers=24

	public const int food_god = 758;

	public const int creativeDish = 764; // [!code ++]
 // [!code ++]
	public const int loseWeight = 706;

	public static readonly int[] IDS = new int[13]
	{
		700, 701, 702, 703, 705, 704, 707, 764, 708, 709, // [!code --]
		757, 758, 706 // [!code --]
		701, 702, 703, 700, 705, 704, 707, 708, 709, 757, // [!code ++]
		758, 764, 706 // [!code ++]
	};
}
```

## MUTATION

[`public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/MUTATION.cs#L1-L15)
```cs:line-numbers=1
public class MUTATION
{
	public const int mutationStrN = 1521; // [!code ++]
 // [!code ++]
	public const int mutationStr = 1520;

	public const int mutationSpeedN = 1519;

	public const int mutationRegenN = 1517;

	public const int mutationRegen = 1516; // [!code --]
 // [!code --]
	public const int mutationDex = 1514;

	public const int mutationDexN = 1515; // [!code ++]
 // [!code ++]
	public const int mutationEyeN = 1513;

	public const int mutationEye = 1512;
```

[`public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/MUTATION.cs#L18-L26)
```cs:line-numbers=18

	public const int mutationSkin = 1510;

	public const int mutationStrN = 1521; // [!code --]
 // [!code --]
	public const int mutationDexN = 1515; // [!code --]
	public const int mutationRegen = 1516; // [!code ++]

	public const int mutationCha = 1522;

```

[`public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/MUTATION.cs#L82-L89)
```cs:line-numbers=82

	public static readonly int[] IDS = new int[40]
	{
		1520, 1519, 1517, 1516, 1514, 1513, 1512, 1511, 1510, 1521, // [!code --]
		1515, 1522, 1518, 1524, 1565, 1564, 1563, 1562, 1523, 1560, // [!code --]
		1521, 1520, 1519, 1517, 1514, 1515, 1513, 1512, 1511, 1510, // [!code ++]
		1516, 1522, 1518, 1524, 1565, 1564, 1563, 1562, 1523, 1560, // [!code ++]
		1559, 1558, 1557, 1556, 1555, 1554, 1561, 1552, 1553, 1526,
		1527, 1528, 1529, 1530, 1525, 1532, 1533, 1550, 1551, 1531
	};
```

## SLOT

[`public class SLOT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SLOT.cs#L1-L9)
```cs:line-numbers=1
public class SLOT
{
	public const int neck = 31; // [!code --]
 // [!code --]
	public const int toolbelt = 44;

	public const int neck = 31; // [!code ++]
 // [!code ++]
	public const int leg = 38;

	public const int tool = 40;
```

[`public class SLOT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SLOT.cs#L34-L40)
```cs:line-numbers=34

	public static readonly int[] IDS = new int[16]
	{
		31, 44, 38, 40, 33, 45, 34, 35, 32, 41, // [!code --]
		44, 31, 38, 40, 33, 45, 34, 35, 32, 41, // [!code ++]
		39, 37, 42, 36, 30, 43
	};
}
```

## SPELL

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L14-L26)
```cs:line-numbers=14

	public const int puddle_Sound = 50907;

	public const int miasma_Holy = 50709; // [!code --]
 // [!code --]
	public const int sword_Sound = 51007;

	public const int miasma_Holy = 50709; // [!code ++]
 // [!code ++]
	public const int ball_Nerve = 50108;

	public const int sword_Nerve = 51008; // [!code --]
	public const int arrow_Holy = 50509; // [!code ++]

	public const int bolt_Nerve = 50308;

```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L32-L46)
```cs:line-numbers=32

	public const int miasma_Nerve = 50708;

	public const int weapon_Nerve = 50808; // [!code ++]
 // [!code ++]
	public const int hand_Holy = 50409;

	public const int bolt_Holy = 50309;

	public const int weapon_Nerve = 50808; // [!code --]
 // [!code --]
	public const int puddle_Nerve = 50908;

	public const int arrow_Holy = 50509; // [!code --]
	public const int sword_Nerve = 51008; // [!code ++]

	public const int funnel_Holy = 50609;

```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L232-L238)
```cs:line-numbers=232

	public const int sword_Darkness = 51003;

	public const int funnel_Fire = 50600; // [!code --]
	public const int arrow_Fire = 50500; // [!code ++]

	public const int weapon_Darkness = 50803;

```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L262-L271)
```cs:line-numbers=262

	public const int SpVanishHex = 8491;

	public const int SpHealLight = 8400; // [!code --]
 // [!code --]
	public const int SpHolyVeil = 8500;

	public const int SpCatsEye = 8501; // [!code ++]
 // [!code ++]
	public const int SpHolyShield = 8502;

	public const int SpWisdom = 8503;
```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L292-L302)
```cs:line-numbers=292

	public const int SpBane = 8706;

	public const int SpCatsEye = 8501; // [!code --]
	public const int SpBerserk = 8707; // [!code ++]

	public const int SpWish = 8390; // [!code --]
	public const int SpHealLight = 8400; // [!code ++]

	public const int SpMutation = 8380; // [!code --]
	public const int SpGravity = 8708; // [!code ++]
 // [!code ++]
	public const int SpWish = 8390; // [!code ++]

	public const int SpLevitate = 8300;

```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L358-L372)
```cs:line-numbers=358

	public const int SpReconstruction = 8288;

	public const int SpBerserk = 8707; // [!code --]
	public const int SpMutation = 8380; // [!code ++]

	public const int SpGravity = 8708; // [!code --]
	public const int puddle_Darkness = 50903; // [!code ++]

	public const int SpSpeedDown = 8710;

	public const int SpTelepathy = 8770; // [!code --]
	public const int SpInvisibility = 8775; // [!code ++]

	public const int arrow_Fire = 50500; // [!code --]
	public const int funnel_Fire = 50600; // [!code ++]

	public const int miasma_Fire = 50700;

```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L426-L439)
```cs:line-numbers=426

	public const int hand_Fire = 50400;

	public const int puddle_Darkness = 50903; // [!code --]
	public const int SpTelepathy = 8770; // [!code ++]

	public const int bolt_Fire = 50300;

	public const int ball_Fire = 50100;

	public const int SpInvisibility = 8775; // [!code --]
 // [!code --]
	public const int SpSeeInvisible = 8776;

	public const int SpIncognito = 8780;
```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L478-L483)
```cs:line-numbers=478

	public const int SpEarthquake = 9151;

	public const int SpMoonSpear = 9155; // [!code ++]
 // [!code ++]
	public const int SpExterminate = 9160;

	public const int SpShutterHex = 9200;
```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L494-L504)
```cs:line-numbers=494

	public const int sword_Void = 51016;

	public static readonly int[] IDS = new int[247] // [!code --]
	public static readonly int[] IDS = new int[248] // [!code ++]
	{
		50109, 50407, 50507, 50607, 50707, 50807, 50907, 50709, 51007, 50108, // [!code --]
		51008, 50308, 50408, 50508, 50608, 50708, 50409, 50309, 50808, 50908, // [!code --]
		50509, 50609, 50304, 50107, 50809, 50404, 50504, 50604, 50704, 50804, // [!code --]
		50109, 50407, 50507, 50607, 50707, 50807, 50907, 51007, 50709, 50108, // [!code ++]
		50509, 50308, 50408, 50508, 50608, 50708, 50808, 50409, 50309, 50908, // [!code ++]
		51008, 50609, 50304, 50107, 50809, 50404, 50504, 50604, 50704, 50804, // [!code ++]
		50904, 51004, 50105, 50305, 50405, 50505, 50307, 50605, 50805, 50905,
		51005, 50106, 50306, 50406, 50506, 50606, 50706, 50806, 50906, 51006,
		50705, 50909, 50513, 50110, 50813, 50913, 51013, 50114, 50314, 50414,
```

[`public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SPELL.cs#L507-L526)
```cs:line-numbers=507
		50716, 50816, 50415, 51009, 50613, 50413, 50310, 50410, 50510, 50610,
		50710, 50810, 50910, 51010, 50111, 50311, 50411, 50511, 50611, 50104,
		50711, 50911, 51011, 50112, 50312, 50412, 50512, 50612, 50712, 50812,
		50912, 51012, 50113, 50313, 50811, 51003, 50600, 50803, 8401, 8402, // [!code --]
		50912, 51012, 50113, 50313, 50811, 51003, 50500, 50803, 8401, 8402, // [!code ++]
		8403, 8404, 8405, 8406, 8430, 8450, 8470, 8471, 8480, 8490,
		8491, 8400, 8500, 8502, 8503, 8504, 8506, 8507, 8510, 8550, // [!code --]
		8555, 8700, 8702, 8704, 8705, 8706, 8501, 8390, 8380, 8300, // [!code --]
		7001, 7002, 7003, 7004, 7005, 7006, 7007, 7008, 7800, 8200, // [!code --]
		8201, 8202, 8220, 8221, 8230, 8232, 8240, 8241, 8250, 8251, // [!code --]
		8255, 8256, 8260, 8280, 8281, 8284, 8285, 8286, 8288, 8707, // [!code --]
		8708, 8710, 8770, 50500, 50700, 50800, 50900, 51000, 50101, 50301, // [!code --]
		50401, 50501, 50601, 50701, 50801, 50901, 51001, 50102, 50302, 50402, // [!code --]
		50502, 50602, 50702, 50802, 50902, 51002, 50103, 50303, 50403, 50503, // [!code --]
		50603, 50703, 50400, 50903, 50300, 50100, 8775, 8776, 8780, 8790, // [!code --]
		8491, 8500, 8501, 8502, 8503, 8504, 8506, 8507, 8510, 8550, // [!code ++]
		8555, 8700, 8702, 8704, 8705, 8706, 8707, 8400, 8708, 8390, // [!code ++]
		8300, 7001, 7002, 7003, 7004, 7005, 7006, 7007, 7008, 7800, // [!code ++]
		8200, 8201, 8202, 8220, 8221, 8230, 8232, 8240, 8241, 8250, // [!code ++]
		8251, 8255, 8256, 8260, 8280, 8281, 8284, 8285, 8286, 8288, // [!code ++]
		8380, 50903, 8710, 8775, 50600, 50700, 50800, 50900, 51000, 50101, // [!code ++]
		50301, 50401, 50501, 50601, 50701, 50801, 50901, 51001, 50102, 50302, // [!code ++]
		50402, 50502, 50602, 50702, 50802, 50902, 51002, 50103, 50303, 50403, // [!code ++]
		50503, 50603, 50703, 50400, 8770, 50300, 50100, 8776, 8780, 8790, // [!code ++]
		8791, 8792, 8800, 8801, 9000, 9001, 9002, 9003, 9004, 9005,
		9006, 9007, 9008, 9009, 9010, 9050, 9051, 9150, 9151, 9160, // [!code --]
		9200, 9500, 9501, 9502, 9503, 50916, 51016 // [!code --]
		9006, 9007, 9008, 9009, 9010, 9050, 9051, 9150, 9151, 9155, // [!code ++]
		9160, 9200, 9500, 9501, 9502, 9503, 50916, 51016 // [!code ++]
	};
}
public class Spell : Ability
```

## SourceElement

[`public bool IsWeaponEnc`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SourceElement.cs#L184-L189)
```cs:line-numbers=184
			}
		}

		public bool IsShieldEnc => encSlot == "shield"; // [!code ++]
 // [!code ++]
		public override string GetName()
		{
			if (idMold != 0)
```

[`public bool IsEncAppliable(SourceCategory.Row cat)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/SourceElement.cs#L256-L268)
```cs:line-numbers=256
			{
				return IsWeaponEnc;
			}
			return encSlot switch // [!code --]
			switch (encSlot) // [!code ++]
			{
				"all" => true,  // [!code --]
				"weapon" => cat.IsChildOf("weapon"),  // [!code --]
				"shield" => cat.IsChildOf("shield"),  // [!code --]
				_ => encSlot.Contains(EClass.sources.elements.map[slot].alias),  // [!code --]
			}; // [!code --]
			case "all": // [!code ++]
				return true; // [!code ++]
			case "weapon": // [!code ++]
				return cat.IsChildOf("weapon"); // [!code ++]
			case "shield": // [!code ++]
				if (!cat.IsChildOf("shield")) // [!code ++]
				{ // [!code ++]
					return cat.IsChildOf("martial"); // [!code ++]
				} // [!code ++]
				return true; // [!code ++]
			default: // [!code ++]
				return encSlot.Contains(EClass.sources.elements.map[slot].alias); // [!code ++]
			} // [!code ++]
		}
	}

```

## ThingGen

[`public static Thing CreateSpellbook(string alias, int num = 1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/ThingGen.cs#L153-L162)
```cs:line-numbers=153
		return CreateSpellbook(EClass.sources.elements.alias[alias].id, num);
	}

	public static Thing CreateSpellbook(int ele, int num = 1) // [!code --]
	public static Thing CreateSpellbook(int ele, int num = 1, int charge = -1) // [!code ++]
	{
		Thing thing = Create("spellbook").SetNum(num);
		TraitSpellbook.Create(thing, ele);
		if (charge != -1) // [!code ++]
		{ // [!code ++]
			thing.SetCharge(charge); // [!code ++]
		} // [!code ++]
		return thing;
	}

```

## TileType

[`public enum RampType`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/TileType.cs#L204-L210)
```cs:line-numbers=204

	public virtual int MinAltitude => 1;

	public virtual int MaxAltitude => 10; // [!code --]
	public virtual int MaxAltitude // [!code ++]
	{ // [!code ++]
		get // [!code ++]
		{ // [!code ++]
			if (!EInput.isShiftDown) // [!code ++]
			{ // [!code ++]
				return 10; // [!code ++]
			} // [!code ++]
			return 25; // [!code ++]
		} // [!code ++]
	} // [!code ++]

	public virtual bool AltitudeAsDir => false;

```

[`public HitResult _HitTest(Point pos, Card target, bool canIgnore = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/TileType.cs#L296-L301)
```cs:line-numbers=296
	{
		return HitResult.Invalid;
	}
	if (pos.IsSky && !(this is TileTypeFloor)) // [!code ++]
	{ // [!code ++]
		return HitResult.Invalid; // [!code ++]
	} // [!code ++]
	if (pos.cell.IsTopWater)
	{
		if (!CanBuiltOnWater)
```

## TileTypeBridge

[`public class TileTypeBridge : TileTypeFloor`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/TileTypeBridge.cs#L6-L10)
```cs:line-numbers=6

	public override bool CanBuiltOnWater => true;

	public override int MaxAltitude => 15; // [!code --]
	public override int MaxAltitude // [!code ++]
	{ // [!code ++]
		get // [!code ++]
		{ // [!code ++]
			if (!EInput.isShiftDown) // [!code ++]
			{ // [!code ++]
				return 15; // [!code ++]
			} // [!code ++]
			return 30; // [!code ++]
		} // [!code ++]
	} // [!code ++]
}
```

## Trait

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Trait.cs#L1606-L1612)
```cs:line-numbers=1606
	{
		for (int num5 = 0; num5 < 30; num5++)
		{
			AddThing(ThingGen.CreateFromCategory("book")); // [!code --]
			AddThing(ThingGen.CreateFromCategory((EClass.rnd(2) == 0) ? "_book" : "book")); // [!code ++]
		}
		break;
	}
```

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Trait.cs#L1796-L1801)
```cs:line-numbers=1796
				Add("wrench_fridge", 1, 0).SetNum(1);
				Add("wrench_extend_v", 1, 0).SetNum(2);
				Add("wrench_extend_h", 1, 0).SetNum(2);
				AddThing(ThingGen.CreateSpellbook(9155, 1, 3)); // [!code ++]
				break;
			default:
			{
```

## TraitPoina

[`public class TraitPoina : TraitUniqueChara`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/TraitPoina.cs#L1-L4)
```cs:line-numbers=1
public class TraitPoina : TraitUniqueChara
{
	public override bool CanInvite => false; // [!code --]
}
```

## TraitRaina

[`public class TraitRaina : TraitUniqueChara`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/TraitRaina.cs#L1-L4)
```cs:line-numbers=1
public class TraitRaina : TraitUniqueChara
{
	public override bool CanInvite => false; // [!code --]
}
```

## Zone_Specwing

[`public class Zone_Specwing : Zone_SubTown`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c3ad89b326f533162429cf9cf284f2bca1042870/Elin/Zone_Specwing.cs#L1-L3)
```cs:line-numbers=1
public class Zone_Specwing : Zone_SubTown
{
	public override void OnActivate() // [!code ++]
	{ // [!code ++]
		if (base.lv == 1 && (EClass.game.quests.IsCompleted("nasu") || EClass.debug.enable) && EClass.game.cards.globalCharas.Find("fairy_raina") == null) // [!code ++]
		{ // [!code ++]
			EClass._zone.AddChara("fairy_raina", 61, 56).SetHomeZone(this).SetHostility(Hostility.Friend); // [!code ++]
			EClass._zone.AddChara("fairy_poina", 61, 59).SetHomeZone(this).SetHostility(Hostility.Friend); // [!code ++]
		} // [!code ++]
		base.OnActivate(); // [!code ++]
	} // [!code ++]
}
```

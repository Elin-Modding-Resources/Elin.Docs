---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 9 files modified.
version: EA 23.207 Nightly
changes: AI_Idle/ActEffect/Card/Chara/DNA/GoalCombat/Player/RecipeCard/Trait
---

# EA 23.207 Nightly

September 28, 2025

9 files modified.

## Important Changes

**None.**
## AI_Idle

[`public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/AI_Idle.cs#L384-L390)
```cs:line-numbers=384
		text = owner.id;
		if (!(text == "geist"))
		{
			if (text == "mech_scarab" && EClass.rnd(20) == 0 && owner.CanDuplicate()) // [!code --]
			if (text == "mech_scarab" && EClass.rnd(20) == 0 && owner.CanDuplicate() && !EClass._zone.IsUserZone) // [!code ++]
			{
				int i = 0;
				owner.pos.ForeachNeighbor(delegate(Point p)
```

[`public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/AI_Idle.cs#L396-L402)
```cs:line-numbers=396
				});
				if (i < 2)
				{
					Point randomPoint = owner.pos.GetRandomPoint(1, requireLos: false, allowChara: false, allowBlocked: false, 200); // [!code --]
					Point randomPoint = owner.pos.GetRandomPoint(1, requireLos: false, allowChara: false, allowBlocked: false, 20); // [!code ++]
					if (randomPoint != null)
					{
						Card c2 = EClass._zone.AddCard(owner.Duplicate(), randomPoint);
```

## ActEffect

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/ActEffect.cs#L1250-L1257)
```cs:line-numbers=1250
		cc.Say("reconstruct", cc, tc);
		EClass.game.cards.uidNext += EClass.rnd(30);
		int num4 = Mathf.Max(tc.genLv, tc.LV, EClass.player.stats.deepest);
		Thing thing = ThingGen.Create(tc.id, -1, num4 * power / 100); // [!code --]
		thing.SetBlessedState(state); // [!code --]
		CardBlueprint.Set(new CardBlueprint // [!code ++]
		{ // [!code ++]
			blesstedState = state // [!code ++]
		}); // [!code ++]
		Thing thing = ThingGen.Create(tc.id, -1, (int)((long)num4 * (long)power / 400)); // [!code ++]
		thing.genLv = num4;
		tc.Destroy();
		CC.Pick(thing, msg: false);
```

## Card

[`public virtual int GetPrice(CurrencyType currency = CurrencyType.Money, bool sel`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/Card.cs#L7100-L7106)
```cs:line-numbers=7100
			case "medal":
				return 5;
			case "lunch_love":
				return 10; // [!code --]
				return 20; // [!code ++]
			}
			break;
		case CurrencyType.Ecopo:
```

[`public virtual int GetPrice(CurrencyType currency = CurrencyType.Money, bool sel`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/Card.cs#L7172-L7177)
```cs:line-numbers=7172
				return LV / 8;
			case "372":
				return 3;
			case "scroll_random": // [!code ++]
				if (refVal == 8288) // [!code ++]
				{ // [!code ++]
					return 5; // [!code ++]
				} // [!code ++]
				break; // [!code ++]
			}
			break;
		}
```

## Chara

[`public void TryDropBossLoot()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/Chara.cs#L5570-L5575)
```cs:line-numbers=5570
		if (EClass._zone.DangerLv > EClass.player.stats.deepest)
		{
			EClass.player.stats.deepest = EClass._zone.DangerLv;
			Msg.Say("update_deepest", EClass.player.stats.deepest.ToString() ?? ""); // [!code ++]
		}
		EClass.player.willAutoSave = true;
		Thing thing = ThingGen.CreateTreasure("chest_boss", base.LV, type);
```

## DNA

[`public string GetMaterialId(Type type)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/DNA.cs#L519-L525)
```cs:line-numbers=519

	public int GetDurationHour()
	{
		return cost * cost / 2; // [!code --]
		return Mathf.Min(cost, 5000) * Mathf.Min(cost, 5000) / 2; // [!code ++]
	}

	public Type GetRandomType()
```

## GoalCombat

[`public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/GoalCombat.cs#L163-L169)
```cs:line-numbers=163
		{
			tc.TrySetEnemy(owner);
		}
		if (!tc.IsMinion && EClass.rnd(10) == 0 && EClass.rnd(tc.DEX + 10) > owner.LV && tc.HasElement(1315) && !owner.HasElement(1315) && owner.IsMachine && owner.CanBeTempAlly(tc)) // [!code --]
		if (!tc.IsMinion && EClass.rnd(10) == 0 && EClass.rnd(tc.DEX + 10) > owner.LV && tc.HasElement(1315) && !owner.HasElement(1315) && owner.IsMachine && owner.CanBeTempAlly(tc) && owner.id != "mech_scarab") // [!code ++]
		{
			owner.Say("dominate_machine", tc, owner);
			owner.PlayEffect("boost");
```

## Player

[`public void OnEnterZone()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/Player.cs#L836-L845)
```cs:line-numbers=836
			{
				EClass.game.quests.Get<QuestIntoDarkness>().UpdateOnTalk();
			}
			else // [!code --]
			else if (EClass.game.quests.GetPhase<QuestIntoDarkness>() == 2) // [!code ++]
			{
				EClass.game.quests.GetPhase<QuestIntoDarkness>(); // [!code --]
				_ = 2; // [!code --]
				EClass.game.quests.Get<QuestIntoDarkness>().UpdateOnTalk(); // [!code ++]
			} // [!code ++]
			else if (EClass.game.quests.GetPhase<QuestIntoDarkness>() == 3) // [!code ++]
			{ // [!code ++]
				EClass.game.quests.Get<QuestIntoDarkness>().UpdateOnTalk(); // [!code ++]
			}
		}
	}
```

## RecipeCard

[`public override Thing Craft(BlessedState blessed, bool sound = false, List<Thing`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/RecipeCard.cs#L238-L244)
```cs:line-numbers=238
		{
			if (ing2.trait is TraitRune)
			{
				thing.AddRune(ing2); // [!code --]
				if (thing.CanAddRune(ing2.trait as TraitRune)) // [!code ++]
				{ // [!code ++]
					thing.AddRune(ing2); // [!code ++]
				} // [!code ++]
				if (!thing.HasElement(484))
				{
					thing.elements.SetBase(484, 1);
```

## Trait

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0657db05caa26b61c95a175cfc25031e0faa5e5f/Elin/Trait.cs#L1800-L1805)
```cs:line-numbers=1800
				Add("bill_tax", 1, 0).c_bill = 1;
				Add("bill_tax", 1, 0).c_bill = 1;
				Add("bill_tax", 1, 0).c_bill = 1;
				AddThing(ThingGen.CreateScroll(8288).SetNum(5)); // [!code ++]
				Add("container_magic", 1, 0);
				Add("container_magic", 1, 0).ChangeMaterial("iron").idSkin = 1;
				Add("container_magic", 1, 0).ChangeMaterial("bamboo").idSkin = 2;
```

---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 35 files modified. 2 new files created.
version: EA 23.145 Nightly
changes: ABILITY/AM_Adv/+ActCryRage/ActMelee/AttackProcess/BaseCondition/BiomeID/Card/Chara/+ConBerserk/ConSleep/ConWait/CoreRef/DOMAIN/ELEMENT/ENC/FACTION/FEAT/FOOD/GoalCombat/GrowSystem/MUTATION/MapGen/MapGenDungen/POLICY/QuestDefenseGame/SKILL/SLOT/SPELL/TextureManager/TraitChara/TraitCrafter/TraitMoongate/TraitToolBrush/Zone/ZoneEventDefenseGame/Zone_Field
---

# EA 23.145 Nightly

May 28, 2025

35 files modified. 2 new files created.

## Important Changes

**None.**
## ABILITY

[`@@ -2,15 +2,13 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L2-L16)
```cs:line-numbers=2

public class ABILITY
{
	public const int ActChat = 5044; // [!code --]
 // [!code --]
	public const int AI_Read = 5041; // [!code --]
	public const int AI_Drink = 5045; // [!code ++]

	public const int ActKick = 5042;

	public const int AI_TendAnimal = 5043;

	public const int AI_Drink = 5045; // [!code --]
	public const int ActChat = 5044; // [!code ++]

	public const int ActInstall = 5046;

```

[`@@ -32,11 +30,11 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L32-L42)
```cs:line-numbers=32

	public const int ActRestrain = 5055;

	public const int ActRanged = 5040; // [!code --]
 // [!code --]
	public const int AI_PlayMusic = 6001;

	public const int AI_Steal = 6011; // [!code --]
	public const int AI_Read = 5041; // [!code ++]
 // [!code ++]
	public const int AI_Meditate = 6003; // [!code ++]

	public const int ActQuickCraft = 6012;

```

[`@@ -64,15 +62,15 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L64-L78)
```cs:line-numbers=64

	public const int ActEntangle = 6601;

	public const int AI_Meditate = 6003; // [!code --]
 // [!code --]
	public const int ActDraw = 6602;

	public const int AI_Fish = 5039; // [!code --]
	public const int AI_Steal = 6011; // [!code ++]

	public const int ActNoItem = 5037; // [!code --]
	public const int ActNTR = 6603; // [!code ++]

	public const int Use = 5007; // [!code --]
	public const int ActRanged = 5040; // [!code ++]
 // [!code ++]
	public const int ActThrow = 5038; // [!code ++]

	public const int General = 5008;

```

[`@@ -100,11 +98,11 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L100-L110)
```cs:line-numbers=100

	public const int TaskFarm = 5020;

	public const int ActThrow = 5038; // [!code --]
 // [!code --]
	public const int TaskTrain = 5021;

	public const int TaskGoOut = 5023; // [!code --]
	public const int AI_Fish = 5039; // [!code ++]
 // [!code ++]
	public const int TaskSleepOnBed = 5022; // [!code ++]

	public const int AI_Eat = 5024;

```

[`@@ -132,16 +130,16 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L132-L147)
```cs:line-numbers=132

	public const int TaskMoveInstalled = 5036;

	public const int TaskSleepOnBed = 5022; // [!code --]
	public const int ActNoItem = 5037; // [!code ++]

	public const int ActNTR = 6603; // [!code --]
	public const int TaskGoOut = 5023; // [!code ++]
 // [!code ++]
	public const int ActCryRage = 6604; // [!code ++]

	public const int ActRush = 6450;

	public const int ActFear = 6611;

	public const int breathe_Fire = 50200; // [!code --]
 // [!code --]
	public const int breathe_Cold = 50201;

	public const int breathe_Lightning = 50202;
```

[`@@ -158,15 +156,15 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L158-L172)
```cs:line-numbers=158

	public const int breathe_Nerve = 50208;

	public const int ActWeaken = 6610; // [!code --]
 // [!code --]
	public const int breathe_Chaos = 50210; // [!code --]
	public const int breathe_Holy = 50209; // [!code ++]

	public const int breathe_ = 7000; // [!code --]
	public const int ActWeaken = 6610; // [!code ++]

	public const int breathe_Magic = 50211;

	public const int breathe_Acid = 50213; // [!code --]
	public const int breathe_Fire = 50200; // [!code ++]
 // [!code ++]
	public const int breathe_Ether = 50212; // [!code ++]

	public const int breathe_Cut = 50214;

```

[`@@ -188,27 +186,29 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L188-L214)
```cs:line-numbers=188

	public const int Shoot = 5006;

	public const int breathe_Ether = 50212; // [!code --]
	public const int Use = 5007; // [!code ++]

	public const int ActHeadpat = 6904; // [!code --]
	public const int breathe_Acid = 50213; // [!code ++]

	public const int breathe_Holy = 50209; // [!code --]
	public const int breathe_ = 7000; // [!code ++]

	public const int ActLulwyTrick = 6902; // [!code --]
	public const int breathe_Chaos = 50210; // [!code ++]

	public const int ActGazeDim = 6620; // [!code --]
	public const int ActKizuamiTrick = 6903; // [!code ++]
 // [!code ++]
	public const int ActGazeMutation = 6622; // [!code ++]
 // [!code ++]
	public const int ActGazeMana = 6623; // [!code ++]

	public const int ActTouchDrown = 6613;

	public const int ActTouchSleep = 6612;

	public const int ActKizuamiTrick = 6903; // [!code --]
 // [!code --]
	public const int ActGazeMana = 6623; // [!code --]
	public const int ActHeadpat = 6904; // [!code ++]

	public const int ActGazeMutation = 6622; // [!code --]
	public const int ActDrainBlood = 6626; // [!code ++]

	public const int ActInsult = 6630; // [!code --]
	public const int ActGazeDim = 6620; // [!code ++]

	public const int ActScream = 6631;

```

[`@@ -218,10 +218,12 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L218-L227)
```cs:line-numbers=218

	public const int ActStealMoney = 6642;

	public const int ActDrainBlood = 6626; // [!code --]
	public const int ActInsult = 6630; // [!code ++]

	public const int ActDropMine = 6660;

	public const int ActLulwyTrick = 6902; // [!code ++]
 // [!code ++]
	public const int ActJureHeal = 6901;

	public const int ActManaAbsorb = 6900;
```

[`@@ -232,6 +234,8 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L232-L237)
```cs:line-numbers=232

	public const int ActGazeInsane = 6621;

	public const int StTaunt = 6700; // [!code ++]
 // [!code ++]
	public const int ActBladeStorm = 6664;

	public const int ActMultiHit = 6663;
```

[`@@ -240,22 +244,21 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ABILITY.cs#L240-L261)
```cs:line-numbers=240

	public const int ActThrowPotion = 6661;

	public const int StTaunt = 6700; // [!code --]
 // [!code --]
	public static readonly int[] IDS = new int[120] // [!code --]
	public static readonly int[] IDS = new int[121] // [!code ++]
	{
		5044, 5041, 5042, 5043, 5045, 5046, 5047, 5048, 5049, 5050, // [!code --]
		5051, 5052, 5053, 5054, 5055, 5040, 6001, 6011, 6012, 6013, // [!code --]
		6015, 6018, 6019, 6020, 6050, 6400, 6410, 6420, 6500, 6600, // [!code --]
		6601, 6003, 6602, 5039, 5037, 5007, 5008, 5009, 5010, 5011, // [!code --]
		5012, 5013, 5014, 5015, 5016, 5017, 5018, 5019, 5020, 5038, // [!code --]
		5021, 5023, 5024, 5025, 5026, 5027, 5028, 5029, 5030, 5031, // [!code --]
		5032, 5033, 5034, 5035, 5036, 5022, 6603, 6450, 6611, 50200, // [!code --]
		50201, 50202, 50203, 50204, 50205, 50206, 50207, 50208, 6610, 50210, // [!code --]
		7000, 50211, 50213, 50214, 50215, 50216, 5000, 5001, 5002, 5003, // [!code --]
		5004, 5005, 5006, 50212, 6904, 50209, 6902, 6620, 6613, 6612, // [!code --]
		6903, 6623, 6622, 6630, 6631, 6640, 6641, 6642, 6626, 6660, // [!code --]
		6901, 6900, 6720, 6650, 6621, 6664, 6663, 6662, 6661, 6700 // [!code --]
		5045, 5042, 5043, 5044, 5046, 5047, 5048, 5049, 5050, 5051, // [!code ++]
		5052, 5053, 5054, 5055, 6001, 5041, 6003, 6012, 6013, 6015, // [!code ++]
		6018, 6019, 6020, 6050, 6400, 6410, 6420, 6500, 6600, 6601, // [!code ++]
		6602, 6011, 6603, 5040, 5038, 5008, 5009, 5010, 5011, 5012, // [!code ++]
		5013, 5014, 5015, 5016, 5017, 5018, 5019, 5020, 5021, 5039, // [!code ++]
		5022, 5024, 5025, 5026, 5027, 5028, 5029, 5030, 5031, 5032, // [!code ++]
		5033, 5034, 5035, 5036, 5037, 5023, 6604, 6450, 6611, 50201, // [!code ++]
		50202, 50203, 50204, 50205, 50206, 50207, 50208, 50209, 6610, 50211, // [!code ++]
		50200, 50212, 50214, 50215, 50216, 5000, 5001, 5002, 5003, 5004, // [!code ++]
		5005, 5006, 5007, 50213, 7000, 50210, 6903, 6622, 6623, 6613, // [!code ++]
		6612, 6904, 6626, 6620, 6631, 6640, 6641, 6642, 6630, 6660, // [!code ++]
		6902, 6901, 6900, 6720, 6650, 6621, 6700, 6664, 6663, 6662, // [!code ++]
		6661 // [!code ++]
	};
}
public class Ability : Act
```

## AM_Adv

[`@@ -530,6 +530,16 @@ public override void _OnUpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/AM_Adv.cs#L530-L535)
```cs:line-numbers=530
			EClass.player.invlunerable = false;
			return;
		}
		if (EClass.pc.isBerserk && !(EClass.pc.ai is GoalCombat)) // [!code ++]
		{ // [!code ++]
			EClass.pc.FindNearestNewEnemy(); // [!code ++]
			if (EClass.pc.enemy != null) // [!code ++]
			{ // [!code ++]
				EClass.pc.SetAIImmediate(new GoalAutoCombat(EClass.pc.enemy)); // [!code ++]
			} // [!code ++]
			EClass.player.EndTurn(); // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		if (EClass.player.lastTurn != EClass.pc.turn)
		{
			EClass.player.lastTurn = EClass.pc.turn;
```

## +ActCryRage

::: details File Created
```cs
public class ActCryRage : Ability
{
	public override bool CanPerform()
	{
		return true;
	}

	public override bool Perform()
	{
		Act.CC.PlaySound("warcry");
		Act.CC.Say("abSoulcry", Act.CC);
		foreach (Chara chara in EClass._map.charas)
		{
			if (chara.IsInMutterDistance() && EClass.rnd(2) == 0)
			{
				chara.AddCondition<ConBerserk>();
			}
		}
		return true;
	}
}
```

:::
## ActMelee

[`@@ -376,7 +376,7 @@ void Attack(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ActMelee.cs#L376-L382)
```cs:line-numbers=376
					}
				});
			}
			if (Act.TC.isChara && Act.TC.ExistsOnMap && knockback > 0 && knockback * 2 + 15 > EClass.rnd(100) && !Act.TC.isRestrained) // [!code --]
			if (Act.TC.isChara && !Act.TC.HasCondition<ConGravity>() && Act.TC.ExistsOnMap && knockback > 0 && knockback * 2 + 15 > EClass.rnd(100) && !Act.TC.isRestrained) // [!code ++]
			{
				Card.MoveResult num6 = Act.TC.Chara.TryMoveFrom(Act.CC.pos);
				bool flag3 = Act.CC.id == "tsunami";
```

## AttackProcess

[`@@ -711,7 +711,7 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/AttackProcess.cs#L711-L717)
```cs:line-numbers=711
	{
		return true;
	}
	if (TC.isChara && num3 > 0 && num3 * 2 + 15 > EClass.rnd(100) && !TC.isRestrained && TC.Chara.TryMoveFrom(CC.pos) == Card.MoveResult.Success) // [!code --]
	if (TC.isChara && !TC.HasCondition<ConGravity>() && num3 > 0 && num3 * 2 + 15 > EClass.rnd(100) && !TC.isRestrained && TC.Chara.TryMoveFrom(CC.pos) == Card.MoveResult.Success) // [!code ++]
	{
		TC.pos.PlayEffect("vanish");
		TC.PlaySound("push", 1.5f);
```

## BaseCondition

[`@@ -104,7 +104,7 @@ public bool isPerfume`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/BaseCondition.cs#L104-L110)
```cs:line-numbers=104

	public virtual bool ShouldRefresh => false;

	public virtual bool CancelAI => ConsumeTurn; // [!code --]
	public virtual bool CancelAI => false; // [!code ++]

	public virtual bool TimeBased => false;

```

## BiomeID

[`@@ -8,5 +8,6 @@ public enum BiomeID`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/BiomeID.cs#L8-L12)
```cs:line-numbers=8
	Plain,
	Artificial,
	Snow,
	Barren // [!code --]
	Barren, // [!code ++]
	Undersea // [!code ++]
}
```

## Card

[`@@ -3497,6 +3497,34 @@ public bool CanAddRune(SourceElement.Row row)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Card.cs#L3497-L3502)
```cs:line-numbers=3497
				}
			}
		}
		string encSlot = row.encSlot; // [!code ++]
		if (encSlot == null || encSlot.Length != 0) // [!code ++]
		{ // [!code ++]
			switch (encSlot) // [!code ++]
			{ // [!code ++]
			default: // [!code ++]
			{ // [!code ++]
				bool flag = false; // [!code ++]
				string[] array = row.encSlot.Split(','); // [!code ++]
				foreach (string key in array) // [!code ++]
				{ // [!code ++]
					if (EClass.sources.elements.alias[key].id == category.slot) // [!code ++]
					{ // [!code ++]
						flag = true; // [!code ++]
					} // [!code ++]
				} // [!code ++]
				if (!flag) // [!code ++]
				{ // [!code ++]
					return false; // [!code ++]
				} // [!code ++]
				break; // [!code ++]
			} // [!code ++]
			case "global": // [!code ++]
			case "all": // [!code ++]
			case "weapon": // [!code ++]
				break; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		return CountRune() < MaxRune();
	}

```

[`@@ -3906,6 +3934,10 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Card.cs#L3906-L3911)
```cs:line-numbers=3906
		{
			dmg = dmg * (100 - (int)Mathf.Min(80f, Mathf.Sqrt(LV - 50) * 2.5f)) / 100;
		}
		if (origin != null && origin.HasCondition<ConBerserk>()) // [!code ++]
		{ // [!code ++]
			dmg = dmg * 3 / 2; // [!code ++]
		} // [!code ++]
		if (EClass.game.principal.enableDamageReduction && IsPCFaction)
		{
			int num2 = ((origin != null) ? origin.LV : EClass._zone.DangerLv);
```

[`@@ -4106,7 +4138,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Card.cs#L4106-L4112)
```cs:line-numbers=4106
					if (EClass.player.invlunerable)
					{
						EvadeDeath();
						goto IL_0baa; // [!code --]
						goto IL_0bcf; // [!code ++]
					}
				}
				if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2)
```

[`@@ -4118,8 +4150,8 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Card.cs#L4118-L4125)
```cs:line-numbers=4118
			}
		}
	}
	goto IL_0baa; // [!code --]
	IL_0baa: // [!code --]
	goto IL_0bcf; // [!code ++]
	IL_0bcf: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

## Chara

[`@@ -119,6 +119,8 @@ public class Chara : Card, IPathfindWalker`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Chara.cs#L119-L124)
```cs:line-numbers=119

	public float idleTimer;

	public bool isBerserk; // [!code ++]
 // [!code ++]
	public bool isDrunk;

	public bool isConfused;
```

[`@@ -1453,7 +1455,7 @@ public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Chara.cs#L1453-L1459)
```cs:line-numbers=1453
	InitStats();
	body.SetOwner(this);
	hostility = OriginalHostility;
	if (race.EQ.Length != 0) // [!code --]
	if (race.EQ.Length != 0 || !source.equip.IsEmpty()) // [!code ++]
	{
		TryRestock(onCreate: true);
	}
```

[`@@ -8670,6 +8672,10 @@ public Condition AddCondition(Condition c, bool force = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Chara.cs#L8670-L8675)
```cs:line-numbers=8670
	{
		Refresh();
	}
	if (c.CancelAI) // [!code ++]
	{ // [!code ++]
		ai.Cancel(); // [!code ++]
	} // [!code ++]
	if (IsPC && c.ConsumeTurn && !EClass.pc.isRestrained)
	{
		EClass.player.EndTurn();
```

## +ConBerserk

::: details File Created
```cs
public class ConBerserk : BadCondition
{
	public override bool CancelAI => true;

	public override void SetOwner(Chara _owner, bool onDeserialize = false)
	{
		base.SetOwner(_owner);
		owner.isBerserk = true;
	}

	public override void OnRemoved()
	{
		owner.isBerserk = false;
		owner.ai.Cancel();
	}
}
```

:::
## ConSleep

[`@@ -35,8 +35,6 @@ public class ConSleep : BadCondition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ConSleep.cs#L35-L42)
```cs:line-numbers=35

	public override bool ConsumeTurn => true;

	public override bool CancelAI => false; // [!code --]
 // [!code --]
	public override int GetPhase()
	{
		return 0;
```

## ConWait

[`@@ -2,8 +2,6 @@ public class ConWait : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ConWait.cs#L2-L9)
```cs:line-numbers=2
{
	public override bool ConsumeTurn => true;

	public override bool CancelAI => false; // [!code --]
 // [!code --]
	public override bool WillOverride => true;

	public override int GetPhase()
```

## CoreRef

[`@@ -273,6 +273,8 @@ public class TextureDatas`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/CoreRef.cs#L273-L278)
```cs:line-numbers=273

		public TextureData objs_C;

		public TextureData objs_CL; // [!code ++]
 // [!code ++]
		public TextureData objs_CLL;

		public TextureData shadows;
```

## DOMAIN

[`@@ -10,34 +10,34 @@ public class DOMAIN`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/DOMAIN.cs#L10-L43)
```cs:line-numbers=10

	public const int domEyth = 814;

	public const int domWind = 807; // [!code --]
 // [!code --]
	public const int domElement = 806;

	public const int domComm = 805;

	public const int domArcane = 804;

	public const int domLuck = 810; // [!code --]
	public const int domMiracle = 803; // [!code ++]

	public const int domFaith = 802; // [!code --]
	public const int domMachine = 809; // [!code ++]
 // [!code ++]
	public const int domLuck = 810; // [!code ++]

	public const int domHarmony = 815;

	public const int domWind = 807; // [!code ++]
 // [!code ++]
	public const int domHarvest = 808;

	public const int domTest = 800;

	public const int domSurvival = 801; // [!code --]
 // [!code --]
	public const int domMiracle = 803; // [!code --]
	public const int domFaith = 802; // [!code ++]

	public const int domMachine = 809; // [!code --]
	public const int domSurvival = 801; // [!code ++]

	public static readonly int[] IDS = new int[16]
	{
		811, 812, 813, 814, 807, 806, 805, 804, 810, 802, // [!code --]
		815, 808, 800, 801, 803, 809 // [!code --]
		811, 812, 813, 814, 806, 805, 804, 803, 809, 810, // [!code ++]
		815, 807, 808, 800, 802, 801 // [!code ++]
	};
}
public class Domain : EClass
```

## ELEMENT

[`@@ -15,10 +15,10 @@ public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ELEMENT.cs#L15-L24)
```cs:line-numbers=15

	public const int nerve = 754;

	public const int blood = 755; // [!code --]
 // [!code --]
	public const int hotspring = 756;

	public const int purity = 759; // [!code ++]
 // [!code ++]
	public const int stimulant = 760;

	public const int recharge = 761;
```

[`@@ -27,7 +27,7 @@ public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ELEMENT.cs#L27-L33)
```cs:line-numbers=27

	public const int air = 763;

	public const int purity = 759; // [!code --]
	public const int blood = 755; // [!code ++]

	public const int _void = 0;

```

[`@@ -77,8 +77,8 @@ public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ELEMENT.cs#L77-L84)
```cs:line-numbers=77

	public static readonly int[] IDS = new int[35]
	{
		750, 751, 752, 753, 754, 755, 756, 760, 761, 762, // [!code --]
		763, 759, 0, 3, 1, 2, 5, 10, 11, 12, // [!code --]
		750, 751, 752, 753, 754, 756, 759, 760, 761, 762, // [!code ++]
		763, 755, 0, 3, 1, 2, 5, 10, 11, 12, // [!code ++]
		13, 14, 16, 17, 18, 15, 21, 22, 23, 24,
		25, 26, 29, 85, 20
	};
```

## ENC

[`@@ -52,12 +52,10 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ENC.cs#L52-L63)
```cs:line-numbers=52

	public const int mod_talisman = 609;

	public const int negatePoison = 420; // [!code --]
	public const int negateBlind = 421; // [!code ++]

	public const int mod_scatter = 607;

	public const int sustain_STR = 440; // [!code --]
 // [!code --]
	public const int negateShockwave = 430;

	public const int breathing = 429;
```

[`@@ -76,7 +74,7 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ENC.cs#L76-L82)
```cs:line-numbers=76

	public const int negateParalysis = 422;

	public const int negateBlind = 421; // [!code --]
	public const int negatePoison = 420; // [!code ++]

	public const int innocence = 418;

```

[`@@ -84,19 +82,19 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ENC.cs#L84-L102)
```cs:line-numbers=84

	public const int seeInvisible = 416;

	public const int invisibility = 415; // [!code --]
	public const int sustain_STR = 440; // [!code ++]

	public const int encHit = 414; // [!code --]
	public const int invisibility = 415; // [!code ++]

	public const int slowCorruption = 412;

	public const int encSpell = 411;

	public const int mod_splash = 608; // [!code --]
	public const int throwReturn = 410; // [!code ++]

	public const int corruption = 409;

	public const int resWeather = 408; // [!code --]
	public const int mod_splash = 608; // [!code ++]

	public const int travelSpeed = 407;

```

[`@@ -114,11 +112,11 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ENC.cs#L114-L124)
```cs:line-numbers=114

	public const int negateTeleport = 400;

	public const int sustain_END = 441; // [!code --]
	public const int encHit = 414; // [!code ++]

	public const int sustain_DEX = 442; // [!code --]
	public const int sustain_END = 441; // [!code ++]

	public const int throwReturn = 410; // [!code --]
	public const int resWeather = 408; // [!code ++]

	public const int mod_ammo = 600;

```

[`@@ -156,36 +154,38 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ENC.cs#L156-L191)
```cs:line-numbers=156

	public const int bane_man = 464;

	public const int bane_animal = 463; // [!code --]
	public const int sustain_PER = 443; // [!code ++]

	public const int bane_fairy = 462; // [!code --]
	public const int sustain_LER = 444; // [!code ++]

	public const int bane_undead = 461; // [!code --]
	public const int sustain_WIL = 445; // [!code ++]

	public const int bane_dragon = 460; // [!code --]
	public const int bane_machine = 465; // [!code ++]

	public const int sustain_CHA = 447;

	public const int bane_machine = 465; // [!code --]
 // [!code --]
	public const int sustain_MAG = 446;

	public const int sustain_WIL = 445; // [!code --]
	public const int bane_undead = 461; // [!code ++]

	public const int sustain_LER = 444; // [!code --]
	public const int bane_fairy = 462; // [!code ++]

	public const int sustain_PER = 443; // [!code --]
	public const int bane_animal = 463; // [!code ++]
 // [!code ++]
	public const int bane_dragon = 460; // [!code ++]
 // [!code ++]
	public const int sustain_DEX = 442; // [!code ++]

	public static readonly int[] IDS = new int[88]
	{
		653, 652, 651, 650, 641, 624, 621, 622, 623, 654,
		640, 655, 851, 660, 661, 662, 663, 664, 665, 666,
		850, 620, 865, 852, 656, 609, 420, 607, 440, 430, // [!code --]
		429, 428, 427, 426, 425, 424, 423, 422, 421, 418, // [!code --]
		417, 416, 415, 414, 412, 411, 608, 409, 408, 407, // [!code --]
		406, 405, 404, 403, 402, 401, 400, 441, 442, 410, // [!code --]
		600, 606, 605, 604, 603, 602, 601, 486, 485, 484, // [!code --]
		483, 482, 481, 468, 467, 466, 480, 464, 463, 462, // [!code --]
		461, 460, 447, 465, 446, 445, 444, 443 // [!code --]
		850, 620, 865, 852, 656, 609, 421, 607, 430, 429, // [!code ++]
		428, 427, 426, 425, 424, 423, 422, 420, 418, 417, // [!code ++]
		416, 440, 415, 412, 411, 410, 409, 608, 407, 406, // [!code ++]
		405, 404, 403, 402, 401, 400, 414, 441, 408, 600, // [!code ++]
		606, 605, 604, 603, 602, 601, 486, 485, 484, 483, // [!code ++]
		482, 481, 468, 467, 466, 480, 464, 443, 444, 445, // [!code ++]
		465, 447, 446, 461, 462, 463, 460, 442 // [!code ++]
	};
}
```

## FACTION

[`@@ -4,27 +4,27 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FACTION.cs#L4-L30)
```cs:line-numbers=4

public class FACTION
{
	public const int bfSea = 3605; // [!code --]
	public const int bfUndersea = 3606; // [!code ++]

	public const int bfPlain = 3600; // [!code --]
	public const int bfBeach = 3604; // [!code ++]

	public const int bfForest = 3601; // [!code --]
	public const int bfFertile = 3700; // [!code ++]

	public const int bfSnow = 3602; // [!code --]
	public const int fRation = 2207; // [!code ++]

	public const int bfHill = 3603; // [!code --]
	public const int bfSea = 3605; // [!code ++]

	public const int bfGeyser = 3701;

	public const int bfBeach = 3604; // [!code --]
	public const int bfHill = 3603; // [!code ++]

	public const int bfFertile = 3700; // [!code --]
	public const int bfSnow = 3602; // [!code ++]

	public const int bfCave = 3500; // [!code --]
	public const int bfForest = 3601; // [!code ++]

	public const int bfRuin = 3702; // [!code --]
	public const int bfPlain = 3600; // [!code ++]

	public const int fRation = 2207; // [!code --]
	public const int bfCave = 3500; // [!code ++]

	public const int actBuildRecipe = 4005;

```

[`@@ -36,11 +36,11 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FACTION.cs#L36-L46)
```cs:line-numbers=36

	public const int fPromo = 2202;

	public const int fElec = 2201; // [!code --]
	public const int fSoil = 2200; // [!code ++]

	public const int fHeirloom = 2120;

	public const int bfTranquil = 3703; // [!code --]
	public const int bfRuin = 3702; // [!code ++]

	public const int fTaxEvasion = 2119;

```

[`@@ -52,20 +52,22 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FACTION.cs#L52-L71)
```cs:line-numbers=52

	public const int fAttraction = 2206;

	public const int bfVolcano = 3704; // [!code --]
	public const int bfTranquil = 3703; // [!code ++]

	public const int bfSilica = 3802;

	public const int bfFish = 3706; // [!code --]
	public const int bfHunt = 3705; // [!code ++]

	public const int actBuildInspect = 4006;

	public const int actBuildAnywhere = 4003; // [!code --]
	public const int actBuildCollect = 4004; // [!code ++]

	public const int actBuildTerrain = 4002; // [!code --]
	public const int actBuildAnywhere = 4003; // [!code ++]

	public const int fAdmin = 2115;

	public const int actBuildTerrain = 4002; // [!code ++]
 // [!code ++]
	public const int actBuildMine = 4001;

	public const int actBuildCut = 4000;
```

[`@@ -78,9 +80,7 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FACTION.cs#L78-L86)
```cs:line-numbers=78

	public const int bfGum = 3803;

	public const int bfHunt = 3705; // [!code --]
 // [!code --]
	public const int actBuildCollect = 4004; // [!code --]
	public const int bfMushroom = 3801; // [!code ++]

	public const int bfCoal = 3800;

```

[`@@ -102,20 +102,22 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FACTION.cs#L102-L121)
```cs:line-numbers=102

	public const int bfMonster = 3707;

	public const int bfMushroom = 3801; // [!code --]
	public const int bfFish = 3706; // [!code ++]
 // [!code ++]
	public const int bfVolcano = 3704; // [!code ++]

	public const int fConstruction = 2003;

	public const int fSoil = 2200; // [!code --]
	public const int fElec = 2201; // [!code ++]

	public static readonly int[] IDS = new int[52] // [!code --]
	public static readonly int[] IDS = new int[53] // [!code ++]
	{
		3605, 3600, 3601, 3602, 3603, 3701, 3604, 3700, 3500, 3702, // [!code --]
		2207, 4005, 2205, 2204, 2203, 2202, 2201, 2120, 3703, 2119, // [!code --]
		2118, 2117, 2116, 2206, 3704, 3802, 3706, 4006, 4003, 4002, // [!code --]
		2115, 4001, 4000, 3900, 3805, 3804, 3803, 3705, 4004, 3800, // [!code --]
		3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707, 3801, // [!code --]
		2003, 2200 // [!code --]
		3606, 3604, 3700, 2207, 3605, 3701, 3603, 3602, 3601, 3600, // [!code ++]
		3500, 4005, 2205, 2204, 2203, 2202, 2200, 2120, 3702, 2119, // [!code ++]
		2118, 2117, 2116, 2206, 3703, 3802, 3705, 4006, 4004, 4003, // [!code ++]
		2115, 4002, 4001, 4000, 3900, 3805, 3804, 3803, 3801, 3800, // [!code ++]
		3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707, 3706, // [!code ++]
		3704, 2003, 2201 // [!code ++]
	};
}
public class Faction : EClass
```

## FEAT

[`@@ -3,7 +3,11 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L3-L9)
```cs:line-numbers=3

public class FEAT
{
	public const int featSnail = 1211; // [!code --]
	public const int featElea = 1213; // [!code ++]
 // [!code ++]
	public const int featResCurse = 1641; // [!code ++]
 // [!code ++]
	public const int featAnimalLover = 1640; // [!code ++]

	public const int featFaith = 1636;

```

[`@@ -51,19 +55,15 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L51-L69)
```cs:line-numbers=51

	public const int featExecutioner = 1420;

	public const int featMilitant = 1419; // [!code --]
 // [!code --]
	public const int featSwordsage = 1418; // [!code --]
 // [!code --]
	public const int featAnimalLover = 1640; // [!code --]
 // [!code --]
	public const int featResCurse = 1641; // [!code --]
 // [!code --]
	public const int featSleeper = 1642;

	public const int featSorter = 1643;

	public const int featUndead = 1210; // [!code --]
	public const int featBodyParts = 1644; // [!code ++]
 // [!code ++]
	public const int featParty = 1645; // [!code ++]
 // [!code ++]
	public const int featFairyResist = 1212; // [!code ++]

	public const int featSlowFood = 1200;

```

[`@@ -85,12 +85,16 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L85-L96)
```cs:line-numbers=85

	public const int featFluffyTail = 1209;

	public const int featFisher = 1659; // [!code --]
	public const int featUndead = 1210; // [!code ++]

	public const int featWitch = 1417; // [!code --]
	public const int featMilitant = 1419; // [!code ++]
 // [!code ++]
	public const int featFisher = 1659; // [!code ++]

	public const int featManaCost = 1657;

	public const int featScavenger = 1656; // [!code ++]
 // [!code ++]
	public const int featModelBeliever = 1655;

	public const int featHeavyCasting = 1654;
```

[`@@ -111,21 +115,13 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L111-L131)
```cs:line-numbers=111

	public const int featLonelySoul = 1646;

	public const int featParty = 1645; // [!code --]
 // [!code --]
	public const int featBodyParts = 1644; // [!code --]
 // [!code --]
	public const int featScavenger = 1656; // [!code --]
 // [!code --]
	public const int featInquisitor = 1416; // [!code --]
 // [!code --]
	public const int featChef = 1658;

	public const int featWhiteVixen = 1414; // [!code --]
	public const int featSwordsage = 1418; // [!code ++]

	public const int featLightEater = 1235; // [!code --]
	public const int featSnail = 1211; // [!code ++]

	public const int featNorland = 1236; // [!code --]
	public const int featInquisitor = 1416; // [!code ++]

	public const int featRoran = 1237;

```

[`@@ -137,18 +133,18 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L137-L154)
```cs:line-numbers=137

	public const int featGod_element1 = 1300;

	public const int featGod_earth1 = 1305; // [!code ++]
 // [!code ++]
	public const int featGod_wind1 = 1310;

	public const int featGod_machine1 = 1315; // [!code --]
	public const int featGod_healing1 = 1320; // [!code ++]

	public const int featHeavyEater = 1234; // [!code --]
	public const int featGod_harvest1 = 1325; // [!code ++]

	public const int featGod_healing1 = 1320; // [!code --]
	public const int featNorland = 1236; // [!code ++]

	public const int featGod_luck1 = 1330;

	public const int featGod_harmony1 = 1335; // [!code --]
 // [!code --]
	public const int featGod_oblivion1 = 1340;

	public const int featGod_trickery1 = 1345;
```

[`@@ -163,19 +159,19 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L163-L181)
```cs:line-numbers=163

	public const int featWizard = 1402;

	public const int featGod_harvest1 = 1325; // [!code --]
 // [!code --]
	public const int featFarmer = 1403;

	public const int featCosmicHorror = 1233; // [!code --]
	public const int featArcher = 1404; // [!code ++]

	public const int featNirvana = 1231; // [!code --]
	public const int featGod_harmony1 = 1335; // [!code ++]

	public const int featFoxMaid = 1415; // [!code --]
	public const int featPianist = 1405; // [!code ++]

	public const int featElea = 1213; // [!code --]
	public const int featLightEater = 1235; // [!code ++]

	public const int featManaPrecision = 1214; // [!code --]
	public const int featCosmicHorror = 1233; // [!code ++]
 // [!code ++]
	public const int featWitch = 1417; // [!code ++]

	public const int featDwarf = 1215;

```

[`@@ -189,18 +185,18 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L189-L206)
```cs:line-numbers=189

	public const int featFate = 1220;

	public const int featBaby = 1232; // [!code --]
 // [!code --]
	public const int featSpike = 1221;

	public const int featAcidBody = 1223; // [!code --]
	public const int featSplit = 1222; // [!code ++]

	public const int featFairyResist = 1212; // [!code --]
	public const int featHeavyEater = 1234; // [!code ++]

	public const int featShiva = 1224; // [!code --]
	public const int featAcidBody = 1223; // [!code ++]

	public const int featLoyal = 1225;

	public const int featManaPrecision = 1214; // [!code ++]
 // [!code ++]
	public const int featUnderground = 1226;

	public const int featServant = 1227;
```

[`@@ -211,15 +207,17 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L211-L225)
```cs:line-numbers=211

	public const int featAdam = 1230;

	public const int featSplit = 1222; // [!code --]
	public const int featNirvana = 1231; // [!code ++]

	public const int featArcher = 1404; // [!code --]
	public const int featBaby = 1232; // [!code ++]

	public const int featGod_earth1 = 1305; // [!code --]
	public const int featShiva = 1224; // [!code ++]

	public const int featTourist = 1406;

	public const int featPianist = 1405; // [!code --]
	public const int featGod_machine1 = 1315; // [!code ++]
 // [!code ++]
	public const int featPaladin2 = 1408; // [!code ++]

	public const int featBoost = 1409;

```

[`@@ -229,26 +227,28 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FEAT.cs#L229-L254)
```cs:line-numbers=229

	public const int featLuckyCat = 1412;

	public const int featPaladin = 1407; // [!code --]
	public const int featFoxMaid = 1415; // [!code ++]

	public const int featPaladin2 = 1408; // [!code --]
	public const int featPaladin = 1407; // [!code ++]

	public const int featFairysan = 1413;

	public const int featWhiteVixen = 1414; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[116]
	{
		1211, 1636, 1635, 1634, 1633, 1632, 1631, 1630, 1629, 1628, // [!code --]
		1627, 1626, 1625, 1624, 1623, 1622, 1621, 1620, 1612, 1611, // [!code --]
		1610, 1422, 1421, 1420, 1419, 1418, 1640, 1641, 1642, 1643, // [!code --]
		1210, 1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208, // [!code --]
		1209, 1659, 1417, 1657, 1655, 1654, 1653, 1652, 1651, 1650, // [!code --]
		1649, 1648, 1647, 1646, 1645, 1644, 1656, 1416, 1658, 1414, // [!code --]
		1235, 1236, 1237, 1238, 1239, 1240, 1300, 1310, 1315, 1234, // [!code --]
		1320, 1330, 1335, 1340, 1345, 1350, 1355, 1400, 1401, 1402, // [!code --]
		1325, 1403, 1233, 1231, 1415, 1213, 1214, 1215, 1216, 1217, // [!code --]
		1218, 1219, 1220, 1232, 1221, 1223, 1212, 1224, 1225, 1226, // [!code --]
		1227, 1228, 1229, 1230, 1222, 1404, 1305, 1406, 1405, 1409, // [!code --]
		1410, 1411, 1412, 1407, 1408, 1413 // [!code --]
		1213, 1641, 1640, 1636, 1635, 1634, 1633, 1632, 1631, 1630, // [!code ++]
		1629, 1628, 1627, 1626, 1625, 1624, 1623, 1622, 1621, 1620, // [!code ++]
		1612, 1611, 1610, 1422, 1421, 1420, 1642, 1643, 1644, 1645, // [!code ++]
		1212, 1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208, // [!code ++]
		1209, 1210, 1419, 1659, 1657, 1656, 1655, 1654, 1653, 1652, // [!code ++]
		1651, 1650, 1649, 1648, 1647, 1646, 1658, 1418, 1211, 1416, // [!code ++]
		1237, 1238, 1239, 1240, 1300, 1305, 1310, 1320, 1325, 1236, // [!code ++]
		1330, 1340, 1345, 1350, 1355, 1400, 1401, 1402, 1403, 1404, // [!code ++]
		1335, 1405, 1235, 1233, 1417, 1215, 1216, 1217, 1218, 1219, // [!code ++]
		1220, 1221, 1222, 1234, 1223, 1225, 1214, 1226, 1227, 1228, // [!code ++]
		1229, 1230, 1231, 1232, 1224, 1406, 1315, 1408, 1409, 1410, // [!code ++]
		1411, 1412, 1415, 1407, 1413, 1414 // [!code ++]
	};
}
public class Feat : Element
```

## FOOD

[`@@ -1,32 +1,32 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/FOOD.cs#L1-L32)
```cs:line-numbers=1
public class FOOD
{
	public const int food_undead = 709; // [!code --]
 // [!code --]
	public const int justcooked = 757; // [!code --]
 // [!code --]
	public const int food_god = 758; // [!code --]
	public const int food_CHA = 700; // [!code ++]

	public const int food_cat = 701;

	public const int food_CHA = 700; // [!code --]
 // [!code --]
	public const int food_love = 703;

	public const int food_poison = 702; // [!code --]
	public const int food_bug = 704; // [!code ++]

	public const int kirimi = 707; // [!code --]
	public const int food_poison = 702; // [!code ++]

	public const int loseWeight = 706;

	public const int kirimi = 707; // [!code ++]
 // [!code ++]
	public const int food_human = 708;

	public const int food_bug = 704; // [!code --]
	public const int food_undead = 709; // [!code ++]
 // [!code ++]
	public const int justcooked = 757; // [!code ++]

	public const int gainWeight = 705;

	public const int food_god = 758; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[12]
	{
		709, 757, 758, 701, 700, 703, 702, 707, 706, 708, // [!code --]
		704, 705 // [!code --]
		700, 701, 703, 704, 702, 706, 707, 708, 709, 757, // [!code ++]
		705, 758 // [!code ++]
	};
}
```

## GoalCombat

[`@@ -43,7 +43,11 @@ public class ItemAbility`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L43-L49)
```cs:line-numbers=43

	public override bool CanManualCancel()
	{
		return true; // [!code --]
		if (owner != null) // [!code ++]
		{ // [!code ++]
			return !owner.isBerserk; // [!code ++]
		} // [!code ++]
		return false; // [!code ++]
	}

	public override IEnumerable<Status> Run()
```

[`@@ -503,7 +507,7 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L503-L509)
```cs:line-numbers=503
		ability.priority = 0;
		ability.tg = null;
		ability.pt = false;
		if (EClass.rnd(100) >= ability.chance || (isBlind && ability.act.HasTag("reqSight"))) // [!code --]
		if (EClass.rnd(100) >= ability.chance || (isBlind && ability.act.HasTag("reqSight")) || (act is Spell && owner.isBerserk)) // [!code ++]
		{
			continue;
		}
```

[`@@ -571,10 +575,14 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L571-L580)
```cs:line-numbers=571
		switch (text)
		{
		case "item":
			if (owner.isBerserk) // [!code ++]
			{ // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			num = (ability.act as ActItem).BuildAct(owner);
			break;
		case "wait":
			if (owner.IsPCParty) // [!code --]
			if (owner.isBerserk || owner.IsPCParty) // [!code ++]
			{
				continue;
			}
```

[`@@ -582,9 +590,9 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L582-L590)
```cs:line-numbers=582
			break;
		case "taunt":
		{
			bool flag7 = owner.HasCondition<StanceTaunt>(); // [!code --]
			bool flag8 = tactics.source.taunt != -1 && 100 * owner.hp / owner.MaxHP >= tactics.source.taunt; // [!code --]
			num = ((flag7 && !flag8) ? 100 : ((!flag7 && flag8) ? 100 : 0)); // [!code --]
			bool flag8 = owner.HasCondition<StanceTaunt>(); // [!code ++]
			bool flag9 = tactics.source.taunt != -1 && 100 * owner.hp / owner.MaxHP >= tactics.source.taunt; // [!code ++]
			num = ((flag8 && !flag9) ? 100 : ((!flag8 && flag9) ? 100 : 0)); // [!code ++]
			break;
		}
		case "melee":
```

[`@@ -641,13 +649,25 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L641-L653)
```cs:line-numbers=641
			}
			break;
		case "teleport":
			if (owner.isBerserk) // [!code ++]
			{ // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			num = 40;
			break;
		case "any":
			if (owner.isBerserk) // [!code ++]
			{ // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			num = 50;
			break;
		case "hot":
		case "heal":
			if (owner.isBerserk) // [!code ++]
			{ // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			isHOT = text == "hot";
			num = ForeachChara(ability, (Chara c) => HealFactor(c), isFriendlyAbility: true);
			if (ability.aiPt || (owner.IsPC && tactics.CastPartyBuff))
```

[`@@ -663,13 +683,13 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L663-L675)
```cs:line-numbers=663
			{
				continue;
			}
			bool flag6 = text == "dot"; // [!code --]
			if (flag6 && (owner.isRestrained || (tc != null && tc.IsRestrainedResident))) // [!code --]
			bool flag7 = text == "dot"; // [!code ++]
			if (flag7 && (owner.isRestrained || (tc != null && tc.IsRestrainedResident))) // [!code ++]
			{
				continue;
			}
			num = ((text == "attackMelee") ? tactics.P_Melee : tactics.P_Spell) + GetAttackMod(act);
			if (num > 0 && flag6) // [!code --]
			if (num > 0 && flag7) // [!code ++]
			{
				num += 10;
			}
```

[`@@ -685,13 +705,13 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L685-L697)
```cs:line-numbers=685
			{
				continue;
			}
			bool flag9 = ability.act is ActBolt; // [!code --]
			bool flag6 = ability.act is ActBolt; // [!code ++]
			if (!flag || (owner.IsPCParty && (EClass._zone.IsTown || EClass._zone.IsPCFaction)) || (act.id == 9150 && EClass._zone.IsPCFaction && owner.IsNeutralOrAbove()))
			{
				continue;
			}
			GetNumEnemy(flag9 ? 6 : 5); // [!code --]
			if (numEnemy == 0 || (owner.IsPCFactionOrMinion && GetNumNeutral(flag9 ? 6 : 5) > 0)) // [!code --]
			GetNumEnemy(flag6 ? 6 : 5); // [!code ++]
			if (numEnemy == 0 || (owner.IsPCFactionOrMinion && GetNumNeutral(flag6 ? 6 : 5) > 0)) // [!code ++]
			{
				continue;
			}
```

[`@@ -699,6 +719,10 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L699-L704)
```cs:line-numbers=699
			break;
		}
		case "buff":
			if (owner.isBerserk) // [!code ++]
			{ // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			num = ForeachChara(ability, (Chara c) => (!c.HasCondition(s.proc[1])) ? tactics.P_Buff : 0, isFriendlyAbility: true);
			if (ability.aiPt || (owner.IsPC && tactics.CastPartyBuff))
			{
```

[`@@ -706,6 +730,10 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L706-L711)
```cs:line-numbers=706
			}
			break;
		case "buffStats":
			if (owner.isBerserk) // [!code ++]
			{ // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			num = ForeachChara(ability, delegate(Chara c)
			{
				Element buffStats2 = c.GetBuffStats(s.proc[1]);
```

[`@@ -717,7 +745,7 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L717-L723)
```cs:line-numbers=717
			}
			break;
		case "debuff":
			if (!flag) // [!code --]
			if (owner.isBerserk || !flag) // [!code ++]
			{
				continue;
			}
```

[`@@ -728,7 +756,7 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L728-L734)
```cs:line-numbers=728
			}
			break;
		case "debuffStats":
			if (!flag) // [!code --]
			if (owner.isBerserk || !flag) // [!code ++]
			{
				continue;
			}
```

[`@@ -755,7 +783,7 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L755-L761)
```cs:line-numbers=755
			break;
		case "summon":
		{
			if (owner.isRestrained || (tc != null && tc.IsRestrainedResident)) // [!code --]
			if (owner.isBerserk || owner.isRestrained || (tc != null && tc.IsRestrainedResident)) // [!code ++]
			{
				continue;
			}
```

[`@@ -768,7 +796,7 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L768-L774)
```cs:line-numbers=768
			break;
		}
		case "summonAlly":
			if (owner.isRestrained || (tc != null && tc.IsRestrainedResident)) // [!code --]
			if (owner.isBerserk || owner.isRestrained || (tc != null && tc.IsRestrainedResident)) // [!code ++]
			{
				continue;
			}
```

[`@@ -786,7 +814,7 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L786-L792)
```cs:line-numbers=786
			num = tactics.P_Summon;
			break;
		case "suicide":
			if (owner.IsPC || owner.HasCondition<ConWet>()) // [!code --]
			if (owner.isBerserk || owner.IsPC || owner.HasCondition<ConWet>()) // [!code ++]
			{
				continue;
			}
```

[`@@ -857,36 +885,36 @@ int HealFactor(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L857-L892)
```cs:line-numbers=857
			{
				return 0;
			}
			float num3 = (float)c.hp / (float)c.MaxHP; // [!code --]
			if (num3 > (isHOT ? 0.85f : 0.75f)) // [!code --]
			float num8 = (float)c.hp / (float)c.MaxHP; // [!code ++]
			if (num8 > (isHOT ? 0.85f : 0.75f)) // [!code ++]
			{
				return 0;
			}
			int num4 = tactics.P_Heal - (int)((float)tactics.P_Heal * num3) + (isHOT ? 50 : 25); // [!code --]
			int num9 = tactics.P_Heal - (int)((float)tactics.P_Heal * num8) + (isHOT ? 50 : 25); // [!code ++]
			foreach (Condition condition in c.conditions)
			{
				if (condition is ConFear)
				{
					num4 += 10; // [!code --]
					num9 += 10; // [!code ++]
				}
				else if (condition is ConPoison)
				{
					num4 += 2; // [!code --]
					num9 += 2; // [!code ++]
				}
				else if (condition is ConConfuse)
				{
					num4 += 4; // [!code --]
					num9 += 4; // [!code ++]
				}
				else if (condition is ConDim)
				{
					num4 += 6; // [!code --]
					num9 += 6; // [!code ++]
				}
				else if (condition is ConBleed)
				{
					num4 += 8; // [!code --]
					num9 += 8; // [!code ++]
				}
			}
			return num4; // [!code --]
			return num9; // [!code ++]
		}
	}
	abilities.Sort((ItemAbility a, ItemAbility b) => b.priority - a.priority);
```

[`@@ -972,8 +1000,8 @@ void BuildCharaList()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L972-L979)
```cs:line-numbers=972
		{
			if (chara2 != owner)
			{
				int num7 = owner.Dist(chara2); // [!code --]
				if (num7 > sightRadius || !owner.CanSeeLos(chara2, num7)) // [!code --]
				int num5 = owner.Dist(chara2); // [!code ++]
				if (num5 > sightRadius || !owner.CanSeeLos(chara2, num5)) // [!code ++]
				{
					continue;
				}
```

[`@@ -989,11 +1017,11 @@ int ForeachChara(ItemAbility a, Func<Chara, int> func, bool isFriendlyAbility)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L989-L999)
```cs:line-numbers=989
			return func(owner);
		}
		BuildCharaList();
		int num8 = 0; // [!code --]
		int num6 = 0; // [!code ++]
		foreach (Chara chara3 in charas)
		{
			int num9 = func(chara3); // [!code --]
			if (num9 > 0) // [!code --]
			int num7 = func(chara3); // [!code ++]
			if (num7 > 0) // [!code ++]
			{
				if (isFriendlyAbility)
				{
```

[`@@ -1010,21 +1038,21 @@ int ForeachChara(ItemAbility a, Func<Chara, int> func, bool isFriendlyAbility)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L1010-L1030)
```cs:line-numbers=1010
					}
					if (chara3 != owner)
					{
						num9 += tactics.P_Party; // [!code --]
						num7 += tactics.P_Party; // [!code ++]
					}
				}
				else if (!owner.IsHostile(chara3))
				{
					continue;
				}
				if (num9 >= num8) // [!code --]
				if (num7 >= num6) // [!code ++]
				{
					a.tg = chara3;
					num8 = num9; // [!code --]
					num6 = num7; // [!code ++]
				}
			}
		}
		return num8; // [!code --]
		return num6; // [!code ++]
	}
	int GetAttackMod(Act a)
	{
```

[`@@ -1032,30 +1060,30 @@ int GetAttackMod(Act a)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GoalCombat.cs#L1032-L1061)
```cs:line-numbers=1032
		{
			return 0;
		}
		int num5 = ((a.source.aliasRef == "mold") ? owner.MainElement.id : EClass.sources.elements.alias[a.source.aliasRef].id); // [!code --]
		int num6 = -15 * tc.ResistLvFrom(num5); // [!code --]
		switch (num5) // [!code --]
		int num3 = ((a.source.aliasRef == "mold") ? owner.MainElement.id : EClass.sources.elements.alias[a.source.aliasRef].id); // [!code ++]
		int num4 = -15 * tc.ResistLvFrom(num3); // [!code ++]
		switch (num3) // [!code ++]
		{
		case 910:
			if (tc.isWet)
			{
				num6 -= 30; // [!code --]
				num4 -= 30; // [!code ++]
			}
			break;
		case 911:
			if (tc.HasCondition<ConBurning>())
			{
				num6 -= 30; // [!code --]
				num4 -= 30; // [!code ++]
			}
			break;
		case 912:
			if (tc.isWet)
			{
				num6 += 30; // [!code --]
				num4 += 30; // [!code ++]
			}
			break;
		}
		return num6; // [!code --]
		return num4; // [!code ++]
	}
	void GetNumEnemy(int radius)
	{
```

## GrowSystem

[`@@ -284,7 +284,14 @@ public bool CanGrow(VirtualDate date)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/GrowSystem.cs#L284-L290)
```cs:line-numbers=284
			return false;
		}
	}
	if (NeedUndersea && !EClass._zone.IsUnderwater && !cell.sourceFloor.tileType.IsDeepWater) // [!code --]
	if (NeedUndersea) // [!code ++]
	{ // [!code ++]
		if (!EClass._zone.IsUnderwater && !cell.sourceFloor.tileType.IsDeepWater) // [!code ++]
		{ // [!code ++]
			return false; // [!code ++]
		} // [!code ++]
	} // [!code ++]
	else if (EClass._zone.IsUnderwater) // [!code ++]
	{
		return false;
	}
```

## MUTATION

[`@@ -1,28 +1,30 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/MUTATION.cs#L1-L28)
```cs:line-numbers=1
public class MUTATION
{
	public const int mutationSkin = 1510; // [!code --]
 // [!code --]
	public const int mutationSkinN = 1511; // [!code --]
 // [!code --]
	public const int mutationSpeedN = 1519;

	public const int mutationEyeN = 1513; // [!code --]
 // [!code --]
	public const int mutationDex = 1514; // [!code --]
	public const int mutationSpeed = 1518; // [!code ++]

	public const int mutationDexN = 1515; // [!code --]
	public const int mutationRegenN = 1517; // [!code ++]

	public const int mutationRegen = 1516;

	public const int mutationRegenN = 1517; // [!code --]
	public const int mutationEye = 1512; // [!code ++]

	public const int mutationSpeed = 1518; // [!code --]
	public const int mutationEyeN = 1513; // [!code ++]
 // [!code ++]
	public const int mutationSkinN = 1511; // [!code ++]
 // [!code ++]
	public const int mutationSkin = 1510; // [!code ++]

	public const int mutationStr = 1520;

	public const int mutationEye = 1512; // [!code --]
	public const int mutationDexN = 1515; // [!code ++]

	public const int mutationCha = 1522; // [!code --]
	public const int mutationStrN = 1521; // [!code ++]
 // [!code ++]
	public const int mutationDex = 1514; // [!code ++]
 // [!code ++]
	public const int mutationChaN = 1523; // [!code ++]

	public const int etherPoisonHand = 1565;

```

[`@@ -30,7 +32,7 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/MUTATION.cs#L30-L36)
```cs:line-numbers=30

	public const int etherProvoke = 1563;

	public const int mutationStrN = 1521; // [!code --]
	public const int mutationCha = 1522; // [!code ++]

	public const int etherStupid = 1561;

```

[`@@ -50,38 +52,36 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/MUTATION.cs#L50-L87)
```cs:line-numbers=50

	public const int etherArmor = 1562;

	public const int mutationBrain = 1524; // [!code --]
 // [!code --]
	public const int etherFeet = 1552;

	public const int etherUgly = 1551; // [!code --]
 // [!code --]
	public const int etherGravity = 1550; // [!code --]
	public const int mutationBrain = 1524; // [!code ++]

	public const int mutationBodyN = 1531; // [!code --]
	public const int etherEye = 1553; // [!code ++]

	public const int mutationBody = 1530; // [!code --]
	public const int mutationCold = 1526; // [!code ++]

	public const int mutationLightningN = 1529; // [!code --]
	public const int mutationColdN = 1527; // [!code ++]

	public const int mutationLightning = 1528;

	public const int mutationColdN = 1527; // [!code --]
	public const int mutationBrainN = 1525; // [!code ++]

	public const int mutationCold = 1526; // [!code --]
	public const int mutationBody = 1530; // [!code ++]

	public const int mutationBrainN = 1525; // [!code --]
	public const int mutationBodyN = 1531; // [!code ++]

	public const int mutationChaN = 1523; // [!code --]
	public const int etherGravity = 1550; // [!code ++]

	public const int etherEye = 1553; // [!code --]
	public const int etherUgly = 1551; // [!code ++]
 // [!code ++]
	public const int mutationLightningN = 1529; // [!code ++]

	public static readonly int[] IDS = new int[38]
	{
		1510, 1511, 1519, 1513, 1514, 1515, 1516, 1517, 1518, 1520, // [!code --]
		1512, 1522, 1565, 1564, 1563, 1521, 1561, 1560, 1559, 1558, // [!code --]
		1557, 1556, 1555, 1554, 1562, 1524, 1552, 1551, 1550, 1531, // [!code --]
		1530, 1529, 1528, 1527, 1526, 1525, 1523, 1553 // [!code --]
		1519, 1518, 1517, 1516, 1512, 1513, 1511, 1510, 1520, 1515, // [!code ++]
		1521, 1514, 1523, 1565, 1564, 1563, 1522, 1561, 1560, 1559, // [!code ++]
		1558, 1557, 1556, 1555, 1554, 1562, 1552, 1524, 1553, 1526, // [!code ++]
		1527, 1528, 1525, 1530, 1531, 1550, 1551, 1529 // [!code ++]
	};
}
public class Mutation : Feat
```

## MapGen

[`@@ -344,7 +344,7 @@ public void MakeNeighbor()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/MapGen.cs#L344-L350)
```cs:line-numbers=344
{
	EloMap.TileInfo thisInfo;
	int seaDir;
	if (bp.surrounding != null) // [!code --]
	if (bp.surrounding != null && !zone.IsUnderwater) // [!code ++]
	{
		thisInfo = bp.surrounding[1, 1];
		seaDir = (thisInfo.sea ? (1 + EClass.rnd(4)) : 0);
```

## MapGenDungen

[`@@ -220,94 +220,36 @@ protected override bool OnGenerateTerrain()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/MapGenDungen.cs#L220-L313)
```cs:line-numbers=220
			EClass._zone.AddCard(t3, point).Install();
		}
	}
	if (zone.IsUnderwater) // [!code --]
	{ // [!code --]
		for (int l = 0; l < 30 + EClass.rnd(30); l++) // [!code --]
		{ // [!code --]
			zone.SpawnMob(null, SpawnSetting.Fish()); // [!code --]
		} // [!code --]
		Crawler crawler = Crawler.Create("pasture"); // [!code --]
		int tries = (EClass.debug.enable ? 3 : EClass.rnd(EClass.rnd(EClass.rnd(EClass.rnd(5) + 1) + 1) + 1)); // [!code --]
		Thing seed = null; // [!code --]
		int num4 = Mathf.Min(EClass._zone.DangerLv, EClass.pc.Evalue(286) * 2 / 3); // [!code --]
		if (num4 > 0) // [!code --]
		{ // [!code --]
			seed = TraitSeed.MakeSeed(EClass.sources.objs.map[137]); // [!code --]
			Rand.SetSeed(EClass._zone.uid * 10 + num4); // [!code --]
			TraitSeed.LevelSeed(seed, (seed.trait as TraitSeed).row, num4); // [!code --]
			Rand.SetSeed(); // [!code --]
			seed.elements.SetBase(2, EClass.curve(seed.encLV, 50, 10, 80)); // [!code --]
		} // [!code --]
		crawler.CrawlUntil(EClass._map, () => EClass._map.GetRandomPoint(), tries, delegate(Crawler.Result r) // [!code --]
		{ // [!code --]
			int id2 = 137; // [!code --]
			foreach (Point point2 in r.points) // [!code --]
			{ // [!code --]
				if (!point2.cell.isModified && !point2.HasThing && !point2.HasBlock && !point2.HasObj) // [!code --]
				{ // [!code --]
					map.SetObj(point2.x, point2.z, id2); // [!code --]
					int idx = 3 + ((EClass.rnd(3) == 0) ? 1 : 0) + ((EClass.rnd(3) == 0) ? (-1) : 0) + ((EClass.rnd(3) == 0) ? (-1) : 0); // [!code --]
					point2.growth.SetStage(idx); // [!code --]
					if (seed != null) // [!code --]
					{ // [!code --]
						EClass._map.AddPlant(point2, seed); // [!code --]
					} // [!code --]
				} // [!code --]
			} // [!code --]
			return false; // [!code --]
		}); // [!code --]
		crawler.CrawlUntil(tries: EClass.rnd(EClass.rnd(5) + 1) + 1, map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r) // [!code --]
		{ // [!code --]
			int id = 136; // [!code --]
			foreach (Point point3 in r.points) // [!code --]
			{ // [!code --]
				if (!point3.cell.isModified && !point3.HasThing && !point3.HasBlock && !point3.HasObj) // [!code --]
				{ // [!code --]
					map.SetObj(point3.x, point3.z, id, 1, EClass.rnd(4)); // [!code --]
				} // [!code --]
			} // [!code --]
			return false; // [!code --]
		}); // [!code --]
		crawler.CrawlUntil(tries: EClass.rnd(EClass.rnd(10) + 1) + 3, map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r) // [!code --]
		{ // [!code --]
			int idFloor = 121; // [!code --]
			foreach (Point point4 in r.points) // [!code --]
			{ // [!code --]
				map.SetFloor(point4.x, point4.z, 97, idFloor, Mathf.Clamp(4 - r.startPos.Distance(point4) + EClass.rnd(3) - EClass.rnd(3), 0, 3)); // [!code --]
			} // [!code --]
			return false; // [!code --]
		}); // [!code --]
	} // [!code --]
	bool forest = zone is Zone_RandomDungeonForest;
	if (zone is Zone_RandomDungeonPlain || (forest && EClass.rnd(3) == 0))
	{
		Crawler.Create("pasture").CrawlUntil(tries: EClass.debug.enable ? 3 : EClass.rnd(EClass.rnd(3) + 1), map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r)
		{
			int num5 = ((forest || EClass.rnd(5) == 0) ? EClass.sources.objs.rows.Where((SourceObj.Row a) => a.ContainsTag("wild")).RandomItem().id : ((EClass.rnd(3) == 0) ? 108 : 105)); // [!code --]
			int num4 = ((forest || EClass.rnd(5) == 0) ? EClass.sources.objs.rows.Where((SourceObj.Row a) => a.ContainsTag("wild")).RandomItem().id : ((EClass.rnd(3) == 0) ? 108 : 105)); // [!code ++]
			Thing thing5 = null;
			int num6 = Mathf.Min(EClass._zone.DangerLv, EClass.pc.Evalue(286) * 2 / 3); // [!code --]
			if (num6 > 0) // [!code --]
			int num5 = Mathf.Min(EClass._zone.DangerLv, EClass.pc.Evalue(286) * 2 / 3); // [!code ++]
			if (num5 > 0) // [!code ++]
			{
				thing5 = TraitSeed.MakeSeed(EClass.sources.objs.map[num5]); // [!code --]
				Rand.SetSeed(EClass._zone.uid * 10 + num6); // [!code --]
				TraitSeed.LevelSeed(thing5, (thing5.trait as TraitSeed).row, num6); // [!code --]
				thing5 = TraitSeed.MakeSeed(EClass.sources.objs.map[num4]); // [!code ++]
				Rand.SetSeed(EClass._zone.uid * 10 + num5); // [!code ++]
				TraitSeed.LevelSeed(thing5, (thing5.trait as TraitSeed).row, num5); // [!code ++]
				Rand.SetSeed();
				thing5.elements.SetBase(2, EClass.curve(thing5.encLV, 50, 10, 80));
			}
			foreach (Point point5 in r.points) // [!code --]
			foreach (Point point2 in r.points) // [!code ++]
			{
				if (!point5.cell.isModified && !point5.HasThing && !point5.HasBlock && !point5.HasObj) // [!code --]
				if (!point2.cell.isModified && !point2.HasThing && !point2.HasBlock && !point2.HasObj) // [!code ++]
				{
					map.SetObj(point5.x, point5.z, num5); // [!code --]
					int num7 = 3; // [!code --]
					map.SetObj(point2.x, point2.z, num4); // [!code ++]
					int num6 = 3; // [!code ++]
					if (EClass.rnd(6) == 0)
					{
						num7++; // [!code --]
						num6++; // [!code ++]
					}
					point5.growth.SetStage(num7); // [!code --]
					point2.growth.SetStage(num6); // [!code ++]
					if (thing5 != null)
					{
						EClass._map.AddPlant(point5, thing5); // [!code --]
						EClass._map.AddPlant(point2, thing5); // [!code ++]
					}
				}
			}
```

## POLICY

[`@@ -3,30 +3,26 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/POLICY.cs#L3-L32)
```cs:line-numbers=3

public class POLICY
{
	public const int store_ripoff = 2816; // [!code --]
	public const int license_food = 2818; // [!code ++]

	public const int platinum_ticket = 2815; // [!code --]
	public const int bed_quality = 2812; // [!code ++]

	public const int mass_exhibition = 2814; // [!code --]
	public const int suite_room = 2813; // [!code ++]

	public const int home_discount = 2800; // [!code --]
	public const int mass_exhibition = 2814; // [!code ++]

	public const int bed_quality = 2812; // [!code --]
	public const int platinum_ticket = 2815; // [!code ++]

	public const int tourist_safety = 2811;

	public const int open_business = 2810; // [!code --]
	public const int store_ripoff = 2816; // [!code ++]

	public const int store_premium = 2817;

	public const int suite_room = 2813; // [!code --]
 // [!code --]
	public const int license_food = 2818; // [!code --]
	public const int license_furniture = 2819; // [!code ++]

	public const int license_stolen = 2824;

	public const int license_general = 2820; // [!code --]
 // [!code --]
	public const int legendary_heirloom = 2821;

	public const int celeb = 2822;
```

[`@@ -41,31 +37,33 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/POLICY.cs#L41-L71)
```cs:line-numbers=41

	public const int license_slaver = 2828;

	public const int license_furniture = 2819; // [!code --]
	public const int open_business = 2810; // [!code ++]

	public const int livestock_priv = 2715; // [!code --]
	public const int license_general = 2820; // [!code ++]

	public const int resident_tax = 2512; // [!code --]
	public const int home_discount = 2800; // [!code ++]

	public const int incomeTransfer = 2711; // [!code --]
	public const int taxfree = 2514; // [!code ++]

	public const int forcePanty = 2712;

	public const int wealth_tax = 2500; // [!code --]
 // [!code --]
	public const int human_right = 2506; // [!code --]
	public const int impressment = 2504; // [!code ++]

	public const int legal_drug = 2505;

	public const int impressment = 2504; // [!code --]
	public const int human_right = 2506; // [!code ++]

	public const int prohibition = 2503; // [!code --]
	public const int inquisition = 2507; // [!code ++]

	public const int food_for_people = 2502; // [!code --]
	public const int nocturnal_life = 2508; // [!code ++]

	public const int faith_tax = 2501;

	public const int inquisition = 2507; // [!code --]
	public const int wealth_tax = 2500; // [!code ++]
 // [!code ++]
	public const int livestock_priv = 2715; // [!code ++]
 // [!code ++]
	public const int prohibition = 2503; // [!code ++]

	public const int vaccination = 2509;

```

[`@@ -73,25 +71,31 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/POLICY.cs#L73-L97)
```cs:line-numbers=73

	public const int self_sufficient = 2511;

	public const int resident_tax = 2512; // [!code ++]
 // [!code ++]
	public const int resident_wanted = 2513;

	public const int nocturnal_life = 2508; // [!code --]
	public const int food_for_people = 2502; // [!code ++]
 // [!code ++]
	public const int speed_growth = 2516; // [!code ++]
 // [!code ++]
	public const int weed_no = 2703; // [!code ++]

	public const int stop_growth = 2515;

	public const int noAnimal = 2709; // [!code --]
	public const int taxTransfer = 2705; // [!code ++]

	public const int taxfree = 2514; // [!code --]
	public const int demon_invocation = 2706; // [!code ++]
 // [!code ++]
	public const int border_watch = 2704; // [!code ++]

	public const int noDM = 2708;

	public const int auto_farm = 2707;

	public const int demon_invocation = 2706; // [!code --]
 // [!code --]
	public const int border_watch = 2704; // [!code --]
	public const int noMother = 2710; // [!code ++]

	public const int taxTransfer = 2705; // [!code --]
	public const int incomeTransfer = 2711; // [!code ++]

	public const int trash_no = 2702;

```

[`@@ -99,20 +103,16 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/POLICY.cs#L99-L118)
```cs:line-numbers=99

	public const int energy_conservation = 2700;

	public const int speed_growth = 2516; // [!code --]
 // [!code --]
	public const int weed_no = 2703; // [!code --]
 // [!code --]
	public const int noMother = 2710; // [!code --]
	public const int noAnimal = 2709; // [!code ++]

	public static readonly int[] IDS = new int[51]
	{
		2816, 2815, 2814, 2800, 2812, 2811, 2810, 2817, 2813, 2818, // [!code --]
		2824, 2820, 2821, 2822, 2823, 2825, 2826, 2827, 2828, 2819, // [!code --]
		2715, 2512, 2711, 2712, 2500, 2506, 2505, 2504, 2503, 2502, // [!code --]
		2501, 2507, 2509, 2510, 2511, 2513, 2508, 2515, 2709, 2514, // [!code --]
		2708, 2707, 2706, 2704, 2705, 2702, 2701, 2700, 2516, 2703, // [!code --]
		2710 // [!code --]
		2818, 2812, 2813, 2814, 2815, 2811, 2816, 2817, 2819, 2824, // [!code ++]
		2821, 2822, 2823, 2825, 2826, 2827, 2828, 2810, 2820, 2800, // [!code ++]
		2514, 2712, 2504, 2505, 2506, 2507, 2508, 2501, 2500, 2715, // [!code ++]
		2503, 2509, 2510, 2511, 2512, 2513, 2502, 2516, 2703, 2515, // [!code ++]
		2705, 2706, 2704, 2708, 2707, 2710, 2711, 2702, 2701, 2700, // [!code ++]
		2709 // [!code ++]
	};
}
public class Policy : EClass
```

## QuestDefenseGame

[`@@ -10,13 +10,16 @@ public class QuestDefenseGame : QuestInstance`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/QuestDefenseGame.cs#L10-L22)
```cs:line-numbers=10
	[JsonProperty]
	public Thing thing;

	[JsonProperty] // [!code ++]
	public bool useFame; // [!code ++]
 // [!code ++]
	public override string IdZone => "instance_arena";

	public override string RefDrama1 => thing.NameSimple;

	public override string RewardSuffix => "Defense";

	public override bool FameContent => true; // [!code --]
	public override bool FameContent => useFame; // [!code ++]

	public override int FameOnComplete => (lastWave * 8 + difficulty * 10) * (100 + bonus * 5) / 100;

```

[`@@ -33,6 +36,7 @@ public override ZoneInstanceRandomQuest CreateInstance()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/QuestDefenseGame.cs#L33-L38)
```cs:line-numbers=33
	public override void OnInit()
	{
		thing = ThingGen.CreateFromFilter("thing", 30);
		useFame = EClass.rnd(3) != 0; // [!code ++]
	}

	public override void OnBeforeComplete()
```

## SKILL

[`@@ -1,13 +1,13 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SKILL.cs#L1-L13)
```cs:line-numbers=1
public class SKILL
{
	public const int weaponBlunt = 111; // [!code --]
 // [!code --]
	public const int shield = 123;

	public const int armorHeavy = 122;

	public const int armorLight = 120;

	public const int weaponBlunt = 111; // [!code ++]
 // [!code ++]
	public const int PDR = 55;

	public const int weaponCrossbow = 109;
```

[`@@ -16,16 +16,14 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SKILL.cs#L16-L31)
```cs:line-numbers=16

	public const int acidproof = 51;

	public const int twohand = 130; // [!code --]
 // [!code --]
	public const int weaponScythe = 110;

	public const int fishing = 245;

	public const int mining = 220; // [!code --]
 // [!code --]
	public const int marksman = 133;

	public const int tactics = 132; // [!code ++]
 // [!code ++]
	public const int climbing = 242;

	public const int music = 241;
```

[`@@ -44,7 +42,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SKILL.cs#L44-L50)
```cs:line-numbers=44

	public const int lumberjack = 225;

	public const int spotting = 210; // [!code --]
	public const int mining = 220; // [!code ++]

	public const int weightlifting = 207;

```

[`@@ -60,13 +58,17 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SKILL.cs#L60-L72)
```cs:line-numbers=60

	public const int eyeofmind = 134;

	public const int tactics = 132; // [!code --]
	public const int twowield = 131; // [!code ++]

	public const int EDR = 56; // [!code --]
	public const int spotting = 210; // [!code ++]

	public const int weaponStaff = 103; // [!code --]
	public const int weaponAxe = 102; // [!code ++]

	public const int throwing = 108; // [!code --]
	public const int weaponDagger = 107; // [!code ++]
 // [!code ++]
	public const int EDR = 56; // [!code ++]
 // [!code ++]
	public const int evasionPerfect = 57; // [!code ++]

	public const int life = 60;

```

[`@@ -96,43 +98,41 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SKILL.cs#L96-L138)
```cs:line-numbers=96

	public const int WIL = 75;

	public const int evasionPerfect = 57; // [!code --]
 // [!code --]
	public const int MAG = 76;

	public const int LUC = 78; // [!code --]
 // [!code --]
	public const int SPD = 79; // [!code --]
 // [!code --]
	public const int INT = 80; // [!code --]
	public const int weaponPolearm = 106; // [!code ++]

	public const int critical = 90; // [!code --]
	public const int weaponGun = 105; // [!code ++]

	public const int vopal = 91; // [!code --]
	public const int weaponBow = 104; // [!code ++]

	public const int penetration = 92; // [!code --]
	public const int weaponStaff = 103; // [!code ++]

	public const int antiMagic = 93; // [!code --]
	public const int weaponSword = 101; // [!code ++]

	public const int martial = 100;

	public const int weaponSword = 101; // [!code --]
	public const int throwing = 108; // [!code ++]

	public const int weaponAxe = 102; // [!code --]
	public const int antiMagic = 93; // [!code ++]

	public const int weaponBow = 104; // [!code --]
	public const int vopal = 91; // [!code ++]

	public const int weaponGun = 105; // [!code --]
	public const int critical = 90; // [!code ++]

	public const int weaponPolearm = 106; // [!code --]
	public const int INT = 80; // [!code ++]

	public const int weaponDagger = 107; // [!code --]
	public const int SPD = 79; // [!code ++]
 // [!code ++]
	public const int LUC = 78; // [!code ++]

	public const int CHA = 77;

	public const int penetration = 92; // [!code ++]
 // [!code ++]
	public const int gathering = 250;

	public const int twowield = 131; // [!code --]
	public const int twohand = 130; // [!code ++]

	public const int blacksmith = 256;

```

[`@@ -268,13 +268,13 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SKILL.cs#L268-L280)
```cs:line-numbers=268

	public static readonly int[] IDS = new int[133]
	{
		111, 123, 122, 120, 55, 109, 50, 51, 130, 110, // [!code --]
		245, 220, 133, 242, 241, 240, 237, 235, 230, 227, // [!code --]
		226, 225, 210, 207, 200, 152, 151, 150, 135, 134, // [!code --]
		132, 56, 103, 108, 60, 61, 62, 64, 65, 66, // [!code --]
		67, 68, 70, 71, 72, 73, 74, 75, 57, 76, // [!code --]
		78, 79, 80, 90, 91, 92, 93, 100, 101, 102, // [!code --]
		104, 105, 106, 107, 77, 250, 131, 256, 916, 917, // [!code --]
		123, 122, 120, 111, 55, 109, 50, 51, 110, 245, // [!code ++]
		133, 132, 242, 241, 240, 237, 235, 230, 227, 226, // [!code ++]
		225, 220, 207, 200, 152, 151, 150, 135, 134, 131, // [!code ++]
		210, 102, 107, 56, 57, 60, 61, 62, 64, 65, // [!code ++]
		66, 67, 68, 70, 71, 72, 73, 74, 75, 76, // [!code ++]
		106, 105, 104, 103, 101, 100, 108, 93, 91, 90, // [!code ++]
		80, 79, 78, 77, 92, 250, 130, 256, 916, 917, // [!code ++]
		918, 919, 920, 921, 922, 923, 924, 925, 926, 950,
		951, 952, 915, 953, 956, 957, 958, 959, 960, 961,
		962, 963, 964, 965, 970, 971, 972, 255, 954, 914,
```

## SLOT

[`@@ -1,40 +1,40 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SLOT.cs#L1-L40)
```cs:line-numbers=1
public class SLOT
{
	public const int neck = 31; // [!code ++]
 // [!code ++]
	public const int toolbelt = 44;

	public const int leg = 38;

	public const int tool = 40;

	public const int torso = 32; // [!code --]
 // [!code --]
	public const int back = 33;

	public const int lightsource = 45;

	public const int ammo = 42; // [!code --]
 // [!code --]
	public const int neck = 31; // [!code --]
 // [!code --]
	public const int arm = 34;

	public const int hand = 35;

	public const int foot = 39; // [!code --]
	public const int torso = 32; // [!code ++]

	public const int finger = 36; // [!code --]
	public const int range = 41; // [!code ++]
 // [!code ++]
	public const int foot = 39; // [!code ++]

	public const int waist = 37;

	public const int head = 30; // [!code --]
	public const int ammo = 42; // [!code ++]

	public const int range = 41; // [!code --]
	public const int finger = 36; // [!code ++]
 // [!code ++]
	public const int head = 30; // [!code ++]

	public const int token = 43;

	public static readonly int[] IDS = new int[16]
	{
		44, 38, 40, 32, 33, 45, 42, 31, 34, 35, // [!code --]
		39, 36, 37, 30, 41, 43 // [!code --]
		31, 44, 38, 40, 33, 45, 34, 35, 32, 41, // [!code ++]
		39, 37, 42, 36, 30, 43 // [!code ++]
	};
}
```

## SPELL

[`@@ -1,13 +1,11 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L1-L13)
```cs:line-numbers=1
public class SPELL
{
	public const int puddle_Nerve = 50908; // [!code --]
	public const int ball_Holy = 50109; // [!code ++]

	public const int hand_Sound = 50407;

	public const int arrow_Sound = 50507;

	public const int miasma_Holy = 50709; // [!code --]
 // [!code --]
	public const int funnel_Sound = 50607;

	public const int miasma_Sound = 50707;
```

[`@@ -16,13 +14,13 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L16-L28)
```cs:line-numbers=16

	public const int puddle_Sound = 50907;

	public const int funnel_Holy = 50609; // [!code --]
 // [!code --]
	public const int hand_Holy = 50409; // [!code --]
	public const int miasma_Holy = 50709; // [!code ++]

	public const int sword_Sound = 51007;

	public const int bolt_Holy = 50309; // [!code --]
	public const int ball_Nerve = 50108; // [!code ++]
 // [!code ++]
	public const int sword_Nerve = 51008; // [!code ++]

	public const int bolt_Nerve = 50308;

```

[`@@ -32,26 +30,28 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L32-L57)
```cs:line-numbers=32

	public const int funnel_Nerve = 50608;

	public const int ball_Holy = 50109; // [!code --]
 // [!code --]
	public const int miasma_Nerve = 50708;

	public const int weapon_Nerve = 50808; // [!code --]
	public const int hand_Holy = 50409; // [!code ++]

	public const int sword_Nerve = 51008; // [!code --]
	public const int bolt_Holy = 50309; // [!code ++]

	public const int ball_Nerve = 50108; // [!code --]
	public const int weapon_Nerve = 50808; // [!code ++]

	public const int arrow_Holy = 50509; // [!code --]
	public const int puddle_Nerve = 50908; // [!code ++]

	public const int hand_Mind = 50404; // [!code --]
	public const int arrow_Holy = 50509; // [!code ++]

	public const int ball_Sound = 50107; // [!code --]
	public const int funnel_Holy = 50609; // [!code ++]

	public const int bolt_Mind = 50304;

	public const int ball_Sound = 50107; // [!code ++]
 // [!code ++]
	public const int weapon_Holy = 50809;

	public const int hand_Mind = 50404; // [!code ++]
 // [!code ++]
	public const int arrow_Mind = 50504;

	public const int funnel_Mind = 50604;
```

[`@@ -108,6 +108,8 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L108-L113)
```cs:line-numbers=108

	public const int ball_Chaos = 50110;

	public const int weapon_Acid = 50813; // [!code ++]
 // [!code ++]
	public const int puddle_Acid = 50913;

	public const int sword_Acid = 51013;
```

[`@@ -132,9 +134,9 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L132-L140)
```cs:line-numbers=132

	public const int ball_Impact = 50115;

	public const int bolt_Impact = 50315; // [!code --]
	public const int miasma_Acid = 50713; // [!code ++]

	public const int hand_Impact = 50415; // [!code --]
	public const int bolt_Impact = 50315; // [!code ++]

	public const int arrow_Impact = 50515;

```

[`@@ -162,9 +164,9 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L162-L170)
```cs:line-numbers=162

	public const int weapon_Void = 50816;

	public const int weapon_Acid = 50813; // [!code --]
	public const int hand_Impact = 50415; // [!code ++]

	public const int miasma_Acid = 50713; // [!code --]
	public const int sword_Holy = 51009; // [!code ++]

	public const int funnel_Acid = 50613;

```

[`@@ -196,7 +198,7 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L196-L202)
```cs:line-numbers=196

	public const int funnel_Magic = 50611;

	public const int sword_Holy = 51009; // [!code --]
	public const int ball_Mind = 50104; // [!code ++]

	public const int miasma_Magic = 50711;

```

[`@@ -228,11 +230,11 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L228-L238)
```cs:line-numbers=228

	public const int weapon_Magic = 50811;

	public const int ball_Mind = 50104; // [!code --]
	public const int sword_Darkness = 51003; // [!code ++]

	public const int funnel_Fire = 50600;

	public const int puddle_Darkness = 50903; // [!code --]
	public const int weapon_Darkness = 50803; // [!code ++]

	public const int SpHealHeavy = 8401;

```

[`@@ -356,13 +358,15 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L356-L368)
```cs:line-numbers=356

	public const int SpReconstruction = 8288;

	public const int SpBerserk = 8707; // [!code ++]
 // [!code ++]
	public const int SpGravity = 8708;

	public const int SpSpeedDown = 8710;

	public const int SpTelepathy = 8770;

	public const int SpInvisibility = 8775; // [!code --]
	public const int arrow_Fire = 50500; // [!code ++]

	public const int miasma_Fire = 50700;

```

[`@@ -420,15 +424,15 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L420-L434)
```cs:line-numbers=420

	public const int miasma_Darkness = 50703;

	public const int weapon_Darkness = 50803; // [!code --]
	public const int hand_Fire = 50400; // [!code ++]

	public const int arrow_Fire = 50500; // [!code --]
	public const int puddle_Darkness = 50903; // [!code ++]

	public const int sword_Darkness = 51003; // [!code --]
	public const int bolt_Fire = 50300; // [!code ++]

	public const int hand_Fire = 50400; // [!code --]
	public const int ball_Fire = 50100; // [!code ++]

	public const int puddle_Void = 50916; // [!code --]
	public const int SpInvisibility = 8775; // [!code ++]

	public const int SpSeeInvisible = 8776;

```

[`@@ -486,39 +490,37 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/SPELL.cs#L486-L524)
```cs:line-numbers=486

	public const int SpDrawBacker = 9503;

	public const int ball_Fire = 50100; // [!code --]
 // [!code --]
	public const int bolt_Fire = 50300; // [!code --]
	public const int puddle_Void = 50916; // [!code ++]

	public const int sword_Void = 51016;

	public static readonly int[] IDS = new int[246] // [!code --]
	public static readonly int[] IDS = new int[247] // [!code ++]
	{
		50908, 50407, 50507, 50709, 50607, 50707, 50807, 50907, 50609, 50409, // [!code --]
		51007, 50309, 50308, 50408, 50508, 50608, 50109, 50708, 50808, 51008, // [!code --]
		50108, 50509, 50404, 50107, 50304, 50809, 50504, 50604, 50704, 50804, // [!code --]
		50109, 50407, 50507, 50607, 50707, 50807, 50907, 50709, 51007, 50108, // [!code ++]
		51008, 50308, 50408, 50508, 50608, 50708, 50409, 50309, 50808, 50908, // [!code ++]
		50509, 50609, 50304, 50107, 50809, 50404, 50504, 50604, 50704, 50804, // [!code ++]
		50904, 51004, 50105, 50305, 50405, 50505, 50307, 50605, 50805, 50905,
		51005, 50106, 50306, 50406, 50506, 50606, 50706, 50806, 50906, 51006,
		50705, 50909, 50513, 50110, 50913, 51013, 50114, 50314, 50414, 50514, // [!code --]
		50614, 50714, 50814, 50914, 51014, 50115, 50315, 50415, 50515, 50615, // [!code --]
		50715, 50815, 50915, 51015, 50116, 50316, 50416, 50516, 50616, 50716, // [!code --]
		50816, 50813, 50713, 50613, 50413, 50310, 50410, 50510, 50610, 50710, // [!code --]
		50810, 50910, 51010, 50111, 50311, 50411, 50511, 50611, 51009, 50711, // [!code --]
		50911, 51011, 50112, 50312, 50412, 50512, 50612, 50712, 50812, 50912, // [!code --]
		51012, 50113, 50313, 50811, 50104, 50600, 50903, 8401, 8402, 8403, // [!code --]
		8404, 8405, 8406, 8430, 8450, 8470, 8471, 8480, 8490, 8491, // [!code --]
		8400, 8500, 8502, 8503, 8504, 8506, 8507, 8510, 8550, 8555, // [!code --]
		8700, 8702, 8704, 8705, 8706, 8501, 8390, 8380, 8300, 7001, // [!code --]
		7002, 7003, 7004, 7005, 7006, 7007, 7008, 7800, 8200, 8201, // [!code --]
		8202, 8220, 8221, 8230, 8232, 8240, 8241, 8250, 8251, 8255, // [!code --]
		8256, 8260, 8280, 8281, 8284, 8285, 8286, 8288, 8708, 8710, // [!code --]
		8770, 8775, 50700, 50800, 50900, 51000, 50101, 50301, 50401, 50501, // [!code --]
		50601, 50701, 50801, 50901, 51001, 50102, 50302, 50402, 50502, 50602, // [!code --]
		50702, 50802, 50902, 51002, 50103, 50303, 50403, 50503, 50603, 50703, // [!code --]
		50803, 50500, 51003, 50400, 50916, 8776, 8780, 8790, 8791, 8792, // [!code --]
		8800, 8801, 9000, 9001, 9002, 9003, 9004, 9005, 9006, 9007, // [!code --]
		9008, 9009, 9010, 9050, 9051, 9150, 9151, 9160, 9200, 9500, // [!code --]
		9501, 9502, 9503, 50100, 50300, 51016 // [!code --]
		50705, 50909, 50513, 50110, 50813, 50913, 51013, 50114, 50314, 50414, // [!code ++]
		50514, 50614, 50714, 50814, 50914, 51014, 50115, 50713, 50315, 50515, // [!code ++]
		50615, 50715, 50815, 50915, 51015, 50116, 50316, 50416, 50516, 50616, // [!code ++]
		50716, 50816, 50415, 51009, 50613, 50413, 50310, 50410, 50510, 50610, // [!code ++]
		50710, 50810, 50910, 51010, 50111, 50311, 50411, 50511, 50611, 50104, // [!code ++]
		50711, 50911, 51011, 50112, 50312, 50412, 50512, 50612, 50712, 50812, // [!code ++]
		50912, 51012, 50113, 50313, 50811, 51003, 50600, 50803, 8401, 8402, // [!code ++]
		8403, 8404, 8405, 8406, 8430, 8450, 8470, 8471, 8480, 8490, // [!code ++]
		8491, 8400, 8500, 8502, 8503, 8504, 8506, 8507, 8510, 8550, // [!code ++]
		8555, 8700, 8702, 8704, 8705, 8706, 8501, 8390, 8380, 8300, // [!code ++]
		7001, 7002, 7003, 7004, 7005, 7006, 7007, 7008, 7800, 8200, // [!code ++]
		8201, 8202, 8220, 8221, 8230, 8232, 8240, 8241, 8250, 8251, // [!code ++]
		8255, 8256, 8260, 8280, 8281, 8284, 8285, 8286, 8288, 8707, // [!code ++]
		8708, 8710, 8770, 50500, 50700, 50800, 50900, 51000, 50101, 50301, // [!code ++]
		50401, 50501, 50601, 50701, 50801, 50901, 51001, 50102, 50302, 50402, // [!code ++]
		50502, 50602, 50702, 50802, 50902, 51002, 50103, 50303, 50403, 50503, // [!code ++]
		50603, 50703, 50400, 50903, 50300, 50100, 8775, 8776, 8780, 8790, // [!code ++]
		8791, 8792, 8800, 8801, 9000, 9001, 9002, 9003, 9004, 9005, // [!code ++]
		9006, 9007, 9008, 9009, 9010, 9050, 9051, 9150, 9151, 9160, // [!code ++]
		9200, 9500, 9501, 9502, 9503, 50916, 51016 // [!code ++]
	};
}
public class Spell : Ability
```

## TextureManager

[`@@ -22,6 +22,7 @@ public void Init()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TextureManager.cs#L22-L27)
```cs:line-numbers=22
	AddBase(textureData.shadows, "shadows.png", tileMap.passShadow);
	AddBase(textureData.fov, "fov.png", tileMap.passFov);
	AddBase(textureData.objs_C, "objs_C.png", tileMap.passChara);
	AddBase(textureData.objs_CL, "objs_CL.png", tileMap.passCharaL); // [!code ++]
	AddBase(textureData.objs_CLL, "objs_CLL.png", tileMap.passCharaLL);
	AddBase(textureData.block_snow, "blocks_snow.png", tileMap.passBlock.snowPass);
	AddBase(textureData.floor_snow, "floors_snow.png", tileMap.passFloor.snowPass);
```

[`@@ -42,8 +43,7 @@ public void Init()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TextureManager.cs#L42-L49)
```cs:line-numbers=42
	Add(tileMap.passShore, textureData.floor);
	Add(tileMap.passAutoTileWater, textureData.floor);
	Add(tileMap.passFloorMarker, textureData.floor);
	Add(tileMap.passCharaL, textureData.objs_C); // [!code --]
	Add(tileMap.passCharaLW, textureData.objs_C); // [!code --]
	Add(tileMap.passCharaLW, textureData.objs_CL); // [!code ++]
	Add(tileMap.passIcon, textureData.objs_S);
	AddList(textureData.world, "world.png");
	AddList(textureData.bird, "bird1.png");
```

## TraitChara

[`@@ -104,9 +104,9 @@ public virtual bool CanBeTamed`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitChara.cs#L104-L112)
```cs:line-numbers=104
{
	get
	{
		if (!IsUnique && owner.rarity < Rarity.Legendary && !owner.IsMultisize && !owner.IsGlobal && !owner.IsPCFaction) // [!code --]
		if (!IsUnique && owner.rarity < Rarity.Legendary && !owner.IsMultisize && !owner.IsGlobal && !owner.IsPCFaction && EClass._zone.Boss != owner && CanInvite) // [!code ++]
		{
			return EClass._zone.Boss != owner; // [!code --]
			return owner.c_bossType == BossType.none; // [!code ++]
		}
		return false;
	}
```

## TraitCrafter

[`@@ -365,7 +365,7 @@ public virtual Thing Craft(AI_UseCrafter ai)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitCrafter.cs#L365-L371)
```cs:line-numbers=365
			Msg.Say("rune_tooHard", owner);
			break;
		}
		EClass.ui.AddLayer<LayerList>().SetList2(list, (Element a) => a.Name, delegate(Element a, ItemGeneral b) // [!code --]
		EClass.ui.AddLayer<LayerList>().SetList2(list, (Element a) => GetName(a), delegate(Element a, ItemGeneral b) // [!code ++]
		{
			owner.ModNum(-1);
			eq.Destroy();
```

[`@@ -378,7 +378,8 @@ public virtual Thing Craft(AI_UseCrafter ai)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitCrafter.cs#L378-L384)
```cs:line-numbers=378
			EClass.pc.PlayEffect("intonation");
		}, delegate(Element a, ItemGeneral b)
		{
			b.SetSubText(a.vBase + a.vSource + ((a.vLink != 0) ? (" (" + a.vLink + ")") : ""), 200, FontColor.Default, TextAnchor.MiddleRight); // [!code --]
			string lang = a.vBase + a.vSource + ((a.vLink != 0) ? (" (" + a.vLink + ")") : ""); // [!code ++]
			b.SetSubText(lang, 200, FontColor.Default, TextAnchor.MiddleRight); // [!code ++]
			b.Build();
			if (a.HasTag("noRune"))
			{
```

[`@@ -509,6 +510,23 @@ public virtual Thing Craft(AI_UseCrafter ai)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitCrafter.cs#L509-L514)
```cs:line-numbers=509
		t.SetNum(num);
	}
	return t;
	static string GetName(Element a) // [!code ++]
	{ // [!code ++]
		string text = a.Name; // [!code ++]
		string encSlot = a.source.encSlot; // [!code ++]
		if ((encSlot == null || encSlot.Length != 0) && !(encSlot == "global") && !(encSlot == "all")) // [!code ++]
		{ // [!code ++]
			text += " ["; // [!code ++]
			string[] array2 = a.source.encSlot.Split(','); // [!code ++]
			foreach (string text2 in array2) // [!code ++]
			{ // [!code ++]
				text += ((text2 == "weapon") ? "weapon_enc".lang() : EClass.sources.elements.alias[text2].GetName().ToTitleCase()); // [!code ++]
				text += ", "; // [!code ++]
			} // [!code ++]
			text = text.TrimEnd(", ".ToCharArray()) + "]"; // [!code ++]
		} // [!code ++]
		return text; // [!code ++]
	} // [!code ++]
	void Prize(int chance, string s, string col, bool cat)
	{
		if (!claimed && EClass.rnd(chance) == 0)
```

## TraitMoongate

[`@@ -56,6 +56,7 @@ public async UniTask<bool> UseMoongate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitMoongate.cs#L56-L61)
```cs:line-numbers=56
		lang = ((EClass.rnd(10) != 0) ? ((EClass.rnd(2) == 0) ? "JP" : "EN") : "CN");
	}
	Debug.Log(lang);
	Net.DownloadMeta meta = null; // [!code ++]
	try
	{
		List<Net.DownloadMeta> listOrg = await Net.GetFileList(lang);
```

[`@@ -74,13 +75,13 @@ public async UniTask<bool> UseMoongate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitMoongate.cs#L74-L86)
```cs:line-numbers=74
		}
		List<MapMetaData> list = ListSavedUserMap();
		IList<Net.DownloadMeta> list2 = listOrg.Copy();
		foreach (MapMetaData item2 in list) // [!code --]
		foreach (MapMetaData item in list) // [!code ++]
		{
			foreach (Net.DownloadMeta item3 in list2) // [!code --]
			foreach (Net.DownloadMeta item2 in list2) // [!code ++]
			{
				if (item3.id == item2.id && item3.version == item2.version) // [!code --]
				if (item2.id == item.id && item2.version == item.version) // [!code ++]
				{
					list2.Remove(item3); // [!code --]
					list2.Remove(item2); // [!code ++]
					break;
				}
			}
```

[`@@ -90,16 +91,16 @@ public async UniTask<bool> UseMoongate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitMoongate.cs#L90-L105)
```cs:line-numbers=90
		{
			list2 = listOrg.Copy();
		}
		Net.DownloadMeta item = list2.RandomItem(); // [!code --]
		Zone_User zone_User = EClass.game.spatials.Find((Zone_User z) => z.id == item.id); // [!code --]
		meta = list2.RandomItem(); // [!code ++]
		Zone_User zone_User = EClass.game.spatials.Find((Zone_User z) => z.id == meta.id); // [!code ++]
		if (zone_User != null)
		{
			MoveZone(zone_User);
			return true;
		}
		FileInfo fileInfo = await Net.DownloadFile(item, CorePath.ZoneSaveUser, lang); // [!code --]
		Debug.Log(item?.ToString() + "/" + item.title + item.id + "/" + item.path + "/"); // [!code --]
		Debug.Log(fileInfo?.ToString() + "/" + item.name + "/" + item.path); // [!code --]
		FileInfo fileInfo = await Net.DownloadFile(meta, CorePath.ZoneSaveUser, lang); // [!code ++]
		Debug.Log(meta?.ToString() + "/" + meta.title + meta.id + "/" + meta.path + "/"); // [!code ++]
		Debug.Log(fileInfo?.ToString() + "/" + meta.name + "/" + meta.path); // [!code ++]
		if (Zone.IsImportValid(fileInfo.FullName))
		{
			Debug.Log("valid");
```

[`@@ -114,6 +115,10 @@ public async UniTask<bool> UseMoongate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitMoongate.cs#L114-L119)
```cs:line-numbers=114
	catch (Exception ex)
	{
		EClass.ui.Say(ex.Message);
		if (meta != null) // [!code ++]
		{ // [!code ++]
			EClass.ui.Say("Invalid Usermap: " + meta.title + "(" + meta.id + ")"); // [!code ++]
		} // [!code ++]
		return false;
	}
	return true;
```

## TraitToolBrush

[`@@ -47,10 +47,6 @@ public static bool IsTamePossible(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/TraitToolBrush.cs#L47-L56)
```cs:line-numbers=47
		{
			return false;
		}
		if (!EClass._zone.IsInstance && c.c_bossType == BossType.none) // [!code --]
		{ // [!code --]
			return c.trait.CanInvite; // [!code --]
		} // [!code --]
		return false; // [!code --]
		return !EClass._zone.IsInstance; // [!code ++]
	}
}
```

## Zone

[`@@ -2298,7 +2298,7 @@ public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Zone.cs#L2298-L2304)
```cs:line-numbers=2298
	Zone_Field zone_Field = this as Zone_Field;
	if (IdBiome == "Sand" || IdBiome == "Water" || IsUnderwater)
	{
		int num = 1 + EClass.rnd((IdBiome == "water") ? 4 : 2); // [!code --]
		int num = 1 + EClass.rnd((IdBiome == "Water") ? 3 : 2); // [!code ++]
		for (int i = 0; i < num; i++)
		{
			Point randomSurface = EClass._map.bounds.GetRandomSurface(centered: false, walkable: true, allowWater: true);
```

[`@@ -2318,12 +2318,71 @@ public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Zone.cs#L2318-L2329)
```cs:line-numbers=2318
			}
		}
	}
	if (IsUnderwater) // [!code ++]
	{ // [!code ++]
		for (int k = 0; k < 30 + EClass.rnd(30); k++) // [!code ++]
		{ // [!code ++]
			SpawnMob(null, SpawnSetting.Fish()); // [!code ++]
		} // [!code ++]
		Crawler crawler = Crawler.Create("pasture"); // [!code ++]
		int num2 = (EClass.debug.enable ? 3 : EClass.rnd(EClass.rnd(EClass.rnd(EClass.rnd(5) + 1) + 1) + 1)); // [!code ++]
		bool flag = this is Zone_Field; // [!code ++]
		Thing seed = null; // [!code ++]
		int num3 = Mathf.Min(EClass._zone.DangerLv, EClass.pc.Evalue(286) * 2 / 3); // [!code ++]
		if (num3 > 0) // [!code ++]
		{ // [!code ++]
			seed = TraitSeed.MakeSeed(EClass.sources.objs.map[137]); // [!code ++]
			Rand.SetSeed(EClass._zone.uid * 10 + num3); // [!code ++]
			TraitSeed.LevelSeed(seed, (seed.trait as TraitSeed).row, num3); // [!code ++]
			Rand.SetSeed(); // [!code ++]
			seed.elements.SetBase(2, EClass.curve(seed.encLV, 50, 10, 80)); // [!code ++]
		} // [!code ++]
		crawler.CrawlUntil(EClass._map, () => EClass._map.GetRandomPoint(), num2 + (flag ? 4 : 0), delegate(Crawler.Result r) // [!code ++]
		{ // [!code ++]
			int num6 = 137; // [!code ++]
			foreach (Point point in r.points) // [!code ++]
			{ // [!code ++]
				if (!point.cell.isModified && !point.HasThing && !point.HasBlock && !point.HasObj) // [!code ++]
				{ // [!code ++]
					map.SetObj(point.x, point.z, num6); // [!code ++]
					int idx = 3 + ((EClass.rnd(3) == 0) ? 1 : 0) + ((EClass.rnd(3) == 0) ? (-1) : 0) + ((EClass.rnd(3) == 0) ? (-1) : 0); // [!code ++]
					point.growth.SetStage(idx); // [!code ++]
					if (seed != null) // [!code ++]
					{ // [!code ++]
						EClass._map.AddPlant(point, seed); // [!code ++]
					} // [!code ++]
				} // [!code ++]
			} // [!code ++]
			return false; // [!code ++]
		}); // [!code ++]
		crawler.CrawlUntil(tries: EClass.rnd(EClass.rnd(5) + 1) + 1 + (flag ? 20 : 0), map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r) // [!code ++]
		{ // [!code ++]
			int num5 = 136; // [!code ++]
			foreach (Point point2 in r.points) // [!code ++]
			{ // [!code ++]
				if (!point2.cell.isModified && !point2.HasThing && !point2.HasBlock && !point2.HasObj) // [!code ++]
				{ // [!code ++]
					map.SetObj(point2.x, point2.z, num5, 1, EClass.rnd(4)); // [!code ++]
				} // [!code ++]
			} // [!code ++]
			return false; // [!code ++]
		}); // [!code ++]
		crawler.CrawlUntil(tries: EClass.rnd(EClass.rnd(10) + 1) + 3 + (flag ? 40 : 0), map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r) // [!code ++]
		{ // [!code ++]
			int idFloor = 121; // [!code ++]
			foreach (Point point3 in r.points) // [!code ++]
			{ // [!code ++]
				map.SetFloor(point3.x, point3.z, 97, idFloor, Mathf.Clamp(4 - r.startPos.Distance(point3) + EClass.rnd(3) - EClass.rnd(3), 0, 3)); // [!code ++]
			} // [!code ++]
			return false; // [!code ++]
		}); // [!code ++]
	} // [!code ++]
	if (zone_Field != null)
	{
		if (EClass.rnd(3) == 0)
		{
			int num2 = EClass.rnd(2); // [!code --]
			for (int k = 0; k < num2; k++) // [!code --]
			int num4 = EClass.rnd(2); // [!code ++]
			for (int l = 0; l < num4; l++) // [!code ++]
			{
				Point randomSurface3 = EClass._map.bounds.GetRandomSurface();
				if (!randomSurface3.HasObj && !randomSurface3.HasThing)
```

## ZoneEventDefenseGame

[`@@ -68,7 +68,7 @@ public override void OnVisit()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ZoneEventDefenseGame.cs#L68-L74)
```cs:line-numbers=68
		QuestDefenseGame.bonus = bonus;
		return;
	}
	int num = EClass.pc.FameLv / 100 * 50; // [!code --]
	int num = (base.quest.FameContent ? (EClass.pc.FameLv / 100 * 50) : 0); // [!code ++]
	EClass._zone._dangerLv = 5 + num;
	bonus += num / 10;
	Point nearestPoint = EClass._map.GetCenterPos().GetNearestPoint(allowBlock: false, allowChara: false);
```

[`@@ -83,7 +83,7 @@ public void NextWave(int add = 0)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/ZoneEventDefenseGame.cs#L83-L89)
```cs:line-numbers=83
{
	wave++;
	turns = 0;
	EClass._zone._dangerLv += ((EClass._zone.DangerLv >= 100) ? (EClass._zone.DangerLv / 100 * 10) : 5); // [!code --]
	EClass._zone._dangerLv += ((EClass._zone.DangerLv >= 100) ? (EClass._zone.DangerLv / 100 * 5 + 5) : 5); // [!code ++]
	SE.Play("warhorn");
	Msg.Say("defense_wave", wave.ToString() ?? "", EClass._zone.DangerLv.ToString() ?? "");
	Spawn(2 + base.quest.difficulty + add);
```

## Zone_Field

[`@@ -94,6 +94,8 @@ public override string IDBaseLandFeat`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/e6cc60ae58831ca34879be3aa8e8446abb51593e/Elin/Zone_Field.cs#L94-L99)
```cs:line-numbers=94
		}
	}

	public override bool IsUnderwater => IdBiome == "Undersea"; // [!code ++]
 // [!code ++]
	public override void OnGenerateMap()
	{
		base.OnGenerateMap();
```

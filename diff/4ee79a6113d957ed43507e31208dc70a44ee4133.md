---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 24 files modified. 1 new file created.
version: EA 23.126 Nightly
changes: AI_Fish/+AI_Practice/AI_PracticeDummy/AI_Torture/ButtonGrid/Card/Chara/CoreDebug/CraftUtil/ENC/FACTION/FEAT/FOOD/FoodEffect/MUTATION/POLICY/RecipeCard/SKILL/TCOrbitChara/TaskHarvest/Thing/ThingContainer/Trait/TraitFoodFishSlice/WidgetSearch
---

# EA 23.126 Nightly

April 15, 2025

24 files modified. 1 new file created.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [AI_PracticeDummy (1)](#ai-practicedummy)
```cs:no-line-numbers
public override bool CanManualCancel() // [!code --]

```
### [AI_Torture (1)](#ai-torture)
```cs:no-line-numbers
public override bool CanManualCancel() // [!code --]

```
### [FoodEffect (2)](#foodeffect)
```cs:no-line-numbers
public static bool IsHumanFlesh(Thing food) // [!code --]

```
```cs:no-line-numbers
public static bool IsUndeadFlesh(Thing food) // [!code --]

```
## AI_Fish

[`@@ -302,7 +302,7 @@ public static Thing Makefish(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/AI_Fish.cs#L302-L308)
```cs:line-numbers=302
		{
			text = "book_ancient";
		}
		if (EClass.rnd(35) == 0 || EClass.debug.enable) // [!code --]
		if (EClass.rnd(35) == 0) // [!code ++]
		{
			text = "plat";
			if (EClass.rnd(2) == 0)
```

[`@@ -317,7 +317,7 @@ public static Thing Makefish(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/AI_Fish.cs#L317-L323)
```cs:line-numbers=317
			{
				text = "gacha_coin";
			}
			if (EClass.rnd(50) == 0 || EClass.debug.enable) // [!code --]
			if (EClass.rnd(50) == 0) // [!code ++]
			{
				text = new string[7] { "659", "758", "759", "806", "828", "1190", "1191" }.RandomItem();
			}
```

[`@@ -349,6 +349,10 @@ public static Thing Makefish(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/AI_Fish.cs#L349-L354)
```cs:line-numbers=349
		{
			num2++;
		}
		if (EClass.rnd(EClass.debug.enable ? 3 : 25) == 0) // [!code ++]
		{ // [!code ++]
			thing.SetTier(Mathf.Min(EClass.rnd(EClass.rnd(num + 50)) / 50, 3)); // [!code ++]
		} // [!code ++]
	}
	if (thing != null)
	{
```

## +AI_Practice

::: details File Created
```cs
public class AI_Practice : AIAct
{
	public long totalDamage;

	public long turn;

	public long hit;

	public override CursorInfo CursorIcon => CursorSystem.IconMelee;

	public override bool HasProgress => true;

	public override bool CanManualCancel()
	{
		return true;
	}

	public override void OnCancelOrSuccess()
	{
		base.OnCancelOrSuccess();
		if (owner == EClass.pc)
		{
			long a = totalDamage / turn;
			Msg.Say("trainingDPS", turn.ToFormat(), a.ToFormat(), hit.ToFormat() ?? "", totalDamage.ToFormat() ?? "");
		}
	}
}
```

:::
## AI_PracticeDummy

[`@@ -1,6 +1,6 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/AI_PracticeDummy.cs#L1-L6)
```cs:line-numbers=1
using System.Collections.Generic;

public class AI_PracticeDummy : AIAct // [!code --]
public class AI_PracticeDummy : AI_Practice // [!code ++]
{
	public Card target;

```

[`@@ -8,15 +8,6 @@ public class AI_PracticeDummy : AIAct`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/AI_PracticeDummy.cs#L8-L22)
```cs:line-numbers=8

	public bool range;

	public override CursorInfo CursorIcon => CursorSystem.IconMelee; // [!code --]
 // [!code --]
	public override bool HasProgress => true; // [!code --]
 // [!code --]
	public override bool CanManualCancel() // [!code --]
	{ // [!code --]
		return true; // [!code --]
	} // [!code --]
 // [!code --]
	public override IEnumerable<Status> Run()
	{
		isFail = () => !target.IsAliveInCurrentZone;
```

[`@@ -62,6 +53,7 @@ public override AIProgress CreateProgress()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/AI_PracticeDummy.cs#L62-L67)
```cs:line-numbers=62
			{
				ACT.Melee.Perform(owner, target);
			}
			turn++; // [!code ++]
			if (owner != null && EClass.rnd(5) < 2)
			{
				owner.stamina.Mod(-1);
```

## AI_Torture

[`@@ -1,22 +1,13 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/AI_Torture.cs#L1-L22)
```cs:line-numbers=1
using System.Collections.Generic;

public class AI_Torture : AIAct // [!code --]
public class AI_Torture : AI_Practice // [!code ++]
{
	public TraitShackle shackle;

	public Chara _owner;

	public override CursorInfo CursorIcon => CursorSystem.IconMelee; // [!code --]
 // [!code --]
	public override bool HasProgress => true; // [!code --]
 // [!code --]
	public override bool CancelWhenDamaged => false;

	public override bool CanManualCancel() // [!code --]
	{ // [!code --]
		return true; // [!code --]
	} // [!code --]
 // [!code --]
	public override IEnumerable<Status> Run()
	{
		_owner = owner;
```

[`@@ -83,6 +74,7 @@ int SortVal(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/AI_Torture.cs#L83-L88)
```cs:line-numbers=83

	public override void OnCancelOrSuccess()
	{
		base.OnCancelOrSuccess(); // [!code ++]
		if (_owner == null)
		{
			return;
```

## ButtonGrid

[`@@ -260,9 +260,9 @@ public void SetCard(Card c, Mode mode = Mode.Default, Action<UINote> onWriteNote`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ButtonGrid.cs#L260-L268)
```cs:line-numbers=260
			}
		}
	}
	if (c.qualityTier > 0) // [!code --]
	if (c.tier > 0) // [!code ++]
	{
		Attach<Image>("quality", rightAttach: false).sprite = EClass.core.refs.icons.quality[Mathf.Clamp(c.qualityTier - 1, 0, EClass.core.refs.icons.quality.Count - 1)]; // [!code --]
		Attach<Image>("quality", rightAttach: false).sprite = EClass.core.refs.icons.quality[Mathf.Clamp(c.tier - 1, 0, EClass.core.refs.icons.quality.Count - 1)]; // [!code ++]
	}
	if (c.c_equippedSlot != 0 && invOwner != null && invOwner.owner.isChara && !invOwner.owner.IsPC)
	{
```

## Card

[`@@ -390,7 +390,7 @@ public int exp`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L390-L396)
```cs:line-numbers=390
		}
	}

	public int qualityTier // [!code --]
	public int tier // [!code ++]
	{
		get
		{
```

[`@@ -2687,8 +2687,8 @@ public void Create(string _id, int _idMat = -1, int genLv = -1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L2687-L2694)
```cs:line-numbers=2687
	ApplyTrait();
	if (!bp.fixedQuality && trait.LevelAsQuality && (!EClass._zone.IsPCFaction || EClass.Branch.lv != 1) && EClass.debug.testThingQuality && EClass.rnd(2) == 0)
	{
		qualityTier = Mathf.Clamp(EClass.rnd(5) + 1, 1, 3); // [!code --]
		LV = LV + qualityTier * 10 + (LV - 1) * (125 + qualityTier * 25) / 100; // [!code --]
		tier = Mathf.Clamp(EClass.rnd(5) + 1, 1, 3); // [!code ++]
		LV = LV + tier * 10 + (LV - 1) * (125 + tier * 25) / 100; // [!code ++]
	}
	ApplyMaterial();
	OnCreate(genLv);
```

[`@@ -3223,7 +3223,7 @@ public Thing Duplicate(int num)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L3223-L3229)
```cs:line-numbers=3223
	thing.idSkin = idSkin;
	thing.blessedState = blessedState;
	thing.rarityLv = rarityLv;
	thing.qualityTier = qualityTier; // [!code --]
	thing.tier = tier; // [!code ++]
	thing.LV = LV;
	thing.exp = exp;
	thing.encLV = encLV;
```

[`@@ -3592,6 +3592,29 @@ public void SetEncLv(int a)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L3592-L3597)
```cs:line-numbers=3592
		ModEncLv(a - encLV);
	}

	public void SetTier(int a, bool setTraits = true) // [!code ++]
	{ // [!code ++]
		if (a < 0) // [!code ++]
		{ // [!code ++]
			a = 0; // [!code ++]
		} // [!code ++]
		tier = a; // [!code ++]
		if (setTraits) // [!code ++]
		{ // [!code ++]
			elements.SetBase(2, a * 30); // [!code ++]
			foreach (Element value in elements.dict.Values) // [!code ++]
			{ // [!code ++]
				if (value.IsFoodTrait) // [!code ++]
				{ // [!code ++]
					Debug.Log(value.Name + "/" + value.Value); // [!code ++]
					elements.SetTo(value.id, value.Value * (100 + a * 200) / 100); // [!code ++]
				} // [!code ++]
			} // [!code ++]
			elements.SetBase(759, a); // [!code ++]
		} // [!code ++]
		LayerInventory.SetDirty(Thing); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public virtual void SetBlessedState(BlessedState s)
	{
		int num = 0;
```

[`@@ -3965,7 +3988,13 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L3965-L3971)
```cs:line-numbers=3965
			}
		});
	}
	if (EClass.pc.ai is AI_PracticeDummy { IsRunning: not false } aI_PracticeDummy && aI_PracticeDummy.target == this && (origin == null || origin.IsPC)) // [!code ++]
	{ // [!code ++]
		aI_PracticeDummy.hit++; // [!code ++]
		aI_PracticeDummy.totalDamage += dmg; // [!code ++]
	} // [!code ++]
	ZoneInstanceBout zoneInstanceBout = EClass._zone.instance as ZoneInstanceBout;
	bool flag = false; // [!code ++]
	if (hp < 0 && Religion.recentWrath == null)
	{
		if (isRestrained && IsPCFaction && EClass._zone.IsPCFaction && (!IsPC || (Chara.ai is AI_Torture && Chara.ai.IsRunning)))
```

[`@@ -3998,13 +4027,10 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L3998-L4010)
```cs:line-numbers=3998
			{
				EvadeDeath();
			}
			else if (Chara.host != null) // [!code --]
			else if (Chara.host != null || (weapon != null && weapon.HasElement(485))) // [!code ++]
			{
				EvadeDeath();
				if (!Chara.HasCondition<ConFaint>()) // [!code --]
				{ // [!code --]
					Chara.AddCondition<ConFaint>(200, force: true); // [!code --]
				} // [!code --]
				flag = true; // [!code ++]
			}
			else if (zoneInstanceBout != null && (bool)LayerDrama.Instance)
			{
```

[`@@ -4031,7 +4057,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L4031-L4037)
```cs:line-numbers=4031
					if (EClass.player.invlunerable)
					{
						EvadeDeath();
						goto IL_0b4f; // [!code --]
						goto IL_0baa; // [!code ++]
					}
				}
				if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2)
```

[`@@ -4043,8 +4069,8 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L4043-L4050)
```cs:line-numbers=4043
			}
		}
	}
	goto IL_0b4f; // [!code --]
	IL_0b4f: // [!code --]
	goto IL_0baa; // [!code ++]
	IL_0baa: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

[`@@ -4240,32 +4266,43 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L4240-L4271)
```cs:line-numbers=4240
			}
		}
	}
	if (isChara && origin != null && origin.IsAliveInCurrentZone && origin.isChara) // [!code --]
	if (isChara) // [!code ++]
	{
		if (e.id == 916) // [!code --]
		if (flag) // [!code ++]
		{
			origin.HealHP(Mathf.Clamp(EClass.rnd(dmg * (50 + eleP) / 500 + 5), 1, origin.MaxHP / 5 + EClass.rnd(10))); // [!code --]
			if (!Chara.HasCondition<ConFaint>()) // [!code ++]
			{ // [!code ++]
				Chara.AddCondition<ConFaint>(200, force: true); // [!code ++]
			} // [!code ++]
			return; // [!code ++]
		}
		if ((attackSource == AttackSource.Melee || attackSource == AttackSource.Range) && origin.Dist(this) <= 1) // [!code --]
		if (origin != null && origin.IsAliveInCurrentZone && origin.isChara) // [!code ++]
		{
			if (attackSource == AttackSource.Melee && HasElement(1221)) // [!code --]
			if (e.id == 916) // [!code ++]
			{
				int ele2 = ((Chara.MainElement == Element.Void) ? 924 : Chara.MainElement.id); // [!code --]
				if (id == "hedgehog_ether") // [!code --]
				{ // [!code --]
					ele2 = 922; // [!code --]
				} // [!code --]
				Say("reflect_thorne", this, origin); // [!code --]
				origin.DamageHP(Mathf.Clamp(dmg / 20, 1, MaxHP / 20), ele2, Power, AttackSource.Condition); // [!code --]
				origin.HealHP(Mathf.Clamp(EClass.rnd(dmg * (50 + eleP) / 500 + 5), 1, origin.MaxHP / 5 + EClass.rnd(10))); // [!code ++]
			}
			if (HasElement(1223)) // [!code --]
			if ((attackSource == AttackSource.Melee || attackSource == AttackSource.Range) && origin.Dist(this) <= 1) // [!code ++]
			{
				int ele3 = ((Chara.MainElement == Element.Void) ? 923 : Chara.MainElement.id); // [!code --]
				Say("reflect_acid", this, origin); // [!code --]
				origin.DamageHP(Mathf.Clamp(dmg / 20, 1, MaxHP / 20), ele3, Power * 2, AttackSource.Condition); // [!code --]
				if (attackSource == AttackSource.Melee && HasElement(1221)) // [!code ++]
				{ // [!code ++]
					int ele2 = ((Chara.MainElement == Element.Void) ? 924 : Chara.MainElement.id); // [!code ++]
					if (id == "hedgehog_ether") // [!code ++]
					{ // [!code ++]
						ele2 = 922; // [!code ++]
					} // [!code ++]
					Say("reflect_thorne", this, origin); // [!code ++]
					origin.DamageHP(Mathf.Clamp(dmg / 20, 1, MaxHP / 20), ele2, Power, AttackSource.Condition); // [!code ++]
				} // [!code ++]
				if (HasElement(1223)) // [!code ++]
				{ // [!code ++]
					int ele3 = ((Chara.MainElement == Element.Void) ? 923 : Chara.MainElement.id); // [!code ++]
					Say("reflect_acid", this, origin); // [!code ++]
					origin.DamageHP(Mathf.Clamp(dmg / 20, 1, MaxHP / 20), ele3, Power * 2, AttackSource.Condition); // [!code ++]
				} // [!code ++]
			}
			ProcAbsorb(); // [!code ++]
		}
		ProcAbsorb(); // [!code --]
	}
	if (hp < 0 || !isChara)
	{
```

[`@@ -4291,10 +4328,10 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L4291-L4300)
```cs:line-numbers=4291
	}
	if (num11 > 0)
	{
		bool flag = Chara.HasCondition<ConPoison>() || ((e.id == 915 || e.id == 923) && ResistLv(Evalue(955)) < 4); // [!code --]
		AddBlood(num11, flag ? 6 : (-1)); // [!code --]
		bool flag2 = Chara.HasCondition<ConPoison>() || ((e.id == 915 || e.id == 923) && ResistLv(Evalue(955)) < 4); // [!code ++]
		AddBlood(num11, flag2 ? 6 : (-1)); // [!code ++]
	}
	bool flag2 = true; // [!code --]
	bool flag3 = true; // [!code ++]
	switch (e.id)
	{
	case 910:
```

[`@@ -4335,14 +4372,14 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L4335-L4348)
```cs:line-numbers=4335
		}
		break;
	case 918:
		flag2 = false; // [!code --]
		flag3 = false; // [!code ++]
		if (Chance(30 + eleP / 5, 100))
		{
			Chara.AddCondition<ConParalyze>(eleP);
		}
		break;
	case 914:
		flag2 = false; // [!code --]
		flag3 = false; // [!code ++]
		if (EClass.rnd(3) != 0)
		{
			if (Chance(30 + eleP / 5, 100))
```

[`@@ -4382,7 +4419,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L4382-L4388)
```cs:line-numbers=4382
		}
		break;
	case 920:
		flag2 = false; // [!code --]
		flag3 = false; // [!code ++]
		if (Chance(5 + eleP / 25, 40))
		{
			Chara.AddCondition<ConBlind>(eleP / 2);
```

[`@@ -4434,7 +4471,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L4434-L4440)
```cs:line-numbers=4434
		Chara.AddCondition<ConGravity>(2000);
		Condition.ignoreEffect = false;
	}
	if (Chara.conSleep != null && flag2) // [!code --]
	if (Chara.conSleep != null && flag3) // [!code ++]
	{
		Chara.conSleep.Kill();
	}
```

[`@@ -5064,6 +5101,17 @@ public Card MakeFoodFrom(Card c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L5064-L5069)
```cs:line-numbers=5064
	{
		num2 = 3;
	}
	if (flag2) // [!code ++]
	{ // [!code ++]
		if (FoodEffect.IsHumanFlesh(c.sourceCard)) // [!code ++]
		{ // [!code ++]
			elements.SetBase(708, 1); // [!code ++]
		} // [!code ++]
		if (FoodEffect.IsUndeadFlesh(c.sourceCard)) // [!code ++]
		{ // [!code ++]
			elements.SetBase(709, 1); // [!code ++]
		} // [!code ++]
	} // [!code ++]
	foreach (Element value in c.elements.dict.Values)
	{
		if ((!flag3 || value.id != 1229) && (value.source.category == "food" || value.source.tag.Contains("foodEnc") || value.IsTrait))
```

[`@@ -6582,6 +6630,10 @@ public int GetValue(PriceType priceType = PriceType.Default, bool sell = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Card.cs#L6582-L6587)
```cs:line-numbers=6582
		{
			num2 = (category.tag.Contains("enc") ? (num2 * (0.7f + (float)(encLV - 1) * 0.2f)) : ((!IsFood) ? (num2 * (1f + (float)encLV * 0.01f)) : ((!(id == "honey")) ? (num2 * Mathf.Min(1f + 0.1f * (float)encLV, 2f) + (float)(encLV * 100)) : (num2 + (float)(encLV * 10)))));
		}
		if (tier > 0) // [!code ++]
		{ // [!code ++]
			num2 *= (float)(tier + 1); // [!code ++]
		} // [!code ++]
		return (int)num2;
	}

```

## Chara

[`@@ -2215,7 +2215,7 @@ public bool IsEnemyOnPath(Point p, bool cancelAI = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Chara.cs#L2215-L2221)
```cs:line-numbers=2215
		{
			foreach (Chara chara in p.detail.charas)
			{
				if (chara.IsHostile(this) || !chara.trait.CanBePushed) // [!code --]
				if (chara.IsHostile(this) || chara.IsHostile() || !chara.trait.CanBePushed) // [!code ++]
				{
					if (cancelAI && EClass.pc.ai is GoalManualMove)
					{
```

[`@@ -4988,7 +4988,6 @@ public override void Die(Element e = null, Card origin = null, AttackSource atta`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Chara.cs#L4988-L4994)
```cs:line-numbers=4988
		}
		currentZone.RemoveCard(this);
	}
	string text4; // [!code --]
	if ((origin != null && origin.IsPCParty) || IsPCFaction)
	{
		int a = -10;
```

[`@@ -4997,7 +4996,7 @@ public override void Die(Element e = null, Card origin = null, AttackSource atta`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Chara.cs#L4997-L5003)
```cs:line-numbers=4997
			a = -5;
		}
		ModAffinity(EClass.pc, a, show: false);
		text4 = id; // [!code --]
		string text4 = id; // [!code ++]
		if (!(text4 == "quru"))
		{
			if (text4 == "corgon")
```

[`@@ -5064,20 +5063,31 @@ public override void Die(Element e = null, Card origin = null, AttackSource atta`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Chara.cs#L5064-L5083)
```cs:line-numbers=5064
		base.c_wasInPcParty = true;
		EClass.pc.Say("allyDead");
	}
	text4 = id; // [!code --]
	if (!(text4 == "littleOne")) // [!code --]
	switch (id) // [!code ++]
	{
		if (text4 == "big_daddy" && !IsPCFaction) // [!code --]
	case "littleOne": // [!code ++]
		if (attackSource != AttackSource.DeathSentense && !IsPCFaction) // [!code ++]
		{
			Chara t = CharaGen.Create("littleOne"); // [!code --]
			EClass._zone.AddCard(t, pos.Copy()); // [!code --]
			EClass.player.flags.little_killed = true; // [!code ++]
			EClass.player.little_dead++; // [!code ++]
		} // [!code ++]
		break; // [!code ++]
	case "big_daddy": // [!code ++]
		if (!IsPCFaction) // [!code ++]
		{ // [!code ++]
			Chara t2 = CharaGen.Create("littleOne"); // [!code ++]
			EClass._zone.AddCard(t2, pos.Copy()); // [!code ++]
			Msg.Say("little_pop");
		}
	} // [!code --]
	else if (attackSource != AttackSource.DeathSentense && !IsPCFaction) // [!code --]
	{ // [!code --]
		EClass.player.flags.little_killed = true; // [!code --]
		EClass.player.little_dead++; // [!code --]
		break; // [!code ++]
	case "shark_sister": // [!code ++]
		if (!IsPCFaction) // [!code ++]
		{ // [!code ++]
			Chara t = CharaGen.Create("sister_shark"); // [!code ++]
			EClass._zone.AddCard(t, pos.Copy()); // [!code ++]
			Msg.Say("shark_pop"); // [!code ++]
		} // [!code ++]
		break; // [!code ++]
	}
	if (attackSource == AttackSource.Finish && origin != null && origin.Evalue(665) > 0)
	{
```

## CoreDebug

[`@@ -990,6 +990,12 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/CoreDebug.cs#L990-L995)
```cs:line-numbers=990
	}
	if (Input.GetKeyDown(KeyCode.F4))
	{
		for (int j = 0; j < 10; j++) // [!code ++]
		{ // [!code ++]
			Thing thing2 = ThingGen.CreateFromCategory("fish", 999); // [!code ++]
			thing2.SetTier(EScriptable.rnd(4)); // [!code ++]
			EClass.pc.Pick(thing2); // [!code ++]
		} // [!code ++]
		EClass.pc.PlayEffect("phoenix");
		return;
	}
```

[`@@ -1056,7 +1062,7 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/CoreDebug.cs#L1056-L1062)
```cs:line-numbers=1056
		if (Input.GetKey(KeyCode.F9))
		{
			EClass.scene.paused = false;
			for (int j = 0; j < advanceMin; j++) // [!code --]
			for (int k = 0; k < advanceMin; k++) // [!code ++]
			{
				EClass.game.updater.FixedUpdate();
			}
```

[`@@ -1196,8 +1202,8 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/CoreDebug.cs#L1196-L1203)
```cs:line-numbers=1196
	{
		for (int num4 = hitPoint.detail.things.Count - 1; num4 >= 0; num4--)
		{
			Thing thing2 = hitPoint.detail.things[num4]; // [!code --]
			Debug.Log(thing2.id + "/" + thing2.Pref.height + "/" + thing2.trait?.ToString() + "/" + thing2.source.tileType.CanStack + "/" + thing2.source.tileType?.ToString() + "/" + thing2.isSynced + "/" + RenderObject.syncList.Contains(thing2.renderer)); // [!code --]
			Thing thing3 = hitPoint.detail.things[num4]; // [!code ++]
			Debug.Log(thing3.id + "/" + thing3.Pref.height + "/" + thing3.trait?.ToString() + "/" + thing3.source.tileType.CanStack + "/" + thing3.source.tileType?.ToString() + "/" + thing3.isSynced + "/" + RenderObject.syncList.Contains(thing3.renderer)); // [!code ++]
		}
	}
	if (!Application.isEditor)
```

[`@@ -1273,40 +1279,40 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/CoreDebug.cs#L1273-L1312)
```cs:line-numbers=1273
	case DebugHotkey.Item:
		if (Input.GetKeyDown(KeyCode.Alpha1))
		{
			Thing thing3 = ThingGen.Create("stairsDown_cave"); // [!code --]
			EClass._zone.AddCard(thing3, EClass.pc.pos); // [!code --]
			thing3.SetPlaceState(PlaceState.installed); // [!code --]
		} // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha2)) // [!code --]
		{ // [!code --]
			Thing thing4 = ThingGen.Create("stairs"); // [!code --]
			Thing thing4 = ThingGen.Create("stairsDown_cave"); // [!code ++]
			EClass._zone.AddCard(thing4, EClass.pc.pos);
			thing4.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha3)) // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha2)) // [!code ++]
		{
			Thing thing5 = ThingGen.Create("sign"); // [!code --]
			EClass._zone.AddCard(thing5, hitPoint); // [!code --]
			Thing thing5 = ThingGen.Create("stairs"); // [!code ++]
			EClass._zone.AddCard(thing5, EClass.pc.pos); // [!code ++]
			thing5.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha4)) // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha3)) // [!code ++]
		{
			Thing thing6 = ThingGen.Create("sign2"); // [!code --]
			Thing thing6 = ThingGen.Create("sign"); // [!code ++]
			EClass._zone.AddCard(thing6, hitPoint);
			thing6.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha5)) // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha4)) // [!code ++]
		{
			Thing thing7 = ThingGen.Create("well"); // [!code --]
			Thing thing7 = ThingGen.Create("sign2"); // [!code ++]
			EClass._zone.AddCard(thing7, hitPoint);
			thing7.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha6)) // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha5)) // [!code ++]
		{
			Thing thing8 = ThingGen.Create("altar"); // [!code --]
			Thing thing8 = ThingGen.Create("well"); // [!code ++]
			EClass._zone.AddCard(thing8, hitPoint);
			thing8.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha6)) // [!code ++]
		{ // [!code ++]
			Thing thing9 = ThingGen.Create("altar"); // [!code ++]
			EClass._zone.AddCard(thing9, hitPoint); // [!code ++]
			thing9.SetPlaceState(PlaceState.installed); // [!code ++]
		} // [!code ++]
		if (Input.GetKeyDown(KeyCode.Alpha7))
		{
			Thing t = ThingGen.Create("torch");
```

## CraftUtil

[`@@ -198,10 +198,12 @@ public static Card MixIngredients(Card product, List<Thing> ings, MixType type,`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/CraftUtil.cs#L198-L207)
```cs:line-numbers=198
	{
		product.elements.SetTo(10, thing.Evalue(10) / 4);
		product.isWeightChanged = true;
		product.c_weight = Mathf.Min(thing.SelfWeight / 6, 800); // [!code --]
		product.c_weight = Mathf.Min(thing.SelfWeight / 6, 1000); // [!code ++]
		product.c_idRefCard = thing.id;
		product.c_fixedValue = thing.sourceCard.value / 8; // [!code --]
		product.c_fixedValue = ((thing.c_fixedValue == 0) ? thing.sourceCard.value : thing.c_fixedValue) / 6; // [!code ++]
		product.decay = thing.decay;
		product.elements.SetBase(707, 1); // [!code ++]
		product.SetTier(thing.tier, setTraits: false); // [!code ++]
	}
	if (product.HasElement(652))
	{
```

## ENC

[`@@ -8,17 +8,19 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ENC.cs#L8-L24)
```cs:line-numbers=8

	public const int r_DV = 650;

	public const int r_mana = 641; // [!code ++]
 // [!code ++]
	public const int mod_frustration = 624;

	public const int mod_flurry = 621; // [!code ++]
 // [!code ++]
	public const int mod_cleave = 622;

	public const int mod_feint = 623;

	public const int r_life = 640; // [!code --]
 // [!code --]
	public const int noDamage = 654;

	public const int r_mana = 641; // [!code --]
	public const int r_life = 640; // [!code ++]

	public const int onlyPet = 655;

```

[`@@ -40,7 +42,7 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ENC.cs#L40-L46)
```cs:line-numbers=40

	public const int convertFire = 850;

	public const int mod_flurry = 621; // [!code --]
	public const int mod_chaser = 620; // [!code ++]

	public const int convertImpact = 865;

```

[`@@ -48,11 +50,15 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ENC.cs#L48-L58)
```cs:line-numbers=48

	public const int permaCurse = 656;

	public const int mod_chaser = 620; // [!code --]
	public const int mod_talisman = 609; // [!code ++]

	public const int loving = 417; // [!code --]
	public const int innocence = 418; // [!code ++]

	public const int mod_splash = 608; // [!code --]
	public const int mod_scatter = 607; // [!code ++]
 // [!code ++]
	public const int sustain_STR = 440; // [!code ++]
 // [!code ++]
	public const int breathing = 429; // [!code ++]

	public const int allNeckHunt = 428;

```

[`@@ -72,27 +78,27 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ENC.cs#L72-L98)
```cs:line-numbers=72

	public const int negatePoison = 420;

	public const int innocence = 418; // [!code --]
	public const int loving = 417; // [!code ++]

	public const int seeInvisible = 416;

	public const int invisibility = 415; // [!code --]
	public const int sustain_END = 441; // [!code ++]

	public const int breathing = 429; // [!code --]
	public const int invisibility = 415; // [!code ++]

	public const int encHit = 414; // [!code --]
	public const int slowCorruption = 412; // [!code ++]

	public const int encSpell = 411;

	public const int throwReturn = 410;

	public const int corruption = 409; // [!code --]
	public const int mod_splash = 608; // [!code ++]

	public const int resWeather = 408;

	public const int travelSpeed = 407;

	public const int mod_talisman = 609; // [!code --]
	public const int resMutation = 406; // [!code ++]

	public const int slowDecay = 405;

```

[`@@ -106,17 +112,13 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ENC.cs#L106-L122)
```cs:line-numbers=106

	public const int negateTeleport = 400;

	public const int slowCorruption = 412; // [!code --]
 // [!code --]
	public const int sustain_STR = 440; // [!code --]
 // [!code --]
	public const int resMutation = 406; // [!code --]
	public const int encHit = 414; // [!code ++]

	public const int sustain_DEX = 442;

	public const int sustain_END = 441; // [!code --]
	public const int corruption = 409; // [!code ++]

	public const int mod_scatter = 607; // [!code --]
	public const int mod_ammo = 600; // [!code ++]

	public const int mod_drill = 606;

```

[`@@ -124,11 +126,13 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ENC.cs#L124-L134)
```cs:line-numbers=124

	public const int mod_ammo_recover = 604;

	public const int mod_ammo_knockback = 603; // [!code ++]
 // [!code ++]
	public const int mod_rapid = 602;

	public const int mod_reload = 601;

	public const int mod_ammo = 600; // [!code --]
	public const int nonLethal = 485; // [!code ++]

	public const int slot_rune = 484;

```

[`@@ -140,46 +144,44 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ENC.cs#L140-L185)
```cs:line-numbers=140

	public const int strongStomach = 480;

	public const int bane_all = 468; // [!code --]
 // [!code --]
	public const int bane_fish = 467;

	public const int mod_ammo_knockback = 603; // [!code --]
	public const int bane_god = 466; // [!code ++]

	public const int sustain_MAG = 446; // [!code --]
	public const int bane_all = 468; // [!code ++]

	public const int bane_god = 466; // [!code --]
	public const int bane_man = 464; // [!code ++]

	public const int sustain_LER = 444; // [!code --]
	public const int bane_animal = 463; // [!code ++]

	public const int sustain_WIL = 445; // [!code --]
	public const int bane_fairy = 462; // [!code ++]

	public const int sustain_CHA = 447; // [!code --]
	public const int bane_undead = 461; // [!code ++]

	public const int bane_dragon = 460;

	public const int sustain_PER = 443; // [!code --]
	public const int sustain_CHA = 447; // [!code ++]

	public const int bane_fairy = 462; // [!code --]
	public const int bane_machine = 465; // [!code ++]

	public const int bane_animal = 463; // [!code --]
	public const int sustain_MAG = 446; // [!code ++]

	public const int bane_man = 464; // [!code --]
	public const int sustain_WIL = 445; // [!code ++]

	public const int bane_machine = 465; // [!code --]
	public const int sustain_LER = 444; // [!code ++]

	public const int bane_undead = 461; // [!code --]
	public const int sustain_PER = 443; // [!code ++]

	public static readonly int[] IDS = new int[85] // [!code --]
	public static readonly int[] IDS = new int[86] // [!code ++]
	{
		653, 652, 651, 650, 624, 622, 623, 640, 654, 641, // [!code --]
		655, 851, 660, 661, 662, 663, 664, 665, 666, 850, // [!code --]
		621, 865, 852, 656, 620, 417, 608, 428, 427, 426, // [!code --]
		425, 424, 423, 422, 421, 420, 418, 416, 415, 429, // [!code --]
		414, 411, 410, 409, 408, 407, 609, 405, 404, 403, // [!code --]
		402, 401, 400, 412, 440, 406, 442, 441, 607, 606, // [!code --]
		605, 604, 602, 601, 600, 484, 483, 482, 481, 480, // [!code --]
		468, 467, 603, 446, 466, 444, 445, 447, 460, 443, // [!code --]
		462, 463, 464, 465, 461 // [!code --]
		653, 652, 651, 650, 641, 624, 621, 622, 623, 654, // [!code ++]
		640, 655, 851, 660, 661, 662, 663, 664, 665, 666, // [!code ++]
		850, 620, 865, 852, 656, 609, 418, 607, 440, 429, // [!code ++]
		428, 427, 426, 425, 424, 423, 422, 421, 420, 417, // [!code ++]
		416, 441, 415, 412, 411, 410, 608, 408, 407, 406, // [!code ++]
		405, 404, 403, 402, 401, 400, 414, 442, 409, 600, // [!code ++]
		606, 605, 604, 603, 602, 601, 485, 484, 483, 482, // [!code ++]
		481, 480, 467, 466, 468, 464, 463, 462, 461, 460, // [!code ++]
		447, 465, 446, 445, 444, 443 // [!code ++]
	};
}
```

## FACTION

[`@@ -4,31 +4,29 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FACTION.cs#L4-L34)
```cs:line-numbers=4

public class FACTION
{
	public const int bfRuin = 3702; // [!code --]
 // [!code --]
	public const int bfGeyser = 3701; // [!code --]
 // [!code --]
	public const int bfFertile = 3700; // [!code --]
	public const int bfSea = 3605; // [!code ++]

	public const int bfCave = 3500; // [!code --]
	public const int bfPlain = 3600; // [!code ++]

	public const int bfSea = 3605; // [!code --]
	public const int bfForest = 3601; // [!code ++]

	public const int bfBeach = 3604; // [!code --]
	public const int bfSnow = 3602; // [!code ++]

	public const int bfHill = 3603;

	public const int bfSnow = 3602; // [!code --]
	public const int bfGeyser = 3701; // [!code ++]

	public const int bfForest = 3601; // [!code --]
	public const int bfBeach = 3604; // [!code ++]

	public const int bfPlain = 3600; // [!code --]
	public const int bfFertile = 3700; // [!code ++]

	public const int fLuck = 2118; // [!code --]
	public const int bfCave = 3500; // [!code ++]

	public const int fPromo = 2202; // [!code --]
	public const int bfRuin = 3702; // [!code ++]

	public const int fAttraction = 2206; // [!code --]
	public const int fRation = 2207; // [!code ++]
 // [!code ++]
	public const int actBuildRecipe = 4005; // [!code ++]

	public const int fSafety = 2205;

```

[`@@ -36,38 +34,38 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FACTION.cs#L36-L73)
```cs:line-numbers=36

	public const int fMoral = 2203;

	public const int fPromo = 2202; // [!code ++]
 // [!code ++]
	public const int fElec = 2201; // [!code ++]
 // [!code ++]
	public const int fSoil = 2200;

	public const int fHeirloom = 2120; // [!code --]
	public const int bfTranquil = 3703; // [!code ++]

	public const int fTaxEvasion = 2119;

	public const int fEducation = 2116; // [!code --]
 // [!code --]
	public const int bfTranquil = 3703; // [!code --]
	public const int fLuck = 2118; // [!code ++]

	public const int fLoyal = 2117;

	public const int fRation = 2207; // [!code --]
	public const int fEducation = 2116; // [!code ++]
 // [!code ++]
	public const int fAttraction = 2206; // [!code ++]

	public const int bfVolcano = 3704;

	public const int bfGum = 3803; // [!code --]
	public const int bfSilica = 3802; // [!code ++]

	public const int bfFish = 3706;

	public const int actBuildInspect = 4006;

	public const int actBuildRecipe = 4005; // [!code --]
 // [!code --]
	public const int fAdmin = 2115; // [!code --]
 // [!code --]
	public const int actBuildCollect = 4004; // [!code --]
 // [!code --]
	public const int actBuildAnywhere = 4003;

	public const int actBuildTerrain = 4002;

	public const int fAdmin = 2115; // [!code ++]
 // [!code ++]
	public const int actBuildMine = 4001;

	public const int actBuildCut = 4000;
```

[`@@ -78,9 +76,11 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FACTION.cs#L78-L86)
```cs:line-numbers=78

	public const int bfIce = 3804;

	public const int bfSilica = 3802; // [!code --]
	public const int bfGum = 3803; // [!code ++]

	public const int bfMushroom = 3801; // [!code --]
	public const int bfHunt = 3705; // [!code ++]
 // [!code ++]
	public const int actBuildCollect = 4004; // [!code ++]

	public const int bfCoal = 3800;

```

[`@@ -102,20 +102,20 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FACTION.cs#L102-L121)
```cs:line-numbers=102

	public const int bfMonster = 3707;

	public const int bfHunt = 3705; // [!code --]
	public const int bfMushroom = 3801; // [!code ++]

	public const int fConstruction = 2003;

	public const int fElec = 2201; // [!code --]
	public const int fHeirloom = 2120; // [!code ++]

	public static readonly int[] IDS = new int[52]
	{
		3702, 3701, 3700, 3500, 3605, 3604, 3603, 3602, 3601, 3600, // [!code --]
		2118, 2202, 2206, 2205, 2204, 2203, 2200, 2120, 2119, 2116, // [!code --]
		3703, 2117, 2207, 3704, 3803, 3706, 4006, 4005, 2115, 4004, // [!code --]
		4003, 4002, 4001, 4000, 3900, 3805, 3804, 3802, 3801, 3800, // [!code --]
		3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707, 3705, // [!code --]
		2003, 2201 // [!code --]
		3605, 3600, 3601, 3602, 3603, 3701, 3604, 3700, 3500, 3702, // [!code ++]
		2207, 4005, 2205, 2204, 2203, 2202, 2201, 2200, 3703, 2119, // [!code ++]
		2118, 2117, 2116, 2206, 3704, 3802, 3706, 4006, 4003, 4002, // [!code ++]
		2115, 4001, 4000, 3900, 3805, 3804, 3803, 3705, 4004, 3800, // [!code ++]
		3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707, 3801, // [!code ++]
		2003, 2120 // [!code ++]
	};
}
public class Faction : EClass
```

## FEAT

[`@@ -3,13 +3,7 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FEAT.cs#L3-L15)
```cs:line-numbers=3

public class FEAT
{
	public const int featManaPrecision = 1214; // [!code --]
 // [!code --]
	public const int featSleeper = 1642; // [!code --]
 // [!code --]
	public const int featResCurse = 1641; // [!code --]
 // [!code --]
	public const int featAnimalLover = 1640; // [!code --]
	public const int featSnail = 1211; // [!code ++]

	public const int featFaith = 1636;

```

[`@@ -55,15 +49,21 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FEAT.cs#L55-L69)
```cs:line-numbers=55

	public const int featManaMeat = 1421;

	public const int featSorter = 1643; // [!code --]
 // [!code --]
	public const int featExecutioner = 1420;

	public const int featBodyParts = 1644; // [!code --]
	public const int featMilitant = 1419; // [!code ++]

	public const int featLonelySoul = 1646; // [!code --]
	public const int featSwordsage = 1418; // [!code ++]

	public const int featElea = 1213; // [!code --]
	public const int featAnimalLover = 1640; // [!code ++]
 // [!code ++]
	public const int featWitch = 1417; // [!code ++]
 // [!code ++]
	public const int featResCurse = 1641; // [!code ++]
 // [!code ++]
	public const int featSorter = 1643; // [!code ++]
 // [!code ++]
	public const int featUndead = 1210; // [!code ++]

	public const int featSlowFood = 1200;

```

[`@@ -85,12 +85,6 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FEAT.cs#L85-L96)
```cs:line-numbers=85

	public const int featFluffyTail = 1209;

	public const int featUndead = 1210; // [!code --]
 // [!code --]
	public const int featSnail = 1211; // [!code --]
 // [!code --]
	public const int featChef = 1658; // [!code --]
 // [!code --]
	public const int featManaCost = 1657;

	public const int featScavenger = 1656;
```

[`@@ -113,13 +107,25 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FEAT.cs#L113-L125)
```cs:line-numbers=113

	public const int featSummoner = 1647;

	public const int featLonelySoul = 1646; // [!code ++]
 // [!code ++]
	public const int featParty = 1645;

	public const int featMilitant = 1419; // [!code --]
	public const int featBodyParts = 1644; // [!code ++]

	public const int featFairyResist = 1212; // [!code --]
	public const int featSleeper = 1642; // [!code ++]

	public const int featWitch = 1417; // [!code --]
	public const int featInquisitor = 1416; // [!code ++]
 // [!code ++]
	public const int featChef = 1658; // [!code ++]
 // [!code ++]
	public const int featWhiteVixen = 1414; // [!code ++]
 // [!code ++]
	public const int featLightEater = 1235; // [!code ++]
 // [!code ++]
	public const int featNorland = 1236; // [!code ++]
 // [!code ++]
	public const int featRoran = 1237; // [!code ++]

	public const int featElder = 1238;

```

[`@@ -127,22 +133,22 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FEAT.cs#L127-L148)
```cs:line-numbers=127

	public const int featGod_element1 = 1300;

	public const int featGod_earth1 = 1305; // [!code --]
 // [!code --]
	public const int featGod_wind1 = 1310;

	public const int featGod_machine1 = 1315;

	public const int featGod_healing1 = 1320;

	public const int featHeavyEater = 1234; // [!code ++]
 // [!code ++]
	public const int featGod_harvest1 = 1325;

	public const int featGod_harmony1 = 1335;

	public const int featRoran = 1237; // [!code --]
 // [!code --]
	public const int featGod_oblivion1 = 1340;

	public const int featGod_trickery1 = 1345; // [!code ++]
 // [!code ++]
	public const int featGod_moonshadow1 = 1350;

	public const int featGod_strife1 = 1355;
```

[`@@ -155,21 +161,21 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FEAT.cs#L155-L175)
```cs:line-numbers=155

	public const int featFarmer = 1403;

	public const int featArcher = 1404; // [!code --]
	public const int featGod_luck1 = 1330; // [!code ++]

	public const int featPianist = 1405; // [!code --]
	public const int featArcher = 1404; // [!code ++]

	public const int featTourist = 1406; // [!code --]
	public const int featCosmicHorror = 1233; // [!code ++]

	public const int featGod_trickery1 = 1345; // [!code --]
	public const int featNirvana = 1231; // [!code ++]

	public const int featPaladin = 1407; // [!code --]
	public const int featFoxMaid = 1415; // [!code ++]

	public const int featNorland = 1236; // [!code --]
	public const int featElea = 1213; // [!code ++]

	public const int featHeavyEater = 1234; // [!code --]
	public const int featManaPrecision = 1214; // [!code ++]

	public const int featSwordsage = 1418; // [!code --]
	public const int featDwarf = 1215; // [!code ++]

	public const int featSuccubus = 1216;

```

[`@@ -181,70 +187,64 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FEAT.cs#L181-L250)
```cs:line-numbers=181

	public const int featFate = 1220;

	public const int featBaby = 1232; // [!code ++]
 // [!code ++]
	public const int featSpike = 1221;

	public const int featSplit = 1222; // [!code --]
	public const int featFairyResist = 1212; // [!code ++]

	public const int featAcidBody = 1223;

	public const int featLightEater = 1235; // [!code --]
 // [!code --]
	public const int featShiva = 1224;

	public const int featLoyal = 1225; // [!code ++]
 // [!code ++]
	public const int featUnderground = 1226;

	public const int featServant = 1227;

	public const int featDwarf = 1215; // [!code --]
 // [!code --]
	public const int featDemigod = 1228;

	public const int featLittleOne = 1229;

	public const int featAdam = 1230;

	public const int featNirvana = 1231; // [!code --]
 // [!code --]
	public const int featBaby = 1232; // [!code --]
 // [!code --]
	public const int featCosmicHorror = 1233; // [!code --]
	public const int featSplit = 1222; // [!code ++]

	public const int featLoyal = 1225; // [!code --]
	public const int featPianist = 1405; // [!code ++]

	public const int featPaladin2 = 1408; // [!code --]
	public const int featGod_earth1 = 1305; // [!code ++]

	public const int featGod_luck1 = 1330; // [!code --]
	public const int featPaladin = 1407; // [!code ++]

	public const int featReboot = 1410; // [!code --]
	public const int featTourist = 1406; // [!code ++]

	public const int featBoost = 1409;

	public const int featInquisitor = 1416; // [!code --]
 // [!code --]
	public const int featWhiteVixen = 1414; // [!code --]
	public const int featReboot = 1410; // [!code ++]

	public const int featFoxMaid = 1415; // [!code --]
	public const int featEarthStrength = 1411; // [!code ++]

	public const int featLuckyCat = 1412;

	public const int featFairysan = 1413;

	public const int featEarthStrength = 1411; // [!code --]
	public const int featPaladin2 = 1408; // [!code ++]

	public static readonly int[] IDS = new int[114]
	{
		1214, 1642, 1641, 1640, 1636, 1635, 1634, 1633, 1632, 1631, // [!code --]
		1630, 1629, 1628, 1627, 1626, 1625, 1624, 1623, 1622, 1621, // [!code --]
		1620, 1612, 1611, 1610, 1422, 1421, 1643, 1420, 1644, 1646, // [!code --]
		1213, 1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208, // [!code --]
		1209, 1210, 1211, 1658, 1657, 1656, 1655, 1654, 1653, 1652, // [!code --]
		1651, 1650, 1649, 1648, 1647, 1645, 1419, 1212, 1417, 1238, // [!code --]
		1239, 1300, 1305, 1310, 1315, 1320, 1325, 1335, 1237, 1340, // [!code --]
		1350, 1355, 1400, 1401, 1402, 1403, 1404, 1405, 1406, 1345, // [!code --]
		1407, 1236, 1234, 1418, 1216, 1217, 1218, 1219, 1220, 1221, // [!code --]
		1222, 1223, 1235, 1224, 1226, 1227, 1215, 1228, 1229, 1230, // [!code --]
		1231, 1232, 1233, 1225, 1408, 1330, 1410, 1409, 1416, 1414, // [!code --]
		1415, 1412, 1413, 1411 // [!code --]
		1211, 1636, 1635, 1634, 1633, 1632, 1631, 1630, 1629, 1628, // [!code ++]
		1627, 1626, 1625, 1624, 1623, 1622, 1621, 1620, 1612, 1611, // [!code ++]
		1610, 1422, 1421, 1420, 1419, 1418, 1640, 1417, 1641, 1643, // [!code ++]
		1210, 1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208, // [!code ++]
		1209, 1657, 1656, 1655, 1654, 1653, 1652, 1651, 1650, 1649, // [!code ++]
		1648, 1647, 1646, 1645, 1644, 1642, 1416, 1658, 1414, 1235, // [!code ++]
		1236, 1237, 1238, 1239, 1300, 1310, 1315, 1320, 1234, 1325, // [!code ++]
		1335, 1340, 1345, 1350, 1355, 1400, 1401, 1402, 1403, 1330, // [!code ++]
		1404, 1233, 1231, 1415, 1213, 1214, 1215, 1216, 1217, 1218, // [!code ++]
		1219, 1220, 1232, 1221, 1212, 1223, 1224, 1225, 1226, 1227, // [!code ++]
		1228, 1229, 1230, 1222, 1405, 1305, 1407, 1406, 1409, 1410, // [!code ++]
		1411, 1412, 1413, 1408 // [!code ++]
	};
}
public class Feat : Element
```

## FOOD

[`@@ -1,22 +1,32 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FOOD.cs#L1-L22)
```cs:line-numbers=1
public class FOOD
{
	public const int loseWeight = 706; // [!code --]
	public const int food_CHA = 700; // [!code ++]

	public const int gainWeight = 705; // [!code --]
	public const int food_undead = 709; // [!code ++]

	public const int food_bug = 704; // [!code --]
	public const int food_god = 758; // [!code ++]
 // [!code ++]
	public const int justcooked = 757; // [!code ++]
 // [!code ++]
	public const int food_cat = 701; // [!code ++]
 // [!code ++]
	public const int food_human = 708; // [!code ++]

	public const int food_love = 703;

	public const int food_poison = 702; // [!code --]
	public const int food_bug = 704; // [!code ++]

	public const int food_god = 758; // [!code --]
	public const int gainWeight = 705; // [!code ++]

	public const int food_CHA = 700; // [!code --]
	public const int loseWeight = 706; // [!code ++]

	public const int justcooked = 757; // [!code --]
	public const int kirimi = 707; // [!code ++]

	public const int food_cat = 701; // [!code --]
	public const int food_poison = 702; // [!code ++]

	public static readonly int[] IDS = new int[9] { 706, 705, 704, 703, 702, 758, 700, 757, 701 }; // [!code --]
	public static readonly int[] IDS = new int[12] // [!code ++]
	{ // [!code ++]
		700, 709, 758, 757, 701, 708, 703, 704, 705, 706, // [!code ++]
		707, 702 // [!code ++]
	}; // [!code ++]
}
```

## FoodEffect

[`@@ -3,48 +3,6 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FoodEffect.cs#L3-L50)
```cs:line-numbers=3

public class FoodEffect : EClass
{
	public static bool IsHumanFlesh(Thing food) // [!code --]
	{ // [!code --]
		if (food.HasTag(CTAG.notHumanMeat)) // [!code --]
		{ // [!code --]
			return false; // [!code --]
		} // [!code --]
		if (food.id == "deadbody") // [!code --]
		{ // [!code --]
			return true; // [!code --]
		} // [!code --]
		if (food.source._origin != "meat" && food.source._origin != "dish") // [!code --]
		{ // [!code --]
			return false; // [!code --]
		} // [!code --]
		string[] components = food.source.components; // [!code --]
		for (int i = 0; i < components.Length; i++) // [!code --]
		{ // [!code --]
			if (components[i].Contains("egg")) // [!code --]
			{ // [!code --]
				return false; // [!code --]
			} // [!code --]
		} // [!code --]
		if (!IsHumanFlesh(food.refCard)) // [!code --]
		{ // [!code --]
			return IsHumanFlesh(food.refCard2); // [!code --]
		} // [!code --]
		return true; // [!code --]
	} // [!code --]
 // [!code --]
	public static bool IsUndeadFlesh(Thing food) // [!code --]
	{ // [!code --]
		if (food.source._origin != "meat" && food.source._origin != "dish") // [!code --]
		{ // [!code --]
			return false; // [!code --]
		} // [!code --]
		if (!IsUndeadFlesh(food.refCard)) // [!code --]
		{ // [!code --]
			return IsUndeadFlesh(food.refCard2); // [!code --]
		} // [!code --]
		return true; // [!code --]
	} // [!code --]
 // [!code --]
	public static bool IsHumanFlesh(CardRow r)
	{
		if (r == null)
```

[`@@ -93,8 +51,8 @@ public static void Proc(Chara c, Thing food)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/FoodEffect.cs#L93-L100)
```cs:line-numbers=93
	float num4 = 25f;
	float num5 = 1f;
	string idTaste = "";
	bool flag2 = IsHumanFlesh(food); // [!code --]
	bool flag3 = IsUndeadFlesh(food); // [!code --]
	bool flag2 = food.HasElement(708); // [!code ++]
	bool flag3 = food.HasElement(709); // [!code ++]
	bool flag4 = c.HasElement(1205);
	bool flag5 = food.IsDecayed || flag3;
	if (food.IsBlessed)
```

## MUTATION

[`@@ -1,42 +1,36 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/MUTATION.cs#L1-L42)
```cs:line-numbers=1
public class MUTATION
{
	public const int mutationRegenN = 1517; // [!code --]
 // [!code --]
	public const int mutationStrN = 1521; // [!code --]
 // [!code --]
	public const int mutationStr = 1520; // [!code --]
 // [!code --]
	public const int mutationSpeedN = 1519;

	public const int mutationSpeed = 1518; // [!code --]
	public const int mutationSkin = 1510; // [!code ++]

	public const int mutationEye = 1512;

	public const int mutationDex = 1514; // [!code --]
 // [!code --]
	public const int mutationEyeN = 1513;

	public const int mutationSkinN = 1511; // [!code --]
	public const int mutationDex = 1514; // [!code ++]

	public const int mutationSkin = 1510; // [!code --]
	public const int mutationDexN = 1515; // [!code ++]

	public const int mutationCha = 1522; // [!code --]
	public const int mutationRegen = 1516; // [!code ++]

	public const int mutationDexN = 1515; // [!code --]
	public const int mutationRegenN = 1517; // [!code ++]

	public const int mutationChaN = 1523; // [!code --]
	public const int mutationSpeed = 1518; // [!code ++]

	public const int mutationRegen = 1516; // [!code --]
	public const int mutationStr = 1520; // [!code ++]

	public const int mutationBrainN = 1525; // [!code --]
	public const int mutationSkinN = 1511; // [!code ++]
 // [!code ++]
	public const int mutationCha = 1522; // [!code ++]

	public const int etherPoisonHand = 1565;

	public const int mutationBrain = 1524; // [!code --]
	public const int etherManaBattery = 1564; // [!code ++]

	public const int etherProvoke = 1563;

	public const int etherArmor = 1562; // [!code --]
	public const int mutationStrN = 1521; // [!code ++]

	public const int etherStupid = 1561;

```

[`@@ -52,36 +46,42 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/MUTATION.cs#L52-L87)
```cs:line-numbers=52

	public const int etherNeck = 1555;

	public const int etherManaBattery = 1564; // [!code --]
	public const int etherWing = 1554; // [!code ++]

	public const int etherEye = 1553;

	public const int etherArmor = 1562; // [!code ++]
 // [!code ++]
	public const int etherFeet = 1552; // [!code ++]
 // [!code ++]
	public const int mutationChaN = 1523; // [!code ++]
 // [!code ++]
	public const int mutationBrainN = 1525; // [!code ++]
 // [!code ++]
	public const int mutationCold = 1526;

	public const int etherWing = 1554; // [!code --]
	public const int mutationColdN = 1527; // [!code ++]

	public const int mutationLightning = 1528;

	public const int mutationLightningN = 1529; // [!code --]
	public const int mutationBrain = 1524; // [!code ++]

	public const int mutationBody = 1530;

	public const int mutationColdN = 1527; // [!code --]
	public const int mutationBodyN = 1531; // [!code ++]

	public const int etherGravity = 1550;

	public const int etherUgly = 1551;

	public const int etherFeet = 1552; // [!code --]
 // [!code --]
	public const int mutationBodyN = 1531; // [!code --]
	public const int mutationLightningN = 1529; // [!code ++]

	public static readonly int[] IDS = new int[38]
	{
		1517, 1521, 1520, 1519, 1518, 1512, 1514, 1513, 1511, 1510, // [!code --]
		1522, 1515, 1523, 1516, 1525, 1565, 1524, 1563, 1562, 1561, // [!code --]
		1560, 1559, 1558, 1557, 1556, 1555, 1564, 1553, 1526, 1554, // [!code --]
		1528, 1529, 1530, 1527, 1550, 1551, 1552, 1531 // [!code --]
		1519, 1510, 1512, 1513, 1514, 1515, 1516, 1517, 1518, 1520, // [!code ++]
		1511, 1522, 1565, 1564, 1563, 1521, 1561, 1560, 1559, 1558, // [!code ++]
		1557, 1556, 1555, 1554, 1553, 1562, 1552, 1523, 1525, 1526, // [!code ++]
		1527, 1528, 1524, 1530, 1531, 1550, 1551, 1529 // [!code ++]
	};
}
public class Mutation : Feat
```

## POLICY

[`@@ -5,6 +5,8 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/POLICY.cs#L5-L10)
```cs:line-numbers=5
{
	public const int store_premium = 2817;

	public const int open_business = 2810; // [!code ++]
 // [!code ++]
	public const int tourist_safety = 2811;

	public const int bed_quality = 2812;
```

[`@@ -15,8 +17,6 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/POLICY.cs#L15-L22)
```cs:line-numbers=15

	public const int platinum_ticket = 2815;

	public const int open_business = 2810; // [!code --]
 // [!code --]
	public const int store_ripoff = 2816;

	public const int license_food = 2818;
```

[`@@ -29,6 +29,8 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/POLICY.cs#L29-L34)
```cs:line-numbers=29

	public const int celeb = 2822;

	public const int home_discount = 2800; // [!code ++]
 // [!code ++]
	public const int license_stolen = 2824;

	public const int milk_fan = 2825;
```

[`@@ -39,34 +41,32 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/POLICY.cs#L39-L72)
```cs:line-numbers=39

	public const int license_slaver = 2828;

	public const int home_discount = 2800; // [!code --]
 // [!code --]
	public const int license_furniture = 2819;

	public const int livestock_priv = 2715;

	public const int taxfree = 2514; // [!code --]
	public const int resident_wanted = 2513; // [!code ++]

	public const int incomeTransfer = 2711;

	public const int forcePanty = 2712; // [!code ++]
 // [!code ++]
	public const int wealth_tax = 2500; // [!code ++]
 // [!code ++]
	public const int human_right = 2506;

	public const int legal_drug = 2505; // [!code ++]
 // [!code ++]
	public const int impressment = 2504; // [!code ++]
 // [!code ++]
	public const int prohibition = 2503;

	public const int food_for_people = 2502;

	public const int faith_tax = 2501;

	public const int wealth_tax = 2500; // [!code --]
 // [!code --]
	public const int forcePanty = 2712; // [!code --]
 // [!code --]
	public const int legal_drug = 2505; // [!code --]
 // [!code --]
	public const int inquisition = 2507;

	public const int nocturnal_life = 2508; // [!code --]
 // [!code --]
	public const int vaccination = 2509;

	public const int ban_radio = 2510;
```

[`@@ -75,25 +75,23 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/POLICY.cs#L75-L99)
```cs:line-numbers=75

	public const int resident_tax = 2512;

	public const int impressment = 2504; // [!code --]
	public const int nocturnal_life = 2508; // [!code ++]

	public const int stop_growth = 2515;

	public const int border_watch = 2704; // [!code --]
	public const int noAnimal = 2709; // [!code ++]

	public const int resident_wanted = 2513; // [!code --]
	public const int taxfree = 2514; // [!code ++]

	public const int demon_invocation = 2706; // [!code --]
	public const int noDM = 2708; // [!code ++]

	public const int auto_farm = 2707;

	public const int taxTransfer = 2705; // [!code --]
 // [!code --]
	public const int noAnimal = 2709; // [!code --]
	public const int demon_invocation = 2706; // [!code ++]

	public const int noDM = 2708; // [!code --]
	public const int border_watch = 2704; // [!code ++]

	public const int weed_no = 2703; // [!code --]
	public const int taxTransfer = 2705; // [!code ++]

	public const int trash_no = 2702;

```

[`@@ -103,15 +101,17 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/POLICY.cs#L103-L117)
```cs:line-numbers=103

	public const int speed_growth = 2516;

	public const int weed_no = 2703; // [!code ++]
 // [!code ++]
	public const int noMother = 2710;

	public static readonly int[] IDS = new int[51]
	{
		2817, 2811, 2812, 2813, 2814, 2815, 2810, 2816, 2818, 2823, // [!code --]
		2820, 2821, 2822, 2824, 2825, 2826, 2827, 2828, 2800, 2819, // [!code --]
		2715, 2514, 2711, 2506, 2503, 2502, 2501, 2500, 2712, 2505, // [!code --]
		2507, 2508, 2509, 2510, 2511, 2512, 2504, 2515, 2704, 2513, // [!code --]
		2706, 2707, 2705, 2709, 2708, 2703, 2702, 2701, 2700, 2516, // [!code --]
		2817, 2810, 2811, 2812, 2813, 2814, 2815, 2816, 2818, 2823, // [!code ++]
		2820, 2821, 2822, 2800, 2824, 2825, 2826, 2827, 2828, 2819, // [!code ++]
		2715, 2513, 2711, 2712, 2500, 2506, 2505, 2504, 2503, 2502, // [!code ++]
		2501, 2507, 2509, 2510, 2511, 2512, 2508, 2515, 2709, 2514, // [!code ++]
		2708, 2707, 2706, 2704, 2705, 2702, 2701, 2700, 2516, 2703, // [!code ++]
		2710
	};
}
```

## RecipeCard

[`@@ -290,6 +290,11 @@ public override Thing Craft(BlessedState blessed, bool sound = false, List<Thing`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/RecipeCard.cs#L290-L295)
```cs:line-numbers=290
	{
		num5 *= 2;
	}
	if (thing.trait is TraitFoodFishSlice && thing.c_idRefCard == thing.id && (thing.SelfWeight == 0 || thing.Evalue(10) == 0)) // [!code ++]
	{ // [!code ++]
		Msg.Say("noMoreSlice"); // [!code ++]
		num5 = 1; // [!code ++]
	} // [!code ++]
	if (num5 > 1)
	{
		thing.SetNum(num5);
```

## SKILL

[`@@ -1,6 +1,6 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/SKILL.cs#L1-L6)
```cs:line-numbers=1
public class SKILL
{
	public const int twohand = 130; // [!code --]
	public const int weaponBlunt = 111; // [!code ++]

	public const int shield = 123;

```

[`@@ -8,23 +8,23 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/SKILL.cs#L8-L30)
```cs:line-numbers=8

	public const int armorLight = 120;

	public const int fireproof = 50; // [!code --]
 // [!code --]
	public const int weaponScythe = 110; // [!code --]
	public const int PDR = 55; // [!code ++]

	public const int weaponCrossbow = 109;

	public const int twowield = 131; // [!code --]
	public const int fireproof = 50; // [!code ++]

	public const int acidproof = 51;

	public const int weaponBlunt = 111; // [!code --]
	public const int twohand = 130; // [!code ++]

	public const int fishing = 245; // [!code --]
	public const int weaponScythe = 110; // [!code ++]

	public const int evasion = 150; // [!code --]
	public const int twowield = 131; // [!code ++]

	public const int eyeofmind = 134; // [!code --]
	public const int mining = 220; // [!code ++]
 // [!code ++]
	public const int fishing = 245; // [!code ++]

	public const int climbing = 242;

```

[`@@ -42,7 +42,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/SKILL.cs#L42-L48)
```cs:line-numbers=42

	public const int riding = 226;

	public const int mining = 220; // [!code --]
	public const int lumberjack = 225; // [!code ++]

	public const int spotting = 210;

```

[`@@ -54,85 +54,85 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/SKILL.cs#L54-L138)
```cs:line-numbers=54

	public const int evasionPlus = 151;

	public const int strategy = 135; // [!code --]
 // [!code --]
	public const int marksman = 133; // [!code --]
	public const int evasion = 150; // [!code ++]

	public const int lumberjack = 225; // [!code --]
	public const int strategy = 135; // [!code ++]

	public const int martial = 100; // [!code --]
	public const int eyeofmind = 134; // [!code ++]

	public const int weaponDagger = 107; // [!code --]
	public const int tactics = 132; // [!code ++]

	public const int DEX = 72; // [!code --]
	public const int EDR = 56; // [!code ++]

	public const int END = 71; // [!code --]
	public const int weaponStaff = 103; // [!code ++]

	public const int STR = 70; // [!code --]
	public const int throwing = 108; // [!code ++]

	public const int FPV = 68; // [!code --]
	public const int life = 60; // [!code ++]

	public const int DMG = 67; // [!code --]
	public const int mana = 61; // [!code ++]

	public const int HIT = 66; // [!code --]
	public const int vigor = 62; // [!code ++]

	public const int PER = 73; // [!code --]
	public const int DV = 64; // [!code ++]

	public const int PV = 65;

	public const int vigor = 62; // [!code --]
 // [!code --]
	public const int mana = 61; // [!code --]
	public const int HIT = 66; // [!code ++]

	public const int life = 60; // [!code --]
	public const int DMG = 67; // [!code ++]

	public const int evasionPerfect = 57; // [!code --]
	public const int FPV = 68; // [!code ++]

	public const int EDR = 56; // [!code --]
	public const int STR = 70; // [!code ++]

	public const int PDR = 55; // [!code --]
	public const int END = 71; // [!code ++]

	public const int DV = 64; // [!code --]
	public const int DEX = 72; // [!code ++]

	public const int throwing = 108; // [!code --]
	public const int PER = 73; // [!code ++]

	public const int LER = 74;

	public const int MAG = 76; // [!code --]
	public const int WIL = 75; // [!code ++]

	public const int weaponPolearm = 106; // [!code --]
	public const int evasionPerfect = 57; // [!code ++]

	public const int weaponGun = 105; // [!code --]
	public const int MAG = 76; // [!code ++]

	public const int weaponBow = 104; // [!code --]
	public const int LUC = 78; // [!code ++]

	public const int weaponStaff = 103; // [!code --]
	public const int SPD = 79; // [!code ++]

	public const int weaponAxe = 102; // [!code --]
	public const int INT = 80; // [!code ++]

	public const int weaponSword = 101; // [!code --]
	public const int critical = 90; // [!code ++]

	public const int WIL = 75; // [!code --]
	public const int vopal = 91; // [!code ++]
 // [!code ++]
	public const int penetration = 92; // [!code ++]

	public const int antiMagic = 93;

	public const int vopal = 91; // [!code --]
	public const int martial = 100; // [!code ++]

	public const int critical = 90; // [!code --]
	public const int weaponSword = 101; // [!code ++]

	public const int INT = 80; // [!code --]
	public const int weaponAxe = 102; // [!code ++]

	public const int SPD = 79; // [!code --]
	public const int weaponBow = 104; // [!code ++]

	public const int LUC = 78; // [!code --]
	public const int weaponGun = 105; // [!code ++]

	public const int CHA = 77; // [!code --]
	public const int weaponPolearm = 106; // [!code ++]

	public const int penetration = 92; // [!code --]
	public const int weaponDagger = 107; // [!code ++]
 // [!code ++]
	public const int CHA = 77; // [!code ++]

	public const int gathering = 250;

	public const int tactics = 132; // [!code --]
	public const int marksman = 133; // [!code ++]

	public const int blacksmith = 256;

```

[`@@ -268,13 +268,13 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/SKILL.cs#L268-L280)
```cs:line-numbers=268

	public static readonly int[] IDS = new int[133]
	{
		130, 123, 122, 120, 50, 110, 109, 131, 51, 111, // [!code --]
		245, 150, 134, 242, 241, 240, 237, 235, 230, 227, // [!code --]
		226, 220, 210, 207, 200, 152, 151, 135, 133, 225, // [!code --]
		100, 107, 72, 71, 70, 68, 67, 66, 73, 65, // [!code --]
		62, 61, 60, 57, 56, 55, 64, 108, 74, 76, // [!code --]
		106, 105, 104, 103, 102, 101, 75, 93, 91, 90, // [!code --]
		80, 79, 78, 77, 92, 250, 132, 256, 916, 917, // [!code --]
		111, 123, 122, 120, 55, 109, 50, 51, 130, 110, // [!code ++]
		131, 220, 245, 242, 241, 240, 237, 235, 230, 227, // [!code ++]
		226, 225, 210, 207, 200, 152, 151, 150, 135, 134, // [!code ++]
		132, 56, 103, 108, 60, 61, 62, 64, 65, 66, // [!code ++]
		67, 68, 70, 71, 72, 73, 74, 75, 57, 76, // [!code ++]
		78, 79, 80, 90, 91, 92, 93, 100, 101, 102, // [!code ++]
		104, 105, 106, 107, 77, 250, 133, 256, 916, 917, // [!code ++]
		918, 920, 921, 922, 923, 924, 925, 926, 950, 951,
		952, 953, 915, 954, 956, 957, 958, 959, 960, 961,
		962, 963, 964, 965, 970, 971, 972, 255, 955, 914,
```

## TCOrbitChara

[`@@ -68,7 +68,7 @@ public void RefreshAll()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/TCOrbitChara.cs#L68-L74)
```cs:line-numbers=68
	Emo2 emo = owner.emoIcon;
	if (emo == Emo2.none)
	{
		if (owner.isRestocking && !owner.IsPCParty && owner.trait.GetRestockedIcon() != 0 && !(EMono._zone is Zone_Dungeon)) // [!code --]
		if (owner.isRestocking && (!owner.IsPCParty || EMono._zone.IsPCFaction) && owner.trait.GetRestockedIcon() != 0 && !(EMono._zone is Zone_Dungeon)) // [!code ++]
		{
			emo = owner.trait.GetRestockedIcon();
		}
```

## TaskHarvest

[`@@ -467,6 +467,10 @@ public override void OnCreateProgress(Progress_Custom p)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/TaskHarvest.cs#L467-L472)
```cs:line-numbers=467

	public string GetIdDismantled()
	{
		if (target.HasElement(707)) // [!code ++]
		{ // [!code ++]
			return "fish_slice"; // [!code ++]
		} // [!code ++]
		string result = target.source.components[0].Split('|')[0].Split('/')[0];
		if (target.IsEquipmentOrRangedOrAmmo)
		{
```

[`@@ -511,19 +515,25 @@ public void HarvestThing()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/TaskHarvest.cs#L511-L529)
```cs:line-numbers=511
	string text = GetIdDismantled();
	float num = target.Num;
	float num2 = 1.0999999f;
	if (text == "log" || text == "rock") // [!code --]
	if (target.trait.CraftNum > 1) // [!code ++]
	{ // [!code ++]
		num2 = (float)target.trait.CraftNum * 1.35f; // [!code ++]
	} // [!code ++]
	switch (text) // [!code ++]
	{
	case "log": // [!code ++]
	case "rock": // [!code ++]
		num2 = 2.1999998f;
		break; // [!code ++]
	case "fish_slice": // [!code ++]
		num2 = 4.4f; // [!code ++]
		break; // [!code ++]
	}
	string text2 = target.id;
	if (text2 == "glass" || text2 == "brick")
	{
		num2 = 2.1999998f;
	}
	if (target.trait is TraitAmmo) // [!code --]
	{ // [!code --]
		num2 = 50f; // [!code --]
	} // [!code --]
	float num3 = num % num2;
	num /= num2;
	Debug.Log("num:" + num + " div:" + num3 + " chance:" + num2 + " check:" + (num2 - num3 + 1f));
```

## Thing

[`@@ -559,8 +559,8 @@ public override string GetName(NameStyle style, int _num = -1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Thing.cs#L559-L566)
```cs:line-numbers=559
		}
		text = idUnknown;
	}
	goto IL_02c9; // [!code --]
	IL_02c9: // [!code --]
	goto IL_02a1; // [!code ++]
	IL_02a1: // [!code ++]
	if (!base.c_idRefCard.IsEmpty() && trait.RefCardName != RefCardName.None)
	{
		string text7 = base.c_altName.IsEmpty(base.refCard.GetName());
```

[`@@ -586,6 +586,10 @@ public override string GetName(NameStyle style, int _num = -1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Thing.cs#L586-L591)
```cs:line-numbers=586
		text = "_of".lang(Lang._currency(base.c_bill, showUnit: true, 0), text);
	}
	trait.SetName(ref text);
	if (base.tier > 0) // [!code ++]
	{ // [!code ++]
		text = Lang.GetList((base.category.id == "fish") ? "quality_fish" : "quality_general")[Mathf.Clamp(base.tier, 0, 3)] + text; // [!code ++]
	} // [!code ++]
	switch (style)
	{
	case NameStyle.Simple:
```

[`@@ -735,11 +739,7 @@ public override string GetName(NameStyle style, int _num = -1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Thing.cs#L735-L745)
```cs:line-numbers=735
		{
			text = base.material.GetName();
		}
		if (base.qualityTier > 0) // [!code --]
		{ // [!code --]
			text = Lang.GetList("quality_general")[Mathf.Clamp(base.qualityTier, 0, 3)] + text; // [!code --]
		} // [!code --]
		goto IL_02c9; // [!code --]
		goto IL_02a1; // [!code ++]
	}

	public override string GetHoverText()
```

[`@@ -1199,15 +1199,23 @@ public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Thing.cs#L1199-L1213)
```cs:line-numbers=1199
		AddText("isBed".lang(traitBed.MaxHolders.ToString() ?? ""), FontColor.Default);
	}
	bool flag3 = base.IsEquipmentOrRangedOrAmmo || base.IsThrownWeapon;
	bool showTraits = !flag3 || base.ShowFoodEnc; // [!code ++]
	bool infoMode = mode == IInspect.NoteMode.Info; // [!code ++]
	List<Element> listTrait = ListValidTraits(isCraft: false, !infoMode); // [!code ++]
	List<Element> list = ListValidTraits(isCraft: false, limit: false); // [!code ++]
	if (list.Count - listTrait.Count <= 1) // [!code ++]
	{ // [!code ++]
		listTrait = list; // [!code ++]
	} // [!code ++]
	if (flag2)
	{
		Element element = elements.GetElement(653); // [!code ++]
		if (element != null) // [!code ++]
		{ // [!code ++]
			AddText("isAlive".lang(element.vBase.ToString() ?? "", (element.vExp / 10).ToString() ?? "", (element.ExpToNext / 10).ToString() ?? ""), FontColor.Great); // [!code ++]
		} // [!code ++]
		if (flag3)
		{
			Element element = elements.GetElement(653); // [!code --]
			if (element != null) // [!code --]
			{ // [!code --]
				AddText("isAlive".lang(element.vBase.ToString() ?? "", (element.vExp / 10).ToString() ?? "", (element.ExpToNext / 10).ToString() ?? ""), FontColor.Great); // [!code --]
			} // [!code --]
			string[] rangedSubCats = new string[2] { "eleConvert", "eleAttack" };
			elements.AddNote(n, delegate(Element e)
			{
```

[`@@ -1215,7 +1223,7 @@ public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Thing.cs#L1215-L1221)
```cs:line-numbers=1215
				{
					return false;
				}
				if (e.IsTrait) // [!code --]
				if (e.IsTrait || (showTraits && listTrait.Contains(e))) // [!code ++]
				{
					return false;
				}
```

[`@@ -1234,25 +1242,10 @@ public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Thing.cs#L1234-L1258)
```cs:line-numbers=1234
			}
		}
	}
	else // [!code --]
	{ // [!code --]
		AddText("isUnidentified".lang(), FontColor.Flavor); // [!code --]
		if (base.c_IDTState == 1) // [!code --]
		{ // [!code --]
			AddText("isUnidentified2".lang(), FontColor.Flavor); // [!code --]
		} // [!code --]
	} // [!code --]
	trait.WriteNote(n, flag2);
	if (flag2 && !flag3) // [!code --]
	if (flag2 && showTraits) // [!code ++]
	{
		bool infoMode = mode == IInspect.NoteMode.Info; // [!code --]
		List<Element> list = ListValidTraits(isCraft: false, !infoMode); // [!code --]
		List<Element> list2 = ListValidTraits(isCraft: false, limit: false); // [!code --]
		if (list2.Count - list.Count <= 1) // [!code --]
		{ // [!code --]
			list = list2; // [!code --]
		} // [!code --]
		elements.AddNote(n, (Element e) => list.Contains(e), null, ElementContainer.NoteMode.BonusTrait, addRaceFeat: false, delegate(Element e, string s) // [!code --]
		elements.AddNote(n, (Element e) => listTrait.Contains(e), null, ElementContainer.NoteMode.BonusTrait, addRaceFeat: false, delegate(Element e, string s) // [!code ++]
		{
			string text12 = s;
			string text13 = e.source.GetText("textExtra");
```

[`@@ -1281,45 +1274,42 @@ public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Thing.cs#L1281-L1325)
```cs:line-numbers=1281
		}, delegate
		{
		});
		if (base.ShowFoodEnc && EClass.pc.HasElement(1650)) // [!code --]
		if (listTrait.Count != list.Count) // [!code ++]
		{
			if (FoodEffect.IsHumanFlesh(this)) // [!code --]
			{ // [!code --]
				AddText("foodHuman".lang(), FontColor.Ether); // [!code --]
			} // [!code --]
			if (FoodEffect.IsUndeadFlesh(this)) // [!code --]
			{ // [!code --]
				AddText("foodUndead".lang(), FontColor.Ether); // [!code --]
			} // [!code --]
			AddText("traitOther".lang((list.Count - listTrait.Count).ToString() ?? ""), FontColor.Default); // [!code ++]
		}
		if (list.Count != list2.Count) // [!code --]
	} // [!code ++]
	if (!flag2) // [!code ++]
	{ // [!code ++]
		AddText("isUnidentified".lang(), FontColor.Flavor); // [!code ++]
		if (base.c_IDTState == 1) // [!code ++]
		{
			AddText("traitOther".lang((list2.Count - list.Count).ToString() ?? ""), FontColor.Default); // [!code --]
			AddText("isUnidentified2".lang(), FontColor.Flavor); // [!code ++]
		}
		if (mode == IInspect.NoteMode.Product && HasCraftBonusTrait()) // [!code --]
	} // [!code ++]
	if (mode == IInspect.NoteMode.Product && HasCraftBonusTrait()) // [!code ++]
	{ // [!code ++]
		n.AddHeader("HeaderAdditionalTrait", "additional_trait"); // [!code ++]
		foreach (Element item in ListCraftBonusTraits()) // [!code ++]
		{
			n.AddHeader("HeaderAdditionalTrait", "additional_trait"); // [!code --]
			foreach (Element item in ListCraftBonusTraits()) // [!code --]
			item.AddEncNote(n, this, ElementContainer.NoteMode.BonusTrait, delegate(Element e, string s) // [!code ++]
			{
				item.AddEncNote(n, this, ElementContainer.NoteMode.BonusTrait, delegate(Element e, string s) // [!code --]
				string text9 = s; // [!code ++]
				string text10 = e.source.GetText("textExtra"); // [!code ++]
				if (!text10.IsEmpty()) // [!code ++]
				{
					string text9 = s; // [!code --]
					string text10 = e.source.GetText("textExtra"); // [!code --]
					if (!text10.IsEmpty()) // [!code --]
					string text11 = ""; // [!code ++]
					int num = e.Value / 10; // [!code ++]
					num = ((e.Value < 0) ? (num - 1) : (num + 1)); // [!code ++]
					text10 = "Lv." + num + text11 + " " + text10; // [!code ++]
					if (infoMode && e.IsFoodTraitMain) // [!code ++]
					{
						string text11 = ""; // [!code --]
						int num = e.Value / 10; // [!code --]
						num = ((e.Value < 0) ? (num - 1) : (num + 1)); // [!code --]
						text10 = "Lv." + num + text11 + " " + text10; // [!code --]
						if (infoMode && e.IsFoodTraitMain) // [!code --]
						{ // [!code --]
							text10 += "traitAdditive".lang(); // [!code --]
						} // [!code --]
						text9 += (" <size=12>" + text10 + "</size>").TagColor(FontColor.Passive); // [!code --]
						text10 += "traitAdditive".lang(); // [!code ++]
					}
					return text9; // [!code --]
				}); // [!code --]
			} // [!code --]
					text9 += (" <size=12>" + text10 + "</size>").TagColor(FontColor.Passive); // [!code ++]
				} // [!code ++]
				return text9; // [!code ++]
			}); // [!code ++]
		}
	}
	if (EClass.debug.showExtra)
```

[`@@ -1564,7 +1554,7 @@ public override SubPassData GetSubPassData()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Thing.cs#L1564-L1570)
```cs:line-numbers=1564

	public override bool CanStackTo(Thing to)
	{
		if (trait.HasCharges || to.isEquipped || base.isModified || to.isModified || to.id != id || to.idMaterial != base.idMaterial || to.refVal != base.refVal || to.blessedState != base.blessedState || to.rarityLv != base.rarityLv || to.qualityTier != base.qualityTier || to.idSkin != base.idSkin || to.isGifted != base.isGifted) // [!code --]
		if (trait.HasCharges || to.isEquipped || base.isModified || to.isModified || to.id != id || to.idMaterial != base.idMaterial || to.refVal != base.refVal || to.blessedState != base.blessedState || to.rarityLv != base.rarityLv || to.tier != base.tier || to.idSkin != base.idSkin || to.isGifted != base.isGifted) // [!code ++]
		{
			return false;
		}
```

## ThingContainer

[`@@ -155,7 +155,7 @@ public void RefreshGrid(UIMagicChest magic, Window.SaveData data)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/ThingContainer.cs#L155-L161)
```cs:line-numbers=155
	Window.SaveData.CategoryType category = data.category;
	bool flag3 = category != Window.SaveData.CategoryType.None;
	string text2 = "";
	bool flag4 = text != null && text.Length >= 2 && (text[0] == '@' || text[1] == ''); // [!code --]
	bool flag4 = text != null && text.Length >= 2 && (text[0] == '@' || text[0] == ''); // [!code ++]
	if (flag4)
	{
		text = text.Substring(1);
```

## Trait

[`@@ -1380,7 +1380,7 @@ bool FindFuel(bool refuel)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/Trait.cs#L1380-L1386)
```cs:line-numbers=1380
		List<Thing> list = EClass._zone.TryListThingsInSpot<TraitSpotFuel>((Thing t) => IsFuel(t));
		EClass.pc.things.Foreach(delegate(Thing t)
		{
			if (IsFuel(t) && t.qualityTier == 0 && (excludes == null || !excludes.Contains(t))) // [!code --]
			if (IsFuel(t) && t.tier == 0 && (excludes == null || !excludes.Contains(t))) // [!code ++]
			{
				list.Add(t);
			}
```

## TraitFoodFishSlice

[`@@ -1,4 +1,4 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/TraitFoodFishSlice.cs#L1-L4)
```cs:line-numbers=1
public class TraitFoodFishSlice : TraitFoodFish
{
	public override int CraftNum => 4; // [!code --]
	public override int CraftNum => 3; // [!code ++]
}
```

## WidgetSearch

[`@@ -100,7 +100,7 @@ public override void Search(string s)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/4ee79a6113d957ed43507e31208dc70a44ee4133/Elin/WidgetSearch.cs#L100-L106)
```cs:line-numbers=100
		return;
	}
	lastSearch = s;
	bool encSearch = s.Length >= 2 && (s[0] == '@' || s[1] == ''); // [!code --]
	bool encSearch = s.Length >= 2 && (s[0] == '@' || s[0] == ''); // [!code ++]
	if (encSearch)
	{
		s = s.Substring(1);
```

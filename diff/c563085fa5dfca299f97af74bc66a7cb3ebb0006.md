---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 5 files modified.
version: EA 23.253 Nightly
changes: ActEffect/Card/LayerMod/TraitASMR/TraitSpellbookRandom
---

# EA 23.253 Nightly

December 26, 2025

5 files modified.

## Important Changes

**None.**
## ActEffect

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L1580-L1594)
```cs:line-numbers=1580
		break;
	case EffectId.StripBlessing:
	{
		List<Condition> list10 = new List<Condition>(); // [!code --]
		List<Condition> list9 = new List<Condition>(); // [!code ++]
		foreach (Condition condition4 in TC.conditions)
		{
			if (GetBlessingDifficulty(condition4) > 0 && EClass.rnd(GetBlessingDifficulty(condition4)) == 0)
			{
				list10.Add(condition4); // [!code --]
				list9.Add(condition4); // [!code ++]
			}
		}
		if (list10.Count == 0) // [!code --]
		if (list9.Count == 0) // [!code ++]
		{
			CC.SayNothingHappans();
			break;
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L1596-L1604)
```cs:line-numbers=1596
		TC.pos.PlayEffect("holyveil");
		TC.pos.PlaySound("holyveil");
		TC.Say("unpolluted", TC);
		list10.Shuffle(); // [!code --]
		list9.Shuffle(); // [!code ++]
		{
			foreach (Condition item4 in list10) // [!code --]
			foreach (Condition item4 in list9) // [!code ++]
			{
				item4.Kill();
				if (CC.IsHostile(TC))
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L1640-L1653)
```cs:line-numbers=1640
		});
		TC.Say("abShutterHex", TC);
		Point center = CC.pos.Copy();
		List<Chara> list9 = TC.pos.ListCharasInRadius(TC, 4, (Chara c) => c == TC || c.IsHostile(CC)); // [!code --]
		List<Chara> list10 = TC.pos.ListCharasInRadius(TC, 4, (Chara c) => c == TC || c.IsHostile(CC)); // [!code ++]
		for (int m = 0; m < num12; m++)
		{
			TweenUtil.Delay((float)m * 0.1f, delegate
			{
				center.PlaySound("shutterhex");
			});
			foreach (Chara item5 in list9) // [!code --]
			foreach (Chara item5 in list10) // [!code ++]
			{
				if (item5.ExistsOnMap)
				{
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L2053-L2068)
```cs:line-numbers=2053
		tc.bio.SetGender(gender2);
		tc.Say("transGender", tc, Gender.Name(tc.bio.gender));
		tc.Talk("tail");
		int age2 = tc.bio.GetAge(tc.Chara); // [!code --]
		if (blessed && age2 > 1) // [!code --]
		int age = tc.bio.GetAge(tc.Chara); // [!code ++]
		if (blessed && age > 1) // [!code ++]
		{
			tc.Say("ageDown", tc);
			tc.bio.SetAge(tc.Chara, age2 - 1); // [!code --]
			tc.bio.SetAge(tc.Chara, age - 1); // [!code ++]
		}
		else if (flag)
		{
			tc.Say("ageUp", tc);
			tc.bio.SetAge(tc.Chara, age2 + 1); // [!code --]
			tc.bio.SetAge(tc.Chara, age + 1); // [!code ++]
		}
		break;
	}
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L2090-L2104)
```cs:line-numbers=2090
	{
		tc.PlaySound("mutation");
		tc.PlayEffect("mutation");
		int age = tc.bio.GetAge(tc.Chara); // [!code --]
		if (!flag && age <= 0) // [!code --]
		int age3 = tc.bio.GetAge(tc.Chara); // [!code ++]
		if (!flag && age3 <= 0) // [!code ++]
		{
			tc.SayNothingHappans();
			break;
		}
		age = Mathf.Max(0, age * 100 / (flag ? 75 : (blessed ? 400 : 200))) + (flag ? 1 : 0); // [!code --]
		age3 = Mathf.Max(0, age3 * 100 / (flag ? 75 : (blessed ? 400 : 200))) + (flag ? 1 : 0); // [!code ++]
		tc.Say(flag ? "ageUp" : "ageDown", tc);
		tc.bio.SetAge(tc.Chara, age); // [!code --]
		tc.bio.SetAge(tc.Chara, age3); // [!code ++]
		break;
	}
	case EffectId.EternalYouth:
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L2110-L2116)
```cs:line-numbers=2110
			tc.SayNothingHappans();
			break;
		}
		int age3 = tc.bio.GetAge(tc.Chara); // [!code --]
		int age2 = tc.bio.GetAge(tc.Chara); // [!code ++]
		if (flag)
		{
			if (tc.c_lockedAge != 0)
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L2118-L2124)
```cs:line-numbers=2118
				tc.Say("eternalYouth2", tc);
				tc.c_lockedAge = 0;
				tc.elements.Remove(1243);
				tc.bio.SetAge(tc.Chara, age3); // [!code --]
				tc.bio.SetAge(tc.Chara, age2); // [!code ++]
			}
			Redirect(EffectId.Youth, BlessedState.Cursed, default(ActRef));
		}
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L2130-L2136)
```cs:line-numbers=2130
		{
			tc.PlaySound("dropRewardXmas");
			tc.Say("eternalYouth1", tc);
			tc.c_lockedAge = age3 + 1; // [!code --]
			tc.c_lockedAge = age2 + 1; // [!code ++]
			tc.elements.SetBase(1243, 1);
			if (blessed)
			{
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L2258-L2267)
```cs:line-numbers=2258
		{
			EClass.game.religions.Healing.Talk("ability");
		}
		if (actRef.act != null) // [!code --]
		{ // [!code --]
			Debug.Log(actRef.act.id); // [!code --]
		} // [!code --]
		int num10 = Dice.Create((actRef.act != null && EClass.sources.calc.map.ContainsKey(actRef.act.ID)) ? actRef.act.ID : "SpHealLight", power, CC, (actRef.refThing != null) ? null : actRef.act).Roll();
		if (actRef.refThing != null)
		{
```

[`int GetBlessingDifficulty(Condition c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/ActEffect.cs#L2648-L2653)
```cs:line-numbers=2648
		{
			return 0;
		}
		if (c is ConTransmuteBat && TC.HasCooldown(8793)) // [!code ++]
		{ // [!code ++]
			return 0; // [!code ++]
		} // [!code ++]
		if (!CC.IsHostile(TC))
		{
			return 1;
```

## Card

[`public void SpawnLoot(Card origin)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/Card.cs#L5407-L5412)
```cs:line-numbers=5407
			continue;
		}
		item4.isHidden = false;
		item4.isNPCProperty = false; // [!code ++]
		item4.SetInt(116);
		EClass._zone.AddCard(item4, nearestPoint);
		if (!item4.IsEquipment || item4.rarity < Rarity.Superior || item4.IsCursed)
```

## LayerMod

[`public class LayerMod : ELayer`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/LayerMod.cs#L14-L19)
```cs:line-numbers=14

	public ModManager manager => ELayer.core.mods;

	private void Move(BaseModPackage p, ItemMod b, int a) // [!code ++]
	{ // [!code ++]
		List<BaseModPackage> packages = ELayer.core.mods.packages; // [!code ++]
		int num = packages.IndexOf(p); // [!code ++]
		if (num + a < 0 || num + a >= packages.Count || packages[num + a].builtin) // [!code ++]
		{ // [!code ++]
			SE.BeepSmall(); // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		packages.Move(p, a); // [!code ++]
		SE.Tab(); // [!code ++]
		textRestart.SetActive(enable: true); // [!code ++]
		ELayer.core.mods.SaveLoadOrder(); // [!code ++]
		list.List(); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public override void OnInit()
	{
		textRestart.SetActive(enable: false);
```

[`public override void OnInit()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/LayerMod.cs#L24-L29)
```cs:line-numbers=24
		textRestart.SetActive(enable: true);
	});
	Instance = this;
	list.dragScrollView = GetComponentInChildren<UIScrollView>(); // [!code ++]
	list.dragViewport = windows[0].Rect(); // [!code ++]
	list.dragEdgeSize = 34f; // [!code ++]
	UIList uIList = list;
	UIList uIList2 = list2;
	UIList.Callback<BaseModPackage, ItemMod> obj = new UIList.Callback<BaseModPackage, ItemMod>
```

[`public override void OnInit()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/LayerMod.cs#L94-L103)
```cs:line-numbers=94
				});
				uIContextMenu.Show();
			});
			b.buttonLock.onClick.AddListener(delegate // [!code --]
			{ // [!code --]
				Refresh(); // [!code --]
			}); // [!code --]
			b.buttonLock.onClick.AddListener(Refresh); // [!code ++]
		},
		onList = delegate
		{
```

[`public override void OnInit()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/LayerMod.cs#L113-L142)
```cs:line-numbers=113
					}
				}
			},
			onRefresh = Refresh // [!code --]
			onRefresh = Refresh, // [!code ++]
			onDragReorder = delegate(BaseModPackage p, int a) // [!code ++]
			{ // [!code ++]
				BaseCore.Instance.FreezeScreen(0.1f); // [!code ++]
				manager.packages.Move(p, a); // [!code ++]
				SE.Tab(); // [!code ++]
				textRestart.SetActive(enable: true); // [!code ++]
				ELayer.core.mods.SaveLoadOrder(); // [!code ++]
				list.List(); // [!code ++]
			}, // [!code ++]
			canDragReorder = (BaseModPackage p) => !p.builtin // [!code ++]
		};
		UIList.ICallback callbacks = obj;
		uIList2.callbacks = obj;
		uIList.callbacks = callbacks;
		list.List();
		list2.List();
		void Move(BaseModPackage p, ItemMod b, int a) // [!code --]
		{ // [!code --]
			List<BaseModPackage> packages = ELayer.core.mods.packages; // [!code --]
			int num = packages.IndexOf(p); // [!code --]
			if (num + a < 0 || num + a >= packages.Count || packages[num + a].builtin) // [!code --]
			{ // [!code --]
				SE.BeepSmall(); // [!code --]
			} // [!code --]
			else // [!code --]
			{ // [!code --]
				packages.Move(p, a); // [!code --]
				SE.Tab(); // [!code --]
				textRestart.SetActive(enable: true); // [!code --]
				ELayer.core.mods.SaveLoadOrder(); // [!code --]
				list.List(); // [!code --]
			} // [!code --]
		} // [!code --]
	}

	public void Refresh()
```

## TraitASMR

[`public override void Update()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/TraitASMR.cs#L32-L38)
```cs:line-numbers=32
			{
				dialog = Lang.GetDialog("asmr", "eyth");
			}
			owner.TalkRaw(dialog.RandomItem()); // [!code --]
			string text = dialog.RandomItem(); // [!code ++]
			owner.TalkRaw((text.StartsWith("@") ? "" : "@2") + text); // [!code ++]
		}
	}
}
```

## TraitSpellbookRandom

[`public class TraitSpellbookRandom : TraitSpellbook`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/c563085fa5dfca299f97af74bc66a7cb3ebb0006/Elin/TraitSpellbookRandom.cs#L2-L8)
```cs:line-numbers=2
{
	public override Type BookType => Type.RandomSpell;

	public override SourceElement.Row source => EClass.sources.elements.map[owner.refVal]; // [!code --]
	public override SourceElement.Row source => EClass.sources.elements.map.TryGetValue(owner.refVal, 0); // [!code ++]

	public override string GetName()
	{
```

---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 15 files modified. 1 new file created.
version: EA 23.236 Nightly Patch 1
changes: AI_Eat/AI_Fuck/ActThrow/CardRenderer/Chara/ConTransmute/ConTransmuteBat/Condition/CraftUtil/FoodEffect/HotItemNoItem/Player/RecipeSource/Thing/ThrowType/+TraitDice
---

# EA 23.236 Nightly Patch 1

November 18, 2025

15 files modified. 1 new file created.

## Important Changes

**None.**
## AI_Eat

[`public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/AI_Eat.cs#L126-L144)
```cs:line-numbers=126
			{
				owner.Say("eat_end", owner, target.GetName(NameStyle.Full, 1));
				owner.ShowEmo(Emo.happy);
				if (target.trait is TraitFoodChuryu && !owner.IsCat) // [!code --]
				{ // [!code --]
					foreach (Chara item in owner.pos.ListCharasInRadius(owner, 5, (Chara c) => c.IsCat)) // [!code --]
					{ // [!code --]
						item.Say("angry", item); // [!code --]
						item.ShowEmo(Emo.angry); // [!code --]
						item.PlaySound("Animal/Cat/cat_angry"); // [!code --]
						if (owner.IsPC) // [!code --]
						{ // [!code --]
							EClass.player.ModKarma(-3); // [!code --]
						} // [!code --]
					} // [!code --]
				} // [!code --]
				FoodEffect.Proc(owner, target.Thing);
			}
		}
```

## AI_Fuck

[`public void Finish()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/AI_Fuck.cs#L356-L389)
```cs:line-numbers=356
		{
			EClass.player.stats.kimo++;
		}
		if (variation != Variation.NTR) // [!code --]
		{ // [!code --]
			break; // [!code --]
		} // [!code --]
		Thing thing = chara2.things.Find<TraitDreamBug>(); // [!code --]
		if (thing != null) // [!code --]
		if (variation == Variation.NTR) // [!code ++]
		{
			thing.ModNum(-1); // [!code --]
			if (chara.IsPC) // [!code --]
			Thing thing = chara2.things.Find<TraitDreamBug>(); // [!code ++]
			if (thing != null) // [!code ++]
			{
				Msg.Say("dream_spell", EClass.sources.elements.map[9156].GetName().ToLowerInvariant()); // [!code --]
				EClass.pc.GainAbility(9156, EClass.rnd(2) + 1); // [!code --]
				thing.ModNum(-1); // [!code ++]
				if (chara.IsPC) // [!code ++]
				{ // [!code ++]
					Msg.Say("dream_spell", EClass.sources.elements.map[9156].GetName().ToLowerInvariant()); // [!code ++]
					EClass.pc.GainAbility(9156, EClass.rnd(2) + 1); // [!code ++]
				} // [!code ++]
			}
		} // [!code --]
		if (!chara.HasElement(1239) || chara2.HasElement(1216)) // [!code --]
		{ // [!code --]
			break; // [!code --]
		} // [!code --]
		if (chara2.HasElement(758)) // [!code --]
		{ // [!code --]
			if (chara.ExistsOnMap) // [!code --]
			if (chara.HasElement(1239) && !chara2.HasElement(1216)) // [!code ++]
			{
				chara.stamina.Mod(-1000000); // [!code --]
				if (chara2.HasElement(758)) // [!code ++]
				{ // [!code ++]
					if (chara.ExistsOnMap) // [!code ++]
					{ // [!code ++]
						chara.stamina.Mod(-1000000); // [!code ++]
					} // [!code ++]
				} // [!code ++]
				else if (chara2.ExistsOnMap) // [!code ++]
				{ // [!code ++]
					chara2.stamina.Mod((!chara2.IsPCFaction) ? (-10000) : (chara2.IsPC ? (-25) : (-50))); // [!code ++]
				} // [!code ++]
			}
		}
		else if (chara2.ExistsOnMap) // [!code --]
		if (variation == Variation.Bloodsuck && chara2.HasElement(758) && chara.ExistsOnMap) // [!code ++]
		{
			chara2.stamina.Mod((!chara2.IsPCFaction) ? (-10000) : (chara2.IsPC ? (-25) : (-50))); // [!code --]
			chara.stamina.Mod(-1000000); // [!code ++]
		}
		break;
	}
```

## ActThrow

[`public static EffectIRenderer Throw(Card c, Point p, Card target, Thing t, Throw`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/ActThrow.cs#L183-L188)
```cs:line-numbers=183
		t.Die(null, null, AttackSource.Throw);
		c.ModExp(108, 50);
		break;
	case ThrowType.Dice: // [!code ++]
		t.SetDir(EClass.rnd(6)); // [!code ++]
		break; // [!code ++]
	case ThrowType.Snow:
		flag = true;
		flag2 = false;
```

## CardRenderer

[`public virtual void Refresh()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/CardRenderer.cs#L739-L744)
```cs:line-numbers=739

	public SourcePref GetPref()
	{
		if (replacer != null) // [!code ++]
		{ // [!code ++]
			return replacer.pref; // [!code ++]
		} // [!code ++]
		if ((owner.IsPCC && replacer == null) || (owner.HasHost && owner.Chara.host.ride == owner))
		{
			return EClass.core.refs.prefs.pcc;
```

## Chara

[`public class Chara : Card, IPathfindWalker`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Chara.cs#L103-L110)
```cs:line-numbers=103

	public ConSuspend conSuspend;

	public ConTransmute conTrans; // [!code --]
 // [!code --]
	public Emo2 emoIcon;

	public int happiness;
```

[`public override SourcePref Pref`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Chara.cs#L789-L798)
```cs:line-numbers=789
{
	get
	{
		if (renderer.replacer != null) // [!code --]
		{ // [!code --]
			return renderer.replacer.pref; // [!code --]
		} // [!code --]
		if (spriteReplacer != null)
		{
			return spriteReplacer.data?.pref ?? EClass.core.refs.prefs.replacer1;
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Chara.cs#L5970-L5975)
```cs:line-numbers=5970
		return true;
	}
	bool flag2 = true;
	if (a.source.cooldown > 0 && (!IsPC || !a.source.tag.Contains("CD_npc"))) // [!code ++]
	{ // [!code ++]
		AddCooldown(a.id, a.source.cooldown); // [!code ++]
	} // [!code ++]
	if (HasTalk("phrase_" + a.source.alias))
	{
		EClass.player.forceTalk = true;
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Chara.cs#L6019-L6028)
```cs:line-numbers=6019
		}
	}
	ActEffect.RapidCount = 0;
	if (a.source.cooldown > 0 && (!IsPC || !a.source.tag.Contains("CD_npc"))) // [!code --]
	{ // [!code --]
		AddCooldown(a.id, a.source.cooldown); // [!code --]
	} // [!code --]
	if (flag2 && !a.source.tag.Contains("keepInvisi") && EClass.rnd(2) == 0)
	{
		RemoveCondition<ConInvisibility>();
```

[`public void AddCooldown(int idEle, int turns = 0)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Chara.cs#L8564-L8569)
```cs:line-numbers=8564
		}
	}

	public void SetCooldown(int idEle, int turns = 0) // [!code ++]
	{ // [!code ++]
		if (_cooldowns == null) // [!code ++]
		{ // [!code ++]
			_cooldowns = new List<int>(); // [!code ++]
		} // [!code ++]
		bool flag = false; // [!code ++]
		for (int i = 0; i < _cooldowns.Count; i++) // [!code ++]
		{ // [!code ++]
			if (_cooldowns[i] / 1000 == idEle) // [!code ++]
			{ // [!code ++]
				if (turns == 0) // [!code ++]
				{ // [!code ++]
					_cooldowns.RemoveAt(i); // [!code ++]
				} // [!code ++]
				else // [!code ++]
				{ // [!code ++]
					_cooldowns[i] = idEle * 1000 + turns; // [!code ++]
				} // [!code ++]
				flag = true; // [!code ++]
				break; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		if (!flag && turns > 0) // [!code ++]
		{ // [!code ++]
			AddCooldown(idEle, turns); // [!code ++]
		} // [!code ++]
		if (_cooldowns.Count == 0) // [!code ++]
		{ // [!code ++]
			_cooldowns = null; // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	public bool HasCooldown(int idEle)
	{
		return GetCooldown(idEle) != 0;
```

## ConTransmute

[`public override void Tick()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/ConTransmute.cs#L14-L20)
```cs:line-numbers=14

	public override void OnStart()
	{
		owner.conTrans = this; // [!code --]
		owner._CreateRenderer();
		if (owner.IsPCParty)
		{
```

[`public override void OnStart()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/ConTransmute.cs#L24-L30)
```cs:line-numbers=24

	public override void OnRemoved()
	{
		owner.conTrans = null; // [!code --]
		owner._CreateRenderer();
		if (owner.IsPCParty)
		{
```

## ConTransmuteBat

[`public class ConTransmuteBat : ConTransmute`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/ConTransmuteBat.cs#L2-L13)
```cs:line-numbers=2
{
	public override bool HasDuration => false;

	public override bool CanManualRemove => !owner.HasCooldown(8793); // [!code ++]
 // [!code ++]
	public override RendererReplacer GetRendererReplacer()
	{
		return RendererReplacer.CreateFrom("bat"); // [!code --]
		return RendererReplacer.CreateFrom("bat_trans"); // [!code ++]
	}

	public override void Tick()
	{
	}
 // [!code ++]
	public override void OnStart() // [!code ++]
	{ // [!code ++]
		base.OnStart(); // [!code ++]
		owner.PlaySound("bat"); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public override void OnRemoved() // [!code ++]
	{ // [!code ++]
		base.OnRemoved(); // [!code ++]
		owner.HealHP(owner.MaxHP / 2, HealSource.Item); // [!code ++]
		owner.SetCooldown(8793); // [!code ++]
	} // [!code ++]
}
```

## Condition

[`public void Kill(bool silent = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Condition.cs#L97-L107)
```cs:line-numbers=97
		owner.Say(base.source.GetText("textEnd"), owner, RefString1);
	}
	PlayEndEffect();
	OnRemoved(); // [!code --]
	if (elements != null)
	{
		elements.SetParent();
	}
	OnRemoved(); // [!code ++]
	owner.SetDirtySpeed();
	if (ShouldRefresh)
	{
```

## CraftUtil

[`public static void MakeDish(Thing food, int lv, Chara crafter = null, int seed =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/CraftUtil.cs#L63-L69)
```cs:line-numbers=63
	RecipeManager.BuildList();
	List<Thing> list = new List<Thing>();
	RecipeSource recipeSource = RecipeManager.Get(food.id);
	if (recipeSource == null) // [!code --]
	if (recipeSource == null || !recipeSource.IsCraftable()) // [!code ++]
	{
		return;
	}
```

[`public static Thing MakeBloodMeal(Chara sucker, Chara feeder)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/CraftUtil.cs#L132-L139)
```cs:line-numbers=132
		{
			thing.elements.Remove(701);
		}
		thing.elements.ModBase(710, 30); // [!code --]
		thing.elements.SetTo(2, Mathf.Min(EClass.curve(feeder.LV, 30, 10, 60), 200)); // [!code --]
		thing.elements.ModBase(710, 20 + (int)Mathf.Min(Mathf.Sqrt(sucker.Evalue(6607) + sucker.LER), 50f)); // [!code ++]
		thing.elements.SetTo(2, Mathf.Min(EClass.curve(feeder.LV, 30, 10, 65), 200)); // [!code ++]
		return thing;
	}

```

## FoodEffect

[`public static bool IsLeftoverable(Thing food)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L10-L22)
```cs:line-numbers=10

	public static void Proc(Chara c, Thing food, bool consume = true)
	{
		Chara c2 = c; // [!code ++]
		if (food.id == "bloodsample")
		{
			food.ModNum(-1);
			return;
		}
		food.CheckJustCooked();
		bool flag = EClass._zone.IsPCFaction && c.IsInSpot<TraitSpotDining>(); // [!code --]
		bool flag = EClass._zone.IsPCFaction && c2.IsInSpot<TraitSpotDining>(); // [!code ++]
		int num = (food.isCrafted ? ((EClass.pc.Evalue(1650) >= 3) ? 5 : 0) : 0);
		float num2 = (float)(100 + (food.HasElement(757) ? 10 : 0) + (flag ? 10 : 0) + num + Mathf.Min(food.QualityLv * 10, 100)) / 200f;
		if (num2 < 0.1f)
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L29-L52)
```cs:line-numbers=29
	string idTaste = "";
	bool flag2 = food.HasElement(708);
	bool flag3 = food.HasElement(709);
	bool flag4 = c.HasElement(1205); // [!code --]
	bool flag4 = c2.HasElement(1205); // [!code ++]
	bool flag5 = food.IsDecayed || flag3;
	bool flag6 = IsLeftoverable(food);
	c.AddFoodHistory(food); // [!code --]
	if (c.IsPCFaction && !c.IsPC) // [!code --]
	c2.AddFoodHistory(food); // [!code ++]
	if (c2.IsPCFaction && !c2.IsPC) // [!code ++]
	{
		int num6 = c.CountNumEaten(food); // [!code --]
		bool flag7 = c.GetFavFood().id == food.id; // [!code --]
		int num6 = c2.CountNumEaten(food); // [!code ++]
		bool flag7 = c2.GetFavFood().id == food.id; // [!code ++]
		if (num6 < 2 || flag7)
		{
			if (num6 == 1 || flag7 || EClass.rnd(4) == 0)
			{
				c.Talk("foodNice"); // [!code --]
				c2.Talk("foodNice"); // [!code ++]
			}
		}
		else if (num6 > 3 && EClass.rnd(num6) >= 3)
		{
			c.Talk("foodBored"); // [!code --]
			c2.Talk("foodBored"); // [!code ++]
		}
	}
	if (food.IsBlessed)
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L76-L82)
```cs:line-numbers=76
		num5 = 0f;
		num2 *= 0.5f;
	}
	if (c.HasElement(1250)) // [!code --]
	if (c2.HasElement(1250)) // [!code ++]
	{
		if (food.HasElement(710))
		{
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L87-L109)
```cs:line-numbers=87
			num3 /= 10;
		}
	}
	if (c.HasElement(1200)) // [!code --]
	if (c2.HasElement(1200)) // [!code ++]
	{
		num2 *= 1f + (float)c.Evalue(1200) * 0.25f; // [!code --]
		num2 *= 1f + (float)c2.Evalue(1200) * 0.25f; // [!code ++]
	}
	if (!c.IsPC) // [!code --]
	if (!c2.IsPC) // [!code ++]
	{
		num2 *= 3f;
	}
	if (flag5 && !c.HasElement(480)) // [!code --]
	if (flag5 && !c2.HasElement(480)) // [!code ++]
	{
		if (c.IsPC) // [!code --]
		if (c2.IsPC) // [!code ++]
		{
			if (flag3)
			{
				c.Say("food_undead"); // [!code --]
				c2.Say("food_undead"); // [!code ++]
			}
			c.Say("food_rot"); // [!code --]
			c2.Say("food_rot"); // [!code ++]
		}
		num5 = 0f;
		num3 /= 2;
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L113-L166)
```cs:line-numbers=113
		switch (food.source._origin)
		{
		case "meat":
			if (c.IsPC) // [!code --]
			if (c2.IsPC) // [!code ++]
			{
				c.Say("food_raw_meat"); // [!code --]
				c2.Say("food_raw_meat"); // [!code ++]
			}
			num2 *= 0.7f;
			num5 = 0.5f;
			break;
		case "fish":
			if (c.IsHuman) // [!code --]
			if (c2.IsHuman) // [!code ++]
			{
				if (c.IsPC) // [!code --]
				if (c2.IsPC) // [!code ++]
				{
					c.Say("food_raw_fish"); // [!code --]
					c2.Say("food_raw_fish"); // [!code ++]
				}
				num2 *= 0.9f;
				num5 = 0.5f;
			}
			break;
		case "dough":
			if (c.IsPC) // [!code --]
			if (c2.IsPC) // [!code ++]
			{
				c.Say("food_raw_powder"); // [!code --]
				c2.Say("food_raw_powder"); // [!code ++]
			}
			num2 *= 0.9f;
			num5 = 0.5f;
			break;
		}
	}
	float num7 = Mathf.Min(c.hunger.value, num3); // [!code --]
	if (c.hunger.GetPhase() >= 3) // [!code --]
	float num7 = Mathf.Min(c2.hunger.value, num3); // [!code ++]
	if (c2.hunger.GetPhase() >= 3) // [!code ++]
	{
		num7 *= 1.1f;
	}
	if (flag5 && !c.HasElement(480)) // [!code --]
	if (flag5 && !c2.HasElement(480)) // [!code ++]
	{
		c.ModExp(70, -300); // [!code --]
		c.ModExp(71, -300); // [!code --]
		c.ModExp(72, -200); // [!code --]
		c.ModExp(73, -200); // [!code --]
		c.ModExp(74, -200); // [!code --]
		c.ModExp(75, 500); // [!code --]
		c.ModExp(76, -200); // [!code --]
		c.ModExp(77, -300); // [!code --]
		c2.ModExp(70, -300); // [!code ++]
		c2.ModExp(71, -300); // [!code ++]
		c2.ModExp(72, -200); // [!code ++]
		c2.ModExp(73, -200); // [!code ++]
		c2.ModExp(74, -200); // [!code ++]
		c2.ModExp(75, 500); // [!code ++]
		c2.ModExp(76, -200); // [!code ++]
		c2.ModExp(77, -300); // [!code ++]
	}
	else
	{
		num2 = num2 * num7 / 10f;
		if (c.HasCondition<ConAnorexia>()) // [!code --]
		if (c2.HasCondition<ConAnorexia>()) // [!code ++]
		{
			num2 = 0.01f;
		}
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L174-L208)
```cs:line-numbers=174
			string[] foodEffect = value.source.foodEffect;
			int id = value.id;
			float num8 = num2 * (float)value.Value;
			if (value.source.category == "food" && c.IsPC) // [!code --]
			if (value.source.category == "food" && c2.IsPC) // [!code ++]
			{
				bool flag8 = num8 >= 0f;
				string text = value.source.GetText(flag8 ? "textInc" : "textDec", returnNull: true);
				if (text != null)
				{
					Msg.SetColor(flag8 ? "positive" : "negative");
					c.Say(text); // [!code --]
					c2.Say(text); // [!code ++]
				}
			}
			switch (foodEffect[0])
			{
			case "god":
			{
				int int2 = c.GetInt(117); // [!code --]
				int int2 = c2.GetInt(117); // [!code ++]
				if (int2 < 10)
				{
					foreach (Element value2 in c.elements.dict.Values) // [!code --]
					foreach (Element value2 in c2.elements.dict.Values) // [!code ++]
					{
						if (value2.IsMainAttribute)
						{
							c.elements.ModPotential(value2.id, 2); // [!code --]
							c2.elements.ModPotential(value2.id, 2); // [!code ++]
						}
					}
				}
				c.Say("little_eat", c); // [!code --]
				c.PlaySound("ding_potential"); // [!code --]
				c.elements.ModExp(306, -1000f); // [!code --]
				c.SetInt(117, int2 + 1); // [!code --]
				c2.Say("little_eat", c2); // [!code ++]
				c2.PlaySound("ding_potential"); // [!code ++]
				c2.elements.ModExp(306, -1000f); // [!code ++]
				c2.SetInt(117, int2 + 1); // [!code ++]
				flag6 = false;
				break;
			}
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L210-L278)
```cs:line-numbers=210
			{
				id = ((foodEffect.Length > 1) ? EClass.sources.elements.alias[foodEffect[1]].id : value.id);
				int a = (int)(num8 * (float)((foodEffect.Length > 2) ? foodEffect[2].ToInt() : 4)) * 2 / 3;
				c.ModExp(id, a); // [!code --]
				c2.ModExp(id, a); // [!code ++]
				break;
			}
			case "pot":
			{
				id = ((foodEffect.Length > 1) ? EClass.sources.elements.alias[foodEffect[1]].id : value.id);
				int vTempPotential = c.elements.GetElement(id).vTempPotential; // [!code --]
				int vTempPotential = c2.elements.GetElement(id).vTempPotential; // [!code ++]
				int num9 = EClass.rndHalf((int)(num8 / 5f) + 1);
				num9 = num9 * 100 / Mathf.Max(100, vTempPotential * 2 / 3);
				c.elements.ModTempPotential(id, num9, 8); // [!code --]
				c2.elements.ModTempPotential(id, num9, 8); // [!code ++]
				break;
			}
			case "karma":
				if (c.IsPCParty) // [!code --]
				if (c2.IsPCParty) // [!code ++]
				{
					EClass.player.ModKarma(-5);
				}
				break;
			case "poison":
				ActEffect.Poison(c, EClass.pc, value.Value * 10); // [!code --]
				if (!c.isDead) // [!code --]
				ActEffect.Poison(c2, EClass.pc, value.Value * 10); // [!code ++]
				if (!c2.isDead) // [!code ++]
				{
					break;
				}
				goto IL_0f76;
			case "love":
				ActEffect.LoveMiracle(c, EClass.pc, value.Value * 10); // [!code --]
				ActEffect.LoveMiracle(c2, EClass.pc, value.Value * 10); // [!code ++]
				break;
			case "loseWeight":
				c.ModWeight(-EClass.rndHalf(value.Value), ignoreLimit: true); // [!code --]
				c2.ModWeight(-EClass.rndHalf(value.Value), ignoreLimit: true); // [!code ++]
				break;
			case "gainWeight":
				c.ModWeight(EClass.rndHalf(value.Value), ignoreLimit: true); // [!code --]
				c2.ModWeight(EClass.rndHalf(value.Value), ignoreLimit: true); // [!code ++]
				break;
			case "little":
			{
				int @int = c.GetInt(112); // [!code --]
				int @int = c2.GetInt(112); // [!code ++]
				if (@int < 30)
				{
					c.Say("little_eat", c); // [!code --]
					c.PlaySound("ding_potential"); // [!code --]
					c2.Say("little_eat", c2); // [!code ++]
					c2.PlaySound("ding_potential"); // [!code ++]
					int v = Mathf.Max(5 - @int / 2, 1);
					Debug.Log("sister eaten:" + @int + "/" + v);
					foreach (Element value3 in c.elements.dict.Values) // [!code --]
					foreach (Element value3 in c2.elements.dict.Values) // [!code ++]
					{
						if (value3.IsMainAttribute)
						{
							c.elements.ModPotential(value3.id, v); // [!code --]
							c2.elements.ModPotential(value3.id, v); // [!code ++]
						}
					}
				}
				if (c.race.id == "mutant" && c.elements.Base(1230) < 10) // [!code --]
				if (c2.race.id == "mutant" && c2.elements.Base(1230) < 10) // [!code ++]
				{
					c.Say("little_adam", c); // [!code --]
					c.SetFeat(1230, c.elements.Base(1230) + 1); // [!code --]
					c2.Say("little_adam", c2); // [!code ++]
					c2.SetFeat(1230, c2.elements.Base(1230) + 1); // [!code ++]
				}
				c.SetInt(112, @int + 1); // [!code --]
				c2.SetInt(112, @int + 1); // [!code ++]
				break;
			}
			}
		}
	}
	ProcTrait(c, food); // [!code --]
	ProcTrait(c2, food); // [!code ++]
	num4 += (float)food.Evalue(70);
	num4 += (float)(food.Evalue(72) / 2);
	num4 += (float)(food.Evalue(73) / 2);
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L305-L367)
```cs:line-numbers=305
		{
			idTaste = "food_bad";
		}
		if (c.IsPC) // [!code --]
		if (c2.IsPC) // [!code ++]
		{
			c.Say(idTaste); // [!code --]
			c2.Say(idTaste); // [!code ++]
			if (flag2)
			{
				c.Say(flag4 ? "food_human_pos" : "food_human_neg"); // [!code --]
				c2.Say(flag4 ? "food_human_pos" : "food_human_neg"); // [!code ++]
			}
			else if (flag4)
			{
				c.Say("food_human_whine"); // [!code --]
				c2.Say("food_human_whine"); // [!code ++]
			}
		}
	}
	if (LangGame.Has(idTaste + "2"))
	{
		c.Say(idTaste + "2", c, food); // [!code --]
		c2.Say(idTaste + "2", c2, food); // [!code ++]
	}
	if (!c.IsPCParty) // [!code --]
	if (!c2.IsPCParty) // [!code ++]
	{
		num3 *= 2;
	}
	num3 = num3 * (100 + c.Evalue(1235) * 10) / (100 + c.Evalue(1234) * 10 + c.Evalue(1236) * 15); // [!code --]
	c.hunger.Mod(-num3); // [!code --]
	num3 = num3 * (100 + c2.Evalue(1235) * 10) / (100 + c2.Evalue(1234) * 10 + c2.Evalue(1236) * 15); // [!code ++]
	c2.hunger.Mod(-num3); // [!code ++]
	if (flag2)
	{
		if (!flag4)
		{
			if (c.IsHuman) // [!code --]
			if (c2.IsHuman) // [!code ++]
			{
				c.AddCondition<ConInsane>(200); // [!code --]
				c.SAN.Mod(15); // [!code --]
				c2.AddCondition<ConInsane>(200); // [!code ++]
				c2.SAN.Mod(15); // [!code ++]
			}
			if (EClass.rnd(c.IsHuman ? 5 : 20) == 0) // [!code --]
			if (EClass.rnd(c2.IsHuman ? 5 : 20) == 0) // [!code ++]
			{
				c.SetFeat(1205, 1, msg: true); // [!code --]
				c2.SetFeat(1205, 1, msg: true); // [!code ++]
				flag4 = true;
			}
		}
		if (flag4)
		{
			c.SetInt(31, EClass.world.date.GetRaw() + 10080); // [!code --]
			c2.SetInt(31, EClass.world.date.GetRaw() + 10080); // [!code ++]
		}
	}
	else if (flag4 && c.GetInt(31) < EClass.world.date.GetRaw()) // [!code --]
	else if (flag4 && c2.GetInt(31) < EClass.world.date.GetRaw()) // [!code ++]
	{
		c.SetFeat(1205, 0, msg: true); // [!code --]
		c2.SetFeat(1205, 0, msg: true); // [!code ++]
	}
	if (flag5 && !c.HasElement(480)) // [!code --]
	if (flag5 && !c2.HasElement(480)) // [!code ++]
	{
		c.AddCondition<ConParalyze>(); // [!code --]
		c.AddCondition<ConConfuse>(200); // [!code --]
		c2.AddCondition<ConParalyze>(); // [!code ++]
		c2.AddCondition<ConConfuse>(200); // [!code ++]
	}
	if (c.HasCondition<ConAnorexia>()) // [!code --]
	if (c2.HasCondition<ConAnorexia>()) // [!code ++]
	{
		c.Vomit(); // [!code --]
		c2.Vomit(); // [!code ++]
	}
	if (num3 > 20 && c.HasElement(1413)) // [!code --]
	if (num3 > 20 && c2.HasElement(1413)) // [!code ++]
	{
		Thing thing = ThingGen.Create("seed");
		if (EClass.rnd(EClass.debug.enable ? 2 : 10) == 0)
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/FoodEffect.cs#L369-L403)
```cs:line-numbers=369
				TraitSeed.ApplySeed(thing, (EClass.rnd(4) == 0) ? 118 : ((EClass.rnd(3) == 0) ? 119 : 90));
			}
			thing.SetNum(2 + EClass.rnd(3));
			c.Talk("vomit"); // [!code --]
			c.Say("fairy_vomit", c, thing); // [!code --]
			c.PickOrDrop(c.pos, thing); // [!code --]
			c2.Talk("vomit"); // [!code ++]
			c2.Say("fairy_vomit", c2, thing); // [!code ++]
			c2.PickOrDrop(c2.pos, thing); // [!code ++]
		}
		food.trait.OnEat(c); // [!code --]
		food.trait.OnEat(c2); // [!code ++]
		if (food.trait is TraitDrink)
		{
			food.trait.OnDrink(c); // [!code --]
			food.trait.OnDrink(c2); // [!code ++]
		}
		goto IL_0f76;
		IL_0f76:
		if (!consume) // [!code --]
		if (consume) // [!code ++]
		{ // [!code ++]
			num7 += 5f; // [!code ++]
			if (flag6 && (float)food.Evalue(10) > num7 + 10f) // [!code ++]
			{ // [!code ++]
				food.elements.SetTo(10, (int)Mathf.Max((float)food.Evalue(10) - num7, 1f)); // [!code ++]
				food.SetBool(125, enable: true); // [!code ++]
				if (food.HasElement(1229)) // [!code ++]
				{ // [!code ++]
					food.elements.Remove(1229); // [!code ++]
				} // [!code ++]
			} // [!code ++]
			else // [!code ++]
			{ // [!code ++]
				food.ModNum(-1); // [!code ++]
			} // [!code ++]
		} // [!code ++]
		if (c2.IsCat || !(food.trait is TraitFoodChuryu)) // [!code ++]
		{
			return;
		}
		num7 += 5f; // [!code --]
		if (flag6 && (float)food.Evalue(10) > num7 + 10f) // [!code --]
		foreach (Chara item in c2.pos.ListCharasInRadius(c2, 5, (Chara c) => c.IsCat)) // [!code ++]
		{
			food.elements.SetTo(10, (int)Mathf.Max((float)food.Evalue(10) - num7, 1f)); // [!code --]
			food.SetBool(125, enable: true); // [!code --]
			if (food.HasElement(1229)) // [!code --]
			item.Say("angry", item); // [!code ++]
			item.ShowEmo(Emo.angry); // [!code ++]
			item.PlaySound("Animal/Cat/cat_angry"); // [!code ++]
			if (c2.IsPC) // [!code ++]
			{
				food.elements.Remove(1229); // [!code --]
				EClass.player.ModKarma(-3); // [!code ++]
			}
		}
		else // [!code --]
		{ // [!code --]
			food.ModNum(-1); // [!code --]
		} // [!code --]
	}

	public static void ProcTrait(Chara c, Card t)
```

## HotItemNoItem

[`public static bool _TrySetAct(ActPlan p)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/HotItemNoItem.cs#L58-L64)
```cs:line-numbers=58
					EClass.player.RefreshCurrentHotItem();
					ActionMode.Adv.planRight.Update(ActionMode.Adv.mouseTarget);
					EClass.pc.renderer.Refresh();
					if (!(EClass.pc.held.trait is TraitShackle)) // [!code --]
					if (EClass.pc.held.trait is TraitToolMusic) // [!code ++]
					{
						HotItemHeld.disableTool = true;
					}
```

## Player

[`public void CreateEquip()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Player.cs#L1735-L1740)
```cs:line-numbers=1735
		{
			c.AddCard(ThingGen.Create("mixer"));
			c.AddCard(ThingGen.Create("bloodpack").SetNum(3));
			Thing thing = ThingGen.Create("parchment"); // [!code ++]
			thing.SetStr(53, "letter_vampire"); // [!code ++]
			c.AddCard(thing); // [!code ++]
		}
	}
	Thing SetSpellbook(Thing t, int charge)
```

## RecipeSource

[`public string GetDetail()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/RecipeSource.cs#L106-L111)
```cs:line-numbers=106
		return row.GetDetail();
	}

	public bool IsCraftable() // [!code ++]
	{ // [!code ++]
		if (idFactory.IsEmpty() || idFactory == "x" || idFactory == "none") // [!code ++]
		{ // [!code ++]
			return false; // [!code ++]
		} // [!code ++]
		return true; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public Element GetReqSkill()
	{
		return Element.Create((NeedFactory ? EClass.sources.cards.GetModelCrafter(idFactory) : Trait.SelfFactory).IDReqEle(this), row.LV);
```

## Thing

[`public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Thing.cs#L1296-L1304)
```cs:line-numbers=1296
				{
					num3 = num3 * (100 + AttackProcess.GetTwoHandEncBonus(root.Chara)) / 100;
				}
				string text12 = " (" + e.Value + ((e.Value == num3) ? "" : (" → " + num3)) + ")"; // [!code --]
				string text13 = "_bracketLeft３".lang() + e.Name + "_bracketRight３".lang(); // [!code --]
				return s + text12 + " " + text13; // [!code --]
				string text13 = " (" + e.Value + ((e.Value == num3) ? "" : (" → " + num3)) + ")"; // [!code ++]
				string text14 = "_bracketLeft３".lang() + e.Name + "_bracketRight３".lang(); // [!code ++]
				return s + text13 + " " + text14; // [!code ++]
			});
		}
		if (sockets != null)
```

[`public override void WriteNote(UINote n, Action<UINote> onWriteNote = null, IIns`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Thing.cs#L1325-L1333)
```cs:line-numbers=1325
		if (base.c_mixedFoodData != null)
		{
			n.AddHeader("isMixedFood");
			foreach (string text14 in base.c_mixedFoodData.texts) // [!code --]
			foreach (string text15 in base.c_mixedFoodData.texts) // [!code ++]
			{
				AddText("_bullet".lang() + text14 + text2, FontColor.Default); // [!code --]
				AddText("_bullet".lang() + text15 + text2, FontColor.Default); // [!code ++]
			}
		}
	}
```

[`string GetTextTrait(Element e)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/Thing.cs#L1439-L1445)
```cs:line-numbers=1439
		}
		int num2 = e.Value / 10;
		num2 = ((e.Value < 0) ? (num2 - 1) : (num2 + 1));
		text10 = "Lv." + num2 + text11 + " " + text10; // [!code --]
		string text12 = num2.ToString() ?? ""; // [!code ++]
		if (EClass.pc.HasElement(1250) && HasElement(710) && e.IsFoodTrait && e.id != 710) // [!code ++]
		{ // [!code ++]
			text12 = (int)((float)num2 * 0.1f * (float)(Evalue(710) + 10)) + " (" + num2 + ")"; // [!code ++]
		} // [!code ++]
		text10 = "Lv." + text12 + text11 + " " + text10; // [!code ++]
		if (infoMode && e.IsFoodTraitMain)
		{
			text10 += "traitAdditive".lang();
```

## ThrowType

[`public enum ThrowType`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/3f7edc900c0290b23a3dac10ce06afc6d76fb3a5/Elin/ThrowType.cs#L7-L11)
```cs:line-numbers=7
	Flyer,
	MonsterBall,
	Explosive,
	Ball // [!code --]
	Ball, // [!code ++]
	Dice // [!code ++]
}
```

## +TraitDice

::: details File Created
```cs
public class TraitDice : Trait
{
	public override bool IsThrowMainAction => true;

	public override ThrowType ThrowType => ThrowType.Dice;
}
```

:::
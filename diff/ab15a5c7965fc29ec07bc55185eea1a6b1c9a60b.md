---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 20 files modified. 2 new files created.
version: EA 23.203 Nyaightly
changes: ActEffect/ActMelee/ActionMode/AttackProcess/Biography/Card/CoreConfig/CoreDebug/EffectId/GameDate/GamePrincipal/LayerWorldSetting/Player/Quest/QuestNegotiationDarkness/QuestSupplySpecific/Region/Scene/Trait/+TraitSpit/Zone/+Zone_DungeonDragon
---

# EA 23.203 Nyaightly

September 22, 2025

20 files modified. 2 new files created.

## Important Changes

**None.**
## ActEffect

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L985-L994)
```cs:line-numbers=985
		{
			return;
		}
		Thing thing = ThingGen.Create("mine"); // [!code --]
		thing.c_idRefCard = "dog_mine"; // [!code --]
		Thing thing2 = ThingGen.Create("mine"); // [!code ++]
		thing2.c_idRefCard = "dog_mine"; // [!code ++]
		Zone.ignoreSpawnAnime = true;
		EClass._zone.AddCard(thing, CC.pos).Install(); // [!code --]
		EClass._zone.AddCard(thing2, CC.pos).Install(); // [!code ++]
		break; // [!code ++]
	} // [!code ++]
	case EffectId.LittleSisterMigration: // [!code ++]
	{ // [!code ++]
		if (!(EClass._zone is Zone_LittleGarden)) // [!code ++]
		{ // [!code ++]
			Msg.SayNothingHappen(); // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		List<Chara> list3 = new List<Chara>(); // [!code ++]
		bool flag6 = false; // [!code ++]
		foreach (Chara chara2 in EClass._map.charas) // [!code ++]
		{ // [!code ++]
			if (!chara2.IsPCFactionOrMinion && chara2.id == "littleOne") // [!code ++]
			{ // [!code ++]
				if (flag6) // [!code ++]
				{ // [!code ++]
					flag6 = false; // [!code ++]
					continue; // [!code ++]
				} // [!code ++]
				list3.Add(chara2); // [!code ++]
				flag6 = true; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		if (list3.Count == 0) // [!code ++]
		{ // [!code ++]
			Msg.SayNothingHappen(); // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		EClass.pc.PlaySound("chime_angel"); // [!code ++]
		foreach (Chara item2 in list3) // [!code ++]
		{ // [!code ++]
			item2.PlayEffect("revive"); // [!code ++]
			item2.Destroy(); // [!code ++]
		} // [!code ++]
		Msg.Say("little_migration", list3.Count.ToString() ?? ""); // [!code ++]
		EClass._zone.ModInfluence(list3.Count); // [!code ++]
		EClass.player.stats.sistersDepart += list3.Count; // [!code ++]
		break;
	}
	case EffectId.MagicMap:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1058-L1067)
```cs:line-numbers=1058
	case EffectId.EnchantArmorGreat:
	{
		bool armor = id == EffectId.EnchantArmor || id == EffectId.EnchantArmorGreat;
		bool flag4 = id == EffectId.EnchantWeaponGreat || id == EffectId.EnchantArmorGreat; // [!code --]
		bool flag3 = id == EffectId.EnchantWeaponGreat || id == EffectId.EnchantArmorGreat; // [!code ++]
		if (!tc.isThing)
		{
			LayerDragGrid.CreateEnchant(CC, armor, flag4, state); // [!code --]
			LayerDragGrid.CreateEnchant(CC, armor, flag3, state); // [!code ++]
			return;
		}
		cc.PlaySound("identify");
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1072-L1078)
```cs:line-numbers=1072
			tc.ModEncLv(-1);
			break;
		}
		int num4 = (flag4 ? 4 : 2) + (blessed ? 1 : 0); // [!code --]
		int num4 = (flag3 ? 4 : 2) + (blessed ? 1 : 0); // [!code ++]
		if (tc.encLV >= num4)
		{
			cc.Say("enc_resist", tc);
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1085-L1105)
```cs:line-numbers=1085
	case EffectId.Identify:
	case EffectId.GreaterIdentify:
	{
		bool flag2 = id == EffectId.GreaterIdentify; // [!code --]
		bool flag4 = id == EffectId.GreaterIdentify; // [!code ++]
		if (flag)
		{
			Redirect(EffectId.ForgetItems, flag2 ? BlessedState.Cursed : BlessedState.Normal, default(ActRef)); // [!code --]
			Redirect(EffectId.ForgetItems, flag4 ? BlessedState.Cursed : BlessedState.Normal, default(ActRef)); // [!code ++]
			break;
		}
		if (!tc.isThing)
		{
			int count = ((!blessed) ? 1 : (flag2 ? (2 + EClass.rnd(2)) : (3 + EClass.rnd(3)))); // [!code --]
			LayerDragGrid.CreateIdentify(CC, flag2, state, 0, count); // [!code --]
			int count = ((!blessed) ? 1 : (flag4 ? (2 + EClass.rnd(2)) : (3 + EClass.rnd(3)))); // [!code ++]
			LayerDragGrid.CreateIdentify(CC, flag4, state, 0, count); // [!code ++]
			return;
		}
		cc.PlaySound("identify");
		cc.PlayEffect("identify");
		tc.Thing.Identify(cc.IsPCParty, (!flag2) ? IDTSource.Identify : IDTSource.SuperiorIdentify); // [!code --]
		tc.Thing.Identify(cc.IsPCParty, (!flag4) ? IDTSource.Identify : IDTSource.SuperiorIdentify); // [!code ++]
		break;
	}
	case EffectId.Uncurse:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1109-L1125)
```cs:line-numbers=1109
			LayerDragGrid.CreateUncurse(CC, state);
			return;
		}
		Thing thing2 = tc.Thing; // [!code --]
		if (thing2.blessedState == BlessedState.Cursed) // [!code --]
		Thing thing3 = tc.Thing; // [!code ++]
		if (thing3.blessedState == BlessedState.Cursed) // [!code ++]
		{
			thing2.SetBlessedState(BlessedState.Normal); // [!code --]
			thing3.SetBlessedState(BlessedState.Normal); // [!code ++]
		}
		else if (thing2.blessedState == BlessedState.Doomed) // [!code --]
		else if (thing3.blessedState == BlessedState.Doomed) // [!code ++]
		{
			thing2.SetBlessedState(BlessedState.Normal); // [!code --]
			thing3.SetBlessedState(BlessedState.Normal); // [!code ++]
		}
		thing2.GetRootCard()?.TryStack(thing2); // [!code --]
		LayerInventory.SetDirty(thing2); // [!code --]
		thing3.GetRootCard()?.TryStack(thing3); // [!code ++]
		LayerInventory.SetDirty(thing3); // [!code ++]
		break;
	}
	case EffectId.Lighten:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1211-L1223)
```cs:line-numbers=1211
		cc.PlayEffect("identify");
		cc.Say("reconstruct", cc, tc);
		EClass.game.cards.uidNext += EClass.rnd(30);
		Thing thing3 = ThingGen.Create(tc.id, -1, tc.LV * power / 100); // [!code --]
		thing3.SetBlessedState(state); // [!code --]
		Thing thing = ThingGen.Create(tc.id, -1, tc.LV * power / 100); // [!code ++]
		thing.SetBlessedState(state); // [!code ++]
		tc.Destroy();
		CC.Pick(thing3, msg: false); // [!code --]
		CC.Pick(thing, msg: false); // [!code ++]
		if (!CC.IsPC)
		{
			CC.TryEquip(thing3); // [!code --]
			CC.TryEquip(thing); // [!code ++]
		}
		break;
	}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1239-L1245)
```cs:line-numbers=1239
		if (row == null)
		{
			bool num2 = id == EffectId.ChangeMaterialGreater;
			bool flag3 = id == EffectId.ChangeMaterialLesser; // [!code --]
			bool flag2 = id == EffectId.ChangeMaterialLesser; // [!code ++]
			string text2 = tc.Thing.source.tierGroup;
			Dictionary<string, SourceMaterial.TierList> tierMap = SourceMaterial.tierMap;
			int num3 = 1;
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1255-L1261)
```cs:line-numbers=1255
			{
				num3++;
			}
			if (flag3) // [!code --]
			if (flag2) // [!code ++]
			{
				num3 -= 2;
			}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1278-L1288)
```cs:line-numbers=1278
		cc.PlayEffect("buff");
		if ((tc.id == "log" || tc.id == "branch") && tc.material.alias == "carbone")
		{
			foreach (Element item2 in tc.elements.dict.Values.ToList()) // [!code --]
			foreach (Element item3 in tc.elements.dict.Values.ToList()) // [!code ++]
			{
				if (item2.IsTrait && item2.vBase != 0) // [!code --]
				if (item3.IsTrait && item3.vBase != 0) // [!code ++]
				{
					tc.elements.ModBase(item2.id, -item2.vBase); // [!code --]
					tc.elements.ModBase(item3.id, -item3.vBase); // [!code ++]
				}
			}
		}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1360-L1370)
```cs:line-numbers=1360
			}
			if (id == EffectId.Gate && CC.IsPC)
			{
				foreach (Chara chara2 in EClass._map.charas) // [!code --]
				foreach (Chara chara3 in EClass._map.charas) // [!code ++]
				{
					if (!chara2.HasHost && chara2 != tc && (chara2.IsPCParty || chara2.IsPCPartyMinion)) // [!code --]
					if (!chara3.HasHost && chara3 != tc && (chara3.IsPCParty || chara3.IsPCPartyMinion)) // [!code ++]
					{
						chara2.Teleport(tc.pos.GetNearestPoint(allowBlock: false, allowChara: false) ?? tc.pos); // [!code --]
						chara3.Teleport(tc.pos.GetNearestPoint(allowBlock: false, allowChara: false) ?? tc.pos); // [!code ++]
					}
				}
			}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1424-L1435)
```cs:line-numbers=1424
		TC.Say("abShutterHex", TC);
		TC.pos.ForeachNeighbor(delegate(Point p)
		{
			foreach (Chara item3 in p.ListCharas()) // [!code --]
			foreach (Chara item4 in p.ListCharas()) // [!code ++]
			{
				if (!item3.IsFriendOrAbove(CC)) // [!code --]
				if (!item4.IsFriendOrAbove(CC)) // [!code ++]
				{
					int num9 = Dice.Create("SpShutterHex", power, CC, (actRef.refThing != null) ? null : actRef.act).Roll();
					item3.DamageHP(num9 * hex2, 919, power, AttackSource.None, CC); // [!code --]
					item4.DamageHP(num9 * hex2, 919, power, AttackSource.None, CC); // [!code ++]
				}
			}
		});
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1484-L1490)
```cs:line-numbers=1484
			break;
		}
		Thing thing4 = null;
		bool flag7 = actRef.n1 == "food"; // [!code --]
		bool flag8 = actRef.n1 == "food"; // [!code ++]
		if (actRef.n1 == "money")
		{
			int currency = TC.GetCurrency();
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1498-L1508)
```cs:line-numbers=1498
		else
		{
			Func<Thing, bool> func = (Thing t) => true;
			if (flag7) // [!code --]
			if (flag8) // [!code ++]
			{
				func = (Thing t) => t.IsFood;
			}
			List<Thing> list4 = TC.things.List(delegate(Thing t) // [!code --]
			List<Thing> list5 = TC.things.List(delegate(Thing t) // [!code ++]
			{
				if (t.parentCard?.trait is TraitChestMerchant || t.trait is TraitTool || t.IsThrownWeapon)
				{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1510-L1518)
```cs:line-numbers=1510
				}
				return t.trait.CanBeDestroyed && t.things.Count == 0 && t.invY != 1 && t.trait.CanBeStolen && !t.trait.CanOnlyCarry && !t.IsUnique && !t.isEquipped && t.blessedState == BlessedState.Normal && func(t);
			}, onlyAccessible: true);
			if (list4.Count > 0) // [!code --]
			if (list5.Count > 0) // [!code ++]
			{
				thing4 = list4.RandomItem(); // [!code --]
				thing4 = list5.RandomItem(); // [!code ++]
				if (thing4.Num > 1)
				{
					thing4 = thing4.Split(1);
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1558-L1564)
```cs:line-numbers=1558
		{
			break;
		}
		List<Thing> list7 = TC.things.List(delegate(Thing t) // [!code --]
		List<Thing> list8 = TC.things.List(delegate(Thing t) // [!code ++]
		{
			if (!t.isEquipped || t.blessedState == BlessedState.Doomed || t.IsToolbelt)
			{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1566-L1577)
```cs:line-numbers=1566
			}
			return (t.blessedState < BlessedState.Blessed || EClass.rnd(10) == 0) ? true : false;
		});
		if (list7.Count == 0) // [!code --]
		if (list8.Count == 0) // [!code ++]
		{
			CC.SayNothingHappans();
			break;
		}
		Thing thing6 = list7.RandomItem(); // [!code --]
		Thing thing6 = list8.RandomItem(); // [!code ++]
		TC.Say("curse_hit", TC, thing6);
		thing6.SetBlessedState((thing6.blessedState == BlessedState.Cursed) ? BlessedState.Doomed : BlessedState.Cursed);
		LayerInventory.SetDirty(thing6);
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1630-L1638)
```cs:line-numbers=1630
				}
			}
		});
		foreach (Thing item4 in list) // [!code --]
		foreach (Thing item5 in list) // [!code ++]
		{
			item4.GetRootCard()?.TryStack(item4); // [!code --]
			item5.GetRootCard()?.TryStack(item5); // [!code ++]
		}
		if (success == 0 && fail == 0)
		{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1680-L1691)
```cs:line-numbers=1680
	{
		EClass.game.religions.Trickery.Talk("ability");
		bool hex = CC.IsHostile(TC);
		List<SourceStat.Row> list6 = EClass.sources.stats.rows.Where((SourceStat.Row con) => con.tag.Contains("random") && con.group == (hex ? "Debuff" : "Buff")).ToList(); // [!code --]
		List<SourceStat.Row> list7 = EClass.sources.stats.rows.Where((SourceStat.Row con) => con.tag.Contains("random") && con.group == (hex ? "Debuff" : "Buff")).ToList(); // [!code ++]
		int power2 = power;
		for (int l = 0; l < 4 + EClass.rnd(2); l++)
		{
			SourceStat.Row row2 = list6.RandomItem(); // [!code --]
			list6.Remove(row2); // [!code --]
			SourceStat.Row row2 = list7.RandomItem(); // [!code ++]
			list7.Remove(row2); // [!code ++]
			Proc(hex ? EffectId.DebuffKizuami : EffectId.Buff, CC, TC, power2, new ActRef
			{
				n1 = row2.alias
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1911-L1926)
```cs:line-numbers=1911
		break;
	case EffectId.Revive:
	{
		List<KeyValuePair<int, Chara>> list3 = EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon && a.Value.c_wasInPcParty).ToList(); // [!code --]
		List<KeyValuePair<int, Chara>> list4 = EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon && a.Value.c_wasInPcParty).ToList(); // [!code ++]
		if (TC.IsPCFaction || TC.IsPCFactionMinion)
		{
			if (TC.IsPC && list3.Count == 0) // [!code --]
			if (TC.IsPC && list4.Count == 0) // [!code ++]
			{
				list3 = EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.CanRevive() && a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon).ToList(); // [!code --]
				list4 = EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.CanRevive() && a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon).ToList(); // [!code ++]
			}
			if (list3.Count > 0) // [!code --]
			if (list4.Count > 0) // [!code ++]
			{
				list3.RandomItem().Value.Chara.GetRevived(); // [!code --]
				list4.RandomItem().Value.Chara.GetRevived(); // [!code ++]
				break;
			}
		}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1933-L1945)
```cs:line-numbers=1933
	case EffectId.DamageMindGreat:
	case EffectId.Weaken:
	{
		bool flag8 = id == EffectId.DamageBody || id == EffectId.DamageBodyGreat; // [!code --]
		bool flag9 = id == EffectId.DamageBody || id == EffectId.DamageBodyGreat; // [!code ++]
		bool mind = id == EffectId.DamageMind || id == EffectId.DamageMindGreat;
		int num8 = ((id == EffectId.DamageBody || id == EffectId.DamageMind) ? 1 : (4 + EClass.rnd(4)));
		if (id == EffectId.Weaken)
		{
			flag8 = EClass.rnd(2) == 0; // [!code --]
			mind = !flag8; // [!code --]
			flag9 = EClass.rnd(2) == 0; // [!code ++]
			mind = !flag9; // [!code ++]
			num8 = 1;
		}
		else
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1947-L1956)
```cs:line-numbers=1947
			TC.PlayEffect("debuff");
			TC.PlaySound("debuff");
		}
		TC.Say(flag8 ? "damageBody" : "damageMind", TC); // [!code --]
		TC.Say(flag9 ? "damageBody" : "damageMind", TC); // [!code ++]
		for (int k = 0; k < num8; k++)
		{
			TC.DamageTempElements(power, flag8, mind, id != EffectId.Weaken); // [!code --]
			TC.DamageTempElements(power, flag9, mind, id != EffectId.Weaken); // [!code ++]
		}
		if (TC.IsPC)
		{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L1963-L1996)
```cs:line-numbers=1963
	case EffectId.EnhanceBodyGreat:
	case EffectId.EnhanceMindGreat:
	{
		bool flag9 = id == EffectId.EnhanceBody || id == EffectId.EnhanceBodyGreat; // [!code --]
		bool flag10 = id == EffectId.EnhanceBody || id == EffectId.EnhanceBodyGreat; // [!code ++]
		bool mind2 = id == EffectId.EnhanceMind || id == EffectId.EnhanceMindGreat;
		if (id != EffectId.EnhanceBody && id != EffectId.EnhanceMind)
		{
			EClass.rnd(4);
		}
		TC.Say(flag9 ? "enhanceBody" : "enhanceMind", TC); // [!code --]
		TC.Say(flag10 ? "enhanceBody" : "enhanceMind", TC); // [!code ++]
		TC.PlayEffect("buff");
		TC.PlaySound("buff");
		TC.EnhanceTempElements(power, flag9, mind2, onlyRenew: true); // [!code --]
		TC.EnhanceTempElements(power, flag10, mind2, onlyRenew: true); // [!code ++]
		break;
	}
	case EffectId.RestoreBody:
	case EffectId.RestoreMind:
	{
		bool flag6 = id == EffectId.RestoreBody; // [!code --]
		bool flag7 = id == EffectId.RestoreBody; // [!code ++]
		if (flag)
		{
			Redirect(flag6 ? EffectId.DamageBodyGreat : EffectId.DamageMindGreat, BlessedState.Normal, default(ActRef)); // [!code --]
			Redirect(flag7 ? EffectId.DamageBodyGreat : EffectId.DamageMindGreat, BlessedState.Normal, default(ActRef)); // [!code ++]
			break;
		}
		TC.Say(flag6 ? "restoreBody" : "restoreMind", TC); // [!code --]
		TC.Say(flag7 ? "restoreBody" : "restoreMind", TC); // [!code ++]
		TC.PlaySound("heal");
		TC.PlayEffect("heal");
		TC.CureHost(flag6 ? CureType.CureBody : CureType.CureMind, power, state); // [!code --]
		TC.CureHost(flag7 ? CureType.CureBody : CureType.CureMind, power, state); // [!code ++]
		if (blessed)
		{
			Redirect(flag6 ? EffectId.EnhanceBodyGreat : EffectId.EnhanceMindGreat, BlessedState.Normal, default(ActRef)); // [!code --]
			Redirect(flag7 ? EffectId.EnhanceBodyGreat : EffectId.EnhanceMindGreat, BlessedState.Normal, default(ActRef)); // [!code ++]
		}
		break;
	}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L2040-L2051)
```cs:line-numbers=2040
			Redirect(EffectId.CurseEQ, BlessedState.Normal, default(ActRef));
			break;
		}
		foreach (Condition item5 in TC.conditions.Copy()) // [!code --]
		foreach (Condition item6 in TC.conditions.Copy()) // [!code ++]
		{
			if (item5.Type == ConditionType.Debuff && !item5.IsKilled && EClass.rnd(power * 2) > EClass.rnd(item5.power)) // [!code --]
			if (item6.Type == ConditionType.Debuff && !item6.IsKilled && EClass.rnd(power * 2) > EClass.rnd(item6.power)) // [!code ++]
			{
				CC.Say("removeHex", TC, item5.Name.ToLower()); // [!code --]
				item5.Kill(); // [!code --]
				CC.Say("removeHex", TC, item6.Name.ToLower()); // [!code ++]
				item6.Kill(); // [!code ++]
				if (id == EffectId.RemoveHex)
				{
					break;
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActEffect.cs#L2291-L2300)
```cs:line-numbers=2291
		{
			power /= 4;
		}
		List<Thing> list5 = TC.things.List((Thing t) => (t.Num <= 1 && t.IsEquipmentOrRanged && !t.IsToolbelt && !t.IsLightsource && t.isEquipped) ? true : false); // [!code --]
		if (list5.Count != 0) // [!code --]
		List<Thing> list6 = TC.things.List((Thing t) => (t.Num <= 1 && t.IsEquipmentOrRanged && !t.IsToolbelt && !t.IsLightsource && t.isEquipped) ? true : false); // [!code ++]
		if (list6.Count != 0) // [!code ++]
		{
			Thing thing5 = list5.RandomItem(); // [!code --]
			Thing thing5 = list6.RandomItem(); // [!code ++]
			TC.Say("acid_hit", TC);
			if (thing5.isAcidproof)
			{
```

## ActMelee

[`public bool Attack(float dmgMulti = 1f)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActMelee.cs#L161-L167)
```cs:line-numbers=161
	{
		Act.CC.RemoveCondition<ConInvisibility>();
	}
	if (orgTC.isChara && orgTC.ExistsOnMap && orgTC != cC && !orgTC.IsRestrainedResident && ACT.Melee.CanPerform(orgTC.Chara, cC)) // [!code --]
	if (orgTC.isChara && orgTC.ExistsOnMap && orgTC != cC && !orgTC.IsRestrainedResident && !orgTC.IsDisabled && ACT.Melee.CanPerform(orgTC.Chara, cC)) // [!code ++]
	{
		if (parried)
		{
```

[`void Attack(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActMelee.cs#L360-L366)
```cs:line-numbers=360
				}
				if (k > 0)
				{
					Act.CC.Say("attack_chaser"); // [!code --]
					Act.CC.Say(Act.CC.IsHostile() ? "attack_chaser_enemy" : "attack_chaser"); // [!code ++]
				}
				flag = AttackProcess.Current.Perform(count, hasHit, dmgMulti * mtp * BaseDmgMTP, maxRoll, subAttack);
				if (!flag && frustration > 0 && !Act.TC.HasElement(439) && 10f + 2f * Mathf.Sqrt(frustration) > (float)EClass.rnd(100))
```

## ActionMode

[`public void DoFunc(CoreConfig.GameFunc func)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/ActionMode.cs#L1175-L1180)
```cs:line-numbers=1175
		}
		break;
	}
	case CoreConfig.GameFunc.ToggleLog: // [!code ++]
		WidgetMainText.ToggleLog(); // [!code ++]
		break; // [!code ++]
	case CoreConfig.GameFunc.ShowInv:
		EClass.ui.ToggleInventory(delay: true);
		break;
```

## AttackProcess

[`public void Prepare(Chara _CC, Thing _weapon, Card _TC = null, Point _TP = null,`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/AttackProcess.cs#L251-L256)
```cs:line-numbers=251
		dMulti = 0.6f + (float)(weaponSkill.GetParent(CC).Value + weaponSkill.Value / 2 + CC.Evalue(flag3 ? 304 : (IsRanged ? 133 : 132))) / 50f;
		dMulti += 0.05f * (float)CC.Evalue(IsRanged ? 1404 : 1400);
		toHitBase = EClass.curve((IsCane ? CC.WIL : CC.DEX) / 4 + weaponSkill.GetParent(CC).Value / 3 + weaponSkill.Value, 50, 25) + 50;
		if (CC.HasElement(1208) && weaponSkill.id == 101) // [!code ++]
		{ // [!code ++]
			toHitBase = toHitBase * 115 / 100; // [!code ++]
		} // [!code ++]
		toHitFix = CC.HIT + weapon.HIT;
		penetration = weapon.Penetration + CC.Evalue(92);
		if (IsRanged)
```

## Biography

[`public int GetAge(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Biography.cs#L287-L292)
```cs:line-numbers=287
				return int.Parse(array[1]);
			}
		}
		if (!c.IsPC && EClass.game.principal.noAging) // [!code ++]
		{ // [!code ++]
			return EClass.game.Prologue.year - birthYear; // [!code ++]
		} // [!code ++]
		return EClass.world.date.year - birthYear;
	}

```

## Card

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Card.cs#L3992-L3997)
```cs:line-numbers=3992
			}
		}
	}
	if (origin != null && origin.HasElement(1208)) // [!code ++]
	{ // [!code ++]
		switch (attackSource) // [!code ++]
		{ // [!code ++]
		case AttackSource.MagicHand: // [!code ++]
			dmg = dmg * 130 / 100; // [!code ++]
			eleP = eleP * 150 / 100; // [!code ++]
			break; // [!code ++]
		case AttackSource.MagicSword: // [!code ++]
			dmg = dmg * 120 / 100; // [!code ++]
			eleP = eleP * 150 / 100; // [!code ++]
			break; // [!code ++]
		} // [!code ++]
	} // [!code ++]
	Element e;
	if (ele == 0 || ele == 926)
	{
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Card.cs#L4264-L4270)
```cs:line-numbers=4264
							Chara.AddCondition<ConFractured>((int)Mathf.Max(10f, 30f - Mathf.Sqrt(Evalue(436))));
							hp = Mathf.Min(half * (int)Mathf.Sqrt(Evalue(436) * 2) / 100, MaxHP / 3);
						});
						goto IL_0ead; // [!code --]
						goto IL_0f1d; // [!code ++]
					}
				}
				if (zoneInstanceBout != null && (bool)LayerDrama.Instance)
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Card.cs#L4292-L4298)
```cs:line-numbers=4292
						if (EClass.player.invlunerable)
						{
							EvadeDeath(null);
							goto IL_0ead; // [!code --]
							goto IL_0f1d; // [!code ++]
						}
					}
					if (Evalue(1220) > 0 && Chara.stamina.value >= (IsPC ? (Chara.stamina.max / 2) : (Chara.stamina.max / 3 * 2)))
```

[`public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Card.cs#L4310-L4317)
```cs:line-numbers=4310
			}
		}
	}
	goto IL_0ead; // [!code --]
	IL_0ead: // [!code --]
	goto IL_0f1d; // [!code ++]
	IL_0f1d: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

## CoreConfig

[`public enum GameFunc`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/CoreConfig.cs#L28-L34)
```cs:line-numbers=28
		EmptyHand,
		Fire,
		SwitchHotbar,
		PropertySearch // [!code --]
		PropertySearch, // [!code ++]
		ToggleLog // [!code ++]
	}

	public enum GameFuncBuild
```

## CoreDebug

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/CoreDebug.cs#L1005-L1031)
```cs:line-numbers=1005
	}
	if (Input.GetKeyDown(KeyCode.F4))
	{
		EClass.player.karma = EScriptable.rnd(200) - 100; // [!code --]
		Msg.Say("k:" + EClass.player.karma + "  "); // [!code --]
		if (EClass.player.karma < 80 && EClass.pc.HasElement(1270)) // [!code --]
		{ // [!code --]
			EClass.pc.SetFeat(1270, 0, msg: true); // [!code --]
		} // [!code --]
		if (EClass.player.karma > -80 && EClass.pc.HasElement(1271)) // [!code --]
		{ // [!code --]
			EClass.pc.SetFeat(1271, 0, msg: true); // [!code --]
		} // [!code --]
		if (EClass.player.karma >= 80) // [!code --]
		{ // [!code --]
			if (EScriptable.rnd(EClass.debug.enable ? 1 : 5) == 0 && !EClass.pc.HasElement(1270)) // [!code --]
			{ // [!code --]
				EClass.pc.SetFeat(1270, 1, msg: true); // [!code --]
			} // [!code --]
		} // [!code --]
		else if (EClass.player.karma <= -80 && EScriptable.rnd(EClass.debug.enable ? 1 : 2) == 0 && !EClass.pc.HasElement(1271)) // [!code --]
		{ // [!code --]
			EClass.pc.SetFeat(1271, 1, msg: true); // [!code --]
		} // [!code --]
		EClass.game.quests.Start("into_darkness"); // [!code ++]
		EClass.game.quests.Start("negotiation_darkness").ChangePhase(5); // [!code ++]
		return;
	}
	if (Input.GetKeyDown(KeyCode.F5))
```

## EffectId

[`public enum EffectId`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/EffectId.cs#L125-L129)
```cs:line-numbers=125
	EternalYouth = 301,
	MoonSpear = 302,
	BurnMana = 303,
	MoonArrow = 304 // [!code --]
	MoonArrow = 304, // [!code ++]
	LittleSisterMigration = 305 // [!code ++]
}
```

## GameDate

[`public void AdvanceMonth()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/GameDate.cs#L243-L248)
```cs:line-numbers=243
public void AdvanceYear()
{
	base.year++;
	EClass.player.flags.santa = 0; // [!code ++]
	EClass.player.wellWished = false;
	EClass.player.nums.OnAdvanceYear();
	EClass.world.SendPackage(ThingGen.Create("gift_newyear"));
```

## GamePrincipal

[`public enum Type`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/GamePrincipal.cs#L9-L15)
```cs:line-numbers=9
	{
		Oath,
		Workaround,
		Legacy // [!code --]
		Legacy, // [!code ++]
		Flavor // [!code ++]
	}

	public class Item
```

[`public void SetInt(int value)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/GamePrincipal.cs#L150-L155)
```cs:line-numbers=150
	[JsonProperty]
	public bool realAdv;

	[JsonProperty] // [!code ++]
	public bool noAging; // [!code ++]
 // [!code ++]
	[JsonProperty]
	public bool dropRate;

```

[`public List<Item> ListItems()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/GamePrincipal.cs#L212-L217)
```cs:line-numbers=212
	{
		enableDamageReduction = a;
	});
	Add(-1, Type.Flavor, "noAging", () => noAging, delegate(bool a) // [!code ++]
	{ // [!code ++]
		noAging = a; // [!code ++]
	}); // [!code ++]
	return list;
	void Add(int grade, Type type, string id, Func<bool> _get, Action<bool> _set)
	{
```

## LayerWorldSetting

[`public class LayerWorldSetting : ELayer`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/LayerWorldSetting.cs#L59-L64)
```cs:line-numbers=59

	public List<Sprite> sprites;

	public Sprite spriteNoToken; // [!code ++]
 // [!code ++]
	private bool started;

	public int IdxCustom => 3;
```

[`public void Refresh()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/LayerWorldSetting.cs#L145-L150)
```cs:line-numbers=145
	{
		AddCategory(GamePrincipal.Type.Workaround);
		AddCategory(GamePrincipal.Type.Legacy);
		AddCategory(GamePrincipal.Type.Flavor); // [!code ++]
	}
	transCustom.RebuildLayout();
	void AddCategory(GamePrincipal.Type type)
```

[`void AddCategory(GamePrincipal.Type type)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/LayerWorldSetting.cs#L173-L181)
```cs:line-numbers=173
			}
			bool flag = item.id == "permadeath" && !IsEmbark && !item.WasSealed();
			b.mainText.SetText(("pp_" + item.id).lang());
			b.icon.SetActive(item.grade >= 0 && (item.IsSealed() || item.WasSealed())); // [!code --]
			b.icon.SetAlpha(item.IsSealed() ? 1f : 0.3f); // [!code --]
			b.icon.sprite = ((item.grade < 0) ? null : sprites[item.grade]); // [!code --]
			b.icon.SetActive(item.grade < 0 || item.IsSealed() || item.WasSealed()); // [!code ++]
			b.icon.SetAlpha((item.grade < 0 || item.IsSealed()) ? 1f : 0.3f); // [!code ++]
			b.icon.sprite = ((item.grade < 0) ? spriteNoToken : sprites[item.grade]); // [!code ++]
			b.icon.SetNativeSize();
			b.GetOrCreate<CanvasGroup>().alpha = (flag ? 0.5f : 1f);
			string text = "pp_" + item.id + "_hint";
```

[`void AddCategory(GamePrincipal.Type type)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/LayerWorldSetting.cs#L190-L197)
```cs:line-numbers=190
					pp.id = -1;
					RefreshTemplate();
				}
				b.icon.SetActive(item.grade >= 0 && (item.IsSealed() || item.WasSealed())); // [!code --]
				b.icon.SetAlpha(item.IsSealed() ? 1f : 0.3f); // [!code --]
				b.icon.SetActive(item.grade < 0 || item.IsSealed() || item.WasSealed()); // [!code ++]
				b.icon.SetAlpha((item.grade < 0 || item.IsSealed()) ? 1f : 0.3f); // [!code ++]
			});
		}
	}
```

## Player

[`public class Stats : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Player.cs#L116-L121)
```cs:line-numbers=116
		[JsonProperty]
		public int gambleChestOpen;

		[JsonProperty] // [!code ++]
		public int sistersDepart; // [!code ++]
 // [!code ++]
		[JsonProperty]
		public long shipMoney;

```

[`public bool killedDuponne`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Player.cs#L562-L567)
```cs:line-numbers=562
			}
		}

		public int santa // [!code ++]
		{ // [!code ++]
			get // [!code ++]
			{ // [!code ++]
				return ints[9]; // [!code ++]
			} // [!code ++]
			set // [!code ++]
			{ // [!code ++]
				ints[9] = value; // [!code ++]
			} // [!code ++]
		} // [!code ++]
 // [!code ++]
		public int start
		{
			get
```

[`public void OnEnterZone()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Player.cs#L810-L820)
```cs:line-numbers=810
				PlayStory(availableStories[0]);
				availableStories.RemoveAt(0);
			}
			if (!LayerDrama.Instance && !EClass.game.isLoading && EClass.debug.enable && EClass._zone.IsPCFaction && EClass.game.quests.GetPhase<QuestIntoDarkness>() == 0 && EClass.game.quests.GetPhase<QuestNegotiationDarkness>() == 5) // [!code ++]
			{ // [!code ++]
				EClass.game.cards.globalCharas.Find("kettle"); // [!code ++]
				EClass.game.quests.Get<QuestNegotiationDarkness>().Complete(); // [!code ++]
				EClass.game.quests.Get<QuestIntoDarkness>().UpdateOnTalk(); // [!code ++]
			} // [!code ++]
		}

		public void OnLeaveZone()
		{
			if (QuestMain.Phase == 700) // [!code --]
			if (!EClass.player.simulatingZone && QuestMain.Phase == 700) // [!code ++]
			{
				PlayStory(40);
			}
```

## Quest

[`public virtual void OnEnterZone()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Quest.cs#L421-L426)
```cs:line-numbers=421

	public virtual void OnClickQuest()
	{
		Chara chara = this.chara; // [!code ++]
		if (chara == null && !source.drama[0].IsEmpty()) // [!code ++]
		{ // [!code ++]
			chara = EClass.game.cards.globalCharas.Find(source.drama[0]); // [!code ++]
		} // [!code ++]
		if (!source.drama.IsEmpty())
		{
			LayerDrama.currentQuest = this;
```

## QuestNegotiationDarkness

[`public override bool CanUpdateOnTalk(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/QuestNegotiationDarkness.cs#L12-L15)
```cs:line-numbers=12
	{
		return false;
	}
 // [!code ++]
	public override void ShowCompleteText() // [!code ++]
	{ // [!code ++]
		Msg.Say("completeQuest", GetTitle()); // [!code ++]
	} // [!code ++]
}
```

## QuestSupplySpecific

[`public override void SetIdThing()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/QuestSupplySpecific.cs#L31-L37)
```cs:line-numbers=31
	{
		foreach (SourceThing.Row row in EClass.sources.things.rows)
		{
			if ((i != 0 || !(this is QuestMeal) || row.LV <= num || EClass.rnd(4) == 0) && row.category == idCat && !row.isOrigin) // [!code --]
			if ((i != 0 || !(this is QuestMeal) || row.LV <= num || EClass.rnd(4) == 0) && row.category == idCat && !row.isOrigin && row.chance > 0) // [!code ++]
			{
				list.Add(row);
			}
```

## Region

[`public void CheckRandomSites()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Region.cs#L83-L88)
```cs:line-numbers=83
	TryAddZone("foxtown_nefu");
	TryAddZone("little_garden");
	TryAddZone("cave_yeek");
	TryAddZone("cave_dragon"); // [!code ++]
	TryAddZone("cave_mino");
	TryAddZone("village_exile");
	TryAddZone("temple_undersea");
```

## Scene

[`public void Init(Mode newMode)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Scene.cs#L309-L318)
```cs:line-numbers=309
		{
			EMono.pc.RecalculateFOV();
		}
		EMono.player.flags.OnEnterZone(); // [!code --]
		flock.SetSpawnType(EMono._zone.FlockType);
		if (!EMono.player.simulatingZone)
		{
			EMono.player.flags.OnEnterZone(); // [!code ++]
			if (EMono._zone == EMono.pc.homeZone)
			{
				EMono.pc.faith.Revelation("welcome");
```

## Trait

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Trait.cs#L1867-L1872)
```cs:line-numbers=1867
				if (num12 > 10)
				{
					Add("syringe_heaven", num12 / 5, 0);
					Add("1276", 1, 0); // [!code ++]
				}
				break;
			}
```

## +TraitSpit

::: details File Created
```cs
public class TraitSpit : TraitItem
{
	public override bool IsAnimeOn => owner.isOn;

	public override ToggleType ToggleType => ToggleType.Custom;

	public override bool CanUseFromInventory => false;

	public override bool OnUse(Chara c)
	{
		Toggle(!owner.isOn);
		return true;
	}
}
```

:::
## Zone

[`public Chara SpawnMob(Point pos = null, SpawnSetting setting = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Zone.cs#L2728-L2734)
```cs:line-numbers=2728
		biome = ((EClass.rnd(4) != 0) ? EClass.core.refs.biomes.Water : EClass.core.refs.biomes.Sand);
	}
	SpawnList spawnList = null;
	spawnList = ((setting.idSpawnList != null) ? SpawnList.Get(setting.idSpawnList) : ((EClass._zone is Zone_DungeonYeek && EClass.rnd(5) != 0) ? SpawnListChara.Get("dungeon_yeek", (SourceChara.Row r) => r.race == "yeek" && r.quality == 0) : ((EClass._zone is Zone_DungeonMino && EClass.rnd(5) != 0) ? SpawnListChara.Get("dungeon_mino", (SourceChara.Row r) => r.race == "minotaur" && r.quality == 0) : ((setting.hostility == SpawnHostility.Neutral || (setting.hostility != SpawnHostility.Enemy && Rand.Range(0f, 1f) < ChanceSpawnNeutral)) ? SpawnList.Get("c_neutral") : ((biome.spawn.chara.Count <= 0) ? SpawnList.Get(biome.name, "chara", new CharaFilter // [!code --]
	spawnList = ((setting.idSpawnList != null) ? SpawnList.Get(setting.idSpawnList) : ((EClass._zone is Zone_DungeonYeek && EClass.rnd(5) != 0) ? SpawnListChara.Get("dungeon_yeek", (SourceChara.Row r) => r.race == "yeek" && r.quality == 0) : ((EClass._zone is Zone_DungeonDragon && EClass.rnd(5) != 0) ? SpawnListChara.Get("dungeon_dragon", (SourceChara.Row r) => (r.race == "dragon" || r.race == "drake" || r.race == "wyvern" || r.race == "lizardman" || r.race == "dinosaur") && r.quality == 0) : ((EClass._zone is Zone_DungeonMino && EClass.rnd(5) != 0) ? SpawnListChara.Get("dungeon_mino", (SourceChara.Row r) => r.race == "minotaur" && r.quality == 0) : ((setting.hostility == SpawnHostility.Neutral || (setting.hostility != SpawnHostility.Enemy && Rand.Range(0f, 1f) < ChanceSpawnNeutral)) ? SpawnList.Get("c_neutral") : ((biome.spawn.chara.Count <= 0) ? SpawnList.Get(biome.name, "chara", new CharaFilter // [!code ++]
	{
		ShouldPass = delegate(SourceChara.Row s)
		{
```

[`public Chara SpawnMob(Point pos = null, SpawnSetting setting = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Zone.cs#L2738-L2744)
```cs:line-numbers=2738
			}
			return s.biome == biome.name || s.biome.IsEmpty();
		}
	}) : SpawnList.Get(biome.spawn.GetRandomCharaId())))))); // [!code --]
	}) : SpawnList.Get(biome.spawn.GetRandomCharaId()))))))); // [!code ++]
	int num = ((setting.dangerLv == -1) ? DangerLv : setting.dangerLv);
	CardBlueprint cardBlueprint = new CardBlueprint
	{
```

[`public Chara SpawnMob(Point pos = null, SpawnSetting setting = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ab15a5c7965fc29ec07bc55185eea1a6b1c9a60b/Elin/Zone.cs#L2755-L2760)
```cs:line-numbers=2755
		}
	}
	CardRow cardRow = (setting.id.IsEmpty() ? spawnList.Select(num2, setting.levelRange) : EClass.sources.cards.map[setting.id]);
	if (EClass.world.date.month == 12 && setting.rarity == Rarity.Random && EClass._zone.IsNefia && EClass._zone.isRandomSite && EClass.world.date.day >= 24 && EClass.world.date.day <= 26 && EClass.rnd(50 * (1 + EClass.player.flags.santa) * (1 + EClass.player.flags.santa)) == 0) // [!code ++]
	{ // [!code ++]
		cardRow = EClass.sources.cards.map["santa"]; // [!code ++]
		EClass.player.flags.santa++; // [!code ++]
	} // [!code ++]
	int num3 = ((setting.fixedLv == -1) ? cardRow.LV : setting.fixedLv);
	if (ScaleType == ZoneScaleType.Void)
	{
```

## +Zone_DungeonDragon

::: details File Created
```cs
public class Zone_DungeonDragon : Zone_DungeonUnfixed
{
	public override bool LockExit => base.lv <= -6;
}
```

:::
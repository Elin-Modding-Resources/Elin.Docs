---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 14 files modified. 4 new files created.
version: EA 23.275 Nightly
changes: AI_Sleep/ActEffect/Chara/CoreDebug/DramaCustomSequence/DramaManager/FoodEffect/ID_Achievement/InvOwner/Quest/+QuestWedding/Steam/TraitDrink/UI/UIHangIcon/+ZoneEventWedding/+ZoneInstanceWedding/+Zone_Wedding
---

# EA 23.275 Nightly

February 23, 2026

14 files modified. 4 new files created.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [Quest (1)](#quest)
```cs:no-line-numbers
public static Quest Create(string _id, string _idPerson = null, Chara c = null) // [!code --]
public static Quest Create(string _id, string _idPerson = null, Chara c = null, bool assignQuest = true) // [!code ++]
```
## AI_Sleep

[`public override void OnProgressComplete()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/AI_Sleep.cs#L20-L25)
```cs:line-numbers=20
		{
			owner._Move(base.target.pos);
		}
		owner.Sleep(base.target); // [!code --]
		owner.Sleep(base.target, base.target.pos.FindThing<TraitPillow>()?.owner as Thing); // [!code ++]
	}
}
```

## ActEffect

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/ActEffect.cs#L1326-L1332)
```cs:line-numbers=1326
					tc.elements.ModBase(64, -Mathf.Clamp(orCreateElement.vBase * power / 1000, 1, 5));
				}
			}
			cc.Say("lighten_curse", cc, tc); // [!code --]
			cc.Say("lighten_curse", tc); // [!code ++]
		}
		else
		{
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/ActEffect.cs#L1348-L1354)
```cs:line-numbers=1348
					tc.elements.ModBase(64, Mathf.Clamp(orCreateElement.vBase * power / 1000, 1, 5));
				}
			}
			cc.Say("lighten", cc, tc); // [!code --]
			cc.Say("lighten", tc); // [!code ++]
		}
		tc.c_weight = num5;
		tc.SetDirtyWeight();
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/ActEffect.cs#L1372-L1378)
```cs:line-numbers=1372
		}
		cc.PlaySound("mutation");
		cc.PlayEffect("identify");
		cc.Say("reconstruct", cc, tc); // [!code --]
		cc.Say("reconstruct", tc); // [!code ++]
		EClass.game.cards.uidNext += EClass.rnd(30);
		int num6 = Mathf.Max(tc.genLv, tc.LV, EClass.player.stats.deepest);
		CardBlueprint.Set(new CardBlueprint
```

## Chara

[`public override MoveResult _Move(Point newPoint, MoveType type = MoveType.Walk)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L2816-L2822)
```cs:line-numbers=2816
			}
			if (newPoint.cell.CanSuffocate())
			{
				AddCondition<ConSuffocation>((EClass.pc.Evalue(200) != 0) ? (2000 / (100 + EvalueMax(200, -5) * 10)) : 30, force: true); // [!code --]
				bool flag = HasElement(1252); // [!code ++]
				if (!flag) // [!code ++]
				{ // [!code ++]
					AddCondition<ConSuffocation>((Evalue(200) != 0) ? (2000 / (100 + EvalueMax(200, -5) * 10)) : 30, force: true); // [!code ++]
				} // [!code ++]
				int num4 = GetCondition<ConSuffocation>()?.GetPhase() ?? 0;
				if (num4 >= 2)
				{
```

[`public override MoveResult _Move(Point newPoint, MoveType type = MoveType.Walk)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L2824-L2830)
```cs:line-numbers=2824
				}
				if (!isDead && !HasElement(429))
				{
					ModExp(200, 1 + num4 * 12); // [!code --]
					ModExp(200, ((!flag) ? 1 : 10) + num4 * 12); // [!code ++]
				}
			}
			EClass.player.regionMoveWarned = false;
```

[`public override MoveResult _Move(Point newPoint, MoveType type = MoveType.Walk)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L2855-L2866)
```cs:line-numbers=2855
	Chara chara = ((ride == null) ? this : ride);
	if (!EClass._zone.IsRegion || chara.IsPC)
	{
		bool flag = (chara.isConfused && EClass.rnd(2) == 0) || (chara.isDrunk && EClass.rnd(IsIdle ? 2 : 8) == 0 && !chara.HasElement(1215)); // [!code --]
		bool flag2 = (chara.isConfused && EClass.rnd(2) == 0) || (chara.isDrunk && EClass.rnd(IsIdle ? 2 : 8) == 0 && !chara.HasElement(1215)); // [!code ++]
		if (host != null && host.ride == this && ((host.isConfused && EClass.rnd(2) == 0) || (host.isDrunk && EClass.rnd(IsIdle ? 2 : 8) == 0 && !host.HasElement(1215))))
		{
			flag = true; // [!code --]
			flag2 = true; // [!code ++]
		}
		if (flag && newPoint.Distance(pos) <= 1) // [!code --]
		if (flag2 && newPoint.Distance(pos) <= 1) // [!code ++]
		{
			Point randomNeighbor = pos.GetRandomNeighbor();
			if (CanMoveTo(randomNeighbor, allowDestroyPath: false))
```

[`public override MoveResult _Move(Point newPoint, MoveType type = MoveType.Walk)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L2932-L2953)
```cs:line-numbers=2932
	}
	Cell cell = newPoint.cell;
	Cell cell2 = pos.cell;
	bool flag2 = cell.HasLiquid && !IsLevitating; // [!code --]
	bool flag3 = cell.HasLiquid && !IsLevitating; // [!code ++]
	bool hasBridge = cell.HasBridge;
	bool hasRamp = cell.HasRamp;
	bool flag3 = EClass._zone.IsSnowCovered && !cell.HasRoof && !cell.isClearSnow; // [!code --]
	bool flag4 = EClass._zone.IsSnowCovered && !cell.HasRoof && !cell.isClearSnow; // [!code ++]
	TileRow tileRow = (hasRamp ? ((TileRow)cell.sourceBlock) : ((TileRow)(hasBridge ? cell.sourceBridge : cell.sourceFloor)));
	SourceMaterial.Row row = (hasRamp ? cell.matBlock : (hasBridge ? cell.matBridge : cell.matFloor));
	bool flag4 = cell.IsTopWater && !cell.isFloating; // [!code --]
	bool flag5 = cell.IsTopWater && !cell.isFloating; // [!code ++]
	if (!EClass._zone.IsRegion)
	{
		if (cell.hasDoorBoat)
		{
			tileRow = FLOOR.sourceWood;
			row = MATERIAL.sourceOak;
			flag4 = false; // [!code --]
			flag5 = false; // [!code ++]
		}
		else if (flag3 && !tileRow.ignoreSnow) // [!code --]
		else if (flag4 && !tileRow.ignoreSnow) // [!code ++]
		{
			if (tileRow.tileType.IsWater)
			{
```

[`public override MoveResult _Move(Point newPoint, MoveType type = MoveType.Walk)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L2959-L2965)
```cs:line-numbers=2959
				tileRow = FLOOR.sourceSnow;
				row = MATERIAL.sourceSnow;
			}
			flag4 = false; // [!code --]
			flag5 = false; // [!code ++]
		}
	}
	if ((pos.sourceFloor.isBeach || cell2.IsSnowTile) && !pos.HasObj)
```

[`public override MoveResult _Move(Point newPoint, MoveType type = MoveType.Walk)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L2968-L2974)
```cs:line-numbers=2968
	}
	if (isSynced)
	{
		string text = ((flag2 || flag4) ? "water" : tileRow.soundFoot.IsEmpty(row.soundFoot.IsEmpty("default"))); // [!code --]
		string text = ((flag3 || flag5) ? "water" : tileRow.soundFoot.IsEmpty(row.soundFoot.IsEmpty("default"))); // [!code ++]
		if (cell.obj != 0 && cell.sourceObj.tileType.IsPlayFootSound && !cell.matObj.soundFoot.IsEmpty())
		{
			text = cell.matObj.soundFoot;
```

[`public override MoveResult _Move(Point newPoint, MoveType type = MoveType.Walk)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L2988-L3008)
```cs:line-numbers=2988
			SoundManager.altLastData = IsPC;
			PlaySound("Footstep/" + text, IsPC ? 1f : 0.9f);
		}
		if (!flag4) // [!code --]
		if (!flag5) // [!code ++]
		{
			Scene scene = EClass.scene;
			PCOrbit pcOrbit = EClass.screen.pcOrbit;
			bool flag5 = scene.actionMode.gameSpeed > 1f; // [!code --]
			bool flag6 = scene.actionMode.gameSpeed > 1f; // [!code ++]
			scene.psFoot.transform.position = renderer.position + pcOrbit.footPos;
			scene.psFoot.startColor = row.matColor;
			scene.psFoot.Emit(pcOrbit.emitFoot * ((!flag5) ? 1 : 2)); // [!code --]
			if (flag5 && IsPC) // [!code --]
			scene.psFoot.Emit(pcOrbit.emitFoot * ((!flag6) ? 1 : 2)); // [!code ++]
			if (flag6 && IsPC) // [!code ++]
			{
				scene.psSmoke.transform.position = renderer.position + pcOrbit.smokePos;
				scene.psSmoke.Emit(pcOrbit.emitSmoke);
			}
		}
		if (flag2 || flag4) // [!code --]
		if (flag3 || flag5) // [!code ++]
		{
			Effect.Get("ripple").Play(newPoint);
		}
```

[`public override MoveResult _Move(Point newPoint, MoveType type = MoveType.Walk)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L3183-L3192)
```cs:line-numbers=3183
			EClass.pc.SetPCCState(PCCState.ShoesOff);
		}
	}
	bool flag6 = flag4 || EClass._zone.IsUnderwater; // [!code --]
	if (wasInWater != flag6) // [!code --]
	bool flag7 = flag5 || EClass._zone.IsUnderwater; // [!code ++]
	if (wasInWater != flag7) // [!code ++]
	{
		wasInWater = flag6; // [!code --]
		wasInWater = flag7; // [!code ++]
		RefreshSpeed();
	}
	hasMovedThisTurn = true;
```

[`public override void Tick()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L4220-L4226)
```cs:line-numbers=4220
			hygiene.Mod(2);
		}
	}
	if (IsPC && !EClass._zone.IsRegion && cell.CanSuffocate() && !EClass.debug.godMode) // [!code --]
	if (IsPC && !EClass._zone.IsRegion && cell.CanSuffocate() && !EClass.debug.godMode && !HasElement(1252)) // [!code ++]
	{
		AddCondition<ConSuffocation>(800 / (100 + EvalueMax(200, -5) * 10), force: true);
	}
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L5873-L5878)
```cs:line-numbers=5873
	int i = 1;
	int num4 = 0;
	bool flag = a.IsTargetHostileParty();
	bool flag2 = ability.Has(a.id); // [!code ++]
	if (IsPC && HasCondition<StanceManaCost>())
	{
		num4 = Evalue(1657);
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L5900-L5906)
```cs:line-numbers=5900
			});
		}
	}
	if (a is Spell && IsPC && a.vPotential < i) // [!code --]
	if (a is Spell && IsPC && a.vPotential < i && !flag2) // [!code ++]
	{
		i = 1;
		_pts.Clear();
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L5962-L5968)
```cs:line-numbers=5962
	{
		num3 = 1 + Evalue(1648);
	}
	if (IsPC && cost.cost > 0 && a.Value == 0 && !ability.Has(a.id)) // [!code --]
	if (IsPC && cost.cost > 0 && a.Value == 0 && !flag2) // [!code ++]
	{
		Msg.SayNothingHappen();
		return false;
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L5977-L5983)
```cs:line-numbers=5977
		if (IsPC)
		{
			_ = (i + 1) / 2;
			bool flag2 = ability.Has(a.id); // [!code --]
			if (a.vPotential < i && !flag2)
			{
				Msg.Say("noSpellStock");
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Chara.cs#L6107-L6112)
```cs:line-numbers=6107
	}
	if (flag3 && !isDead)
	{
		if (IsPC && flag2 && a.vBase == 0 && a.PotentialAsStock) // [!code ++]
		{ // [!code ++]
			elements.ModBase(a.id, 1); // [!code ++]
		} // [!code ++]
		if (cost.cost > 0 && a.source.lvFactor > 0)
		{
			ModExp(a.id, spellExp);
```

## CoreDebug

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/CoreDebug.cs#L975-L1013)
```cs:line-numbers=975
	}
	if (Input.GetKeyDown(KeyCode.F3))
	{
		for (int i = 0; i < 10; i++) // [!code --]
		{ // [!code --]
			Thing thing = ThingGen.Create("egg_fertilized"); // [!code --]
			thing.TryMakeRandomItem(40); // [!code --]
			thing.SetEncLv(200); // [!code --]
			EClass.pc.Pick(thing); // [!code --]
		} // [!code --]
		foreach (Chara deadChara in EClass._map.deadCharas) // [!code --]
		{ // [!code --]
			Debug.Log(deadChara); // [!code --]
		} // [!code --]
		EClass.core.steam.CheckUpdate(); // [!code --]
		EClass.player.flags.loytelMartLv++; // [!code --]
		Msg.Say("loytelmart:" + EClass.player.flags.loytelMartLv); // [!code --]
		Guild.Fighter.relation.rank = 20; // [!code --]
		Guild.Mage.relation.rank = 20; // [!code --]
		Guild.Thief.relation.rank = 20; // [!code --]
		Guild.Merchant.relation.rank = 20; // [!code --]
		if (EClass.Branch != null) // [!code --]
		{ // [!code --]
			EClass.Branch.ModExp(EClass.Branch.GetNextExp()); // [!code --]
		} // [!code --]
		foreach (Chara item in EClass._map.charas.ToList()) // [!code --]
		{ // [!code --]
			item.AddExp(item.ExpToNext); // [!code --]
			item.Vomit(); // [!code --]
		} // [!code --]
		EClass.pc.PlayEffect("boost"); // [!code --]
		EClass.pc.PlaySound("boost"); // [!code --]
		EClass.pc.elements.SetBase(306, 100); // [!code --]
		EClass.pc.elements.SetBase(85, 100); // [!code --]
		EClass.pc.feat += 10; // [!code --]
		EClass.player.totalFeat += 10; // [!code --]
		EClass.ui.Say("dawedadwwdaadwawdawd"); // [!code ++]
		EClass.ui.Say("fsefsefsefesf", EClass.core.refs.spriteNoIng); // [!code ++]
		return;
	}
	if (Input.GetKeyDown(KeyCode.F4))
```

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/CoreDebug.cs#L1079-L1085)
```cs:line-numbers=1079
		if (Input.GetKey(KeyCode.F9))
		{
			EClass.scene.paused = false;
			for (int j = 0; j < advanceMin; j++) // [!code --]
			for (int i = 0; i < advanceMin; i++) // [!code ++]
			{
				EClass.game.updater.FixedUpdate();
			}
```

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/CoreDebug.cs#L1160-L1168)
```cs:line-numbers=1160
	{
		if (Input.GetMouseButtonDown(0))
		{
			foreach (Card item2 in list) // [!code --]
			foreach (Card item in list) // [!code ++]
			{
				Debug.Log(item2.Name + "/" + item2.dir + "/" + item2.flipX + "/" + item2.angle); // [!code --]
				Debug.Log(item.Name + "/" + item.dir + "/" + item.flipX + "/" + item.angle); // [!code ++]
			}
		}
		if (Input.GetMouseButtonDown(1))
```

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/CoreDebug.cs#L1195-L1203)
```cs:line-numbers=1195
		}
		if (key)
		{
			foreach (Card item3 in EClass._map.Roaming.all) // [!code --]
			foreach (Card item2 in EClass._map.Roaming.all) // [!code ++]
			{
				EClass._zone.RemoveCard(item3); // [!code --]
				EClass._zone.RemoveCard(item2); // [!code ++]
			}
		}
		else if (hitPoint.detail != null)
```

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/CoreDebug.cs#L1219-L1226)
```cs:line-numbers=1219
	{
		for (int num4 = hitPoint.detail.things.Count - 1; num4 >= 0; num4--)
		{
			Thing thing2 = hitPoint.detail.things[num4]; // [!code --]
			Debug.Log(thing2.id + "/" + thing2.Pref.height + "/" + thing2.trait?.ToString() + "/" + thing2.source.tileType.CanStack + "/" + thing2.source.tileType?.ToString() + "/" + thing2.isSynced + "/" + RenderObject.syncList.Contains(thing2.renderer)); // [!code --]
			Thing thing = hitPoint.detail.things[num4]; // [!code ++]
			Debug.Log(thing.id + "/" + thing.Pref.height + "/" + thing.trait?.ToString() + "/" + thing.source.tileType.CanStack + "/" + thing.source.tileType?.ToString() + "/" + thing.isSynced + "/" + RenderObject.syncList.Contains(thing.renderer)); // [!code ++]
		}
	}
	if (!Application.isEditor)
```

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/CoreDebug.cs#L1276-L1284)
```cs:line-numbers=1276
		{
			break;
		}
		foreach (Card item4 in hitPoint.ListCards()) // [!code --]
		foreach (Card item3 in hitPoint.ListCards()) // [!code ++]
		{
			item4.renderer.PlayAnime(num5.ToEnum<AnimeID>()); // [!code --]
			item3.renderer.PlayAnime(num5.ToEnum<AnimeID>()); // [!code ++]
		}
		Debug.Log(num5.ToEnum<AnimeID>());
		break;
```

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/CoreDebug.cs#L1296-L1335)
```cs:line-numbers=1296
	case DebugHotkey.Item:
		if (Input.GetKeyDown(KeyCode.Alpha1))
		{
			Thing thing3 = ThingGen.Create("stairsDown_cave"); // [!code --]
			Thing thing2 = ThingGen.Create("stairsDown_cave"); // [!code ++]
			EClass._zone.AddCard(thing2, EClass.pc.pos); // [!code ++]
			thing2.SetPlaceState(PlaceState.installed); // [!code ++]
		} // [!code ++]
		if (Input.GetKeyDown(KeyCode.Alpha2)) // [!code ++]
		{ // [!code ++]
			Thing thing3 = ThingGen.Create("stairs"); // [!code ++]
			EClass._zone.AddCard(thing3, EClass.pc.pos);
			thing3.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha2)) // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha3)) // [!code ++]
		{
			Thing thing4 = ThingGen.Create("stairs"); // [!code --]
			EClass._zone.AddCard(thing4, EClass.pc.pos); // [!code --]
			Thing thing4 = ThingGen.Create("sign"); // [!code ++]
			EClass._zone.AddCard(thing4, hitPoint); // [!code ++]
			thing4.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha3)) // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha4)) // [!code ++]
		{
			Thing thing5 = ThingGen.Create("sign"); // [!code --]
			Thing thing5 = ThingGen.Create("sign2"); // [!code ++]
			EClass._zone.AddCard(thing5, hitPoint);
			thing5.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha4)) // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha5)) // [!code ++]
		{
			Thing thing6 = ThingGen.Create("sign2"); // [!code --]
			Thing thing6 = ThingGen.Create("well"); // [!code ++]
			EClass._zone.AddCard(thing6, hitPoint);
			thing6.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha5)) // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha6)) // [!code ++]
		{
			Thing thing7 = ThingGen.Create("well"); // [!code --]
			Thing thing7 = ThingGen.Create("altar"); // [!code ++]
			EClass._zone.AddCard(thing7, hitPoint);
			thing7.SetPlaceState(PlaceState.installed);
		}
		if (Input.GetKeyDown(KeyCode.Alpha6)) // [!code --]
		{ // [!code --]
			Thing thing8 = ThingGen.Create("altar"); // [!code --]
			EClass._zone.AddCard(thing8, hitPoint); // [!code --]
			thing8.SetPlaceState(PlaceState.installed); // [!code --]
		} // [!code --]
		if (Input.GetKeyDown(KeyCode.Alpha7))
		{
			Thing t = ThingGen.Create("torch");
```

## DramaCustomSequence

[`public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/DramaCustomSequence.cs#L311-L316)
```cs:line-numbers=311
	}
	Step("_factionOther");
	Talk("what", StepDefault);
	if (!c.IsMarried) // [!code ++]
	{ // [!code ++]
		foreach (Thing item5 in EClass.pc.things.List((Thing a) => !a.c_isImportant && !a.isEquipped && a.c_uidAttune == 0 && (a.id == "amulet_engagement" || a.id == "ring_engagement"))) // [!code ++]
		{ // [!code ++]
			Thing _t3 = item5; // [!code ++]
			Choice("daMarry".lang(item5.Name), "_marry").SetOnClick(delegate // [!code ++]
			{ // [!code ++]
				destThing = _t3; // [!code ++]
			}); // [!code ++]
		} // [!code ++]
	} // [!code ++]
	if (c.IsMarried && EClass.debug.enable) // [!code ++]
	{ // [!code ++]
		Choice("daWed", "_wed"); // [!code ++]
	} // [!code ++]
	if (c.trait is TraitLoytel)
	{
		QuestDebt questDebt = EClass.game.quests.Get<QuestDebt>();
```

[`public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/DramaCustomSequence.cs#L334-L350)
```cs:line-numbers=334
	{
		Choice("disableMove", "_disableMove");
	}
	if (!c.IsMarried) // [!code --]
	{ // [!code --]
		foreach (Thing item5 in EClass.pc.things.List((Thing a) => !a.c_isImportant && !a.isEquipped && a.c_uidAttune == 0 && (a.id == "amulet_engagement" || a.id == "ring_engagement"))) // [!code --]
		{ // [!code --]
			Thing _t3 = item5; // [!code --]
			Choice("daMarry".lang(item5.Name), "_marry").SetOnClick(delegate // [!code --]
			{ // [!code --]
				destThing = _t3; // [!code --]
			}); // [!code --]
		} // [!code --]
	} // [!code --]
	Choice((c.GetInt(123) == 0) ? "daSleepBeside" : "daSleepBeside2", "_sleepBeside");
	if (c.HasElement(1225))
	{
```

[`public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/DramaCustomSequence.cs#L533-L540)
```cs:line-numbers=533
	_Talk("tg", GetTopic(c, "questAccept"));
	Method(delegate
	{
		Zone z2 = c.quest.CreateInstanceZone(c); // [!code --]
		EClass.pc.MoveZone(z2, ZoneTransition.EnterState.Center); // [!code --]
		Zone z3 = c.quest.CreateInstanceZone(c); // [!code ++]
		EClass.pc.MoveZone(z3, ZoneTransition.EnterState.Center); // [!code ++]
	}, null, StepEnd);
	Step("_questFull");
	_Talk("tg", GetTopic(c, "questFull"), text);
```

[`public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/DramaCustomSequence.cs#L611-L616)
```cs:line-numbers=611
		});
	});
	End();
	Step("_wed"); // [!code ++]
	Method(delegate // [!code ++]
	{ // [!code ++]
		TempTalkTopic(c.IsMarried ? "tail4" : (bird + "1"), null); // [!code ++]
		Choice("yes2", delegate // [!code ++]
		{ // [!code ++]
			TempTalkTopic(bird + "2", "_wed2"); // [!code ++]
		}); // [!code ++]
		Choice("no2", StepDefault, cancel: true).SetOnClick(RumorChill); // [!code ++]
	}); // [!code ++]
	Step("_wed2"); // [!code ++]
	Method(delegate // [!code ++]
	{ // [!code ++]
		Quest quest = Quest.Create("wedding", null, c, assignQuest: false); // [!code ++]
		EClass.game.quests.Start(quest); // [!code ++]
		Zone z2 = quest.CreateInstanceZone(c); // [!code ++]
		EClass.pc.MoveZone(z2, ZoneTransition.EnterState.Center); // [!code ++]
		LayerDrama.Activate("_adv", "general", "wedding", c); // [!code ++]
	}); // [!code ++]
	End(); // [!code ++]
	Step("_disableLoyal");
	Method(delegate
	{
```

## DramaManager

[`public void ParseLine(Dictionary<string, string> item)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/DramaManager.cs#L983-L988)
```cs:line-numbers=983
			});
		});
		break;
	case "moveZone": // [!code ++]
		AddEvent(delegate // [!code ++]
		{ // [!code ++]
			EMono.player.MoveZone(EMono.pc.currentZone); // [!code ++]
		}); // [!code ++]
		break; // [!code ++]
	case "save":
		AddEvent(delegate
		{
```

## FoodEffect

[`using System.Collections.Generic;`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/FoodEffect.cs#L1-L4)
```cs:line-numbers=1
using System.Collections.Generic;
using System.Linq; // [!code ++]
using UnityEngine;

public class FoodEffect : EClass
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/FoodEffect.cs#L436-L452)
```cs:line-numbers=436
	case DNA.Type.Inferior:
		if (genes != null)
		{
			RemoveOldestDNA(); // [!code --]
			RemoveDNA(fromOldest: false); // [!code ++]
		}
		return;
	case DNA.Type.Brain:
		if (genes != null) // [!code ++]
		{ // [!code ++]
			genes.items.Shuffle(); // [!code ++]
			Msg.Say("reconstruct", c2); // [!code ++]
			c2.Say("food_mind", c2); // [!code ++]
			c2.AddCondition<ConHallucination>(); // [!code ++]
		} // [!code ++]
		return;
	}
	if (excess > 0)
	{
		while (excess > 0 && genes != null && genes.items.Count != 0)
		{
			RemoveOldestDNA(); // [!code --]
			RemoveDNA(fromOldest: true); // [!code ++]
		}
	}
	c_DNA.Apply(c2);
```

[`public static void Proc(Chara c, Thing food, bool consume = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/FoodEffect.cs#L454-L462)
```cs:line-numbers=454
	c2.PlaySound("ding_potential");
	SE.Play("mutation");
	c2.PlayEffect("identify");
	void RemoveOldestDNA() // [!code --]
	void RemoveDNA(bool fromOldest) // [!code ++]
	{
		DNA dNA = genes.items[0]; // [!code --]
		DNA dNA = (fromOldest ? genes.items[0] : genes.items.Last()); // [!code ++]
		CharaGenes.Remove(c2, dNA);
		excess -= dNA.slot;
	}
```

## ID_Achievement

[`public enum ID_Achievement`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/ID_Achievement.cs#L6-L10)
```cs:line-numbers=6
	FIAMA_CHEST,
	NERUN,
	PUTIT,
	ASHLAND_PIE // [!code --]
	ASHLAND_PIE, // [!code ++]
	JURE_WATER, // [!code ++]
	WINDOW_CHARM // [!code ++]
}
```

## InvOwner

[`public bool Process(bool startTransaction = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/InvOwner.cs#L251-L257)
```cs:line-numbers=251
			destInv.owner.Chara.Talk("tooHeavy");
			return false;
		}
		if (thing2.c_isImportant && destInv != inv && !destInv.owner.IsPC && destInv.DenyImportant) // [!code --]
		if (thing2.c_isImportant && destInv != inv && !destInv.owner.IsPC && destInv.DenyImportant && thing2.c_uidAttune != destInv.owner.uid) // [!code ++]
		{
			Msg.Say("markedImportant");
			return false;
```

## Quest

[`public virtual string RefDrama3`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Quest.cs#L238-L244)
```cs:line-numbers=238

	public virtual string NameDeliver => "";

	public static Quest Create(string _id, string _idPerson = null, Chara c = null) // [!code --]
	public static Quest Create(string _id, string _idPerson = null, Chara c = null, bool assignQuest = true) // [!code ++]
	{
		Quest quest = ClassCache.Create<Quest>(EClass.sources.quests.map[_id].type.IsEmpty("Quest"), "Elin");
		quest.id = _id;
```

[`public static Quest Create(string _id, string _idPerson = null, Chara c = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Quest.cs#L250-L256)
```cs:line-numbers=250
	}
	if (c != null)
	{
		quest.SetClient(c); // [!code --]
		quest.SetClient(c, assignQuest); // [!code ++]
	}
	quest.Init();
	return quest;
```

## +QuestWedding

::: details File Created
```cs
using Newtonsoft.Json;

public class QuestWedding : QuestInstance
{
	[JsonProperty]
	public int score;

	[JsonProperty]
	public int destScore = 10;

	[JsonProperty]
	public int sumMoney;

	public override DifficultyType difficultyType => DifficultyType.Music;

	public override string IdZone => "instance_wedding";

	public override string RewardSuffix => "Music";

	public override string RefDrama2 => destScore.ToString() ?? "";

	public override int KarmaOnFail => 0;

	public override ZoneEventQuest CreateEvent()
	{
		return new ZoneEventWedding();
	}

	public override ZoneInstanceRandomQuest CreateInstance()
	{
		return new ZoneInstanceWedding();
	}

	public override string GetTextProgress()
	{
		return "progressMusic".lang(score.ToString() ?? "", destScore.ToString() ?? "");
	}

	public override int GetRewardPlat(int money)
	{
		return difficulty + EClass.rnd(2);
	}

	public override void OnInit()
	{
		destScore = difficulty * 150;
		destScore += EClass.rnd(destScore / 5);
	}
}
```

:::
## Steam

[`using System;`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Steam.cs#L1-L3)
```cs:line-numbers=1
using System; // [!code ++]
using System.IO;
using System.Linq;
using HeathenEngineering.SteamworksIntegration;
```

[`public static bool HasDLC(ID_DLC id)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/Steam.cs#L49-L68)
```cs:line-numbers=49

	public static void GetAchievement(ID_Achievement id)
	{
		foreach (AchievementObject achievement in Instance.steamworks.settings.achievements) // [!code --]
		try // [!code ++]
		{
			if (achievement.Id == id.ToString()) // [!code --]
			foreach (AchievementObject achievement in Instance.steamworks.settings.achievements) // [!code ++]
			{
				if (!achievement.IsAchieved) // [!code --]
				if (achievement.Id == id.ToString()) // [!code ++]
				{
					achievement.Unlock(); // [!code --]
					EClass.ui.Say("sys_acv".lang(achievement.Name), Resources.Load<Sprite>("Media/Graphics/Icon/Achievement/acv_" + id)); // [!code --]
					SE.Play("achievement"); // [!code --]
					achievement.Store(); // [!code --]
					if (achievement.IsAchieved) // [!code ++]
					{ // [!code ++]
						return; // [!code ++]
					} // [!code ++]
					try // [!code ++]
					{ // [!code ++]
						achievement.Unlock(); // [!code ++]
						EClass.ui.Say("sys_acv".lang(achievement.Name), Resources.Load<Sprite>("Media/Graphics/Icon/Achievement/acv_" + id)); // [!code ++]
						SE.Play("achievement"); // [!code ++]
						achievement.Store(); // [!code ++]
						return; // [!code ++]
					} // [!code ++]
					catch (Exception ex) // [!code ++]
					{ // [!code ++]
						Debug.LogError("Error Achievement 1:" + ex); // [!code ++]
						return; // [!code ++]
					} // [!code ++]
				}
				return; // [!code --]
			}
		}
		catch (Exception ex2) // [!code ++]
		{ // [!code ++]
			Debug.LogError("Error Achievement 2:" + ex2); // [!code ++]
		} // [!code ++]
		Debug.Log("Achievement not found:" + id);
	}

```

## TraitDrink

[`public override void OnDrink(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/TraitDrink.cs#L168-L173)
```cs:line-numbers=168
		c.RemoveCondition<ConAwakening>();
		return;
	}
	if (owner.id == "water_jure") // [!code ++]
	{ // [!code ++]
		Steam.GetAchievement(ID_Achievement.JURE_WATER); // [!code ++]
	} // [!code ++]
	ActEffect.Proc(IdEffect, Power, owner.blessedState, c, null, new ActRef
	{
		n1 = N1,
```

## UI

[`public UIContextMenu CreateContextMenuInteraction()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/UI.cs#L546-L552)
```cs:line-numbers=546

	public void Say(string text, Sprite sprite = null)
	{
		popSystem.PopText(text.lang(), sprite, "PopAchievement"); // [!code --]
		popSystem.PopText(text.lang(), sprite, sprite ? "PopUIAchievement" : "PopUI"); // [!code ++]
		Debug.Log(text);
	}

```

## UIHangIcon

[``](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/UIHangIcon.cs#L3-L8)
```cs:line-numbers=3

public class UIHangIcon : EMono
{
	public static int clicked; // [!code ++]
 // [!code ++]
	public Image image;

	public UIButton button;
```

[`private void Awake()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/fc0fa910cc4c275f6111dde5fbbe96c219ac8db4/Elin/UIHangIcon.cs#L33-L38)
```cs:line-numbers=33

	public void OnClickCorner()
	{
		clicked++; // [!code ++]
		Debug.Log(clicked); // [!code ++]
		if (clicked >= 50) // [!code ++]
		{ // [!code ++]
			Steam.GetAchievement(ID_Achievement.WINDOW_CHARM); // [!code ++]
		} // [!code ++]
		SE.Play("Ambience/Random/windchime1");
	}

```

## +ZoneEventWedding

::: details File Created
```cs
public class ZoneEventWedding : ZoneEventQuest
{
	public QuestWedding questMusic => base.quest as QuestWedding;

	public override void OnVisit()
	{
	}
}
```

:::
## +ZoneInstanceWedding

::: details File Created
```cs
public class ZoneInstanceWedding : ZoneInstanceRandomQuest
{
}
```

:::
## +Zone_Wedding

::: details File Created
```cs
public class Zone_Wedding : Zone_Civilized
{
	public override bool UseFog => false;

	public override bool RevealRoom => true;
}
```

:::
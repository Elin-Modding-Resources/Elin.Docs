---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 1 file modified.
version: +EA 23.186 Nyaightly - Plugin.BaseCore
changes: IO
---

# +EA 23.186 Nyaightly - Plugin.BaseCore

August 22, 2025

1 file modified.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [IO (1)](#io)
```cs:no-line-numbers
public static void WriteLZ4(string _path, byte[] _bytes) // [!code --]
public static void WriteLZ4(string _path, byte[] _bytes, Compression compression = Compression.None) // [!code ++]
```
## IO

[`public static T LoadStreamJson<T>(MemoryStream stream, JsonSerializerSettings se`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/a954c0c75f67c4ff79f338f88d043154e1d12682/Elin/Plugins.basecore/IO.cs#L131-L144)
```cs:line-numbers=131
		return JsonConvert.DeserializeObject<T>(value, setting ?? jsReadGeneral);
	}

	public static void WriteLZ4(string _path, byte[] _bytes) // [!code --]
	public static void WriteLZ4(string _path, byte[] _bytes, Compression compression = Compression.None) // [!code ++]
	{
		byte[] bytes = ((compression == Compression.LZ4) ? LZ4Codec.Wrap(_bytes, 0, _bytes.Length) : _bytes); // [!code ++]
		for (int i = 0; i < 5; i++)
		{
			string path = _path + ((i == 0) ? "" : (".b" + i));
			try
			{
				File.WriteAllBytes(path, _bytes); // [!code --]
				File.WriteAllBytes(path, bytes); // [!code ++]
				break;
			}
			catch (Exception message)
```

[`public static byte[] ReadLZ4(string _path, int size, Compression compression)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/a954c0c75f67c4ff79f338f88d043154e1d12682/Elin/Plugins.basecore/IO.cs#L159-L168)
```cs:line-numbers=159
			continue;
		}
		byte[] array = File.ReadAllBytes(text);
		if (array.Length == size) // [!code --]
		{ // [!code --]
			return array; // [!code --]
		} // [!code --]
		if (compression == Compression.LZ4)
		{
			try
```

[`public static byte[] ReadLZ4(string _path, int size, Compression compression)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/a954c0c75f67c4ff79f338f88d043154e1d12682/Elin/Plugins.basecore/IO.cs#L174-L179)
```cs:line-numbers=174
				Debug.Log(message);
			}
		}
		if (array.Length == size) // [!code ++]
		{ // [!code ++]
			return array; // [!code ++]
		} // [!code ++]
	}
	return null;
}
```

[`public static bool IsCompressed(string path)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/a954c0c75f67c4ff79f338f88d043154e1d12682/Elin/Plugins.basecore/IO.cs#L208-L214)
```cs:line-numbers=208

	public static void Compress(string path, string text)
	{
		File.WriteAllText(path, text); // [!code --]
		Debug.Log("Compressing: " + path); // [!code ++]
		using FileStream innerStream = new FileStream(path, FileMode.Create); // [!code ++]
		using LZ4Stream stream = new LZ4Stream(innerStream, LZ4StreamMode.Compress); // [!code ++]
		using StreamWriter streamWriter = new StreamWriter(stream); // [!code ++]
		streamWriter.Write(text); // [!code ++]
	}

	public static string Decompress(string path)
```

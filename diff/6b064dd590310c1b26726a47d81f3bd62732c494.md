---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 6 files modified. 1 new file created.
version: EA 23.273 Nyaightly Patch 1
changes: AI_Fuck/ActEffect/AttackProcess/Chara/DramaCustomSequence/Trait/+Zone_OldChurch
---

# EA 23.273 Nyaightly Patch 1

February 22, 2026

6 files modified. 1 new file created.

## Important Changes

**None.**
## AI_Fuck

[`public enum Variation`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/AI_Fuck.cs#L38-L43)
```cs:line-numbers=38

	public virtual FuckType Type => FuckType.fuck;

	public bool IsSacredLovemaking // [!code ++]
	{ // [!code ++]
		get // [!code ++]
		{ // [!code ++]
			if (variation == Variation.Normal && owner != null && target != null && target != owner && (owner == EClass.pc || owner.IsMarried)) // [!code ++]
			{ // [!code ++]
				if (target != EClass.pc) // [!code ++]
				{ // [!code ++]
					return target.IsMarried; // [!code ++]
				} // [!code ++]
				return true; // [!code ++]
			} // [!code ++]
			return false; // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	public override bool PushChara => false;

	public override bool IsAutoTurn => true;
```

[`public void Finish()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/AI_Fuck.cs#L296-L358)
```cs:line-numbers=296
		}
		else if (variation != Variation.NTR && variation != Variation.Bloodsuck && variation != Variation.Slime && chara != EClass.pc)
		{
			int num3 = CalcMoney.Whore(chara2, chara); // [!code --]
			Chara chara4 = chara; // [!code --]
			Chara chara5 = chara2; // [!code --]
			if (variation == Variation.Bitch) // [!code --]
			{ // [!code --]
				chara = chara5; // [!code --]
				chara2 = chara4; // [!code --]
			} // [!code --]
			Debug.Log("buyer:" + chara.Name + " seller:" + chara2.Name + " money:" + num3); // [!code --]
			if (!chara.IsPC) // [!code --]
			{ // [!code --]
				chara.ModCurrency(EClass.rndHalf(num3)); // [!code --]
			} // [!code --]
			if (!chara2.IsPC && chara.GetCurrency() < num3 && EClass.rnd(2) == 0) // [!code --]
			if (IsSacredLovemaking) // [!code ++]
			{
				num3 = chara.GetCurrency(); // [!code --]
			} // [!code --]
			Debug.Log("money:" + num3 + " buyer:" + chara.GetCurrency()); // [!code --]
			if (chara.GetCurrency() >= num3) // [!code --]
			{ // [!code --]
				chara.Talk("tail_pay"); // [!code --]
				flag = true; // [!code ++]
			}
			else
			{
				chara.Talk("tail_nomoney"); // [!code --]
				num3 = chara.GetCurrency(); // [!code --]
				chara2.Say("angry", chara2); // [!code --]
				chara2.Talk("angry"); // [!code --]
				flag = (sell ? true : false); // [!code --]
				if (EClass.rnd(chara.IsPC ? 2 : 20) == 0) // [!code --]
				int num3 = CalcMoney.Whore(chara2, chara); // [!code ++]
				Chara chara4 = chara; // [!code ++]
				Chara chara5 = chara2; // [!code ++]
				if (variation == Variation.Bitch) // [!code ++]
				{
					flag3 = true; // [!code --]
					chara = chara5; // [!code ++]
					chara2 = chara4; // [!code ++]
				}
			} // [!code --]
			chara.ModCurrency(-num3); // [!code --]
			if (chara2 == EClass.pc) // [!code --]
			{ // [!code --]
				if (num3 > 0) // [!code --]
				Debug.Log("buyer:" + chara.Name + " seller:" + chara2.Name + " money:" + num3); // [!code ++]
				if (!chara.IsPC) // [!code ++]
				{
					EClass.player.DropReward(ThingGen.Create("money").SetNum(num3)); // [!code --]
					EClass.player.ModKarma(-1); // [!code --]
					chara.ModCurrency(EClass.rndHalf(num3)); // [!code ++]
				}
			} // [!code --]
			else // [!code --]
			{ // [!code --]
				int num4 = (chara2.CHA * 10 + 100) / ((chara2.IsPCFaction && chara2.memberType == FactionMemberType.Default) ? 1 : 10); // [!code --]
				if (chara2.GetCurrency() - num4 > 0) // [!code --]
				if (!chara2.IsPC && chara.GetCurrency() < num3 && EClass.rnd(2) == 0) // [!code ++]
				{ // [!code ++]
					num3 = chara.GetCurrency(); // [!code ++]
				} // [!code ++]
				Debug.Log("money:" + num3 + " buyer:" + chara.GetCurrency()); // [!code ++]
				if (chara.GetCurrency() >= num3) // [!code ++]
				{
					chara2.c_allowance += num3; // [!code --]
					chara.Talk("tail_pay"); // [!code ++]
				}
				else
				{
					chara2.ModCurrency(num3); // [!code --]
					chara.Talk("tail_nomoney"); // [!code ++]
					num3 = chara.GetCurrency(); // [!code ++]
					chara2.Say("angry", chara2); // [!code ++]
					chara2.Talk("angry"); // [!code ++]
					flag = (sell ? true : false); // [!code ++]
					if (EClass.rnd(chara.IsPC ? 2 : 20) == 0) // [!code ++]
					{ // [!code ++]
						flag3 = true; // [!code ++]
					} // [!code ++]
				}
				chara.ModCurrency(-num3); // [!code ++]
				if (chara2 == EClass.pc) // [!code ++]
				{ // [!code ++]
					if (num3 > 0) // [!code ++]
					{ // [!code ++]
						EClass.player.DropReward(ThingGen.Create("money").SetNum(num3)); // [!code ++]
						EClass.player.ModKarma(-1); // [!code ++]
					} // [!code ++]
				} // [!code ++]
				else // [!code ++]
				{ // [!code ++]
					int num4 = (chara2.CHA * 10 + 100) / ((chara2.IsPCFaction && chara2.memberType == FactionMemberType.Default) ? 1 : 10); // [!code ++]
					if (chara2.GetCurrency() - num4 > 0) // [!code ++]
					{ // [!code ++]
						chara2.c_allowance += num3; // [!code ++]
					} // [!code ++]
					else // [!code ++]
					{ // [!code ++]
						chara2.ModCurrency(num3); // [!code ++]
					} // [!code ++]
				} // [!code ++]
				chara = chara4; // [!code ++]
				chara2 = chara5; // [!code ++]
			}
			chara = chara4; // [!code --]
			chara2 = chara5; // [!code --]
		}
		if (flag3)
		{
```

[`public void Finish()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/AI_Fuck.cs#L440-L445)
```cs:line-numbers=440
			break;
		}
		}
		if (IsSacredLovemaking) // [!code ++]
		{ // [!code ++]
			chara.Say("tender_hug", chara, chara2); // [!code ++]
		} // [!code ++]
		break;
	}
	case FuckType.tame:
```

## ActEffect

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1110-L1119)
```cs:line-numbers=1110
		{
			return;
		}
		Thing thing = ThingGen.Create("mine"); // [!code --]
		thing.c_idRefCard = "dog_mine"; // [!code --]
		Thing thing2 = ThingGen.Create("mine"); // [!code ++]
		thing2.c_idRefCard = "dog_mine"; // [!code ++]
		Zone.ignoreSpawnAnime = true;
		EClass._zone.AddCard(thing, CC.pos).Install(); // [!code --]
		EClass._zone.AddCard(thing2, CC.pos).Install(); // [!code ++]
		break;
	}
	case EffectId.LittleSisterMigration:
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1221-L1230)
```cs:line-numbers=1221
	case EffectId.EnchantArmorGreat:
	{
		bool armor = id == EffectId.EnchantArmor || id == EffectId.EnchantArmorGreat;
		bool flag5 = id == EffectId.EnchantWeaponGreat || id == EffectId.EnchantArmorGreat; // [!code --]
		bool flag3 = id == EffectId.EnchantWeaponGreat || id == EffectId.EnchantArmorGreat; // [!code ++]
		if (!tc.isThing)
		{
			LayerDragGrid.CreateEnchant(CC, armor, flag5, state); // [!code --]
			LayerDragGrid.CreateEnchant(CC, armor, flag3, state); // [!code ++]
			return;
		}
		cc.PlaySound("identify");
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1235-L1242)
```cs:line-numbers=1235
			tc.ModEncLv(-1);
			break;
		}
		int num5 = (flag5 ? 4 : 2) + (blessed ? 1 : 0); // [!code --]
		if (tc.encLV >= num5) // [!code --]
		int num3 = (flag3 ? 4 : 2) + (blessed ? 1 : 0); // [!code ++]
		if (tc.encLV >= num3) // [!code ++]
		{
			cc.Say("enc_resist", tc);
			break;
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1248-L1268)
```cs:line-numbers=1248
	case EffectId.Identify:
	case EffectId.GreaterIdentify:
	{
		bool flag3 = id == EffectId.GreaterIdentify; // [!code --]
		bool flag4 = id == EffectId.GreaterIdentify; // [!code ++]
		if (flag)
		{
			Redirect(EffectId.ForgetItems, flag3 ? BlessedState.Cursed : BlessedState.Normal, default(ActRef)); // [!code --]
			Redirect(EffectId.ForgetItems, flag4 ? BlessedState.Cursed : BlessedState.Normal, default(ActRef)); // [!code ++]
			break;
		}
		if (!tc.isThing)
		{
			int count = ((!blessed) ? 1 : (flag3 ? (2 + EClass.rnd(2)) : (3 + EClass.rnd(3)))); // [!code --]
			LayerDragGrid.CreateIdentify(CC, flag3, state, 0, count); // [!code --]
			int count = ((!blessed) ? 1 : (flag4 ? (2 + EClass.rnd(2)) : (3 + EClass.rnd(3)))); // [!code ++]
			LayerDragGrid.CreateIdentify(CC, flag4, state, 0, count); // [!code ++]
			return;
		}
		cc.PlaySound("identify");
		cc.PlayEffect("identify");
		tc.Thing.Identify(cc.IsPCParty, (!flag3) ? IDTSource.Identify : IDTSource.SuperiorIdentify); // [!code --]
		tc.Thing.Identify(cc.IsPCParty, (!flag4) ? IDTSource.Identify : IDTSource.SuperiorIdentify); // [!code ++]
		break;
	}
	case EffectId.Uncurse:
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1272-L1288)
```cs:line-numbers=1272
			LayerDragGrid.CreateUncurse(CC, state);
			return;
		}
		Thing thing2 = tc.Thing; // [!code --]
		if (thing2.blessedState == BlessedState.Cursed) // [!code --]
		Thing thing = tc.Thing; // [!code ++]
		if (thing.blessedState == BlessedState.Cursed) // [!code ++]
		{
			thing2.SetBlessedState(BlessedState.Normal); // [!code --]
			thing.SetBlessedState(BlessedState.Normal); // [!code ++]
		}
		else if (thing2.blessedState == BlessedState.Doomed) // [!code --]
		else if (thing.blessedState == BlessedState.Doomed) // [!code ++]
		{
			thing2.SetBlessedState(BlessedState.Normal); // [!code --]
			thing.SetBlessedState(BlessedState.Normal); // [!code ++]
		}
		thing2.GetRootCard()?.TryStack(thing2); // [!code --]
		LayerInventory.SetDirty(thing2); // [!code --]
		thing.GetRootCard()?.TryStack(thing); // [!code ++]
		LayerInventory.SetDirty(thing); // [!code ++]
		break;
	}
	case EffectId.Lighten:
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1298-L1319)
```cs:line-numbers=1298
		}
		cc.PlaySound("offering");
		cc.PlayEffect("buff");
		int num3 = (tc.isWeightChanged ? tc.c_weight : tc.Thing.source.weight); // [!code --]
		int num5 = (tc.isWeightChanged ? tc.c_weight : tc.Thing.source.weight); // [!code ++]
		tc.isWeightChanged = true;
		Element orCreateElement = tc.elements.GetOrCreateElement(64);
		Element orCreateElement2 = tc.elements.GetOrCreateElement(65);
		Element orCreateElement3 = tc.elements.GetOrCreateElement(67);
		Element orCreateElement4 = tc.elements.GetOrCreateElement(66);
		bool flag4 = tc.IsEquipmentOrRangedOrAmmo || tc.IsThrownWeapon; // [!code --]
		bool flag5 = tc.IsEquipmentOrRangedOrAmmo || tc.IsThrownWeapon; // [!code ++]
		if (flag)
		{
			num3 = (int)(0.01f * (float)num3 * (float)power * 0.75f + 500f); // [!code --]
			if (num3 < 0 || num3 > 10000000) // [!code --]
			num5 = (int)(0.01f * (float)num5 * (float)power * 0.75f + 500f); // [!code ++]
			if (num5 < 0 || num5 > 10000000) // [!code ++]
			{
				num3 = 10000000; // [!code --]
				flag4 = false; // [!code --]
				num5 = 10000000; // [!code ++]
				flag5 = false; // [!code ++]
			}
			if (flag4) // [!code --]
			if (flag5) // [!code ++]
			{
				if (tc.IsWeapon || tc.IsThrownWeapon || tc.IsAmmo)
				{
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1330-L1341)
```cs:line-numbers=1330
		}
		else
		{
			num3 = num3 * (100 - power / 10) / 100; // [!code --]
			num5 = num5 * (100 - power / 10) / 100; // [!code ++]
			if (blessed)
			{
				power /= 4;
			}
			if (flag4) // [!code --]
			if (flag5) // [!code ++]
			{
				if (tc.IsWeapon || tc.IsThrownWeapon || tc.IsAmmo)
				{
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1350-L1356)
```cs:line-numbers=1350
			}
			cc.Say("lighten", cc, tc);
		}
		tc.c_weight = num3; // [!code --]
		tc.c_weight = num5; // [!code ++]
		tc.SetDirtyWeight();
		if (tc.parent == null)
		{
```

[`void AddCon<T>(int rate, int power) where T : Condition`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/ActEffect.cs#L1381-L1386)
```cs:line-numbers=1381
		});
		Thing thing3 = ThingGen.Create(tc.id, -1, (int)((long)num6 * (long)power / 400));
		thing3.genLv = num6;
		if (tc.c_uidAttune != 0) // [!code ++]
		{ // [!code ++]
			thing3.c_uidAttune = tc.c_uidAttune; // [!code ++]
			if (thing3.id == "amulet_engagement" || thing3.id == "ring_engagement") // [!code ++]
			{ // [!code ++]
				thing3.elements.ModBase(484, 3); // [!code ++]
			} // [!code ++]
		} // [!code ++]
		tc.Destroy();
		CC.Pick(thing3, msg: false);
		if (!CC.IsPC)
```

## AttackProcess

[`public class AttackProcess : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/AttackProcess.cs#L7-L22)
```cs:line-numbers=7
{
	public static AttackProcess Current = new AttackProcess();

	public long toHit; // [!code ++]
 // [!code ++]
	public long toHitBase; // [!code ++]
 // [!code ++]
	public int dNum;

	public int dDim;

	public int dBonus;

	public int toHit; // [!code --]
 // [!code --]
	public int toHitBase; // [!code --]
 // [!code --]
	public int toHitFix;

	public int evasion;
```

[`public void Prepare(Chara _CC, Thing _weapon, Card _TC = null, Point _TP = null,`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/AttackProcess.cs#L270-L276)
```cs:line-numbers=270
		}
		if (IsCane)
		{
			toHitBase += 50; // [!code --]
			toHitBase += 50L; // [!code ++]
		}
	}
	if (ammo != null && !(ammo.trait is TraitAmmoTalisman))
```

[`public void Prepare(Chara _CC, Thing _weapon, Card _TC = null, Point _TP = null,`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/AttackProcess.cs#L359-L365)
```cs:line-numbers=359
	}
	if (CC.isConfused || CC.HasCondition<ConDim>())
	{
		toHit /= 2; // [!code --]
		toHit /= 2L; // [!code ++]
	}
	if (TC != null)
	{
```

[`public bool CalcHit()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/AttackProcess.cs#L1016-L1031)
```cs:line-numbers=1016
		int num = TC.Evalue(151);
		if (num != 0 && toHit < num * 10)
		{
			int num2 = evasion * 100 / Mathf.Clamp(toHit, 1, toHit); // [!code --]
			if (num2 > 300 && EClass.rnd(num + 250) > 100) // [!code --]
			float num2 = (float)(evasion * 100) / Mathf.Clamp(toHit, 1f, toHit); // [!code ++]
			if (num2 > 300f && EClass.rnd(num + 250) > 100) // [!code ++]
			{
				return EvadePlus();
			}
			if (num2 > 200 && EClass.rnd(num + 250) > 150) // [!code --]
			if (num2 > 200f && EClass.rnd(num + 250) > 150) // [!code ++]
			{
				return EvadePlus();
			}
			if (num2 > 150 && EClass.rnd(num + 250) > 200) // [!code --]
			if (num2 > 150f && EClass.rnd(num + 250) > 200) // [!code ++]
			{
				return EvadePlus();
			}
```

## Chara

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/Chara.cs#L5974-L5994)
```cs:line-numbers=5974
		{
			Say(race.castStyle.IsEmpty("cast"), this, a.source.GetName().ToLower(), s.lang());
		}
		if (IsPC && !ability.Has(a.id)) // [!code --]
		if (IsPC) // [!code ++]
		{
			_ = (i + 1) / 2;
			if (a.vPotential < i) // [!code --]
			bool flag2 = ability.Has(a.id); // [!code ++]
			if (a.vPotential < i && !flag2) // [!code ++]
			{
				Msg.Say("noSpellStock");
				EInput.Consume();
				return false;
			}
			if (num4 > 0 && (a.vPotential >= i * 2 || ability.Has(a.id))) // [!code --]
			if (num4 > 0 && (a.vPotential >= i * 2 || flag2)) // [!code ++]
			{
				a.vPotential -= i * 2; // [!code --]
				if (!flag2) // [!code ++]
				{ // [!code ++]
					a.vPotential -= i * 2; // [!code ++]
				} // [!code ++]
				num6 = num6 * (100 - num4 * 20) / 100;
			}
			else // [!code --]
			else if (!flag2) // [!code ++]
			{
				a.vPotential -= i;
			}
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/Chara.cs#L6059-L6065)
```cs:line-numbers=6059
		RemoveCondition<ConInvisibility>();
		return true;
	}
	bool flag2 = true; // [!code --]
	bool flag3 = true; // [!code ++]
	if (a.source.cooldown > 0 && (!IsPC || !a.source.tag.Contains("CD_npc")))
	{
		AddCooldown(a.id, a.source.cooldown);
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/Chara.cs#L6098-L6107)
```cs:line-numbers=6098
			}
			ActEffect.RapidCount = j;
			ActEffect.RapidDelay = a.RapidDelay;
			flag2 = a.Perform(this, tc, pos); // [!code --]
			flag3 = a.Perform(this, tc, pos); // [!code ++]
		}
	}
	if (flag2 && !isDead) // [!code --]
	if (flag3 && !isDead) // [!code ++]
	{
		if (cost.cost > 0 && a.source.lvFactor > 0)
		{
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/Chara.cs#L6113-L6119)
```cs:line-numbers=6113
		}
	}
	ActEffect.RapidCount = 0;
	if (flag2 && !a.source.tag.Contains("keepInvisi") && EClass.rnd(2) == 0) // [!code --]
	if (flag3 && !a.source.tag.Contains("keepInvisi") && EClass.rnd(2) == 0) // [!code ++]
	{
		RemoveCondition<ConInvisibility>();
		RemoveCondition<ConDark>();
```

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/Chara.cs#L6123-L6129)
```cs:line-numbers=6123
		string name = a.Name;
		renderer.Say("| " + name + " ");
	}
	return flag2; // [!code --]
	return flag3; // [!code ++]
	void ForeachEnemy(Action<Chara> action)
	{
		if (_pts.Count == 0)
```

## DramaCustomSequence

[`public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/DramaCustomSequence.cs#L201-L207)
```cs:line-numbers=201
			{
				Choice2("daBout", "_bout");
			}
			if (c.isDrunk || c.HasElement(1275) || EClass.debug.enable) // [!code --]
			if (c.isDrunk || c.IsMarried || EClass.debug.enable) // [!code ++]
			{
				Choice2(flag2 ? "daBird" : "daTail", "_tail");
			}
```

[`public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/DramaCustomSequence.cs#L732-L738)
```cs:line-numbers=732
	Step("_tail");
	Method(delegate
	{
		TempTalkTopic(bird + "1", null); // [!code --]
		TempTalkTopic(c.IsMarried ? "tail4" : (bird + "1"), null); // [!code ++]
		Choice("yes2", delegate
		{
			TempTalkTopic(bird + "2", StepEnd);
```

## Trait

[`public void OnBarter(bool reroll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/6b064dd590310c1b26726a47d81f3bd62732c494/Elin/Trait.cs#L1638-L1643)
```cs:line-numbers=1638
			AddCassette(65, null, 999);
			AddCassette(109, "debt", 0);
			AddCassette(110, "curry", 999);
			if (EClass.player.stats.married > 0) // [!code ++]
			{ // [!code ++]
				AddCassette(122, null, 999); // [!code ++]
				AddCassette(123, null, 999); // [!code ++]
			} // [!code ++]
			break;
		}
		break;
```

## +Zone_OldChurch

::: details File Created
```cs
public class Zone_OldChurch : Zone_Civilized
{
	public override bool IsExplorable => false;

	public override bool CanDigUnderground => false;
}
```

:::
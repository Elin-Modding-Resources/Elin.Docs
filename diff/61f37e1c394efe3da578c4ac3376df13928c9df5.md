---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 14 files modified.
version: EA 23.181 Nightly
changes: ActEffect/Biography/CINT/Card/CoreRef/DramaCustomSequence/EffectId/ElementContainer/Props/Recipe/RenderRow/TaskHarvest/Thing/Trait
---

# EA 23.181 Nightly

August 16, 2025

14 files modified.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [Biography (1)](#biography)
```cs:no-line-numbers
public int GetOriginalAge(Chara c) // [!code --]
public int GetAge(Chara c) // [!code ++]
```
## ActEffect

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ActEffect.cs#L1457-L1463)
```cs:line-numbers=1457
			break;
		}
		Thing thing5 = null;
		bool flag8 = actRef.n1 == "food"; // [!code --]
		bool flag9 = actRef.n1 == "food"; // [!code ++]
		if (actRef.n1 == "money")
		{
			int currency = TC.GetCurrency();
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ActEffect.cs#L1471-L1477)
```cs:line-numbers=1471
		else
		{
			Func<Thing, bool> func = (Thing t) => true;
			if (flag8) // [!code --]
			if (flag9) // [!code ++]
			{
				func = (Thing t) => t.IsFood;
			}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ActEffect.cs#L1653-L1664)
```cs:line-numbers=1653
	{
		EClass.game.religions.Trickery.Talk("ability");
		bool hex2 = CC.IsHostile(TC);
		List<SourceStat.Row> list3 = EClass.sources.stats.rows.Where((SourceStat.Row con) => con.tag.Contains("random") && con.group == (hex2 ? "Debuff" : "Buff")).ToList(); // [!code --]
		List<SourceStat.Row> list4 = EClass.sources.stats.rows.Where((SourceStat.Row con) => con.tag.Contains("random") && con.group == (hex2 ? "Debuff" : "Buff")).ToList(); // [!code ++]
		int power2 = power;
		for (int k = 0; k < 4 + EClass.rnd(2); k++) // [!code --]
		for (int l = 0; l < 4 + EClass.rnd(2); l++) // [!code ++]
		{
			SourceStat.Row row2 = list3.RandomItem(); // [!code --]
			list3.Remove(row2); // [!code --]
			SourceStat.Row row2 = list4.RandomItem(); // [!code ++]
			list4.Remove(row2); // [!code ++]
			Proc(hex2 ? EffectId.DebuffKizuami : EffectId.Buff, CC, TC, power2, new ActRef
			{
				n1 = row2.alias
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ActEffect.cs#L1794-L1808)
```cs:line-numbers=1794
		tc.bio.SetGender(gender2);
		tc.Say("transGender", tc, Gender.Name(tc.bio.gender));
		tc.Talk("tail");
		if (blessed && tc.bio.age > 1) // [!code --]
		int age3 = tc.bio.GetAge(tc.Chara); // [!code ++]
		if (blessed && age3 > 1) // [!code ++]
		{
			tc.Say("ageDown", tc);
			tc.bio.age--; // [!code --]
			tc.bio.SetAge(tc.Chara, age3 - 1, allowUnique: true); // [!code ++]
		}
		else if (flag)
		{
			tc.Say("ageUp", tc);
			tc.bio.age++; // [!code --]
			tc.bio.SetAge(tc.Chara, age3 + 1, allowUnique: true); // [!code ++]
		} // [!code ++]
		break; // [!code ++]
	} // [!code ++]
	case EffectId.Youth: // [!code ++]
	{ // [!code ++]
		tc.PlaySound("mutation"); // [!code ++]
		tc.PlayEffect("mutation"); // [!code ++]
		int age2 = tc.bio.GetAge(tc.Chara); // [!code ++]
		if (!flag && age2 <= 1) // [!code ++]
		{ // [!code ++]
			tc.SayNothingHappans(); // [!code ++]
			break; // [!code ++]
		} // [!code ++]
		age2 = Mathf.Max(1, age2 * 100 / (flag ? 75 : (blessed ? 400 : 200))); // [!code ++]
		tc.Say(flag ? "ageUp" : "ageDown", tc); // [!code ++]
		tc.bio.SetAge(tc.Chara, age2, allowUnique: true); // [!code ++]
		break; // [!code ++]
	} // [!code ++]
	case EffectId.EternalYouth: // [!code ++]
	{ // [!code ++]
		tc.PlaySound("dropRewardXmas"); // [!code ++]
		tc.PlaySound("mutation"); // [!code ++]
		tc.PlayEffect("mutation"); // [!code ++]
		if (tc.IsUnique) // [!code ++]
		{ // [!code ++]
			tc.SayNothingHappans(); // [!code ++]
			break; // [!code ++]
		} // [!code ++]
		int age = tc.bio.GetAge(tc.Chara); // [!code ++]
		if (flag) // [!code ++]
		{ // [!code ++]
			if (tc.c_lockedAge != 0) // [!code ++]
			{ // [!code ++]
				tc.Say("eternalYouth2", tc); // [!code ++]
				tc.c_lockedAge = 0; // [!code ++]
				tc.bio.SetAge(tc.Chara, age); // [!code ++]
			} // [!code ++]
			Redirect(EffectId.Youth, BlessedState.Cursed, default(ActRef)); // [!code ++]
		} // [!code ++]
		else if (tc.c_lockedAge != 0) // [!code ++]
		{ // [!code ++]
			tc.SayNothingHappans(); // [!code ++]
		} // [!code ++]
		else // [!code ++]
		{ // [!code ++]
			tc.Say("eternalYouth1", tc); // [!code ++]
			tc.c_lockedAge = age; // [!code ++]
			if (blessed) // [!code ++]
			{ // [!code ++]
				Redirect(EffectId.Youth, BlessedState.Blessed, default(ActRef)); // [!code ++]
			} // [!code ++]
		}
		break;
	}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ActEffect.cs#L1830-L1845)
```cs:line-numbers=1830
		break;
	case EffectId.Revive:
	{
		List<KeyValuePair<int, Chara>> list5 = EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon && a.Value.c_wasInPcParty).ToList(); // [!code --]
		List<KeyValuePair<int, Chara>> list3 = EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon && a.Value.c_wasInPcParty).ToList(); // [!code ++]
		if (TC.IsPCFaction || TC.IsPCFactionMinion)
		{
			if (TC.IsPC && list5.Count == 0) // [!code --]
			if (TC.IsPC && list3.Count == 0) // [!code ++]
			{
				list5 = EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.CanRevive() && a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon).ToList(); // [!code --]
				list3 = EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.CanRevive() && a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon).ToList(); // [!code ++]
			}
			if (list5.Count > 0) // [!code --]
			if (list3.Count > 0) // [!code ++]
			{
				list5.RandomItem().Value.Chara.GetRevived(); // [!code --]
				list3.RandomItem().Value.Chara.GetRevived(); // [!code ++]
				break;
			}
		}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ActEffect.cs#L1867-L1873)
```cs:line-numbers=1867
			TC.PlaySound("debuff");
		}
		TC.Say(flag7 ? "damageBody" : "damageMind", TC);
		for (int l = 0; l < num8; l++) // [!code --]
		for (int k = 0; k < num8; k++) // [!code ++]
		{
			TC.DamageTempElements(power, flag7, mind, id != EffectId.Weaken);
		}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ActEffect.cs#L1882-L1897)
```cs:line-numbers=1882
	case EffectId.EnhanceBodyGreat:
	case EffectId.EnhanceMindGreat:
	{
		bool flag9 = id == EffectId.EnhanceBody || id == EffectId.EnhanceBodyGreat; // [!code --]
		bool flag8 = id == EffectId.EnhanceBody || id == EffectId.EnhanceBodyGreat; // [!code ++]
		bool mind2 = id == EffectId.EnhanceMind || id == EffectId.EnhanceMindGreat;
		if (id != EffectId.EnhanceBody && id != EffectId.EnhanceMind)
		{
			EClass.rnd(4);
		}
		TC.Say(flag9 ? "enhanceBody" : "enhanceMind", TC); // [!code --]
		TC.Say(flag8 ? "enhanceBody" : "enhanceMind", TC); // [!code ++]
		TC.PlayEffect("buff");
		TC.PlaySound("buff");
		TC.EnhanceTempElements(power, flag9, mind2, onlyRenew: true); // [!code --]
		TC.EnhanceTempElements(power, flag8, mind2, onlyRenew: true); // [!code ++]
		break;
	}
	case EffectId.RestoreBody:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ActEffect.cs#L2210-L2219)
```cs:line-numbers=2210
		{
			power /= 4;
		}
		List<Thing> list4 = TC.things.List((Thing t) => (t.Num <= 1 && t.IsEquipmentOrRanged && !t.IsToolbelt && !t.IsLightsource && t.isEquipped) ? true : false); // [!code --]
		if (list4.Count != 0) // [!code --]
		List<Thing> list5 = TC.things.List((Thing t) => (t.Num <= 1 && t.IsEquipmentOrRanged && !t.IsToolbelt && !t.IsLightsource && t.isEquipped) ? true : false); // [!code ++]
		if (list5.Count != 0) // [!code ++]
		{
			Thing thing4 = list4.RandomItem(); // [!code --]
			Thing thing4 = list5.RandomItem(); // [!code ++]
			TC.Say("acid_hit", TC);
			if (thing4.isAcidproof)
			{
```

## Biography

[`public int idInterest`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Biography.cs#L263-L288)
```cs:line-numbers=263

	public string nameBirthplace => "birthLoc2".lang(nameHome, nameLoc);

	public int age // [!code --]
	public bool IsUnderAge(Chara c) // [!code ++]
	{
		get // [!code --]
		{ // [!code --]
			return EClass.world.date.year - birthYear; // [!code --]
		} // [!code --]
		set // [!code --]
		{ // [!code --]
			birthYear = EClass.world.date.year - value; // [!code --]
		} // [!code --]
		return GetAge(c) < 18; // [!code ++]
	}

	public bool IsUnderAge => age < 18; // [!code --]
 // [!code --]
	public string TextAge(Chara c)
	{
		object obj;
		if (age < 1000) // [!code --]
		if (GetAge(c) < 1000) // [!code ++]
		{
			obj = (c.IsUnique ? GetOriginalAge(c) : age).ToString(); // [!code --]
			obj = GetAge(c).ToString(); // [!code ++]
			if (obj == null)
			{
				return "";
```

[`public string TextAge(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Biography.cs#L295-L308)
```cs:line-numbers=295
		return (string)obj;
	}

	public int GetOriginalAge(Chara c) // [!code --]
	public int GetAge(Chara c) // [!code ++]
	{ // [!code ++]
		if (c.c_lockedAge != 0) // [!code ++]
		{ // [!code ++]
			return c.c_lockedAge; // [!code ++]
		} // [!code ++]
		if (c.IsUnique) // [!code ++]
		{ // [!code ++]
			string[] array = c.source.bio.Split('/'); // [!code ++]
			if (array.Length > 1) // [!code ++]
			{ // [!code ++]
				return int.Parse(array[1]); // [!code ++]
			} // [!code ++]
		} // [!code ++]
		return EClass.world.date.year - birthYear; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public void SetAge(Chara c, int a, bool allowUnique = false) // [!code ++]
	{
		string[] array = c.source.bio.Split('/'); // [!code --]
		if (array.Length > 1) // [!code --]
		if (c.IsUnique) // [!code ++]
		{ // [!code ++]
			if (allowUnique) // [!code ++]
			{ // [!code ++]
				c.c_lockedAge = a; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		else if (c.c_lockedAge == 0) // [!code ++]
		{ // [!code ++]
			birthYear = EClass.world.date.year - a; // [!code ++]
		} // [!code ++]
		else // [!code ++]
		{
			return int.Parse(array[1]); // [!code --]
			c.c_lockedAge = a; // [!code ++]
		}
		return age; // [!code --]
	}

	public void Generate(Chara c)
```

[`public void Generate(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Biography.cs#L337-L343)
```cs:line-numbers=337
			{
				flag = false;
			}
			age = int.Parse(array[1]); // [!code --]
			SetAge(c, int.Parse(array[1])); // [!code ++]
			c.pccData = IO.LoadFile<PCCData>(CorePath.packageCore + "Data/PCC/" + c.id + ".txt");
		}
		if (array.Length > 2)
```

[`public void Generate(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Biography.cs#L365-L373)
```cs:line-numbers=365
	{
		SetPortrait(c);
	}
	if (c.id == "prostitute" && age < 15) // [!code --]
	if (c.id == "prostitute" && GetAge(c) < 15) // [!code ++]
	{
		age = 15; // [!code --]
		SetAge(c, 15); // [!code ++]
	}
	SourceThing.Row row = EClass.sources.things.rows.RandomItem();
	idLike = row.id;
```

[`public void GenerateBirthday(Chara c, int ageIndex = 0)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Biography.cs#L395-L405)
```cs:line-numbers=395
	if (ageIndex != 0)
	{
		int num3 = (num2 - num) / 4;
		age = Rand.Range(num + num3 * (ageIndex - 1), num + num3 * ageIndex); // [!code --]
		SetAge(c, Rand.Range(num + num3 * (ageIndex - 1), num + num3 * ageIndex)); // [!code ++]
	}
	else
	{
		age = Rand.Range(num, num2); // [!code --]
		SetAge(c, Rand.Range(num, num2)); // [!code ++]
	}
	birthDay = EClass.rnd(30) + 1;
	birthMonth = EClass.rnd(12) + 1;
```

## CINT

[`public class CINT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/CINT.cs#L62-L75)
```cs:line-numbers=62

	public const int seed = 33;

	public const int dateNews = 33; // [!code --]
 // [!code --]
	public const int dateGuestArrived = 34;

	public const int taxExtra = 35;

	public const int dateLivestock = 36;

	public const int dateNews = 37; // [!code ++]
 // [!code ++]
	public const int lockedAge = 38; // [!code ++]
 // [!code ++]
	public const int lockLv = 50;

	public const int dateNextExpedition = 51;
```

## Card

[`public int c_dateCooked`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Card.cs#L1323-L1328)
```cs:line-numbers=1323
		}
	}

	public int c_lockedAge // [!code ++]
	{ // [!code ++]
		get // [!code ++]
		{ // [!code ++]
			return GetInt(38); // [!code ++]
		} // [!code ++]
		set // [!code ++]
		{ // [!code ++]
			SetInt(38, value); // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	public int c_containerSize
	{
		get
```

## CoreRef

[`public class PrefData`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/CoreRef.cs#L332-L337)
```cs:line-numbers=332
		public SourcePref blockStairs;

		public SourcePref blockWall;
 // [!code ++]
		public SourcePref blockPillar; // [!code ++]
	}

	public Biomes biomes;
```

## DramaCustomSequence

[`public class DramaCustomSequence : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/DramaCustomSequence.cs#L33-L39)
```cs:line-numbers=33
public void Build(Chara c)
{
	bool flag = idCustom == "Unique";
	bool flag2 = c.bio.IsUnderAge || EClass.pc.bio.IsUnderAge; // [!code --]
	bool flag2 = c.bio.IsUnderAge(c) || EClass.pc.bio.IsUnderAge(EClass.pc); // [!code ++]
	bool isInGuild = Guild.Fighter.IsCurrentZone || Guild.Mage.IsCurrentZone || Guild.Thief.IsCurrentZone || Guild.Merchant.IsCurrentZone;
	string bird = (flag2 ? "bird" : "tail");
	_ = c.Name;
```

[`public void Build(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/DramaCustomSequence.cs#L193-L199)
```cs:line-numbers=193
					Choice2(("daCopy" + c.trait.CopyShop).lang(c.trait.NumCopyItem.ToString() ?? ""), "_copyItem").DisableSound();
				}
			}
			if (c.trait.HaveNews && c.GetInt(33) + 10080 < EClass.world.date.GetRaw()) // [!code --]
			if (c.trait.HaveNews && c.GetInt(37) + 10080 < EClass.world.date.GetRaw()) // [!code ++]
			{
				Choice2("daNews", "_news");
			}
```

[`void Invest(bool quick)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/DramaCustomSequence.cs#L1284-L1290)
```cs:line-numbers=1284
			GameLang.refDrama1 = zone.Name;
			TempTalkTopic("news1", null);
		}
		c.SetInt(33, EClass.world.date.GetRaw()); // [!code --]
		c.SetInt(37, EClass.world.date.GetRaw()); // [!code ++]
	});
	Method(delegate
	{
```

## EffectId

[`public enum EffectId`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/EffectId.cs#L120-L124)
```cs:line-numbers=120
	LovePlus = 296,
	HairGrowth = 297,
	Gene = 298,
	CatSniff = 299 // [!code --]
	CatSniff = 299, // [!code ++]
	Youth = 300, // [!code ++]
	EternalYouth = 301 // [!code ++]
}
```

## ElementContainer

[`public void ModExp(int ele, float a, bool chain = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/ElementContainer.cs#L286-L292)
```cs:line-numbers=286
		if (element.UseExpMod)
		{
			a = a * (float)Mathf.Clamp(element.UsePotential ? element.Potential : 100, 10, 1000) / (float)(100 + Mathf.Max(0, element.ValueWithoutLink) * 25);
			if (EClass.rndf(1f) < a % 1f + 0.1f) // [!code --]
			if (EClass.rndf(1f) < a % 1f + ((ele == 152) ? 0.01f : 0.1f)) // [!code ++]
			{
				a += 1f;
			}
```

## Props

[`void TryAdd(Thing t)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Props.cs#L305-L311)
```cs:line-numbers=305
	}
	void TryAdd(Thing t)
	{
		if (t.HasElement(10) && !(t.trait is TraitFoodMeal) && !(t.trait is TraitFoodFishSlice) && !t.IsExcludeFromCraft(ing) && !stack.list.Contains(t)) // [!code --]
		if (t.HasElement(10) && !(t.trait is TraitFoodFishSlice) && !t.category.IsChildOf("seasoning") && !t.category.IsChildOf("meal") && !t.IsExcludeFromCraft(ing) && !stack.list.Contains(t)) // [!code ++]
		{
			stack.Add(t.Thing);
		}
```

## Recipe

[`static string CatName(string id)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Recipe.cs#L134-L140)
```cs:line-numbers=134

		public bool IsValidIngredient(Thing t)
		{
			if (ingType == IngType.CreativeFood && t.HasElement(10) && !(t.trait is TraitFoodFishSlice)) // [!code --]
			if (ingType == IngType.CreativeFood && t.HasElement(10) && !t.category.IsChildOf("seasoning") && !t.category.IsChildOf("meal") && !(t.trait is TraitFoodFishSlice)) // [!code ++]
			{
				return true;
			}
```

## RenderRow

[`public Sprite GetSprite(int dir = 0, int skin = 0, bool snow = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/RenderRow.cs#L294-L300)
```cs:line-numbers=294
			Texture2D texture2D = pass.mat.GetTexture("_MainTex") as Texture2D;
			ProceduralMesh pmesh = pass.pmesh;
			int num = 0;
			num = ((skin != 0) ? Mathf.Abs(array[dir] + skins[skin - 1] * ((array[dir] > 0) ? 1 : (-1))) : Mathf.Abs(array[dir])); // [!code --]
			num = ((skin != 0) ? Mathf.Abs(array[dir] + (skins[skin - 1] / 100 * (int)renderData.pass.pmesh.tiling.x + skins[skin - 1] % 100) * ((array[dir] > 0) ? 1 : (-1))) : Mathf.Abs(array[dir])); // [!code ++]
			int num2 = (int)((float)texture2D.width / pmesh.tiling.x);
			int num3 = (int)((float)texture2D.height / pmesh.tiling.y);
			int num4 = (int)((float)num % pmesh.tiling.x);
```

## TaskHarvest

[`public void HarvestThing()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/TaskHarvest.cs#L587-L593)
```cs:line-numbers=587
	{
		return;
	}
	if (EClass._zone.IsUserZone && target.isNPCProperty && thing.trait is TraitPotionLove) // [!code --]
	if (EClass._zone.IsUserZone && target.isNPCProperty && (thing.trait is TraitPotionLove || thing.HasTag(CTAG.rareResource))) // [!code ++]
	{
		Msg.Say("spellbookCrumble", thing);
		thing.Destroy();
```

## Thing

[`public override SourcePref Pref`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Thing.cs#L53-L58)
```cs:line-numbers=53
		if (trait is TraitFakeBlock)
		{
			TileType tileType = EClass.sources.blocks.map[base.refVal].tileType;
			if (tileType is TileTypePillar) // [!code ++]
			{ // [!code ++]
				return EClass.core.refs.prefs.blockPillar; // [!code ++]
			} // [!code ++]
			if (tileType is TileTypeFence)
			{
				return EClass.core.refs.prefs.blockFence;
```

[`public override void SetRenderParam(RenderParam p)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Thing.cs#L1575-L1587)
```cs:line-numbers=1575
			}
			break;
		}
		if (trait.IdSkin != 0) // [!code --]
		if (trait.IdSkin != 0 && sourceCard.skins.Length != 0) // [!code ++]
		{
			int index = trait.IdSkin - 1; // [!code --]
			if (sourceCard.skins.Length != 0) // [!code --]
			{ // [!code --]
				p.tile += ((p.tile < 0f) ? (-sourceCard.skins.TryGet(index)) : sourceCard.skins.TryGet(index)); // [!code --]
			} // [!code --]
			int num6 = sourceCard.skins.TryGet(trait.IdSkin - 1); // [!code ++]
			num6 = num6 / 100 * (int)source.renderData.pass.pmesh.tiling.x + num6 % 100; // [!code ++]
			p.tile += ((p.tile < 0f) ? (-num6) : num6); // [!code ++]
		}
	}

```

## Trait

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/61f37e1c394efe3da578c4ac3376df13928c9df5/Elin/Trait.cs#L1833-L1839)
```cs:line-numbers=1833
			{
			case ShopType.Moyer:
			{
				for (int num10 = 1; num10 <= 9; num10++) // [!code --]
				for (int num10 = 1; num10 <= 10; num10++) // [!code ++]
				{
					AddAdvWeek(num10);
				}
```

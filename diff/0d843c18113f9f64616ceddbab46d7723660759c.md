---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 7 files modified. 1 new file created.
version: EA 23.216 Nightly
changes: Card/Chara/Dice/+GrowSystemSunFlower/RenderRow/TaskDump/TraitDrinkMilkMother/WindowCharaMini
---

# EA 23.216 Nightly

October 10, 2025

7 files modified. 1 new file created.

## Important Changes

**None.**
## Card

[`public Card ChangeMaterial(SourceMaterial.Row row, bool ignoreFixedMaterial = fa`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Card.cs#L3050-L3055)
```cs:line-numbers=3050
			LayerInventory.SetDirty(Thing);
		}
		ApplyMaterial();
		Debug.Log(id + "/" + row.alias); // [!code ++]
		return this;
	}

```

## Chara

[`public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Chara.cs#L1537-L1543)
```cs:line-numbers=1537
		_race = null;
		_job = null;
		num = 10 + EClass.rnd(40);
		ChangeMaterial(race.material, ignoreFixedMaterial: true); // [!code --]
	}
	bio = new Biography();
	bio.Generate(this);
```

[`public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Chara.cs#L1593-L1598)
```cs:line-numbers=1593
	_idTimeTable = ((EClass.rnd(5) == 0) ? 1 : 0);
	ApplyRace();
	ApplyJob();
	Debug.Log(source.defMat); // [!code ++]
	ChangeMaterial(source.defMat.IsEmpty(race.material), ignoreFixedMaterial: true); // [!code ++]
	if (num != source.LV)
	{
		SetLv(num);
```

[`public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Chara.cs#L1604-L1610)
```cs:line-numbers=1604
			SetFeat(1644, j + 1);
		}
	}
	if (id == "putty_mech") // [!code --]
	string text = id; // [!code ++]
	if (text == "putty_mech_b" || text == "putty_mech") // [!code ++]
	{
		SetFeat(1248, 1 + EClass.rnd(5));
	}
```

[`public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Chara.cs#L1617-L1631)
```cs:line-numbers=1617
	}
	switch (id)
	{
	case "golem_wood": // [!code --]
		ChangeMaterial("pine"); // [!code --]
		break; // [!code --]
	case "golem_steel": // [!code --]
		ChangeMaterial("steel"); // [!code --]
		break; // [!code --]
	case "golem_gold": // [!code --]
		ChangeMaterial("gold"); // [!code --]
		break; // [!code --]
	case "dodo":
		base.idSkin = EClass.rnd(4);
		break;
```

[`public void ChangeRace(string idNew)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Chara.cs#L2249-L2255)
```cs:line-numbers=2249
		base.c_idRace = idNew;
		_race = null;
		ApplyRace();
		ChangeMaterial(race.material); // [!code --]
		ChangeMaterial(source.defMat.IsEmpty(race.material)); // [!code ++]
	}

	public void MakePartyMemeber()
```

[`public void RestockEquip(bool onCreate)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Chara.cs#L4786-L4791)
```cs:line-numbers=4786
		case "mech_scarab":
			AddThing("gun_laser");
			break;
		case "rocketman": // [!code ++]
			AddThing("panzerfaust"); // [!code ++]
			break; // [!code ++]
		default:
			switch (equip)
			{
```

## Dice

[`using System;`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Dice.cs#L1-L3)
```cs:line-numbers=1
using System; // [!code ++]
using UnityEngine;

public class Dice
```

[`public class Dice`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Dice.cs#L12-L22)
```cs:line-numbers=12

	public Card card;

	public static int MaxValue => 214748364; // [!code ++]
 // [!code ++]
	public static int Roll_Normal(long num, long sides, int bonus = 0) // [!code ++]
	{ // [!code ++]
		double num2 = (double)(num * (sides + 1)) / 2.0; // [!code ++]
		double num3 = Math.Sqrt((double)(num * (sides * sides - 1)) / 12.0); // [!code ++]
		double d = (double)(rnd(1000000) + 1) / 1000001.0; // [!code ++]
		double num4 = (double)(rnd(1000000) + 1) / 1000001.0; // [!code ++]
		double num5 = Math.Sqrt(-2.0 * Math.Log(d)) * Math.Cos(Math.PI * 2.0 * num4); // [!code ++]
		long num6 = (long)Math.Floor(num2 + num3 * num5 + 0.5); // [!code ++]
		long num7 = num * sides; // [!code ++]
		if (num6 < num) // [!code ++]
		{ // [!code ++]
			num6 = num; // [!code ++]
		} // [!code ++]
		if (num6 > num7) // [!code ++]
		{ // [!code ++]
			num6 = num7; // [!code ++]
		} // [!code ++]
		return (int)Mathf.Clamp(num6 + bonus, -MaxValue, MaxValue); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public static int Roll_Precise(int num, int sides, int bonus = 0) // [!code ++]
	{ // [!code ++]
		long num2 = 0L; // [!code ++]
		for (int i = 0; i < num; i++) // [!code ++]
		{ // [!code ++]
			num2 += rnd(sides) + 1; // [!code ++]
		} // [!code ++]
		return (int)Mathf.Clamp(num2 + bonus, -MaxValue, MaxValue); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public static int Roll(int num, int sides, int bonus = 0, Card card = null)
	{
		int a = 1;
		bool flag = true;
		long num2 = 0L; // [!code --]
		int num2 = 0; // [!code ++]
		if (card != null)
		{
			int num3 = card.Evalue(78);
```

[`public static int Roll(int num, int sides, int bonus = 0, Card card = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/Dice.cs#L25-L55)
```cs:line-numbers=25
		}
		for (int i = 0; i < Mathf.Min(a, 20); i++)
		{
			long num4 = Roll(); // [!code --]
			int num4 = ((num >= 10) ? Roll_Normal(num, sides, bonus) : Roll_Precise(num, sides, bonus)); // [!code ++]
			if (i == 0 || (flag && num4 > num2) || (!flag && num4 < num2))
			{
				num2 = num4;
			}
		}
		return (int)Mathf.Clamp(num2, -214748370f, 214748370f); // [!code --]
		long Roll() // [!code --]
		{ // [!code --]
			if (num >= 100) // [!code --]
			{ // [!code --]
				return (long)num * (long)(rnd(sides) + 1); // [!code --]
			} // [!code --]
			long num5 = 0L; // [!code --]
			for (int j = 0; j < num; j++) // [!code --]
			{ // [!code --]
				num5 += rnd(sides) + 1; // [!code --]
			} // [!code --]
			return num5 + bonus; // [!code --]
		} // [!code --]
		return num2; // [!code ++]
	}

	public static int RollMax(int num, int sides, int bonus = 0)
	{
		return (int)Mathf.Clamp((long)num * (long)sides + bonus, -2.1474836E+09f, 2.1474836E+09f); // [!code --]
		return (int)Mathf.Clamp((long)num * (long)sides + bonus, -MaxValue, MaxValue); // [!code ++]
	}

	public static int rnd(int a)
```

## +GrowSystemSunFlower

::: details File Created
```cs
public class GrowSystemSunFlower : GrowSystemFlower
{
}
```

:::
## RenderRow

[`public void SetRenderData()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/RenderRow.cs#L238-L244)
```cs:line-numbers=238
		{
			useAltColor = true;
		}
		DefaultMaterial = sources.materials.alias[defMat]; // [!code --]
		DefaultMaterial = sources.materials.alias[defMat.IsEmpty("granite")]; // [!code ++]
	}

	public virtual void SetTiles()
```

## TaskDump

[`public override void OnCancelOrSuccess()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/TaskDump.cs#L135-L141)
```cs:line-numbers=135

	public bool IsValidContainer(Thing c)
	{
		if ((!c.ExistsOnMap && !c.IsInstalled) || !c.CanSearchContents) // [!code --]
		if (!c.ExistsOnMap || !c.IsInstalled || !c.CanSearchContents) // [!code ++]
		{
			return false;
		}
```

## TraitDrinkMilkMother

[`public override void OnDrink(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/TraitDrinkMilkMother.cs#L18-L23)
```cs:line-numbers=18
{
	if (c.Evalue(1232) > 0)
	{
		c.isScaled = true; // [!code ++]
		c.SetFeat(1232, c.Evalue(1232) - 1);
		int uidNext = EClass.game.cards.uidNext;
		EClass.game.cards.uidNext = 1;
```

## WindowCharaMini

[`public void Refresh(int idTab)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/0d843c18113f9f64616ceddbab46d7723660759c/Elin/WindowCharaMini.cs#L193-L202)
```cs:line-numbers=193
		note.SetActive(enable: true);
		note.AddText("feat_pet".lang(chara.feat.ToString() ?? "", num.ToString() ?? ""));
		note.AddText("feat_inferior".lang(chara.CurrentGeneSlot.ToString() ?? "", chara.MaxGeneSlot.ToString() ?? "", ((genes != null) ? genes.inferior : 0).ToString() ?? ""));
		if (!chara.isScaled) // [!code --]
		{ // [!code --]
			note.AddText("feat_pet_type1".lang()); // [!code --]
		} // [!code --]
		note.AddText((chara.isScaled ? "feat_pet_type2" : "feat_pet_type1").lang()); // [!code ++]
		note.Space(8);
		foreach (CharaUpgrade.Item item6 in upgrades.items)
		{
```

---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 27 files modified.
version: EA 23.79 Nightly
changes: ABILITY/ActMelee/ActPlan/BuildMenu/Card/Chara/DNA/DOMAIN/ELEMENT/ENC/ElementContainer/FACTION/FOOD/FactionBranch/Hobby/MUTATION/Map/POLICY/QuestDeliver/SKILL/SPELL/StatsMana/Thing/TraitAltar/TraitFoodPreparedPackage/TraitWrench/WindowChara
---

# EA 23.79 Nightly

January 21, 2025

27 files modified.

## Important Changes

**None.**
## ABILITY

[`@@ -4,6 +4,8 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L4-L9)
```cs:line-numbers=4
{
	public const int ActChat = 5044;

	public const int TaskMoveInstalled = 5036; // [!code ++]
 // [!code ++]
	public const int ActNoItem = 5037;

	public const int ActThrow = 5038;
```

[`@@ -30,11 +32,11 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L30-L40)
```cs:line-numbers=30

	public const int AI_Sleep = 5050;

	public const int ActZap = 5051; // [!code --]
	public const int TaskBuild = 5035; // [!code ++]

	public const int TaskMoveInstalled = 5036; // [!code --]
	public const int ActZap = 5051; // [!code ++]

	public const int ActBash = 5052; // [!code --]
	public const int TaskHarvest = 5053; // [!code ++]

	public const int AI_Bladder = 5054;

```

[`@@ -62,15 +64,15 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L62-L76)
```cs:line-numbers=62

	public const int ActEscape = 6400;

	public const int ActSuicide = 6410; // [!code --]
	public const int ActBash = 5052; // [!code ++]

	public const int TaskHarvest = 5053; // [!code --]
	public const int ActSuicide = 6410; // [!code ++]

	public const int ActDuplicate = 6420; // [!code --]
	public const int GoalIdle = 5034; // [!code ++]

	public const int TaskBuild = 5035; // [!code --]
	public const int AI_Equip = 5032; // [!code ++]

	public const int ActCancelTask = 5033; // [!code --]
	public const int Melee = 5002; // [!code ++]

	public const int Ranged = 5003;

```

[`@@ -98,11 +100,11 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L98-L108)
```cs:line-numbers=98

	public const int TaskAttack = 5015;

	public const int TaskTame = 5016; // [!code --]
	public const int ActCancelTask = 5033; // [!code ++]

	public const int GoalIdle = 5034; // [!code --]
	public const int TaskTame = 5016; // [!code ++]

	public const int TaskTalk = 5017; // [!code --]
	public const int TaskPick = 5018; // [!code ++]

	public const int TaskReadBoard = 5019;

```

[`@@ -130,15 +132,15 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L130-L144)
```cs:line-numbers=130

	public const int AI_Deconstruct = 5031;

	public const int AI_Equip = 5032; // [!code --]
 // [!code --]
	public const int TaskPick = 5018; // [!code --]
	public const int TaskTalk = 5017; // [!code ++]

	public const int ActCrabBreathe = 6500; // [!code --]
	public const int ActDuplicate = 6420; // [!code ++]

	public const int ActRush = 6450;

	public const int breathe_Mind = 50204; // [!code --]
	public const int breathe_Darkness = 50203; // [!code ++]
 // [!code ++]
	public const int ActLulwyTrick = 6902; // [!code ++]

	public const int ActKizuamiTrick = 6903;

```

[`@@ -152,13 +154,13 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L152-L164)
```cs:line-numbers=152

	public const int breathe_Lightning = 50202;

	public const int breathe_Darkness = 50203; // [!code --]
	public const int ActCrabBreathe = 6500; // [!code ++]

	public const int ActCurse = 6600; // [!code --]
	public const int breathe_Mind = 50204; // [!code ++]

	public const int breathe_Poison = 50205; // [!code --]
	public const int ActWait = 5000; // [!code ++]

	public const int breathe_Nether = 50206; // [!code --]
	public const int breathe_Poison = 50205; // [!code ++]

	public const int breathe_Sound = 50207;

```

[`@@ -178,38 +180,42 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L178-L215)
```cs:line-numbers=178

	public const int breathe_Impact = 50215;

	public const int ActMelee = 5001; // [!code --]
 // [!code --]
	public const int ActWait = 5000; // [!code --]
	public const int breathe_Nether = 50206; // [!code ++]

	public const int ActLulwyTrick = 6902; // [!code --]
	public const int ActManaAbsorb = 6900; // [!code ++]

	public const int ActJureHeal = 6901;

	public const int Melee = 5002; // [!code --]
	public const int StTaunt = 6700; // [!code ++]

	public const int ActGazeMutation = 6622; // [!code --]
	public const int ActCurse = 6600; // [!code ++]
 // [!code ++]
	public const int ActEntangle = 6601; // [!code ++]
 // [!code ++]
	public const int ActDraw = 6602; // [!code ++]

	public const int ActNTR = 6603;

	public const int ActMelee = 5001; // [!code ++]
 // [!code ++]
	public const int ActWeaken = 6610;

	public const int ActFear = 6611;

	public const int ActTouchSleep = 6612;

	public const int ActGazeDim = 6620; // [!code --]
	public const int StManaCost = 6720; // [!code ++]

	public const int ActGazeInsane = 6621;

	public const int ActManaAbsorb = 6900; // [!code --]
 // [!code --]
	public const int ActGazeMana = 6623; // [!code --]
	public const int ActGazeMutation = 6622; // [!code ++]

	public const int ActDraw = 6602; // [!code --]
	public const int ActGazeDim = 6620; // [!code ++]

	public const int ActDrainBlood = 6626;

	public const int ActInsult = 6630; // [!code ++]
 // [!code ++]
	public const int ActScream = 6631;

	public const int ActSteal = 6640;
```

[`@@ -224,28 +230,22 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L224-L251)
```cs:line-numbers=224

	public const int ActThrowPotion = 6661;

	public const int StTaunt = 6700; // [!code --]
 // [!code --]
	public const int StManaCost = 6720; // [!code --]
 // [!code --]
	public const int ActInsult = 6630; // [!code --]
 // [!code --]
	public const int ActEntangle = 6601; // [!code --]
	public const int ActGazeMana = 6623; // [!code ++]

	public static readonly int[] IDS = new int[115]
	{
		5044, 5037, 5038, 5039, 5040, 5041, 5042, 5043, 5045, 5046, // [!code --]
		5047, 5048, 5049, 5050, 5051, 5036, 5052, 5054, 5055, 6001, // [!code --]
		6003, 6011, 6012, 6013, 6015, 6018, 6019, 6020, 6050, 6400, // [!code --]
		6410, 5053, 6420, 5035, 5033, 5003, 5004, 5005, 5006, 5007, // [!code --]
		5008, 5009, 5010, 5011, 5012, 5013, 5014, 5015, 5016, 5034, // [!code --]
		5017, 5019, 5020, 5021, 5022, 5023, 5024, 5025, 5026, 5027, // [!code --]
		5028, 5029, 5030, 5031, 5032, 5018, 6500, 6450, 50204, 6903, // [!code --]
		6904, 7000, 50200, 50201, 50202, 50203, 6600, 50205, 50206, 50207, // [!code --]
		50208, 50209, 50210, 50211, 50212, 50213, 50214, 50215, 5001, 5000, // [!code --]
		6902, 6901, 5002, 6622, 6603, 6610, 6611, 6612, 6620, 6621, // [!code --]
		6900, 6623, 6602, 6626, 6631, 6640, 6641, 6642, 6650, 6660, // [!code --]
		6661, 6700, 6720, 6630, 6601 // [!code --]
		5044, 5036, 5037, 5038, 5039, 5040, 5041, 5042, 5043, 5045, // [!code ++]
		5046, 5047, 5048, 5049, 5050, 5035, 5051, 5053, 5054, 5055, // [!code ++]
		6001, 6003, 6011, 6012, 6013, 6015, 6018, 6019, 6020, 6050, // [!code ++]
		6400, 5052, 6410, 5034, 5032, 5002, 5003, 5004, 5005, 5006, // [!code ++]
		5007, 5008, 5009, 5010, 5011, 5012, 5013, 5014, 5015, 5033, // [!code ++]
		5016, 5018, 5019, 5020, 5021, 5022, 5023, 5024, 5025, 5026, // [!code ++]
		5027, 5028, 5029, 5030, 5031, 5017, 6420, 6450, 50203, 6902, // [!code ++]
		6903, 6904, 7000, 50200, 50201, 50202, 6500, 50204, 5000, 50205, // [!code ++]
		50207, 50208, 50209, 50210, 50211, 50212, 50213, 50214, 50215, 50206, // [!code ++]
		6900, 6901, 6700, 6600, 6601, 6602, 6603, 5001, 6610, 6611, // [!code ++]
		6612, 6720, 6621, 6622, 6620, 6626, 6630, 6631, 6640, 6641, // [!code ++]
		6642, 6650, 6660, 6661, 6623 // [!code ++]
	};
}
public class Ability : Act
```

[`@@ -286,7 +286,7 @@ public override int GetPower(Card c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ABILITY.cs#L286-L292)
```cs:line-numbers=286
	a = EClass.curve(a, 400, 100);
	if (this is Spell)
	{
		a = a * (100 + c.Evalue(411)) / 100; // [!code --]
		a = a * Mathf.Max(100 + c.Evalue(411) - c.Evalue(93), 1) / 100; // [!code ++]
	}
	return a;
}
```

## ActMelee

[`@@ -121,8 +121,10 @@ public bool Attack(float dmgMulti = 1f, bool maxRoll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ActMelee.cs#L121-L128)
```cs:line-numbers=121
	int count = 0;
	int num = Act.CC.Dist(Act.TC);
	Point orgPos = Act.TC.pos.Copy();
	Card tC = Act.TC; // [!code ++]
	foreach (BodySlot slot in Act.CC.body.slots)
	{
		Act.TC = tC; // [!code ++]
		if (Act.TC == null || !Act.TC.IsAliveInCurrentZone)
		{
			return true;
```

[`@@ -194,7 +196,7 @@ public bool Attack(float dmgMulti = 1f, bool maxRoll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ActMelee.cs#L194-L200)
```cs:line-numbers=194
			}
			foreach (Point item2 in list)
			{
				foreach (Card item3 in item2.ListCards()) // [!code --]
				foreach (Card item3 in item2.ListCards().Copy()) // [!code ++]
				{
					if (num4 <= 0 || !Act.CC.IsAliveInCurrentZone)
					{
```

[`@@ -202,7 +204,6 @@ public bool Attack(float dmgMulti = 1f, bool maxRoll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ActMelee.cs#L202-L208)
```cs:line-numbers=202
					}
					if (item3.trait.CanBeAttacked || (item3.isChara && item3.Chara.IsHostile(Act.CC)))
					{
						Act.CC.Say("attack_cleave"); // [!code --]
						AttackWithFlurry(item3, item2, 1f, subAttack: true);
						num4--;
					}
```

[`@@ -215,6 +216,7 @@ void Attack(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ActMelee.cs#L215-L220)
```cs:line-numbers=215
		{
			Act.TC = _tc;
			Act.TP = _tp;
			Debug.Log(w.Name + "/" + chaser + "/" + Act.TC.Name); // [!code ++]
			AttackProcess.Current.Prepare(Act.CC, w, Act.TC, Act.TP, count);
			int num6 = 1;
			if (chaser > 0)
```

[`@@ -246,10 +248,6 @@ void Attack(Card _tc, Point _tp, float mtp, bool subAttack)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ActMelee.cs#L246-L255)
```cs:line-numbers=246
					break;
				}
			}
			if (flag2) // [!code --]
			{ // [!code --]
				hasHit = true; // [!code --]
			} // [!code --]
			if (w.c_ammo > 0 && !Act.CC.HasCondition<ConReload>())
			{
				bool flag3 = true;
```

## ActPlan

[`@@ -856,7 +856,7 @@ void func()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ActPlan.cs#L856-L862)
```cs:line-numbers=856
				}
			}
		}
		if (list.Count == 0 && input == ActInput.AllAction && pos.cell.IsSnowTile && !pos.IsBlocked && !pos.HasObj && !pos.HasThing) // [!code --]
		if (list.Count == 0 && input == ActInput.AllAction && EClass.pc.held == null && pos.cell.IsSnowTile && !pos.IsBlocked && !pos.HasObj && !pos.HasThing) // [!code ++]
		{
			TrySetAct(new AI_Craft_Snowman
			{
```

## BuildMenu

[`@@ -266,7 +266,7 @@ private void _Search()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/BuildMenu.cs#L266-L272)
```cs:line-numbers=266
		}
		foreach (Thing thing in EMono._map.Stocked.Things)
		{
			if (EMono._map.Stocked.ShouldListAsResource(thing) && (thing.source.name.Contains(s) || thing.source.name_JP.Contains(s))) // [!code --]
			if (EMono._map.Stocked.ShouldListAsResource(thing) && (thing.source.name.Contains(s) || thing.source.name_JP.Contains(s) || thing.NameOne.Contains(s))) // [!code ++]
			{
				Recipe recipe2 = Recipe.Create(thing);
				if (recipe2 == null)
```

[`@@ -281,7 +281,7 @@ private void _Search()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/BuildMenu.cs#L281-L287)
```cs:line-numbers=281
		}
		EMono.pc.things.Foreach(delegate(Thing t)
		{
			if (t.trait.CanBeDropped && !t.trait.CanOnlyCarry && (t.source.name.Contains(s) || t.source.name_JP.Contains(s))) // [!code --]
			if (t.trait.CanBeDropped && !t.trait.CanOnlyCarry && (t.source.name.Contains(s) || t.source.name_JP.Contains(s) || t.NameOne.Contains(s))) // [!code ++]
			{
				Recipe recipe3 = Recipe.Create(t);
				if (recipe3 == null)
```

## Card

[`@@ -2030,7 +2030,7 @@ public bool ShowFoodEnc`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Card.cs#L2030-L2036)
```cs:line-numbers=2030
{
	get
	{
		if (!IsFood && Evalue(10) <= 0 && !category.IsChildOf("seed") && !(id == "pasture") && !(id == "grass")) // [!code --]
		if (!IsFood && (Evalue(10) <= 0 || IsEquipmentOrRanged) && !category.IsChildOf("seed") && !(id == "pasture") && !(id == "grass")) // [!code ++]
		{
			return category.IsChildOf("drug");
		}
```

[`@@ -3519,7 +3519,7 @@ public virtual void HealHPHost(int a, HealSource origin = HealSource.None)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Card.cs#L3519-L3525)
```cs:line-numbers=3519

	public virtual void HealHP(int a, HealSource origin = HealSource.None)
	{
		hp += a; // [!code --]
		hp += a * Mathf.Max(100 - Evalue(93), 1) / 100; // [!code ++]
		if (hp > MaxHP)
		{
			hp = MaxHP;
```

[`@@ -3598,6 +3598,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Card.cs#L3598-L3603)
```cs:line-numbers=3598
		{
			dmg = Element.GetResistDamage(dmg, Evalue(e.source.aliasRef), (origin != null) ? origin.Evalue(1238) : 0);
			dmg = dmg * 100 / (100 + Mathf.Clamp(Evalue(961) * 5, -50, 200));
			dmg = dmg * Mathf.Max(100 - Evalue(93), 10) / 100; // [!code ++]
		}
		switch (e.id)
		{
```

[`@@ -3825,7 +3826,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Card.cs#L3825-L3831)
```cs:line-numbers=3825
					if (EClass.player.invlunerable)
					{
						EvadeDeath();
						goto IL_09fc; // [!code --]
						goto IL_0a24; // [!code ++]
					}
				}
				if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2)
```

[`@@ -3837,8 +3838,8 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Card.cs#L3837-L3844)
```cs:line-numbers=3837
			}
		}
	}
	goto IL_09fc; // [!code --]
	IL_09fc: // [!code --]
	goto IL_0a24; // [!code ++]
	IL_0a24: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

## Chara

[`@@ -1331,6 +1331,7 @@ public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Chara.cs#L1331-L1336)
```cs:line-numbers=1331
	}
	if (source.mainElement.Length != 0)
	{
		int maxEleLv = Mathf.Min(genLv, 100); // [!code ++]
		List<Tuple<string, int, int>> list = new List<Tuple<string, int, int>>();
		string[] mainElement = source.mainElement;
		for (int i = 0; i < mainElement.Length; i++)
```

[`@@ -1338,12 +1339,12 @@ public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Chara.cs#L1338-L1349)
```cs:line-numbers=1338
			string[] array = mainElement[i].Split('/');
			SourceElement.Row row = EClass.sources.elements.alias["ele" + array[0]];
			int num2 = source.LV * row.eleP / 100 + base.LV - source.LV;
			if (list.Count == 0 || num2 < genLv || array[0] == bp.idEle) // [!code --]
			if (list.Count == 0 || num2 < maxEleLv || array[0] == bp.idEle) // [!code ++]
			{
				list.Add(new Tuple<string, int, int>(array[0], (array.Length > 1) ? int.Parse(array[1]) : 0, num2));
			}
		}
		Tuple<string, int, int> tuple = list.RandomItemWeighted((Tuple<string, int, int> a) => 10000 / (100 + (genLv - a.Item3) * 25)); // [!code --]
		Tuple<string, int, int> tuple = list.RandomItemWeighted((Tuple<string, int, int> a) => 10000 / (100 + (maxEleLv - a.Item3) * 25)); // [!code ++]
		if (!bp.idEle.IsEmpty())
		{
			tuple = list.Where((Tuple<string, int, int> a) => a.Item1 == bp.idEle).FirstOrDefault() ?? tuple;
```

[`@@ -4619,6 +4620,7 @@ public void Revive(Point p = null, bool msg = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Chara.cs#L4619-L4624)
```cs:line-numbers=4619
				Msg.Say("revive", this);
				PlayEffect("revive");
			}
			SetCensored(enable: false); // [!code ++]
		}
	}

```

[`@@ -7357,6 +7359,7 @@ public void GiveGift(Chara c, Thing t)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Chara.cs#L7357-L7362)
```cs:line-numbers=7357
		Element element = list.RandomItem();
		EClass.pc.ModExp(element.id, num2);
		EClass.pc.Say("draw_curse2", EClass.pc, element.Name);
		c.AddExp(Mathf.Min(num2 / 3, c.ExpToNext)); // [!code ++]
		return;
	}
	if ((t.id == "lovepotion" || t.id == "dreambug") && !Application.isEditor)
```

## DNA

[`@@ -476,6 +476,10 @@ public void CalcSlot()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/DNA.cs#L476-L481)
```cs:line-numbers=476
	for (int i = 0; i < vals.Count; i += 2)
	{
		Element element = Element.Create(vals[i], vals[i + 1]);
		if (element.source.geneSlot < 0) // [!code ++]
		{ // [!code ++]
			slot = 99; // [!code ++]
		} // [!code ++]
		if (element.source.geneSlot > slot)
		{
			slot = element.source.geneSlot;
```

## DOMAIN

[`@@ -2,42 +2,42 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/DOMAIN.cs#L2-L43)
```cs:line-numbers=2

public class DOMAIN
{
	public const int domSurvival = 801; // [!code --]
	public const int domArcane = 804; // [!code ++]

	public const int domFaith = 802; // [!code --]
	public const int domTest = 800; // [!code ++]

	public const int domOblivion = 813; // [!code --]
	public const int domSurvival = 801; // [!code ++]

	public const int domTest = 800; // [!code --]
	public const int domFaith = 802; // [!code ++]

	public const int domMiracle = 803;

	public const int domEyth = 814; // [!code --]
 // [!code --]
	public const int domComm = 805;

	public const int domHealing = 811; // [!code --]
	public const int domEyth = 814; // [!code ++]

	public const int domEarth = 812; // [!code --]
	public const int domWind = 807; // [!code ++]

	public const int domLuck = 810; // [!code --]
	public const int domHarvest = 808; // [!code ++]

	public const int domMachine = 809;

	public const int domArcane = 804; // [!code --]
	public const int domLuck = 810; // [!code ++]

	public const int domHarmony = 815; // [!code --]
	public const int domHealing = 811; // [!code ++]

	public const int domHarvest = 808; // [!code --]
	public const int domOblivion = 813; // [!code ++]

	public const int domWind = 807; // [!code --]
	public const int domEarth = 812; // [!code ++]

	public const int domElement = 806;

	public const int domHarmony = 815; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[16]
	{
		801, 802, 813, 800, 803, 814, 805, 811, 812, 810, // [!code --]
		809, 804, 815, 808, 807, 806 // [!code --]
		804, 800, 801, 802, 803, 805, 814, 807, 808, 809, // [!code ++]
		810, 811, 813, 812, 806, 815 // [!code ++]
	};
}
public class Domain : EClass
```

## ELEMENT

[`@@ -5,19 +5,19 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ELEMENT.cs#L5-L23)
```cs:line-numbers=5

public class ELEMENT
{
	public const int antidote = 753; // [!code --]
	public const int hotspring = 756; // [!code ++]

	public const int blood = 755;

	public const int rare = 751; // [!code --]
	public const int nerve = 754; // [!code ++]

	public const int comfort = 750; // [!code --]
	public const int antidote = 753; // [!code ++]

	public const int hotspring = 756; // [!code --]
	public const int cute = 752; // [!code ++]

	public const int nerve = 754; // [!code --]
	public const int rare = 751; // [!code ++]

	public const int cute = 752; // [!code --]
	public const int comfort = 750; // [!code ++]

	public const int _void = 0;

```

[`@@ -67,7 +67,7 @@ public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ELEMENT.cs#L67-L73)
```cs:line-numbers=67

	public static readonly int[] IDS = new int[30]
	{
		753, 755, 751, 750, 756, 754, 752, 0, 2, 1, // [!code --]
		756, 755, 754, 753, 752, 751, 750, 0, 2, 1, // [!code ++]
		3, 5, 10, 11, 12, 13, 14, 16, 17, 18,
		15, 21, 22, 23, 24, 25, 26, 29, 85, 20
	};
```

[`@@ -521,6 +521,10 @@ public static Dictionary<int, int> GetElementMap(int[] list, Dictionary<int, int`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ELEMENT.cs#L521-L526)
```cs:line-numbers=521

	public static SourceElement.Row GetRandomElement(int lv = 1)
	{
		if (lv > 100) // [!code ++]
		{ // [!code ++]
			lv = 100; // [!code ++]
		} // [!code ++]
		if (ListElements.Count == 0)
		{
			foreach (SourceElement.Row row in EClass.sources.elements.rows)
```

## ENC

[`@@ -24,7 +24,7 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ENC.cs#L24-L30)
```cs:line-numbers=24

	public const int noDamage = 654;

	public const int convertCold = 851; // [!code --]
	public const int convertFire = 850; // [!code ++]

	public const int permaCurse = 656;

```

[`@@ -42,7 +42,7 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ENC.cs#L42-L48)
```cs:line-numbers=42

	public const int meleeDistance = 666;

	public const int convertFire = 850; // [!code --]
	public const int convertCold = 851; // [!code ++]

	public const int mod_splash = 608;

```

[`@@ -54,12 +54,10 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ENC.cs#L54-L65)
```cs:line-numbers=54

	public const int mod_scatter = 607;

	public const int bane_animal = 463; // [!code --]
	public const int bane_fairy = 462; // [!code ++]

	public const int mod_precision = 605;

	public const int breathing = 429; // [!code --]
 // [!code --]
	public const int allNeckHunt = 428;

	public const int negateNeckHunt = 427;
```

[`@@ -70,6 +68,8 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ENC.cs#L70-L75)
```cs:line-numbers=70

	public const int mod_drill = 606;

	public const int negateSleep = 424; // [!code ++]
 // [!code ++]
	public const int negateFear = 423;

	public const int negateParalysis = 422;
```

[`@@ -108,23 +108,13 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ENC.cs#L108-L130)
```cs:line-numbers=108

	public const int negateTeleport = 400;

	public const int sustain_STR = 440; // [!code --]
	public const int breathing = 429; // [!code ++]

	public const int sustain_END = 441;

	public const int negateSleep = 424; // [!code --]
 // [!code --]
	public const int mod_ammo = 600; // [!code --]
 // [!code --]
	public const int mod_ammo_recover = 604; // [!code --]
 // [!code --]
	public const int mod_ammo_knockback = 603; // [!code --]
 // [!code --]
	public const int mod_rapid = 602; // [!code --]
 // [!code --]
	public const int mod_reload = 601; // [!code --]
	public const int sustain_STR = 440; // [!code ++]

	public const int optimizeMana = 483; // [!code --]
	public const int bane_machine = 465; // [!code ++]

	public const int force_weapon = 482;

```

[`@@ -136,11 +126,15 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ENC.cs#L136-L146)
```cs:line-numbers=136

	public const int bane_fish = 467;

	public const int bane_machine = 465; // [!code --]
	public const int bane_god = 466; // [!code ++]
 // [!code ++]
	public const int mod_reload = 601; // [!code ++]

	public const int bane_man = 464;

	public const int bane_god = 466; // [!code --]
	public const int bane_animal = 463; // [!code ++]
 // [!code ++]
	public const int mod_rapid = 602; // [!code ++]

	public const int bane_undead = 461;

```

[`@@ -152,23 +146,29 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ENC.cs#L152-L174)
```cs:line-numbers=152

	public const int sustain_WIL = 445;

	public const int sustain_LER = 444; // [!code --]
	public const int mod_ammo_knockback = 603; // [!code ++]

	public const int bane_fairy = 462; // [!code --]
	public const int sustain_LER = 444; // [!code ++]

	public const int sustain_PER = 443;

	public const int sustain_DEX = 442;

	public const int mod_ammo_recover = 604; // [!code ++]
 // [!code ++]
	public const int optimizeMana = 483; // [!code ++]
 // [!code ++]
	public const int mod_ammo = 600; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[80]
	{
		652, 651, 650, 641, 640, 621, 620, 623, 622, 653,
		624, 654, 851, 656, 660, 661, 662, 663, 664, 665, // [!code --]
		666, 850, 608, 865, 852, 655, 607, 463, 605, 429, // [!code --]
		428, 427, 426, 425, 606, 423, 422, 421, 420, 416, // [!code --]
		624, 654, 850, 656, 660, 661, 662, 663, 664, 665, // [!code ++]
		666, 851, 608, 865, 852, 655, 607, 462, 605, 428, // [!code ++]
		427, 426, 425, 606, 424, 423, 422, 421, 420, 416, // [!code ++]
		415, 412, 411, 410, 409, 408, 407, 406, 405, 404,
		403, 402, 401, 400, 440, 441, 424, 600, 604, 603, // [!code --]
		602, 601, 483, 482, 481, 480, 468, 467, 465, 464, // [!code --]
		466, 461, 460, 447, 446, 445, 444, 462, 443, 442 // [!code --]
		403, 402, 401, 400, 429, 441, 440, 465, 482, 481, // [!code ++]
		480, 468, 467, 466, 601, 464, 463, 602, 461, 460, // [!code ++]
		447, 446, 445, 603, 444, 443, 442, 604, 483, 600 // [!code ++]
	};
}
```

## ElementContainer

[`@@ -621,7 +621,7 @@ public List<Element> ListBestSkills()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/ElementContainer.cs#L621-L627)
```cs:line-numbers=621

	public List<Element> ListGeneFeats()
	{
		return ListElements((Element a) => a.Value > 0 && a.source.category == "feat" && a.source.cost.Length != 0 && a.source.cost[0] > 0); // [!code --]
		return ListElements((Element a) => a.Value > 0 && a.source.category == "feat" && a.source.cost.Length != 0 && a.source.cost[0] > 0 && a.source.geneSlot >= 0); // [!code ++]
	}

	public List<Element> ListLearnable(Chara c)
```

## FACTION

[`@@ -4,31 +4,31 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/FACTION.cs#L4-L34)
```cs:line-numbers=4

public class FACTION
{
	public const int bfBeach = 3604; // [!code --]
	public const int bfForest = 3601; // [!code ++]
 // [!code ++]
	public const int bfPlain = 3600; // [!code ++]

	public const int bfCave = 3500;

	public const int bfPlain = 3600; // [!code --]
	public const int bfHill = 3603; // [!code ++]

	public const int bfForest = 3601; // [!code --]
	public const int bfRuin = 3702; // [!code ++]

	public const int bfSnow = 3602;

	public const int bfHill = 3603; // [!code --]
 // [!code --]
	public const int bfGeyser = 3701;

	public const int bfFertile = 3700;

	public const int bfSea = 3605; // [!code --]
 // [!code --]
	public const int fRation = 2207;

	public const int bfRuin = 3702; // [!code --]
	public const int bfSea = 3605; // [!code ++]
 // [!code ++]
	public const int bfBeach = 3604; // [!code ++]

	public const int fAttraction = 2206;

	public const int fLoyal = 2117; // [!code --]
	public const int fSoil = 2200; // [!code ++]

	public const int fFood = 2204;

```

[`@@ -38,19 +38,19 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/FACTION.cs#L38-L56)
```cs:line-numbers=38

	public const int fElec = 2201;

	public const int fSoil = 2200; // [!code --]
	public const int fHeirloom = 2120; // [!code ++]

	public const int fLuck = 2118; // [!code --]
	public const int fTaxEvasion = 2119; // [!code ++]

	public const int fConstruction = 2003; // [!code --]
	public const int fLuck = 2118; // [!code ++]

	public const int fHeirloom = 2120; // [!code --]
	public const int fLoyal = 2117; // [!code ++]

	public const int fTaxEvasion = 2119; // [!code --]
	public const int fEducation = 2116; // [!code ++]

	public const int fAdmin = 2115;

	public const int fEducation = 2116; // [!code --]
	public const int fConstruction = 2003; // [!code ++]

	public const int fSafety = 2205;

```

[`@@ -110,9 +110,9 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/FACTION.cs#L110-L118)
```cs:line-numbers=110

	public static readonly int[] IDS = new int[52]
	{
		3604, 3500, 3600, 3601, 3602, 3603, 3701, 3700, 3605, 2207, // [!code --]
		3702, 2206, 2117, 2204, 2203, 2202, 2201, 2200, 2118, 2003, // [!code --]
		2120, 2119, 2115, 2116, 2205, 3703, 3705, 3706, 4006, 4005, // [!code --]
		3601, 3600, 3500, 3603, 3702, 3602, 3701, 3700, 2207, 3605, // [!code ++]
		3604, 2206, 2200, 2204, 2203, 2202, 2201, 2120, 2119, 2118, // [!code ++]
		2117, 2116, 2115, 2003, 2205, 3703, 3705, 3706, 4006, 4005, // [!code ++]
		4004, 4003, 4002, 4001, 3704, 3900, 3805, 3804, 3803, 4000,
		3801, 3802, 3708, 3709, 3710, 3780, 3707, 3782, 3783, 3784,
		3800, 3781
```

## FOOD

[`@@ -1,22 +1,22 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/FOOD.cs#L1-L22)
```cs:line-numbers=1
public class FOOD
{
	public const int food_poison = 702; // [!code --]
	public const int food_CHA = 700; // [!code ++]

	public const int food_love = 703; // [!code --]
	public const int food_cat = 701; // [!code ++]

	public const int food_bug = 704; // [!code --]
	public const int food_god = 758; // [!code ++]

	public const int gainWeight = 705; // [!code --]
	public const int justcooked = 757; // [!code ++]

	public const int loseWeight = 706; // [!code --]
	public const int food_poison = 702; // [!code ++]

	public const int justcooked = 757; // [!code --]
	public const int gainWeight = 705; // [!code ++]

	public const int food_god = 758; // [!code --]
	public const int food_bug = 704; // [!code ++]

	public const int food_cat = 701; // [!code --]
	public const int food_love = 703; // [!code ++]

	public const int food_CHA = 700; // [!code --]
	public const int loseWeight = 706; // [!code ++]

	public static readonly int[] IDS = new int[9] { 702, 703, 704, 705, 706, 757, 758, 701, 700 }; // [!code --]
	public static readonly int[] IDS = new int[9] { 700, 701, 758, 757, 702, 705, 704, 703, 706 }; // [!code ++]
}
```

## FactionBranch

[`@@ -182,6 +182,10 @@ public int GetProductBonus(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/FactionBranch.cs#L182-L187)
```cs:line-numbers=182
		{
			return 0;
		}
		if (c.memberType == FactionMemberType.Livestock) // [!code ++]
		{ // [!code ++]
			return 100; // [!code ++]
		} // [!code ++]
		return Mathf.Max(1, (90 + Evalue(2116) / 2) * efficiency / 100);
	}

```

## Hobby

[`@@ -30,7 +30,7 @@ public int GetLv(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Hobby.cs#L30-L36)
```cs:line-numbers=30
public int GetEfficiency(Chara c)
{
	int num = 50;
	FactionBranch factionBranch = ((c.currentZone == null) ? EClass._zone.branch : c.homeBranch); // [!code --]
	FactionBranch factionBranch = ((c.currentZone != null) ? c.homeBranch : EClass._zone?.branch); // [!code ++]
	if (factionBranch == null || (c.currentZone != null && c.currentZone != factionBranch.owner))
	{
		return 0;
```

## MUTATION

[`@@ -2,33 +2,31 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/MUTATION.cs#L2-L34)
```cs:line-numbers=2
{
	public const int mutationRegen = 1516;

	public const int mutationDexN = 1515; // [!code --]
 // [!code --]
	public const int mutationDex = 1514; // [!code --]
	public const int etherPoisonHand = 1565; // [!code ++]

	public const int mutationSkin = 1510;

	public const int mutationEye = 1512; // [!code --]
 // [!code --]
	public const int mutationSkinN = 1511;

	public const int mutationRegenN = 1517; // [!code --]
	public const int mutationEye = 1512; // [!code ++]

	public const int mutationEyeN = 1513;

	public const int mutationSpeed = 1518; // [!code --]
	public const int mutationDex = 1514; // [!code ++]

	public const int etherPoisonHand = 1565; // [!code --]
	public const int mutationDexN = 1515; // [!code ++]

	public const int mutationStr = 1520; // [!code --]
	public const int mutationRegenN = 1517; // [!code ++]

	public const int etherManaBattery = 1564;

	public const int mutationSpeedN = 1519; // [!code ++]
 // [!code ++]
	public const int etherProvoke = 1563;

	public const int mutationSpeedN = 1519; // [!code --]
	public const int etherArmor = 1562; // [!code ++]

	public const int etherStupid = 1561; // [!code --]
	public const int mutationSpeed = 1518; // [!code ++]

	public const int etherWeak = 1560;

```

[`@@ -48,21 +46,25 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/MUTATION.cs#L48-L68)
```cs:line-numbers=48

	public const int etherFeet = 1552;

	public const int etherArmor = 1562; // [!code --]
	public const int etherUgly = 1551; // [!code ++]

	public const int mutationCha = 1522; // [!code --]
	public const int etherStupid = 1561; // [!code ++]

	public const int mutationStrN = 1521;

	public const int mutationStr = 1520; // [!code ++]
 // [!code ++]
	public const int mutationCha = 1522; // [!code ++]
 // [!code ++]
	public const int mutationChaN = 1523;

	public const int mutationBrain = 1524; // [!code --]
	public const int mutationBrainN = 1525; // [!code ++]

	public const int mutationCold = 1526;

	public const int mutationColdN = 1527; // [!code --]
	public const int mutationBrain = 1524; // [!code ++]

	public const int mutationBrainN = 1525; // [!code --]
	public const int mutationLightning = 1528; // [!code ++]

	public const int mutationLightningN = 1529;

```

[`@@ -70,18 +72,16 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/MUTATION.cs#L70-L87)
```cs:line-numbers=70

	public const int mutationBodyN = 1531;

	public const int etherGravity = 1550; // [!code --]
 // [!code --]
	public const int mutationLightning = 1528; // [!code --]
	public const int mutationColdN = 1527; // [!code ++]

	public const int etherUgly = 1551; // [!code --]
	public const int etherGravity = 1550; // [!code ++]

	public static readonly int[] IDS = new int[38]
	{
		1516, 1515, 1514, 1510, 1512, 1511, 1517, 1513, 1518, 1565, // [!code --]
		1520, 1564, 1563, 1519, 1561, 1560, 1559, 1558, 1557, 1556, // [!code --]
		1555, 1554, 1553, 1552, 1562, 1522, 1521, 1523, 1524, 1526, // [!code --]
		1527, 1525, 1529, 1530, 1531, 1550, 1528, 1551 // [!code --]
		1516, 1565, 1510, 1511, 1512, 1513, 1514, 1515, 1517, 1564, // [!code ++]
		1519, 1563, 1562, 1518, 1560, 1559, 1558, 1557, 1556, 1555, // [!code ++]
		1554, 1553, 1552, 1551, 1561, 1521, 1520, 1522, 1523, 1525, // [!code ++]
		1526, 1524, 1528, 1529, 1530, 1531, 1527, 1550 // [!code ++]
	};
}
public class Mutation : Feat
```

## Map

[`@@ -1424,7 +1424,7 @@ public void Burn(int x, int z, bool instant = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Map.cs#L1424-L1430)
```cs:line-numbers=1424
	}
	foreach (Card item in sharedPoint.ListCards())
	{
		if (item.trait.CanBeDestroyed && !item.trait.IsDoor && item.isThing) // [!code --]
		if (item.trait.CanBeDestroyed && !item.trait.IsDoor && !item.isFireproof && !item.category.IsChildOf("currency") && item.rarity < Rarity.Legendary && !(item.trait is TraitFigure) && item.isThing) // [!code ++]
		{
			if (instant)
			{
```

## POLICY

[`@@ -49,25 +49,25 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/POLICY.cs#L49-L73)
```cs:line-numbers=49

	public const int incomeTransfer = 2711;

	public const int nocturnal_life = 2508; // [!code --]
	public const int inquisition = 2507; // [!code ++]

	public const int noAnimal = 2709;

	public const int noMother = 2710;

	public const int wealth_tax = 2500; // [!code --]
 // [!code --]
	public const int impressment = 2504; // [!code --]
 // [!code --]
	public const int prohibition = 2503;

	public const int food_for_people = 2502;

	public const int faith_tax = 2501; // [!code ++]
 // [!code ++]
	public const int impressment = 2504; // [!code ++]
 // [!code ++]
	public const int legal_drug = 2505;

	public const int human_right = 2506;

	public const int faith_tax = 2501; // [!code --]
	public const int nocturnal_life = 2508; // [!code ++]

	public const int vaccination = 2509;

```

[`@@ -77,16 +77,16 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/POLICY.cs#L77-L92)
```cs:line-numbers=77

	public const int resident_tax = 2512;

	public const int inquisition = 2507; // [!code --]
	public const int wealth_tax = 2500; // [!code ++]

	public const int taxfree = 2514;

	public const int auto_farm = 2707;

	public const int demon_invocation = 2706; // [!code --]
 // [!code --]
	public const int resident_wanted = 2513;

	public const int demon_invocation = 2706; // [!code ++]
 // [!code ++]
	public const int taxTransfer = 2705;

	public const int weed_no = 2703;
```

[`@@ -109,9 +109,9 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/POLICY.cs#L109-L117)
```cs:line-numbers=109
	{
		2812, 2815, 2814, 2813, 2712, 2810, 2800, 2715, 2816, 2811,
		2817, 2824, 2819, 2820, 2821, 2822, 2823, 2825, 2826, 2827,
		2828, 2818, 2711, 2508, 2709, 2710, 2500, 2504, 2503, 2502, // [!code --]
		2505, 2506, 2501, 2509, 2510, 2511, 2512, 2507, 2514, 2707, // [!code --]
		2706, 2513, 2705, 2703, 2704, 2701, 2700, 2516, 2515, 2702, // [!code --]
		2828, 2818, 2711, 2507, 2709, 2710, 2503, 2502, 2501, 2504, // [!code ++]
		2505, 2506, 2508, 2509, 2510, 2511, 2512, 2500, 2514, 2707, // [!code ++]
		2513, 2706, 2705, 2703, 2704, 2701, 2700, 2516, 2515, 2702, // [!code ++]
		2708
	};
}
```

## QuestDeliver

[`@@ -100,7 +100,7 @@ public virtual bool IsDestThing(Thing t)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/QuestDeliver.cs#L100-L106)
```cs:line-numbers=100
	{
		return false;
	}
	if (!t.c_isImportant && t.Num >= num && t.IsIdentified && t.things.Count == 0 && !t.isEquipped) // [!code --]
	if (!t.c_isImportant && t.Num >= num && t.IsIdentified && (!t.IsContainer || t.things.Count == 0) && !t.isEquipped) // [!code ++]
	{
		if (t.id == idThing)
		{
```

## SKILL

[`@@ -8,15 +8,15 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L8-L22)
```cs:line-numbers=8

	public const int shield = 123;

	public const int weaponCrossbow = 109; // [!code --]
	public const int throwing = 108; // [!code ++]

	public const int weaponBlunt = 111;

	public const int weaponScythe = 110;

	public const int fireproof = 50; // [!code --]
	public const int weaponCrossbow = 109; // [!code ++]

	public const int acidproof = 51; // [!code --]
	public const int fireproof = 50; // [!code ++]

	public const int tactics = 132;

```

[`@@ -28,8 +28,6 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L28-L35)
```cs:line-numbers=28

	public const int strategy = 135;

	public const int climbing = 242; // [!code --]
 // [!code --]
	public const int music = 241;

	public const int travel = 240;
```

[`@@ -42,6 +40,8 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L42-L47)
```cs:line-numbers=42

	public const int parasite = 227;

	public const int acidproof = 51; // [!code ++]
 // [!code ++]
	public const int lumberjack = 225;

	public const int mining = 220;
```

[`@@ -62,13 +62,11 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L62-L74)
```cs:line-numbers=62

	public const int PDR = 55;

	public const int weaponSword = 101; // [!code --]
	public const int martial = 100; // [!code ++]

	public const int evasionPerfect = 57;

	public const int fishing = 245; // [!code --]
 // [!code --]
	public const int life = 60; // [!code --]
	public const int climbing = 242; // [!code ++]

	public const int mana = 61;

```

[`@@ -94,11 +92,11 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L94-L104)
```cs:line-numbers=94

	public const int LER = 74;

	public const int EDR = 56; // [!code --]
 // [!code --]
	public const int WIL = 75;

	public const int CHA = 77; // [!code --]
	public const int EDR = 56; // [!code ++]
 // [!code ++]
	public const int MAG = 76; // [!code ++]

	public const int LUC = 78;

```

[`@@ -112,27 +110,31 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L112-L138)
```cs:line-numbers=112

	public const int penetration = 92;

	public const int martial = 100; // [!code --]
	public const int antiMagic = 93; // [!code ++]
 // [!code ++]
	public const int weaponSword = 101; // [!code ++]

	public const int weaponAxe = 102;

	public const int weaponStaff = 103;

	public const int weaponBow = 104; // [!code --]
	public const int weaponGun = 105; // [!code ++]

	public const int weaponPolearm = 106;

	public const int weaponDagger = 107;

	public const int throwing = 108; // [!code --]
	public const int life = 60; // [!code ++]

	public const int MAG = 76; // [!code --]
	public const int CHA = 77; // [!code ++]

	public const int gathering = 250; // [!code --]
	public const int fishing = 245; // [!code ++]

	public const int weaponGun = 105; // [!code --]
	public const int weaponBow = 104; // [!code ++]

	public const int blacksmith = 256; // [!code --]
	public const int carpentry = 255; // [!code ++]
 // [!code ++]
	public const int elePoison = 915; // [!code ++]

	public const int eleNether = 916;

```

[`@@ -160,9 +162,9 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L160-L168)
```cs:line-numbers=160

	public const int resLightning = 952;

	public const int resDarkness = 953; // [!code --]
	public const int eleMind = 914; // [!code ++]

	public const int resMind = 954; // [!code --]
	public const int resDarkness = 953; // [!code ++]

	public const int resPoison = 955;

```

[`@@ -190,15 +192,17 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L190-L204)
```cs:line-numbers=190

	public const int resCurse = 972;

	public const int carpentry = 255; // [!code --]
	public const int gathering = 250; // [!code ++]

	public const int elePoison = 915; // [!code --]
	public const int resMind = 954; // [!code ++]

	public const int eleMind = 914; // [!code --]
	public const int eleDarkness = 913; // [!code ++]

	public const int resDecay = 970;

	public const int eleLightning = 912; // [!code --]
	public const int eleCold = 911; // [!code ++]
 // [!code ++]
	public const int blacksmith = 256; // [!code ++]

	public const int alchemy = 257;

```

[`@@ -218,7 +222,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L218-L224)
```cs:line-numbers=218

	public const int farming = 286;

	public const int cooking = 287; // [!code --]
	public const int building = 288; // [!code ++]

	public const int appraising = 289;

```

[`@@ -226,29 +230,25 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L226-L254)
```cs:line-numbers=226

	public const int negotiation = 291;

	public const int investing = 292; // [!code --]
 // [!code --]
	public const int building = 288; // [!code --]
 // [!code --]
	public const int regeneration = 300; // [!code --]
	public const int cooking = 287; // [!code ++]

	public const int eleCold = 911; // [!code --]
	public const int disarmTrap = 293; // [!code ++]

	public const int eleFire = 910;

	public const int env = 313;

	public const int disarmTrap = 293; // [!code --]
 // [!code --]
	public const int fun = 312;

	public const int investing = 292; // [!code ++]
 // [!code ++]
	public const int bladder = 311;

	public const int hygine = 310;

	public const int eleDarkness = 913; // [!code --]
	public const int memorization = 307; // [!code ++]

	public const int faith = 306; // [!code --]
	public const int eleLightning = 912; // [!code ++]

	public const int magicDevice = 305;

```

[`@@ -258,26 +258,28 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SKILL.cs#L258-L283)
```cs:line-numbers=258

	public const int controlmana = 302;

	public const int memorization = 307; // [!code --]
 // [!code --]
	public const int meditation = 301;

	public static readonly int[] IDS = new int[131] // [!code --]
	public const int faith = 306; // [!code ++]
 // [!code ++]
	public const int regeneration = 300; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[132] // [!code ++]
	{
		131, 122, 130, 123, 109, 111, 110, 50, 51, 132, // [!code --]
		120, 133, 226, 135, 242, 241, 240, 237, 235, 230, // [!code --]
		227, 225, 220, 210, 207, 200, 152, 151, 150, 134, // [!code --]
		55, 101, 57, 245, 60, 61, 62, 64, 65, 66, // [!code --]
		67, 68, 70, 71, 72, 73, 74, 56, 75, 77, // [!code --]
		78, 79, 80, 90, 91, 92, 100, 102, 103, 104, // [!code --]
		106, 107, 108, 76, 250, 105, 256, 916, 917, 918, // [!code --]
		919, 920, 921, 922, 923, 924, 925, 950, 951, 952, // [!code --]
		953, 954, 955, 956, 957, 958, 959, 960, 961, 962, // [!code --]
		963, 964, 965, 971, 972, 255, 915, 914, 970, 912, // [!code --]
		257, 258, 259, 260, 261, 280, 281, 285, 286, 287, // [!code --]
		289, 290, 291, 292, 288, 300, 911, 910, 313, 293, // [!code --]
		312, 311, 310, 913, 306, 305, 304, 303, 302, 307, // [!code --]
		301 // [!code --]
		131, 122, 130, 123, 108, 111, 110, 109, 50, 132, // [!code ++]
		120, 133, 226, 135, 241, 240, 237, 235, 230, 227, // [!code ++]
		51, 225, 220, 210, 207, 200, 152, 151, 150, 134, // [!code ++]
		55, 100, 57, 242, 61, 62, 64, 65, 66, 67, // [!code ++]
		68, 70, 71, 72, 73, 74, 75, 56, 76, 78, // [!code ++]
		79, 80, 90, 91, 92, 93, 101, 102, 103, 105, // [!code ++]
		106, 107, 60, 77, 245, 104, 255, 915, 916, 917, // [!code ++]
		918, 919, 920, 921, 922, 923, 924, 925, 950, 951, // [!code ++]
		952, 914, 953, 955, 956, 957, 958, 959, 960, 961, // [!code ++]
		962, 963, 964, 965, 971, 972, 250, 954, 913, 970, // [!code ++]
		911, 256, 257, 258, 259, 260, 261, 280, 281, 285, // [!code ++]
		286, 288, 289, 290, 291, 287, 293, 910, 313, 312, // [!code ++]
		292, 311, 310, 307, 912, 305, 304, 303, 302, 301, // [!code ++]
		306, 300 // [!code ++]
	};
}
public class Skill : Element
```

## SPELL

[`@@ -40,7 +40,7 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SPELL.cs#L40-L46)
```cs:line-numbers=40

	public const int puddle_Nether = 50906;

	public const int ball_Mind = 50104; // [!code --]
	public const int weapon_Nether = 50806; // [!code ++]

	public const int miasma_Nether = 50706;

```

[`@@ -82,17 +82,17 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SPELL.cs#L82-L98)
```cs:line-numbers=82

	public const int funnel_Nether = 50606;

	public const int weapon_Nether = 50806; // [!code --]
	public const int ball_Mind = 50104; // [!code ++]

	public const int weapon_Mind = 50804;

	public const int puddle_Ether = 50912; // [!code --]
	public const int ball_Acid = 50113; // [!code ++]

	public const int hand_Holy = 50409;

	public const int miasma_Darkness = 50703; // [!code --]
	public const int puddle_Ether = 50912; // [!code ++]

	public const int ball_Acid = 50113; // [!code --]
	public const int miasma_Darkness = 50703; // [!code ++]

	public const int bolt_Acid = 50313;

```

[`@@ -196,7 +196,7 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SPELL.cs#L196-L202)
```cs:line-numbers=196

	public const int funnel_Darkness = 50603;

	public const int SpDrawMetal = 9502; // [!code --]
	public const int SpDrawMonster = 9501; // [!code ++]

	public const int hand_Darkness = 50403;

```

[`@@ -366,7 +366,7 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SPELL.cs#L366-L372)
```cs:line-numbers=366

	public const int ball_Fire = 50100;

	public const int SpDrawMonster = 9501; // [!code --]
	public const int SpDrawMetal = 9502; // [!code ++]

	public const int SpGravity = 8708;

```

[`@@ -424,14 +424,14 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SPELL.cs#L424-L437)
```cs:line-numbers=424
{
	50107, 50903, 50307, 50407, 50507, 50607, 50707, 50807, 50108, 50803,
	50109, 50308, 50408, 50508, 50608, 50708, 50808, 50908, 50907, 50906,
	50104, 50706, 50904, 50704, 50105, 50604, 50305, 50405, 50505, 50605, // [!code --]
	50806, 50706, 50904, 50704, 50105, 50604, 50305, 50405, 50505, 50605, // [!code ++]
	50504, 50705, 50404, 50805, 50905, 50106, 50304, 50306, 50406, 50506,
	50606, 50806, 50804, 50912, 50409, 50703, 50113, 50313, 50413, 50513, // [!code --]
	50606, 50104, 50804, 50113, 50409, 50912, 50703, 50313, 50413, 50513, // [!code ++]
	50613, 50713, 50813, 50913, 50114, 50314, 50414, 50514, 50614, 50714,
	50814, 50914, 50115, 50315, 50415, 50515, 50615, 50715, 50812, 50712,
	50612, 50512, 50509, 50609, 50709, 50809, 50909, 50110, 50310, 50410,
	50510, 50610, 50710, 50309, 50810, 50111, 50311, 50411, 50511, 50611,
	50711, 50811, 50911, 50112, 50312, 50412, 50910, 50603, 9502, 50403, // [!code --]
	50711, 50811, 50911, 50112, 50312, 50412, 50910, 50603, 9501, 50403, // [!code ++]
	8300, 8380, 8390, 8400, 8401, 8402, 8403, 8404, 8405, 8406,
	8430, 8288, 8450, 8471, 8480, 8490, 8491, 8500, 8501, 8502,
	8503, 8504, 8506, 8510, 8470, 8700, 8286, 8284, 50815, 7001,
```

[`@@ -440,7 +440,7 @@ public class SPELL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/SPELL.cs#L440-L446)
```cs:line-numbers=440
	8280, 8281, 8221, 50503, 8702, 8706, 50400, 50500, 50600, 50700,
	50800, 50900, 50101, 50301, 50401, 50501, 50601, 50300, 50701, 50901,
	50102, 50302, 50402, 50502, 50602, 50702, 50802, 50902, 50103, 50303,
	50801, 8704, 50100, 9501, 8708, 8710, 8770, 8775, 8776, 8780, // [!code --]
	50801, 8704, 50100, 9502, 8708, 8710, 8770, 8775, 8776, 8780, // [!code ++]
	8790, 8791, 8800, 8801, 9000, 9503, 9001, 9003, 9004, 9005,
	9006, 9007, 9050, 9150, 9151, 9160, 9200, 9500, 9002, 50915
};
```

## StatsMana

[`@@ -2,7 +2,7 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/StatsMana.cs#L2-L8)
```cs:line-numbers=2

public class StatsMana : Stats
{
	public override int max => Mathf.Max(1, ((BaseStats.CC.MAG * 2 + BaseStats.CC.WIL + BaseStats.CC.LER / 2) * Mathf.Min(BaseStats.CC.LV, 25) / 25 + BaseStats.CC.MAG + 10) * BaseStats.CC.Evalue(61) / 100 * ((BaseStats.CC.IsPCFaction ? 100 : (100 + (int)BaseStats.CC.rarity * 250)) + (BaseStats.CC.IsPC ? (EClass.player.lastEmptyAlly * BaseStats.CC.Evalue(1646)) : 0)) / 100); // [!code --]
	public override int max => Mathf.Max(1, ((BaseStats.CC.MAG * 2 + BaseStats.CC.WIL + BaseStats.CC.LER / 2) * Mathf.Min(BaseStats.CC.LV, 25) / 25 + BaseStats.CC.MAG + 10) * (BaseStats.CC.Evalue(61) - BaseStats.CC.Evalue(93)) / 100 * ((BaseStats.CC.IsPCFaction ? 100 : (100 + (int)BaseStats.CC.rarity * 250)) + (BaseStats.CC.IsPC ? (EClass.player.lastEmptyAlly * BaseStats.CC.Evalue(1646)) : 0)) / 100); // [!code ++]

	public override int min => -9999;

```

## Thing

[`@@ -154,7 +154,7 @@ public override void SetSource()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/Thing.cs#L154-L160)
```cs:line-numbers=154
	if (source == null)
	{
		Debug.LogWarning("Thing " + id + " not found");
		id = "1101"; // [!code --]
		id = "ash3"; // [!code ++]
		source = EClass.sources.things.map[id];
	}
}
```

## TraitAltar

[`@@ -153,10 +153,15 @@ public void OnOffer(Chara c, Thing t)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/TraitAltar.cs#L153-L162)
```cs:line-numbers=153
	{
		if (t.HasTag(CTAG.godArtifact) && t.c_idDeity == Deity.id)
		{
			int encLV = t.encLV; // [!code --]
			_ = t.encLV; // [!code ++]
			t.Destroy();
			Religion.Reforge(t.id); // [!code --]
			t.SetEncLv(encLV); // [!code --]
			Thing thing = Religion.Reforge(t.id); // [!code ++]
			thing.SetEncLv(t.encLV); // [!code ++]
			thing.SetBlessedState(t.blessedState); // [!code ++]
			if (t.IsIdentified) // [!code ++]
			{ // [!code ++]
				thing.Identify(show: true, IDTSource.SuperiorIdentify); // [!code ++]
			} // [!code ++]
			return;
		}
		if (EClass.pc.IsEyth)
```

## TraitFoodPreparedPackage

[`@@ -4,7 +4,11 @@ public class TraitFoodPreparedPackage : TraitFood`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/TraitFoodPreparedPackage.cs#L4-L10)
```cs:line-numbers=4

	public override bool CanEat(Chara c)
	{
		return owner.idSkin == 1; // [!code --]
		if (c.IsPC) // [!code ++]
		{ // [!code ++]
			return owner.idSkin == 1; // [!code ++]
		} // [!code ++]
		return true; // [!code ++]
	}

	public override bool CanUse(Chara c)
```

## TraitWrench

[`@@ -136,7 +136,7 @@ public override void TrySetHeldAct(ActPlan p)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/TraitWrench.cs#L136-L142)
```cs:line-numbers=136
					Msg.Say("noMoreUpgrade", t, owner.GetName(NameStyle.Full, 1));
				}
				return false;
			}); // [!code --]
			}, t); // [!code ++]
		}
	});
}
```

## WindowChara

[`@@ -664,9 +664,27 @@ public void RefreshSkill(int idTab)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/55c6af1934813e86be4e55984ae13749ca61b22c/Elin/WindowChara.cs#L664-L672)
```cs:line-numbers=664
					return false;
				}
			}
			else if ((a.owner == chara.elements && a.vLink == 0 && !a.IsFactionElement(chara)) || a.source.category == "resist") // [!code --]
			else // [!code ++]
			{
				return false; // [!code --]
				switch (a.id) // [!code ++]
				{ // [!code ++]
				case 55: // [!code ++]
				case 56: // [!code ++]
				case 57: // [!code ++]
				case 68: // [!code ++]
				case 90: // [!code ++]
				case 91: // [!code ++]
				case 93: // [!code ++]
					if (a.vSource != 0) // [!code ++]
					{ // [!code ++]
						return true; // [!code ++]
					} // [!code ++]
					break; // [!code ++]
				} // [!code ++]
				if ((a.owner == chara.elements && a.vLink == 0 && !a.IsFactionElement(chara)) || a.source.category == "resist") // [!code ++]
				{ // [!code ++]
					return false; // [!code ++]
				} // [!code ++]
			}
			return true;
		});
```

---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 14 files modified. 1 new file created.
version: EA 23.173 Stable
changes: AI_Fuck/ActPlan/AttackProcess/+AttackSourceSub/Card/CardRenderer/CodexManager/FEAT/FOOD/MUTATION/Net/SKILL/SerializedCards/Thing/TraitFakeBlock
---

# EA 23.173 Stable

July 27, 2025

14 files modified. 1 new file created.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [Card (1)](#card)
```cs:no-line-numbers
public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource = AttackSource.None, Card origin = null, bool showEffect = true, Thing weapon = null) // [!code --]
public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource = AttackSource.None, Card origin = null, bool showEffect = true, Thing weapon = null, AttackSourceSub attackSourceSub = AttackSourceSub.None) // [!code ++]
```
## AI_Fuck

[`@@ -23,6 +23,8 @@ public enum FuckType`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/AI_Fuck.cs#L23-L28)
```cs:line-numbers=23

	public int progress;

	public int fails; // [!code ++]
 // [!code ++]
	public int totalAffinity;

	public virtual FuckType Type => FuckType.fuck;
```

[`@@ -140,7 +142,16 @@ public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/AI_Fuck.cs#L140-L146)
```cs:line-numbers=140
			{
				tc.PlaySound("brushing");
				int num2 = cc.CHA / 2 + cc.Evalue(237) - tc.CHA * 2;
				int num3 = ((EClass.rnd(cc.CHA / 2 + cc.Evalue(237)) <= EClass.rnd(tc.CHA * num / 100)) ? (-5 + ((!tc.IsPCFaction) ? Mathf.Clamp(num2 / 10, -30, 0) : 0)) : (5 + Mathf.Clamp(num2 / 20, 0, 20))); // [!code --]
				int num3; // [!code ++]
				if (EClass.rnd(cc.CHA / 2 + cc.Evalue(237)) > EClass.rnd(tc.CHA * num / 100)) // [!code ++]
				{ // [!code ++]
					num3 = 5 + Mathf.Clamp(num2 / 20, 0, 20); // [!code ++]
				} // [!code ++]
				else // [!code ++]
				{ // [!code ++]
					num3 = -5 + ((!tc.IsPCFaction) ? Mathf.Clamp(num2 / 10, -30, 0) : 0); // [!code ++]
					fails++; // [!code ++]
				} // [!code ++]
				int a = 20;
				if (tc.IsPCFactionOrMinion && tc.affinity.CurrentStage >= Affinity.Stage.Love)
				{
```

[`@@ -338,7 +349,7 @@ public void Finish()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/AI_Fuck.cs#L338-L344)
```cs:line-numbers=338
				chara.Say("tame_fail", chara, chara2);
			}
		}
		if (num > EClass.rnd(100)) // [!code --]
		if (fails > 0 && num > EClass.rnd(100)) // [!code ++]
		{
			chara2.DoHostileAction(chara);
			chara2.calmCheckTurn *= 3;
```

## ActPlan

[`@@ -315,11 +315,32 @@ public Func<bool> GetAction()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/ActPlan.cs#L315-L325)
```cs:line-numbers=315
		};
	}

	public void Order(string id) // [!code ++]
	{ // [!code ++]
		EClass.player.forceTalk = true; // [!code ++]
		EClass.pc.SayRaw(id.lang()); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public void ShowContextMenu()
	{
		UIContextMenu uIContextMenu = EClass.ui.CreateContextMenuInteraction();
		int num = 1;
		_ = showOrder; // [!code --]
		if (showOrder) // [!code ++]
		{ // [!code ++]
			UIContextMenu uIContextMenu2 = uIContextMenu.AddChild("order_ally"); // [!code ++]
			uIContextMenu2.AddButton("order_fight", delegate // [!code ++]
			{ // [!code ++]
				Order("order_fight"); // [!code ++]
			}); // [!code ++]
			uIContextMenu2.AddButton("order_heal", delegate // [!code ++]
			{ // [!code ++]
				Order("order_heal"); // [!code ++]
			}); // [!code ++]
			uIContextMenu2.AddButton("order_wait", delegate // [!code ++]
			{ // [!code ++]
				Order("order_wait"); // [!code ++]
			}); // [!code ++]
		} // [!code ++]
		foreach (Item i in list)
		{
			string textContext = i.GetTextContext(HasMultipleTargets);
```

[`@@ -862,7 +883,7 @@ void func()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/ActPlan.cs#L862-L868)
```cs:line-numbers=862
				{
					TrySetAct(ACT.Wait);
				}
				if (EClass.pc.party.members.Count > 1) // [!code --]
				if (EClass.debug.enable) // [!code ++]
				{
					showOrder = true;
				}
```

## AttackProcess

[`@@ -473,9 +473,13 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/AttackProcess.cs#L473-L481)
```cs:line-numbers=473
		num2 += weapon.Evalue(91, ignoreGlobalElement: true);
		num3 += weapon.Evalue(603, ignoreGlobalElement: true);
	}
	else if (CC.id == "rabbit_vopal") // [!code --]
	else // [!code ++]
	{
		list2.Add(Element.Create(6650, 100)); // [!code --]
		string id = CC.id; // [!code ++]
		if (id == "rabbit_vopal" || id == "mantis_killer") // [!code ++]
		{ // [!code ++]
			list2.Add(Element.Create(6650, 100)); // [!code ++]
		} // [!code ++]
	}
	int bane;
	if (TC?.Chara != null)
```

[`@@ -770,22 +774,22 @@ void ModExpDef(int ele, int mod)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/AttackProcess.cs#L770-L791)
```cs:line-numbers=770
	}
	void PlayHitEffect()
	{
		string id = "hit_default"; // [!code --]
		string id2 = "hit_default";
		string id3 = "hit_default"; // [!code ++]
		switch (attackType)
		{
		case AttackType.Slash:
			id3 = "hit_slash"; // [!code ++]
			id2 = "hit_slash";
			id = "hit_slash"; // [!code --]
			break;
		case AttackType.Spore:
			id3 = "hit_spore"; // [!code ++]
			id2 = "hit_spore";
			id = "hit_spore"; // [!code --]
			break;
		case AttackType.Claw:
		case AttackType.Bite:
			id3 = "hit_claw"; // [!code ++]
			id2 = "hit_claw";
			id = "hit_claw"; // [!code --]
			break;
		case AttackType.Blunt:
		case AttackType.Punch:
```

[`@@ -793,15 +797,15 @@ void PlayHitEffect()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/AttackProcess.cs#L793-L807)
```cs:line-numbers=793
		case AttackType.Bow:
		case AttackType.Gun:
		case AttackType.Cane:
			id3 = "hit_blunt"; // [!code ++]
			id2 = "hit_blunt";
			id = "hit_blunt"; // [!code --]
			break;
		}
		if (TC != null)
		{
			TC.PlayEffect(id2).SetScale(crit ? 1.25f : 0.75f); // [!code --]
			TC.PlayEffect(id3).SetScale(crit ? 1.25f : 0.75f); // [!code ++]
		}
		CC.PlaySound(id); // [!code --]
		CC.PlaySound(id2); // [!code ++]
	}
	void Proc(List<Element> list)
	{
```

## +AttackSourceSub

::: details File Created
```cs
public enum AttackSourceSub
{
	None,
	FleshWall
}
```

:::
## Card

[`@@ -3634,6 +3634,10 @@ public void SetPlaceState(PlaceState newState, bool byPlayer = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L3634-L3639)
```cs:line-numbers=3634
	{
		this.placeState = newState;
	}
	if (trait is TraitFakeBlock) // [!code ++]
	{ // [!code ++]
		_CreateRenderer(); // [!code ++]
	} // [!code ++]
	if (newState == PlaceState.none)
	{
		this.placeState = PlaceState.roaming;
```

[`@@ -3910,12 +3914,29 @@ public void DamageHP(int dmg, AttackSource attackSource = AttackSource.None, Car`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L3910-L3921)
```cs:line-numbers=3910
		DamageHP(dmg, 0, 0, attackSource, origin);
	}

	public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource = AttackSource.None, Card origin = null, bool showEffect = true, Thing weapon = null) // [!code --]
	public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource = AttackSource.None, Card origin = null, bool showEffect = true, Thing weapon = null, AttackSourceSub attackSourceSub = AttackSourceSub.None) // [!code ++]
	{
		if (hp < 0)
		{
			return;
		}
		bool flag = attackSourceSub == AttackSourceSub.FleshWall; // [!code ++]
		if (isChara && !HasElement(1241)) // [!code ++]
		{ // [!code ++]
			AttackSource attackSource2 = attackSource; // [!code ++]
			if (attackSource2 != AttackSource.Fatigue && (uint)(attackSource2 - 13) > 4u) // [!code ++]
			{ // [!code ++]
				foreach (Chara chara3 in EClass._map.charas) // [!code ++]
				{ // [!code ++]
					int num = chara3.Evalue(1241); // [!code ++]
					if (num != 0 && !chara3.IsDisabled && !chara3.isRestrained && !chara3.IsDeadOrSleeping && chara3 != this && !chara3.IsHostile(Chara) && chara3.Dist(this) <= num) // [!code ++]
					{ // [!code ++]
						chara3.DamageHP(dmg, ele, eleP, attackSource, origin, showEffect, weapon, AttackSourceSub.FleshWall); // [!code ++]
						return; // [!code ++]
					} // [!code ++]
				} // [!code ++]
			} // [!code ++]
		} // [!code ++]
		Element e;
		if (ele == 0 || ele == 926)
		{
```

[`@@ -3938,12 +3959,12 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L3938-L3949)
```cs:line-numbers=3938
		}
		if (!e.source.aliasRef.IsEmpty() && attackSource != AttackSource.ManaBackfire)
		{
			int num = ((origin != null) ? origin.Evalue(1238) : 0); // [!code --]
			int num2 = ((origin != null) ? origin.Evalue(1238) : 0); // [!code ++]
			if (attackSource == AttackSource.MagicSword)
			{
				num += 2; // [!code --]
				num2 += 2; // [!code ++]
			}
			dmg = Element.GetResistDamage(dmg, Evalue(e.source.aliasRef), num); // [!code --]
			dmg = Element.GetResistDamage(dmg, Evalue(e.source.aliasRef), num2); // [!code ++]
			dmg = dmg * 100 / (100 + Mathf.Clamp(Evalue(961) * 5, -50, 200));
			dmg = dmg * Mathf.Max(100 - Evalue(93), 10) / 100;
		}
```

[`@@ -3985,13 +4006,13 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L3985-L3997)
```cs:line-numbers=3985
		}
		if (EClass.game.principal.enableDamageReduction && IsPCFaction)
		{
			int num2 = ((origin != null) ? origin.LV : EClass._zone.DangerLv); // [!code --]
			if (num2 > 50) // [!code --]
			int num3 = ((origin != null) ? origin.LV : EClass._zone.DangerLv); // [!code ++]
			if (num3 > 50) // [!code ++]
			{
				dmg = dmg * (100 - (int)Mathf.Min(95f, Mathf.Sqrt(num2 - 50))) / 100; // [!code --]
				dmg = dmg * (100 - (int)Mathf.Min(95f, Mathf.Sqrt(num3 - 50))) / 100; // [!code ++]
			}
		}
		dmg = dmg * Mathf.Max(0, 100 - Evalue((e == Element.Void || e.id == 926) ? 55 : 56)) / 100; // [!code --]
		dmg = dmg * Mathf.Max(0, 100 - Mathf.Min(Evalue((e == Element.Void || e.id == 926) ? 55 : 56), 100) / ((!flag) ? 1 : 2)) / 100; // [!code ++]
		if (origin != null && origin.IsPC && EClass.player.codex.Has(id))
		{
			dmg = dmg * (100 + Mathf.Min(10, EClass.player.codex.GetOrCreate(id).weakspot)) / 100;
```

[`@@ -4010,26 +4031,26 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4010-L4035)
```cs:line-numbers=4010
		}
		if (EClass.pc.HasElement(1207) && isChara)
		{
			int num3 = 0; // [!code --]
			int num4 = 0;
			int num5 = 0; // [!code ++]
			foreach (Condition condition2 in Chara.conditions)
			{
				if (condition2.Type == ConditionType.Buff)
				{
					num3++; // [!code --]
					num4++; // [!code ++]
				}
				else if (condition2.Type == ConditionType.Debuff)
				{
					num4++; // [!code --]
					num5++; // [!code ++]
				}
			}
			if (IsPCParty)
			{
				dmg = dmg * 100 / Mathf.Min(100 + num3 * 5, 120); // [!code --]
				dmg = dmg * 100 / Mathf.Min(100 + num4 * 5, 120); // [!code ++]
			}
			else
			{
				dmg = dmg * Mathf.Min(100 + num4 * 5, 120) / 100; // [!code --]
				dmg = dmg * Mathf.Min(100 + num5 * 5, 120) / 100; // [!code ++]
			}
		}
		if (IsPCParty && EClass.pc.ai is GoalAutoCombat)
```

[`@@ -4038,7 +4059,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4038-L4044)
```cs:line-numbers=4038
		}
		if (HasElement(1218) && attackSource != AttackSource.ManaBackfire && (hp > 0 || Evalue(1421) <= 0))
		{
			dmg = dmg * (1000 - Evalue(1218)) / 1000; // [!code --]
			dmg = dmg * (1000 - Mathf.Min(Evalue(1218), 1000) / ((!flag) ? 1 : 2)) / 1000; // [!code ++]
			if (dmg <= 0 && EClass.rnd(4) == 0)
			{
				dmg++;
```

[`@@ -4046,10 +4067,10 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4046-L4055)
```cs:line-numbers=4046
		}
		if (dmg >= MaxHP / 10 && Evalue(68) > 0)
		{
			int num5 = MaxHP / 10; // [!code --]
			int num6 = dmg - num5; // [!code --]
			num6 = num6 * 100 / (200 + Evalue(68) * 10); // [!code --]
			dmg = num5 + num6; // [!code --]
			int num6 = MaxHP / 10; // [!code ++]
			int num7 = dmg - num6; // [!code ++]
			num7 = num7 * 100 / (200 + Evalue(68) * 10); // [!code ++]
			dmg = num6 + num7; // [!code ++]
		}
	}
	if (origin != null && origin.IsPC && EClass.pc.Evalue(654) > 0)
```

[`@@ -4060,19 +4081,19 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4060-L4078)
```cs:line-numbers=4060
	{
		dmg = 0;
	}
	int num7 = Mathf.Clamp(dmg * 6 / MaxHP, 0, 4) + ((dmg > 0) ? 1 : 0); // [!code --]
	int num8 = Mathf.Clamp(dmg * 6 / MaxHP, 0, 4) + ((dmg > 0) ? 1 : 0); // [!code ++]
	if (Evalue(1421) > 0)
	{
		int num8 = 0; // [!code --]
		int num9 = dmg; // [!code --]
		int num9 = 0; // [!code ++]
		int num10 = dmg; // [!code ++]
		if (hp > 0)
		{
			num9 = dmg - hp; // [!code --]
			num10 = dmg - hp; // [!code ++]
			hp -= dmg;
			num8 += dmg; // [!code --]
			num9 += dmg; // [!code ++]
			if (hp < 0 && Chara.mana.value >= 0)
			{
				num8 += hp; // [!code --]
				num9 += hp; // [!code ++]
				hp = 0;
			}
		}
```

[`@@ -4080,22 +4101,22 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4080-L4101)
```cs:line-numbers=4080
		{
			if (Evalue(1421) >= 2)
			{
				num9 /= 2; // [!code --]
				num10 /= 2; // [!code ++]
			}
			dmg = num9; // [!code --]
			dmg = num10; // [!code ++]
			if (Chara.mana.value > 0)
			{
				num9 -= Chara.mana.value; // [!code --]
				num10 -= Chara.mana.value; // [!code ++]
				Chara.mana.value -= dmg;
				num8 += dmg; // [!code --]
				num9 += dmg; // [!code ++]
			}
			if (Chara.mana.value <= 0)
			{
				hp -= num9; // [!code --]
				num8 += num9; // [!code --]
				hp -= num10; // [!code ++]
				num9 += num10; // [!code ++]
			}
		}
		dmg = num8; // [!code --]
		dmg = num9; // [!code ++]
	}
	else
	{
```

[`@@ -4120,7 +4141,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4120-L4126)
```cs:line-numbers=4120
		aI_PracticeDummy.totalDamage += dmg;
	}
	ZoneInstanceBout zoneInstanceBout = EClass._zone.instance as ZoneInstanceBout;
	bool flag = false; // [!code --]
	bool flag2 = false; // [!code ++]
	if (hp < 0 && Religion.recentWrath == null)
	{
		if (isRestrained && IsPCFaction && EClass._zone.IsPCFaction && (!IsPC || (Chara.ai is AI_Torture && Chara.ai.IsRunning)))
```

[`@@ -4156,7 +4177,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4156-L4162)
```cs:line-numbers=4156
			else if (Chara.host != null || (weapon != null && weapon.HasElement(485)))
			{
				EvadeDeath();
				flag = true; // [!code --]
				flag2 = true; // [!code ++]
			}
			else if (zoneInstanceBout != null && (bool)LayerDrama.Instance)
			{
```

[`@@ -4183,7 +4204,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4183-L4189)
```cs:line-numbers=4183
					if (EClass.player.invlunerable)
					{
						EvadeDeath();
						goto IL_0bcf; // [!code --]
						goto IL_0cdd; // [!code ++]
					}
				}
				if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2)
```

[`@@ -4195,8 +4216,8 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4195-L4202)
```cs:line-numbers=4195
			}
		}
	}
	goto IL_0bcf; // [!code --]
	IL_0bcf: // [!code --]
	goto IL_0cdd; // [!code ++]
	IL_0cdd: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

[`@@ -4259,18 +4280,18 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4259-L4276)
```cs:line-numbers=4259
				PlaySound("revive");
				return;
			}
			foreach (Chara chara3 in EClass._map.charas) // [!code --]
			foreach (Chara chara4 in EClass._map.charas) // [!code ++]
			{
				if (Chara.IsFriendOrAbove(chara3) && chara3.HasElement(1408) && chara3.faith == EClass.game.religions.Healing && EClass.world.date.GetRawDay() != chara3.GetInt(58) && (!chara3.IsPCFaction || IsPCFaction)) // [!code --]
				if (Chara.IsFriendOrAbove(chara4) && chara4.HasElement(1408) && chara4.faith == EClass.game.religions.Healing && EClass.world.date.GetRawDay() != chara4.GetInt(58) && (!chara4.IsPCFaction || IsPCFaction)) // [!code ++]
				{
					Msg.alwaysVisible = true;
					Msg.Say("layhand", chara3, this); // [!code --]
					Msg.Say("layhand", chara4, this); // [!code ++]
					Msg.Say("pray_heal", this);
					hp = MaxHP;
					Chara.AddCondition<ConInvulnerable>();
					PlayEffect("revive");
					PlaySound("revive");
					chara3.SetInt(58, EClass.world.date.GetRawDay()); // [!code --]
					chara4.SetInt(58, EClass.world.date.GetRawDay()); // [!code ++]
					return;
				}
			}
```

[`@@ -4376,26 +4397,26 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4376-L4401)
```cs:line-numbers=4376
	}
	else if ((attackSource == AttackSource.Melee || attackSource == AttackSource.Range) && origin != null)
	{
		(IsPC ? EClass.pc : origin).Say("dmgMelee" + num7 + (IsPC ? "pc" : ""), origin, this); // [!code --]
		(IsPC ? EClass.pc : origin).Say("dmgMelee" + num8 + (IsPC ? "pc" : ""), origin, this); // [!code ++]
	}
	else if (isChara)
	{
		int num10 = ((attackSource != AttackSource.Condition && attackSource != AttackSource.WeaponEnchant) ? 1 : 2); // [!code --]
		if (num7 >= num10) // [!code --]
		int num11 = ((attackSource != AttackSource.Condition && attackSource != AttackSource.WeaponEnchant) ? 1 : 2); // [!code ++]
		if (num8 >= num11) // [!code ++]
		{
			if (e != Element.Void)
			{
				Say("dmg_" + e.source.alias, this);
			}
			if (e == Element.Void || num7 >= 2) // [!code --]
			if (e == Element.Void || num8 >= 2) // [!code ++]
			{
				Say("dmg" + num7, this); // [!code --]
				Say("dmg" + num8, this); // [!code ++]
			}
		}
	}
	if (isChara)
	{
		if (flag) // [!code --]
		if (flag2) // [!code ++]
		{
			if (!Chara.HasCondition<ConFaint>())
			{
```

[`@@ -4409,9 +4430,10 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4409-L4417)
```cs:line-numbers=4409
			{
				origin.HealHP(Mathf.Clamp(EClass.rnd(dmg * (50 + eleP) / 500 + 5), 1, origin.MaxHP / 5 + EClass.rnd(10)));
			}
			if ((attackSource == AttackSource.Melee || attackSource == AttackSource.Range) && origin.Dist(this) <= 1) // [!code --]
			if (attackSource == AttackSource.Melee || attackSource == AttackSource.Range) // [!code ++]
			{
				if (attackSource == AttackSource.Melee && HasElement(1221)) // [!code --]
				int num12 = origin.Dist(this); // [!code ++]
				if (attackSource == AttackSource.Melee && HasElement(1221) && num12 <= Evalue(1221)) // [!code ++]
				{
					int ele2 = ((Chara.MainElement == Element.Void) ? 924 : Chara.MainElement.id);
					if (id == "hedgehog_ether")
```

[`@@ -4421,7 +4443,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4421-L4427)
```cs:line-numbers=4421
					Say("reflect_thorne", this, origin);
					origin.DamageHP(Mathf.Clamp(dmg / 20, 1, MaxHP / 20), ele2, Power, AttackSource.Condition);
				}
				if (HasElement(1223)) // [!code --]
				if (HasElement(1223) && num12 <= Evalue(1223)) // [!code ++]
				{
					int ele3 = ((Chara.MainElement == Element.Void) ? 923 : Chara.MainElement.id);
					Say("reflect_acid", this, origin);
```

[`@@ -4448,17 +4470,17 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4448-L4464)
```cs:line-numbers=4448
			}
		}
	}
	int num11 = ((EClass.rnd(2) == 0) ? 1 : 0); // [!code --]
	int num13 = ((EClass.rnd(2) == 0) ? 1 : 0); // [!code ++]
	if (attackSource == AttackSource.Condition)
	{
		num11 = 1 + EClass.rnd(2); // [!code --]
		num13 = 1 + EClass.rnd(2); // [!code ++]
	}
	if (num11 > 0) // [!code --]
	if (num13 > 0) // [!code ++]
	{
		bool flag2 = Chara.HasCondition<ConPoison>() || ((e.id == 915 || e.id == 923) && ResistLv(Evalue(955)) < 4); // [!code --]
		AddBlood(num11, flag2 ? 6 : (-1)); // [!code --]
		bool flag3 = Chara.HasCondition<ConPoison>() || ((e.id == 915 || e.id == 923) && ResistLv(Evalue(955)) < 4); // [!code ++]
		AddBlood(num13, flag3 ? 6 : (-1)); // [!code ++]
	}
	bool flag3 = true; // [!code --]
	bool flag4 = true; // [!code ++]
	switch (e.id)
	{
	case 910:
```

[`@@ -4499,14 +4521,14 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4499-L4512)
```cs:line-numbers=4499
		}
		break;
	case 918:
		flag3 = false; // [!code --]
		flag4 = false; // [!code ++]
		if (Chance(30 + eleP / 5, 100))
		{
			Chara.AddCondition<ConParalyze>(eleP);
		}
		break;
	case 914:
		flag3 = false; // [!code --]
		flag4 = false; // [!code ++]
		if (EClass.rnd(3) != 0)
		{
			if (Chance(30 + eleP / 5, 100))
```

[`@@ -4546,7 +4568,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4546-L4552)
```cs:line-numbers=4546
		}
		break;
	case 920:
		flag3 = false; // [!code --]
		flag4 = false; // [!code ++]
		if (Chance(5 + eleP / 25, 40))
		{
			Chara.AddCondition<ConBlind>(eleP / 2);
```

[`@@ -4598,20 +4620,20 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4598-L4617)
```cs:line-numbers=4598
		Chara.AddCondition<ConGravity>(2000);
		Condition.ignoreEffect = false;
	}
	if (Chara.conSleep != null && flag3) // [!code --]
	if (Chara.conSleep != null && flag4) // [!code ++]
	{
		Chara.conSleep.Kill();
	}
	if (IsPC)
	{
		float num12 = (float)hp / (float)MaxHP; // [!code --]
		float num14 = (float)hp / (float)MaxHP; // [!code ++]
		if (Evalue(1421) > 0)
		{
			num12 = (float)Chara.mana.value / (float)Chara.mana.max; // [!code --]
			num14 = (float)Chara.mana.value / (float)Chara.mana.max; // [!code ++]
		}
		if (num12 < 0.3f) // [!code --]
		if (num14 < 0.3f) // [!code ++]
		{
			PlaySound("heartbeat", 1f - num12 * 2f); // [!code --]
			PlaySound("heartbeat", 1f - num14 * 2f); // [!code ++]
		}
	}
	if (!IsPC && hp < MaxHP / 5 && Evalue(423) <= 0 && dmg * 100 / MaxHP + 10 > EClass.rnd(IsPowerful ? 400 : 150) && !HasCondition<ConFear>())
```

[`@@ -4684,29 +4706,29 @@ void ProcAbsorb()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Card.cs#L4684-L4712)
```cs:line-numbers=4684
			int valueOrDefault2 = (origin.Evalue(661) + weapon?.Evalue(661, ignoreGlobalElement: true)).GetValueOrDefault();
			if (valueOrDefault > 0 && attackSource == AttackSource.Melee && origin.isChara && !origin.Chara.ignoreSPAbsorb && Chara.IsHostile(origin as Chara))
			{
				int num13 = EClass.rnd(3 + Mathf.Clamp(dmg / 100, 0, valueOrDefault / 10)); // [!code --]
				origin.Chara.stamina.Mod(num13); // [!code --]
				int num15 = EClass.rnd(3 + Mathf.Clamp(dmg / 100, 0, valueOrDefault / 10)); // [!code ++]
				origin.Chara.stamina.Mod(num15); // [!code ++]
				if (IsAliveInCurrentZone)
				{
					Chara.stamina.Mod(-num13); // [!code --]
					Chara.stamina.Mod(-num15); // [!code ++]
				}
			}
			if (origin.HasElement(1350) && attackSource == AttackSource.Melee)
			{
				int num14 = EClass.rndHalf(2 + Mathf.Clamp(dmg / 10, 0, origin.Chara.GetPietyValue() + 10)); // [!code --]
				origin.Chara.mana.Mod(num14); // [!code --]
				int num16 = EClass.rndHalf(2 + Mathf.Clamp(dmg / 10, 0, origin.Chara.GetPietyValue() + 10)); // [!code ++]
				origin.Chara.mana.Mod(num16); // [!code ++]
				if (IsAliveInCurrentZone)
				{
					Chara.mana.Mod(-num14); // [!code --]
					Chara.mana.Mod(-num16); // [!code ++]
				}
			}
			if (valueOrDefault2 > 0 && attackSource == AttackSource.Melee)
			{
				int num15 = EClass.rnd(2 + Mathf.Clamp(dmg / 10, 0, valueOrDefault2 + 10)); // [!code --]
				origin.Chara.mana.Mod(num15); // [!code --]
				int num17 = EClass.rnd(2 + Mathf.Clamp(dmg / 10, 0, valueOrDefault2 + 10)); // [!code ++]
				origin.Chara.mana.Mod(num17); // [!code ++]
				if (IsAliveInCurrentZone)
				{
					Chara.mana.Mod(-num15); // [!code --]
					Chara.mana.Mod(-num17); // [!code ++]
				}
			}
		}
```

## CardRenderer

[`@@ -38,16 +38,13 @@ public Vector3 PositionCenter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/CardRenderer.cs#L38-L53)
```cs:line-numbers=38
public virtual void SetOwner(Card c)
{
	owner = c;
	if (data == null) // [!code --]
	if (owner.trait is TraitFakeBlock) // [!code ++]
	{
		if (owner.trait is TraitFakeBlock) // [!code --]
		{ // [!code --]
			data = EClass.sources.blocks.map[owner.refVal].renderData; // [!code --]
		} // [!code --]
		else // [!code --]
		{ // [!code --]
			data = owner.sourceCard.renderData; // [!code --]
		} // [!code --]
		data = EClass.sources.blocks.map[owner.refVal].renderData; // [!code ++]
	} // [!code ++]
	else if (data == null) // [!code ++]
	{ // [!code ++]
		data = owner.sourceCard.renderData; // [!code ++]
	}
	isChara = c.isChara;
	usePass = data.pass != null;
```

[`@@ -269,7 +266,7 @@ public override void Draw(RenderParam p, ref Vector3 v, bool drawShadow)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/CardRenderer.cs#L269-L275)
```cs:line-numbers=269
		if (drawShadow && shadow != 1 && SubPassData.Current.shadow && (!flag2 || owner.IsPC))
		{
			bool flag3 = ((!isChara) ? (owner.dir % 2 == 1) : (owner.dir == 1 || owner.dir == 2));
			EClass.scene.screenElin.tileMap.passShadow.AddShadow(position.x + (flag3 ? (-1f) : 1f) * renderData.offsetShadow.x, position.y + renderData.offsetShadow.y + (owner.TileType.UseMountHeight ? 0f : p.shadowFix) - RenderObject.altitudeFix * (float)owner.altitude, position.z + renderData.offsetShadow.z, ShadowData.Instance.items[shadow], pref, prefIndex, p.snow); // [!code --]
			EClass.scene.screenElin.tileMap.passShadow.AddShadow(position.x + (flag3 ? (-1f) : 1f) * renderData.offsetShadow.x, position.y + renderData.offsetShadow.y + (owner.TileType.UseMountHeight ? 0f : p.shadowFix) - (owner.isChara ? 0f : (RenderObject.altitudeFix * (float)owner.altitude)), position.z + renderData.offsetShadow.z, ShadowData.Instance.items[shadow], pref, prefIndex, p.snow); // [!code ++]
		}
		if (usePass)
		{
```

## CodexManager

[`@@ -72,7 +72,7 @@ public List<CardRow> ListKills()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/CodexManager.cs#L72-L78)
```cs:line-numbers=72
	List<CardRow> list = new List<CardRow>();
	foreach (KeyValuePair<string, CodexCreature> creature in creatures)
	{
		if (creature.Value.kills > 0) // [!code --]
		if (creature.Value.kills > 0 || creature.Value.droppedCard) // [!code ++]
		{
			CardRow cardRow = EClass.sources.cards.map.TryGetValue(creature.Key);
			if (cardRow != null && !cardRow.HasTag(CTAG.noRandomProduct))
```

## FEAT

[`@@ -115,14 +115,16 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/FEAT.cs#L115-L128)
```cs:line-numbers=115

	public const int featDefender = 1649;

	public const int featElea = 1213; // [!code --]
	public const int featFairyResist = 1212; // [!code ++]

	public const int featManaMeat = 1421;

	public const int featFairyResist = 1212; // [!code --]
	public const int featElea = 1213; // [!code ++]

	public const int featMilitant = 1419;

	public const int featMeatCushion = 1241; // [!code ++]
 // [!code ++]
	public const int featGod_element1 = 1300;

	public const int featGod_earth1 = 1305;
```

[`@@ -137,14 +139,14 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/FEAT.cs#L137-L150)
```cs:line-numbers=137

	public const int featGod_luck1 = 1330;

	public const int featGod_harmony1 = 1335; // [!code --]
	public const int featGod_oblivion1 = 1340; // [!code ++]

	public const int featGod_trickery1 = 1345;

	public const int featMassSummoner = 1240; // [!code --]
 // [!code --]
	public const int featGod_moonshadow1 = 1350;

	public const int featGod_strife1 = 1355; // [!code ++]
 // [!code ++]
	public const int featWarrior = 1400;

	public const int featThief = 1401;
```

[`@@ -163,11 +165,11 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/FEAT.cs#L163-L173)
```cs:line-numbers=163

	public const int featPaladin2 = 1408;

	public const int featGod_strife1 = 1355; // [!code --]
	public const int featMassSummoner = 1240; // [!code ++]

	public const int featDemon = 1239; // [!code --]
	public const int featBoost = 1409; // [!code ++]

	public const int featElder = 1238; // [!code --]
	public const int featDemon = 1239; // [!code ++]

	public const int featRoran = 1237;

```

[`@@ -197,10 +199,10 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/FEAT.cs#L197-L206)
```cs:line-numbers=197

	public const int featLittleOne = 1229;

	public const int featGolem = 1217; // [!code --]
 // [!code --]
	public const int featAdam = 1230;

	public const int featGolem = 1217; // [!code ++]
 // [!code ++]
	public const int featNirvana = 1231;

	public const int featBaby = 1232;
```

[`@@ -213,11 +215,11 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/FEAT.cs#L213-L223)
```cs:line-numbers=213

	public const int featNorland = 1236;

	public const int featBoost = 1409; // [!code --]
	public const int featElder = 1238; // [!code ++]

	public const int featReboot = 1410;

	public const int featGod_oblivion1 = 1340; // [!code --]
	public const int featGod_harmony1 = 1335; // [!code ++]

	public const int featLuckyCat = 1412;

```

[`@@ -235,20 +237,20 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/FEAT.cs#L235-L254)
```cs:line-numbers=235

	public const int featEarthStrength = 1411;

	public static readonly int[] IDS = new int[116] // [!code --]
	public static readonly int[] IDS = new int[117] // [!code ++]
	{
		1216, 1644, 1643, 1642, 1641, 1640, 1636, 1635, 1634, 1633,
		1632, 1631, 1630, 1629, 1628, 1627, 1626, 1625, 1624, 1623,
		1622, 1621, 1620, 1612, 1611, 1610, 1645, 1646, 1647, 1648,
		1215, 1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208,
		1209, 1210, 1422, 1211, 1214, 1659, 1658, 1657, 1656, 1655,
		1654, 1653, 1652, 1651, 1650, 1649, 1213, 1421, 1212, 1419, // [!code --]
		1300, 1305, 1310, 1315, 1320, 1325, 1330, 1335, 1345, 1240, // [!code --]
		1350, 1400, 1401, 1402, 1403, 1404, 1405, 1406, 1407, 1408, // [!code --]
		1355, 1239, 1238, 1237, 1420, 1218, 1219, 1220, 1221, 1222, // [!code --]
		1223, 1224, 1225, 1226, 1227, 1228, 1229, 1217, 1230, 1231, // [!code --]
		1232, 1233, 1234, 1235, 1236, 1409, 1410, 1340, 1412, 1413, // [!code --]
		1414, 1415, 1416, 1417, 1418, 1411 // [!code --]
		1654, 1653, 1652, 1651, 1650, 1649, 1212, 1421, 1213, 1419, // [!code ++]
		1241, 1300, 1305, 1310, 1315, 1320, 1325, 1330, 1340, 1345, // [!code ++]
		1350, 1355, 1400, 1401, 1402, 1403, 1404, 1405, 1406, 1407, // [!code ++]
		1408, 1240, 1409, 1239, 1237, 1420, 1218, 1219, 1220, 1221, // [!code ++]
		1222, 1223, 1224, 1225, 1226, 1227, 1228, 1229, 1230, 1217, // [!code ++]
		1231, 1232, 1233, 1234, 1235, 1236, 1238, 1410, 1335, 1412, // [!code ++]
		1413, 1414, 1415, 1416, 1417, 1418, 1411 // [!code ++]
	};
}
public class Feat : Element
```

## FOOD

[`@@ -6,13 +6,13 @@ public class FOOD`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/FOOD.cs#L6-L18)
```cs:line-numbers=6

	public const int food_poison = 702;

	public const int food_love = 703; // [!code --]
	public const int food_bug = 704; // [!code ++]

	public const int gainWeight = 705;

	public const int loseWeight = 706; // [!code --]
	public const int food_love = 703; // [!code ++]

	public const int food_bug = 704; // [!code --]
	public const int kirimi = 707; // [!code ++]

	public const int food_human = 708;

```

[`@@ -20,13 +20,13 @@ public class FOOD`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/FOOD.cs#L20-L32)
```cs:line-numbers=20

	public const int justcooked = 757;

	public const int food_god = 758; // [!code --]
	public const int loseWeight = 706; // [!code ++]

	public const int kirimi = 707; // [!code --]
	public const int food_god = 758; // [!code ++]

	public static readonly int[] IDS = new int[12]
	{
		700, 701, 702, 703, 705, 706, 704, 708, 709, 757, // [!code --]
		758, 707 // [!code --]
		700, 701, 702, 704, 705, 703, 707, 708, 709, 757, // [!code ++]
		706, 758 // [!code ++]
	};
}
```

## MUTATION

[`@@ -6,27 +6,27 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/MUTATION.cs#L6-L32)
```cs:line-numbers=6

	public const int mutationSpeedN = 1519;

	public const int mutationSkin = 1510; // [!code --]
	public const int mutationSpeed = 1518; // [!code ++]

	public const int mutationSkinN = 1511; // [!code --]
	public const int mutationSkin = 1510; // [!code ++]

	public const int mutationDexN = 1515;

	public const int mutationRegen = 1516; // [!code --]
 // [!code --]
	public const int mutationDex = 1514;

	public const int mutationEyeN = 1513;

	public const int mutationEye = 1512;

	public const int mutationSkinN = 1511; // [!code ++]
 // [!code ++]
	public const int mutationCha = 1522;

	public const int mutationRegenN = 1517; // [!code --]
	public const int mutationRegen = 1516; // [!code ++]

	public const int mutationChaN = 1523;

	public const int mutationSpeed = 1518; // [!code --]
	public const int mutationRegenN = 1517; // [!code ++]

	public const int mutationBrainN = 1525;

```

[`@@ -82,8 +82,8 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/MUTATION.cs#L82-L89)
```cs:line-numbers=82

	public static readonly int[] IDS = new int[40]
	{
		1521, 1520, 1519, 1510, 1511, 1515, 1516, 1514, 1513, 1512, // [!code --]
		1522, 1517, 1523, 1518, 1525, 1565, 1564, 1563, 1524, 1561, // [!code --]
		1521, 1520, 1519, 1518, 1510, 1515, 1514, 1513, 1512, 1511, // [!code ++]
		1522, 1516, 1523, 1517, 1525, 1565, 1564, 1563, 1524, 1561, // [!code ++]
		1560, 1559, 1558, 1557, 1556, 1555, 1554, 1562, 1552, 1553,
		1527, 1528, 1529, 1530, 1526, 1532, 1533, 1550, 1551, 1531
	};
```

## Net

[`@@ -62,13 +62,13 @@ public class DownloadCahce`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Net.cs#L62-L74)
```cs:line-numbers=62

	public List<ChatLog> chatList;

	private const string urlScript = "http://ylva.php.xdomain.jp/script/"; // [!code --]
	public static string urlScript = "http://elin.cloudfree.jp/script/"; // [!code ++]

	private const string urlChat = "http://ylva.php.xdomain.jp/script/chat/"; // [!code --]
	public static string urlChat = urlScript + "chat/"; // [!code ++]

	private const string urlVote = "http://ylva.php.xdomain.jp/script/vote/"; // [!code --]
	public static string urlVote = urlScript + "vote/"; // [!code ++]

	private const string urlUpload = "http://ylva.php.xdomain.jp/script/uploader/"; // [!code --]
	public static string urlUpload = urlScript + "uploader/"; // [!code ++]

	public static bool isUploading;

```

[`@@ -136,7 +136,7 @@ public static async UniTask<bool> UploadFile(string id, string password, string`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Net.cs#L136-L142)
```cs:line-numbers=136
	Debug.Log(password);
	Debug.Log(tag);
	Debug.Log(array.Length);
	using (UnityWebRequest www = UnityWebRequest.Post("http://ylva.php.xdomain.jp/script/uploader/uploader.php", wWWForm)) // [!code --]
	using (UnityWebRequest www = UnityWebRequest.Post(urlUpload + "uploader.php", wWWForm)) // [!code ++]
	{
		try
		{
```

[`@@ -170,7 +170,7 @@ public static async UniTask<FileInfo> DownloadFile(DownloadMeta item, string pat`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Net.cs#L170-L176)
```cs:line-numbers=170
		Debug.Log("Returning Cache:" + path + fn);
		return new FileInfo(path + fn);
	}
	using UnityWebRequest www = UnityWebRequest.Get("http://ylva.php.xdomain.jp/script/uploader/files/" + idLang + "/" + fn); // [!code --]
	using UnityWebRequest www = UnityWebRequest.Get(urlUpload + "files/" + idLang + "/" + fn); // [!code ++]
	www.downloadHandler = new DownloadHandlerFile(path + fn);
	try
	{
```

[`@@ -197,7 +197,7 @@ public static async UniTask<FileInfo> DownloadFile(DownloadMeta item, string pat`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Net.cs#L197-L203)
```cs:line-numbers=197
public static async UniTask<List<DownloadMeta>> GetFileList(string idLang)
{
	List<DownloadMeta> list = new List<DownloadMeta>();
	using UnityWebRequest www = UnityWebRequest.Get("http://ylva.php.xdomain.jp/script/uploader/files/" + idLang + "/index.txt"); // [!code --]
	using UnityWebRequest www = UnityWebRequest.Get(urlUpload + "files/" + idLang + "/index.txt"); // [!code ++]
	try
	{
		await www.SendWebRequest();
```

[`@@ -245,7 +245,7 @@ public static async UniTask<bool> SendVote(int id, string idLang)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Net.cs#L245-L251)
```cs:line-numbers=245
		wWWForm.AddField("vote", id.ToString() ?? "");
		wWWForm.AddField("idLang", idLang);
		wWWForm.AddField("submit", "Send");
		using UnityWebRequest www = UnityWebRequest.Post("http://ylva.php.xdomain.jp/script/vote/vote.php", wWWForm); // [!code --]
		using UnityWebRequest www = UnityWebRequest.Post(urlVote + "vote.php", wWWForm); // [!code ++]
		await www.SendWebRequest();
		if (www.result == UnityWebRequest.Result.ConnectionError || www.result == UnityWebRequest.Result.ProtocolError)
		{
```

[`@@ -269,7 +269,7 @@ public static async UniTask<List<VoteLog>> GetVote(string idLang)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Net.cs#L269-L275)
```cs:line-numbers=269
	List<VoteLog> list = new List<VoteLog>();
	try
	{
		string uri = $"http://ylva.php.xdomain.jp/script/vote/logs/data_{idLang}.txt"; // [!code --]
		string uri = string.Format(urlVote + "logs/data_{0}.txt", idLang); // [!code ++]
		using UnityWebRequest www = UnityWebRequest.Get(uri);
		await www.SendWebRequest();
		if (www.result == UnityWebRequest.Result.ConnectionError || www.result == UnityWebRequest.Result.ProtocolError)
```

[`@@ -336,7 +336,7 @@ public static async UniTask<bool> SendChat(string name, string msg, ChatCategory`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Net.cs#L336-L342)
```cs:line-numbers=336
		wWWForm.AddField("idLang", idLang);
		try
		{
			using UnityWebRequest www = UnityWebRequest.Post("http://ylva.php.xdomain.jp/script/chat/chat.php", wWWForm); // [!code --]
			using UnityWebRequest www = UnityWebRequest.Post(urlChat + "chat.php", wWWForm); // [!code ++]
			await www.SendWebRequest();
			if (www.result == UnityWebRequest.Result.ConnectionError || www.result == UnityWebRequest.Result.ProtocolError)
			{
```

[`@@ -368,7 +368,7 @@ public static async UniTask<List<ChatLog>> GetChat(ChatCategory cat, string idLa`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Net.cs#L368-L374)
```cs:line-numbers=368
		{
			idLang = "DEBUG";
		}
		string uri = $"http://ylva.php.xdomain.jp/script/chat/logs/all_{idLang}.json"; // [!code --]
		string uri = string.Format(urlChat + "logs/all_{0}.json", idLang); // [!code ++]
		using UnityWebRequest www = UnityWebRequest.Get(uri);
		await www.SendWebRequest();
		if (www.result == UnityWebRequest.Result.ConnectionError || www.result == UnityWebRequest.Result.ProtocolError)
```

## SKILL

[`@@ -18,7 +18,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/SKILL.cs#L18-L24)
```cs:line-numbers=18

	public const int marksman = 133;

	public const int tactics = 132; // [!code --]
	public const int fishing = 245; // [!code ++]

	public const int climbing = 242;

```

[`@@ -54,7 +54,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/SKILL.cs#L54-L60)
```cs:line-numbers=54

	public const int eyeofmind = 134;

	public const int fishing = 245; // [!code --]
	public const int twowield = 131; // [!code ++]

	public const int spotting = 210;

```

[`@@ -132,7 +132,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/SKILL.cs#L132-L138)
```cs:line-numbers=132

	public const int gathering = 250;

	public const int twowield = 131; // [!code --]
	public const int tactics = 132; // [!code ++]

	public const int blacksmith = 256;

```

[`@@ -268,13 +268,13 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/SKILL.cs#L268-L280)
```cs:line-numbers=268

	public static readonly int[] IDS = new int[133]
	{
		50, 109, 110, 111, 120, 122, 123, 130, 133, 132, // [!code --]
		50, 109, 110, 111, 120, 122, 123, 130, 133, 245, // [!code ++]
		242, 241, 240, 237, 235, 230, 227, 226, 225, 220,
		207, 200, 152, 151, 150, 135, 134, 245, 210, 102, // [!code --]
		207, 200, 152, 151, 150, 135, 134, 131, 210, 102, // [!code ++]
		107, 71, 70, 68, 67, 66, 65, 72, 64, 61,
		60, 57, 56, 55, 51, 62, 73, 74, 75, 106,
		105, 104, 103, 101, 100, 93, 92, 91, 90, 80,
		79, 78, 77, 76, 108, 250, 131, 256, 916, 917, // [!code --]
		79, 78, 77, 76, 108, 250, 132, 256, 916, 917, // [!code ++]
		918, 919, 920, 921, 922, 923, 924, 925, 926, 950,
		951, 952, 915, 953, 956, 957, 958, 959, 960, 961,
		962, 963, 964, 965, 970, 971, 972, 255, 954, 914,
```

## SerializedCards

[`@@ -762,6 +762,10 @@ public void Restore(Map map, Map orgMap, bool addToZone, PartialMap partial = nu`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/SerializedCards.cs#L762-L767)
```cs:line-numbers=762
			}
			card2.SetObj(5, null);
		}
		if (card2.trait is TraitFakeBlock) // [!code ++]
		{ // [!code ++]
			card2._CreateRenderer(); // [!code ++]
		} // [!code ++]
		if (addToZone)
		{
			EClass._zone.AddCard(card2, card2.pos);
```

## Thing

[`@@ -267,7 +267,7 @@ public override void OnCreate(int genLv)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/Thing.cs#L267-L273)
```cs:line-numbers=267
		{
			if (bp.qualityBonus == 0)
			{
				num4 = EClass.rnd(EClass.rnd(12) + 1); // [!code --]
				num4 = EClass.rnd(EClass.rnd(14) + 1); // [!code ++]
				if (num4 == 1 && EClass.rnd(3) != 0)
				{
					num4 = 0;
```

## TraitFakeBlock

[`@@ -6,7 +6,10 @@ public class TraitFakeBlock : Trait`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/70bfb998157c8a04ef23d12375e4617c861e501a/Elin/TraitFakeBlock.cs#L6-L12)
```cs:line-numbers=6

	public override void OnCreate(int lv)
	{
		owner.refVal = 1; // [!code --]
		if (owner.refVal == 0) // [!code ++]
		{ // [!code ++]
			owner.refVal = 1; // [!code ++]
		} // [!code ++]
	}

	public override void OnCrafted(Recipe recipe, List<Thing> ings)
```

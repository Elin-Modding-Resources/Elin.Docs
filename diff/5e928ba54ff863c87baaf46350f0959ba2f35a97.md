---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 10 files modified.
version: EA 23.223 Nyaightly
changes: AttackProcess/BaseTileMap/Card/Chara/CoreDebug/DNA/GoalAutoCombat/Trait/TraitCrafter/TraitDeliveryChest
---

# EA 23.223 Nyaightly

October 22, 2025

10 files modified.

## Important Changes

**None.**
## AttackProcess

[`public void PlayRangedAnime(int numFire, float delay = 0f)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/AttackProcess.cs#L462-L468)
```cs:line-numbers=462

	public int GetRocketPower()
	{
		return (50 + (dNum * dDim + dBonus) + (dNumAmmo * dDimAmmo + dBonusAmmo)) * (100 + (int)Mathf.Sqrt(weaponSkill.Value) * 10) / 100; // [!code --]
		return (30 + (dNum * dDim + dBonus) + (dNumAmmo * dDimAmmo + dBonusAmmo)) * (100 + (int)Mathf.Sqrt(weaponSkill.Value) * 8) / 100; // [!code ++]
	}

	public long GetRawDamage(float dmgMulti, bool crit, bool maxRoll)
```

## BaseTileMap

[`public enum ScreenHighlight`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/BaseTileMap.cs#L475-L480)
```cs:line-numbers=475

	protected bool isUnderwater;

	protected bool darkenOuter; // [!code ++]
 // [!code ++]
	protected Vector3 thingPos;

	protected Vector3 orgPos;
```

[`public virtual void Draw()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/BaseTileMap.cs#L755-L760)
```cs:line-numbers=755
		lowBlock = (hideRoomFog = (hideHang = false));
		showRoof = (showFullWall = true);
	}
	darkenOuter = !cinemaMode && !ActionMode.Bird.IsActive && !ActionMode.ViewMap.IsActive; // [!code ++]
	currentLot = currentRoom?.lot ?? null;
	Vector3 mposWorld = EInput.mposWorld;
	mposWorld.z = 0f;
```

[`public virtual void Draw()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/BaseTileMap.cs#L872-L889)
```cs:line-numbers=872
	int valueOrDefault = (this.room?.lot?.idBGM).GetValueOrDefault();
	if (valueOrDefault == 0)
	{
		goto IL_16d1; // [!code --]
		goto IL_16fb; // [!code ++]
	}
	if (!(EMono.Sound.currentPlaylist != EMono.Sound.plLot))
	{
		BGMData data = EMono.Sound.plLot.list[0].data;
		if ((object)data != null && data.id == valueOrDefault)
		{
			goto IL_16d1; // [!code --]
			goto IL_16fb; // [!code ++]
		}
	}
	goto IL_16f0; // [!code --]
	IL_16fa: // [!code --]
	goto IL_171a; // [!code ++]
	IL_1724: // [!code ++]
	if (this.room != lastRoom)
	{
		screen.RefreshWeather();
```

[`public virtual void Draw()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/BaseTileMap.cs#L892-L906)
```cs:line-numbers=892
		SoundManager.bgmVolumeMod = ((!LayerDrama.maxBGMVolume && !EMono._map.IsIndoor && this.room != null && !this.room.data.atrium && this.room.HasRoof) ? (-0.6f) : 0f);
		screenHighlight = ScreenHighlight.None;
		return;
		IL_16d1: // [!code --]
		IL_16fb: // [!code ++]
		if (valueOrDefault == 0 && EMono.Sound.currentPlaylist == EMono.Sound.plLot)
		{
			goto IL_16f0; // [!code --]
			goto IL_171a; // [!code ++]
		}
		goto IL_16fa; // [!code --]
		IL_16f0: // [!code --]
		goto IL_1724; // [!code ++]
		IL_171a: // [!code ++]
		EMono._zone.RefreshBGM();
		goto IL_16fa; // [!code --]
		goto IL_1724; // [!code ++]
	}

	public void RefreshHeight()
```

[`public virtual void DrawTile()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/BaseTileMap.cs#L1039-L1045)
```cs:line-numbers=1039
			}
		}
	}
	if (this.cell.outOfBounds && !cinemaMode) // [!code --]
	if (this.cell.outOfBounds && darkenOuter) // [!code ++]
	{
		blockLight -= 0.1f;
		if (fogBounds)
```

## Card

[`public int FameLv`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/Card.cs#L2290-L2296)
```cs:line-numbers=2290
			{
				return LV;
			}
			return EClass.player.fame / 100 + 1; // [!code --]
			return Mathf.Min(EClass.player.fame / 100 + 1, 21474836); // [!code ++]
		}
	}

```

[`public int CountRune(bool countFree = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/Card.cs#L3585-L3597)
```cs:line-numbers=3585

	public int MaxRune()
	{
		return ((!IsUnique) ? 1 : 0) + Evalue(484); // [!code --]
		return ((!IsUnique && !isReplica) ? 1 : 0) + Evalue(484); // [!code ++]
	}

	public bool CanAddRune(TraitMod mod)
	{
		SourceElement.Row source = mod.source;
		if (category.slot == 0 || isReplica) // [!code --]
		if (category.slot == 0) // [!code ++]
		{
			return false;
		}
```

## Chara

[`public void RestockEquip(bool onCreate)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/Chara.cs#L4785-L4792)
```cs:line-numbers=4785
			AddThing("gun_laser");
			break;
		case "rocketman":
			AddThing("panzerfaust").c_ammo = 0; // [!code --]
		{ // [!code ++]
			Thing thing2 = AddThing("panzerfaust"); // [!code ++]
			thing2.ChangeMaterial("iron"); // [!code ++]
			thing2.c_ammo = 0; // [!code ++]
			break;
		} // [!code ++]
		default:
			switch (equip)
			{
```

## CoreDebug

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/CoreDebug.cs#L948-L954)
```cs:line-numbers=948
	}
	if (Input.GetKeyDown(KeyCode.F2))
	{
		EClass.game.world.date.year = 3000; // [!code --]
		EClass._zone.development += 10;
		EClass._zone.development *= EClass._zone.development;
		Chara targetChara = EClass.scene.mouseTarget.TargetChara;
```

## DNA

[`public int slot`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/DNA.cs#L85-L90)
```cs:line-numbers=85
		}
	}

	public bool isManiGene // [!code ++]
	{ // [!code ++]
		get // [!code ++]
		{ // [!code ++]
			return bits[0]; // [!code ++]
		} // [!code ++]
		set // [!code ++]
		{ // [!code ++]
			bits[0] = value; // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	[OnSerializing]
	private void _OnSerializing(StreamingContext context)
	{
```

[`public static Thing GenerateManiGene(Card owner)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/DNA.cs#L156-L161)
```cs:line-numbers=156
	Rand.SetSeed(owner.c_seed);
	Thing thing = GenerateGene(r, Type.Superior, owner.LV, owner.c_seed);
	thing.c_DNA.cost = thing.c_DNA.cost / 2;
	thing.c_DNA.isManiGene = true; // [!code ++]
	thing.MakeRefFrom("mani");
	Rand.SetSeed();
	owner.c_seed++;
```

## GoalAutoCombat

[`void FindRanged(bool hotbar)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/GoalAutoCombat.cs#L78-L84)
```cs:line-numbers=78
			{
				return false;
			}
			if (t.IsRangedWeapon && (t.trait is TraitToolRangeCane || t.c_ammo > 0 || EClass.pc.FindAmmo(t) != null) && owner.CanEquipRanged(t)) // [!code --]
			if (t.IsRangedWeapon && (t.trait is TraitToolRangeCane || t.trait is TraitToolRangeSling || t.c_ammo > 0 || EClass.pc.FindAmmo(t) != null) && owner.CanEquipRanged(t)) // [!code ++]
			{
				owner.ranged = t;
				return true;
```

## Trait

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/Trait.cs#L1824-L1832)
```cs:line-numbers=1824
			{
				float num = (float)(3 + Mathf.Min(ShopLv / 5, 10)) + Mathf.Sqrt(ShopLv);
				int num2 = 300;
				if (ShopType == ShopType.Ecopo) // [!code --]
				switch (ShopType) // [!code ++]
				{
				case ShopType.Ecopo: // [!code ++]
					num2 = 30;
					break; // [!code ++]
				case ShopType.StrangeGirl: // [!code ++]
					num2 = 50; // [!code ++]
					break; // [!code ++]
				}
				num = num * (float)(100 + EClass.pc.Evalue(1406) * 5) / 100f;
				num = Mathf.Min(num, num2);
```

## TraitCrafter

[`void Prize(int chance, string s, string col, bool cat)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/TraitCrafter.cs#L543-L548)
```cs:line-numbers=543

	public override void TrySetAct(ActPlan p)
	{
		if (this is TraitRuneMold && EClass._zone.IsUserZone && owner.isNPCProperty) // [!code ++]
		{ // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		if (IsFactory)
		{
			Thing _t = owner.Thing;
```

## TraitDeliveryChest

[`public override bool CanOpenContainer`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/5e928ba54ff863c87baaf46350f0959ba2f35a97/Elin/TraitDeliveryChest.cs#L14-L22)
```cs:line-numbers=14
	{
		if (owner.IsInstalled)
		{
			if (!EClass._zone.IsPCFaction && !EClass._zone.IsTown && !(EClass._zone is Zone_MerchantGuild)) // [!code --]
			if (!EClass._zone.IsPCFaction && !EClass._zone.IsTown && !(EClass._zone is Zone_MerchantGuild) && !(EClass._zone is Zone_Casino)) // [!code ++]
			{
				return EClass._zone is Zone_Casino; // [!code --]
				return EClass._zone is Zone_CurryRuin; // [!code ++]
			}
			return true;
		}
```

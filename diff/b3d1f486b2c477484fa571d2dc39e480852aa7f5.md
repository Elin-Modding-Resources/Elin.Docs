---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 11 files modified.
version: EA 23.208 Nightly Patch 1
changes: AI_Fish/ActEffect/Card/Chara/EffectId/Player/SpatialManager/Trait/WindowChara/Zone/Zone_Void
---

# EA 23.208 Nightly Patch 1

September 29, 2025

11 files modified.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [SpatialManager (1)](#spatialmanager)
```cs:no-line-numbers
public T Find<T>(Func<T, bool> func) where T : Zone // [!code --]
public T Find<T>(Func<T, bool> func = null) where T : Zone // [!code ++]
```
## AI_Fish

[`public static Thing Makefish(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/AI_Fish.cs#L311-L322)
```cs:line-numbers=311
	Thing thing = null;
	int num2 = 1;
	string text = "";
	int num3 = 0; // [!code ++]
	if (c.IsPC || EClass.rnd(20) == 0)
	{
		if (EClass.rnd(30) == 0)
		{
			text = "book_ancient";
		}
		if (EClass.rnd(40) == 0 && EClass.rnd(40) < num / 3 + 10) // [!code ++]
		{ // [!code ++]
			text = "medal"; // [!code ++]
		} // [!code ++]
		if (EClass.rnd(35) == 0)
		{
			text = "plat";
```

[`public static Thing Makefish(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/AI_Fish.cs#L335-L345)
```cs:line-numbers=335
			if (EClass.rnd(50) == 0)
			{
				text = new string[7] { "659", "758", "759", "806", "828", "1190", "1191" }.RandomItem();
				if (!c.IsPC) // [!code ++]
				{ // [!code ++]
					num3 = 10; // [!code ++]
				} // [!code ++]
			}
		}
		if (EClass.rnd(40) == 0 && EClass.rnd(40) < num / 3 + 10) // [!code --]
		if (!c.IsPC) // [!code ++]
		{
			text = "medal"; // [!code --]
			if (text == "plat" || text == "medal") // [!code ++]
			{ // [!code ++]
				num3 = 1; // [!code ++]
			} // [!code ++]
			if (num3 != 0) // [!code ++]
			{ // [!code ++]
				if (EClass.rnd(EClass.player.fishArtifact + 1) <= 0) // [!code ++]
				{ // [!code ++]
					EClass.player.fishArtifact += num3; // [!code ++]
				} // [!code ++]
				else // [!code ++]
				{ // [!code ++]
					text = ""; // [!code ++]
				} // [!code ++]
			} // [!code ++]
		}
	}
	if (!hqFever && text != "")
```

[`public static Thing Makefish(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/AI_Fish.cs#L354-L394)
```cs:line-numbers=354
	{
		SetFeverSeed();
		int lv = EClass.rnd(num * 2) + 1;
		int num3 = 0; // [!code --]
		int num4 = 0; // [!code ++]
		if (EClass.rnd(EClass.debug.enable ? 1 : (c.IsPC ? 5 : (c.IsPCFaction ? 250 : 2500))) == 0)
		{
			num3 = Mathf.Min(EClass.rnd(EClass.rnd(EClass.rnd(EClass.curve(num, 100, 50, 70) + 50))) / 50, 3); // [!code --]
			num4 = Mathf.Min(EClass.rnd(EClass.rnd(EClass.rnd(EClass.curve(num, 100, 50, 70) + 50))) / 50, 3); // [!code ++]
		}
		if (hqFever && ((EClass.pc.Evalue(1659) >= 2 && EClass.player.fished == 0) || EClass.rnd(5) == 0))
		{
			num3++; // [!code --]
			num4++; // [!code ++]
		}
		if (num3 > 3) // [!code --]
		if (num4 > 3) // [!code ++]
		{
			num3 = 3; // [!code --]
			num4 = 3; // [!code ++]
		}
		SetFeverSeed();
		thing = ThingGen.Create("fish", -1, lv);
		SetFeverSeed();
		int num4 = Mathf.Max(1, num / (thing.source.LV * 2 + 10)); // [!code --]
		int num5 = 5; // [!code --]
		int num5 = Mathf.Max(1, num / (thing.source.LV * 2 + 10)); // [!code ++]
		int num6 = 5; // [!code ++]
		if (EClass.Branch != null)
		{
			num5 += EClass.Branch.Evalue(3604) * 20 + EClass.Branch.Evalue(3605) * 20 + EClass.Branch.Evalue(3606) * 20 + EClass.Branch.Evalue(3706) * 25; // [!code --]
			num6 += EClass.Branch.Evalue(3604) * 20 + EClass.Branch.Evalue(3605) * 20 + EClass.Branch.Evalue(3606) * 20 + EClass.Branch.Evalue(3706) * 25; // [!code ++]
		}
		if (EClass._zone is Zone_Kapul)
		{
			num5 = 35; // [!code --]
			num6 = 35; // [!code ++]
		}
		bool num6 = num5 >= EClass.rnd(100); // [!code --]
		if (num6) // [!code --]
		bool num7 = num6 >= EClass.rnd(100); // [!code ++]
		if (num7) // [!code ++]
		{
			c.Say("bigCatch", c);
		}
		num2 = (num6 ? num4 : EClass.rnd(num4)) / (num3 + 1) + 1; // [!code --]
		if (num3 != 0) // [!code --]
		num2 = (num7 ? num5 : EClass.rnd(num5)) / (num4 + 1) + 1; // [!code ++]
		if (num4 != 0) // [!code ++]
		{
			thing.SetTier(num3); // [!code --]
			thing.SetTier(num4); // [!code ++]
		}
		Rand.SetSeed();
	}
```

## ActEffect

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L985-L994)
```cs:line-numbers=985
		{
			return;
		}
		Thing thing2 = ThingGen.Create("mine"); // [!code --]
		thing2.c_idRefCard = "dog_mine"; // [!code --]
		Thing thing = ThingGen.Create("mine"); // [!code ++]
		thing.c_idRefCard = "dog_mine"; // [!code ++]
		Zone.ignoreSpawnAnime = true;
		EClass._zone.AddCard(thing2, CC.pos).Install(); // [!code --]
		EClass._zone.AddCard(thing, CC.pos).Install(); // [!code ++]
		break;
	}
	case EffectId.LittleSisterMigration:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L999-L1016)
```cs:line-numbers=999
			return;
		}
		List<Chara> list3 = new List<Chara>();
		bool flag6 = false; // [!code --]
		bool flag5 = false; // [!code ++]
		foreach (Chara chara2 in EClass._map.charas)
		{
			if (!chara2.IsPCFactionOrMinion && chara2.id == "littleOne")
			{
				if (flag6) // [!code --]
				if (flag5) // [!code ++]
				{
					flag6 = false; // [!code --]
					flag5 = false; // [!code ++]
					continue;
				}
				list3.Add(chara2);
				flag6 = true; // [!code --]
				flag5 = true; // [!code ++]
			}
		}
		if (list3.Count == 0)
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1082-L1090)
```cs:line-numbers=1082
		TC.PlaySound("curse3");
		TC.PlayEffect("curse");
		TC.Say("forgetItems", TC);
		int num = power / 50 + 1 + EClass.rnd(3); // [!code --]
		int num5 = power / 50 + 1 + EClass.rnd(3); // [!code ++]
		List<Thing> source = TC.things.List((Thing t) => t.c_IDTState == 0);
		for (int i = 0; i < num; i++) // [!code --]
		for (int j = 0; j < num5; j++) // [!code ++]
		{
			source.RandomItem().c_IDTState = 5;
		}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1096-L1105)
```cs:line-numbers=1096
	case EffectId.EnchantArmorGreat:
	{
		bool armor = id == EffectId.EnchantArmor || id == EffectId.EnchantArmorGreat;
		bool flag3 = id == EffectId.EnchantWeaponGreat || id == EffectId.EnchantArmorGreat; // [!code --]
		bool flag4 = id == EffectId.EnchantWeaponGreat || id == EffectId.EnchantArmorGreat; // [!code ++]
		if (!tc.isThing)
		{
			LayerDragGrid.CreateEnchant(CC, armor, flag3, state); // [!code --]
			LayerDragGrid.CreateEnchant(CC, armor, flag4, state); // [!code ++]
			return;
		}
		cc.PlaySound("identify");
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1110-L1117)
```cs:line-numbers=1110
			tc.ModEncLv(-1);
			break;
		}
		int num5 = (flag3 ? 4 : 2) + (blessed ? 1 : 0); // [!code --]
		if (tc.encLV >= num5) // [!code --]
		int num4 = (flag4 ? 4 : 2) + (blessed ? 1 : 0); // [!code ++]
		if (tc.encLV >= num4) // [!code ++]
		{
			cc.Say("enc_resist", tc);
			break;
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1123-L1143)
```cs:line-numbers=1123
	case EffectId.Identify:
	case EffectId.GreaterIdentify:
	{
		bool flag4 = id == EffectId.GreaterIdentify; // [!code --]
		bool flag6 = id == EffectId.GreaterIdentify; // [!code ++]
		if (flag)
		{
			Redirect(EffectId.ForgetItems, flag4 ? BlessedState.Cursed : BlessedState.Normal, default(ActRef)); // [!code --]
			Redirect(EffectId.ForgetItems, flag6 ? BlessedState.Cursed : BlessedState.Normal, default(ActRef)); // [!code ++]
			break;
		}
		if (!tc.isThing)
		{
			int count = ((!blessed) ? 1 : (flag4 ? (2 + EClass.rnd(2)) : (3 + EClass.rnd(3)))); // [!code --]
			LayerDragGrid.CreateIdentify(CC, flag4, state, 0, count); // [!code --]
			int count = ((!blessed) ? 1 : (flag6 ? (2 + EClass.rnd(2)) : (3 + EClass.rnd(3)))); // [!code ++]
			LayerDragGrid.CreateIdentify(CC, flag6, state, 0, count); // [!code ++]
			return;
		}
		cc.PlaySound("identify");
		cc.PlayEffect("identify");
		tc.Thing.Identify(cc.IsPCParty, (!flag4) ? IDTSource.Identify : IDTSource.SuperiorIdentify); // [!code --]
		tc.Thing.Identify(cc.IsPCParty, (!flag6) ? IDTSource.Identify : IDTSource.SuperiorIdentify); // [!code ++]
		break;
	}
	case EffectId.Uncurse:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1147-L1163)
```cs:line-numbers=1147
			LayerDragGrid.CreateUncurse(CC, state);
			return;
		}
		Thing thing3 = tc.Thing; // [!code --]
		if (thing3.blessedState == BlessedState.Cursed) // [!code --]
		Thing thing2 = tc.Thing; // [!code ++]
		if (thing2.blessedState == BlessedState.Cursed) // [!code ++]
		{
			thing3.SetBlessedState(BlessedState.Normal); // [!code --]
			thing2.SetBlessedState(BlessedState.Normal); // [!code ++]
		}
		else if (thing3.blessedState == BlessedState.Doomed) // [!code --]
		else if (thing2.blessedState == BlessedState.Doomed) // [!code ++]
		{
			thing3.SetBlessedState(BlessedState.Normal); // [!code --]
			thing2.SetBlessedState(BlessedState.Normal); // [!code ++]
		}
		thing3.GetRootCard()?.TryStack(thing3); // [!code --]
		LayerInventory.SetDirty(thing3); // [!code --]
		thing2.GetRootCard()?.TryStack(thing2); // [!code ++]
		LayerInventory.SetDirty(thing2); // [!code ++]
		break;
	}
	case EffectId.Lighten:
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1173-L1194)
```cs:line-numbers=1173
		}
		cc.PlaySound("offering");
		cc.PlayEffect("buff");
		int num6 = (tc.isWeightChanged ? tc.c_weight : tc.Thing.source.weight); // [!code --]
		int num3 = (tc.isWeightChanged ? tc.c_weight : tc.Thing.source.weight); // [!code ++]
		tc.isWeightChanged = true;
		Element orCreateElement = tc.elements.GetOrCreateElement(64);
		Element orCreateElement2 = tc.elements.GetOrCreateElement(65);
		Element orCreateElement3 = tc.elements.GetOrCreateElement(67);
		Element orCreateElement4 = tc.elements.GetOrCreateElement(66);
		bool flag5 = tc.IsEquipmentOrRangedOrAmmo || tc.IsThrownWeapon; // [!code --]
		bool flag3 = tc.IsEquipmentOrRangedOrAmmo || tc.IsThrownWeapon; // [!code ++]
		if (flag)
		{
			num6 = (int)(0.01f * (float)num6 * (float)power * 0.75f + 500f); // [!code --]
			if (num6 < 0 || num6 > 10000000) // [!code --]
			num3 = (int)(0.01f * (float)num3 * (float)power * 0.75f + 500f); // [!code ++]
			if (num3 < 0 || num3 > 10000000) // [!code ++]
			{
				num6 = 10000000; // [!code --]
				flag5 = false; // [!code --]
				num3 = 10000000; // [!code ++]
				flag3 = false; // [!code ++]
			}
			if (flag5) // [!code --]
			if (flag3) // [!code ++]
			{
				if (tc.IsWeapon || tc.IsThrownWeapon || tc.IsAmmo)
				{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1205-L1216)
```cs:line-numbers=1205
		}
		else
		{
			num6 = num6 * (100 - power / 10) / 100; // [!code --]
			num3 = num3 * (100 - power / 10) / 100; // [!code ++]
			if (blessed)
			{
				power /= 4;
			}
			if (flag5) // [!code --]
			if (flag3) // [!code ++]
			{
				if (tc.IsWeapon || tc.IsThrownWeapon || tc.IsAmmo)
				{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1225-L1231)
```cs:line-numbers=1225
			}
			cc.Say("lighten", cc, tc);
		}
		tc.c_weight = num6; // [!code --]
		tc.c_weight = num3; // [!code ++]
		tc.SetDirtyWeight();
		if (tc.parent == null)
		{
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1249-L1266)
```cs:line-numbers=1249
		cc.PlayEffect("identify");
		cc.Say("reconstruct", cc, tc);
		EClass.game.cards.uidNext += EClass.rnd(30);
		int num4 = Mathf.Max(tc.genLv, tc.LV, EClass.player.stats.deepest); // [!code --]
		int num6 = Mathf.Max(tc.genLv, tc.LV, EClass.player.stats.deepest); // [!code ++]
		CardBlueprint.Set(new CardBlueprint
		{
			blesstedState = state
		});
		Thing thing = ThingGen.Create(tc.id, -1, (int)((long)num4 * (long)power / 400)); // [!code --]
		thing.genLv = num4; // [!code --]
		Thing thing3 = ThingGen.Create(tc.id, -1, (int)((long)num6 * (long)power / 400)); // [!code ++]
		thing3.genLv = num6; // [!code ++]
		tc.Destroy();
		CC.Pick(thing, msg: false); // [!code --]
		CC.Pick(thing3, msg: false); // [!code ++]
		if (!CC.IsPC)
		{
			CC.TryEquip(thing); // [!code --]
			CC.TryEquip(thing3); // [!code ++]
		}
		break;
	}
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1281-L1316)
```cs:line-numbers=1281
		string name = tc.Name;
		if (row == null)
		{
			bool num2 = id == EffectId.ChangeMaterialGreater; // [!code --]
			bool num = id == EffectId.ChangeMaterialGreater; // [!code ++]
			bool flag2 = id == EffectId.ChangeMaterialLesser;
			string text2 = tc.Thing.source.tierGroup;
			Dictionary<string, SourceMaterial.TierList> tierMap = SourceMaterial.tierMap;
			int num3 = 1; // [!code --]
			int num2 = 1; // [!code ++]
			if (flag)
			{
				num3 -= 2; // [!code --]
				num2 -= 2; // [!code ++]
			}
			if (blessed)
			{
				num3++; // [!code --]
				num2++; // [!code ++]
			}
			if (num2) // [!code --]
			if (num) // [!code ++]
			{
				num3++; // [!code --]
				num2++; // [!code ++]
			}
			if (flag2)
			{
				num3 -= 2; // [!code --]
				num2 -= 2; // [!code ++]
			}
			num3 = Mathf.Clamp(num3 + EClass.rnd(2), 0, 4); // [!code --]
			num2 = Mathf.Clamp(num2 + EClass.rnd(2), 0, 4); // [!code ++]
			if (EClass.rnd(10) == 0)
			{
				text2 = ((text2 == "metal") ? "leather" : "metal");
			}
			SourceMaterial.TierList tierList = (text2.IsEmpty() ? tierMap.RandomItem() : tierMap[text2]);
			for (int j = 0; j < 1000; j++) // [!code --]
			for (int i = 0; i < 1000; i++) // [!code ++]
			{
				row = tierList.tiers[num3].Select(); // [!code --]
				row = tierList.tiers[num2].Select(); // [!code ++]
				if (row != tc.material)
				{
					break;
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L1346-L1351)
```cs:line-numbers=1346
		}
		break;
	}
	case EffectId.ReturnVoid: // [!code ++]
	{ // [!code ++]
		Zone_Void root = EClass.game.spatials.Find<Zone_Void>(); // [!code ++]
		if (EClass.game.IsSurvival || root == null || root.visitCount == 0 || EClass.player.stats.deepest < 1 || (!EClass.debug.enable && EClass.player.CountKeyItem("license_void") == 0)) // [!code ++]
		{ // [!code ++]
			Msg.SayNothingHappen(); // [!code ++]
			return; // [!code ++]
		} // [!code ++]
		int max = Mathf.Min(EClass.player.stats.deepest, -root.MinLv); // [!code ++]
		int destLv = 1; // [!code ++]
		Dialog.InputName("dialogVoidReturn".lang(max.ToString() ?? ""), max.ToString() ?? "", delegate(bool cancel, string text) // [!code ++]
		{ // [!code ++]
			if (!cancel) // [!code ++]
			{ // [!code ++]
				destLv = Mathf.Abs(text.ToInt()); // [!code ++]
				destLv = Mathf.Clamp(destLv, 1, max) * -1; // [!code ++]
				Zone zone = ((root.lv == destLv) ? root : (root.children.Find((Spatial t) => t.lv == destLv) as Zone)); // [!code ++]
				Debug.Log(destLv + "/" + zone); // [!code ++]
				if (zone == null) // [!code ++]
				{ // [!code ++]
					zone = SpatialGen.Create(root.GetNewZoneID(destLv), root, register: true) as Zone; // [!code ++]
					zone.lv = destLv; // [!code ++]
				} // [!code ++]
				Msg.Say("returnComplete"); // [!code ++]
				EClass.player.uidLastTravelZone = 0; // [!code ++]
				EClass.pc.MoveZone(zone, ZoneTransition.EnterState.Return); // [!code ++]
				EClass.player.lastZonePos = null; // [!code ++]
				EClass.player.returnInfo = null; // [!code ++]
			} // [!code ++]
		}); // [!code ++]
		break; // [!code ++]
	} // [!code ++]
	case EffectId.Return:
	case EffectId.Evac:
		if (!cc.IsPC)
```

[`public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/ActEffect.cs#L2056-L2062)
```cs:line-numbers=2056
		int num7 = Dice.Create((actRef.act != null && EClass.sources.calc.map.ContainsKey(actRef.act.ID)) ? actRef.act.ID : "SpHealLight", power, CC, (actRef.refThing != null) ? null : actRef.act).Roll();
		if (actRef.refThing != null)
		{
			num7 = num7 * (100 + actRef.refThing.Evalue(7500)) / 100; // [!code --]
			num7 = num7 * (100 + actRef.refThing.Evalue(750) * 10) / 100; // [!code ++]
		}
		if (flag)
		{
```

## Card

[`public virtual int GetPrice(CurrencyType currency = CurrencyType.Money, bool sel`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Card.cs#L7136-L7141)
```cs:line-numbers=7136
		case CurrencyType.Medal:
			switch (id)
			{
			case "1282": // [!code ++]
				return 5; // [!code ++]
			case "bill_tax":
				return 3;
			case "water":
```

[`public virtual int GetPrice(CurrencyType currency = CurrencyType.Money, bool sel`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Card.cs#L7175-L7181)
```cs:line-numbers=7175
			case "scroll_random":
				if (refVal == 8288)
				{
					return 5; // [!code --]
					return 10; // [!code ++]
				}
				break;
			}
```

## Chara

[`public void TryDropBossLoot()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Chara.cs#L5570-L5575)
```cs:line-numbers=5570
		if (EClass._zone.DangerLv > EClass.player.stats.deepest)
		{
			EClass.player.stats.deepest = EClass._zone.DangerLv;
			if (EClass._zone is Zone_Void) // [!code ++]
			{ // [!code ++]
				EClass.player.stats.deepestVoid = -EClass._zone.lv; // [!code ++]
			} // [!code ++]
			Msg.Say("update_deepest", EClass.player.stats.deepest.ToString() ?? "");
		}
		EClass.player.willAutoSave = true;
```

## EffectId

[`public enum EffectId`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/EffectId.cs#L126-L130)
```cs:line-numbers=126
	MoonSpear = 302,
	BurnMana = 303,
	MoonArrow = 304,
	LittleSisterMigration = 305 // [!code --]
	LittleSisterMigration = 305, // [!code ++]
	ReturnVoid = 306 // [!code ++]
}
```

## Player

[`public class Stats : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Player.cs#L110-L115)
```cs:line-numbers=110
		[JsonProperty]
		public int deepest;

		[JsonProperty] // [!code ++]
		public int deepestVoid; // [!code ++]
 // [!code ++]
		[JsonProperty]
		public int gambleChest;

```

[`public void OnLeaveZone()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Player.cs#L958-L963)
```cs:line-numbers=958
	[JsonProperty]
	public int fished;

	[JsonProperty] // [!code ++]
	public int fishArtifact; // [!code ++]
 // [!code ++]
	[JsonProperty]
	public float angle;

```

[`public void OnAdvanceDay()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Player.cs#L2368-L2373)
```cs:line-numbers=2368
		{
			ModKarma(1);
		}
		if (fishArtifact > 0 && EClass.rnd(5) == 0) // [!code ++]
		{ // [!code ++]
			fishArtifact--; // [!code ++]
		} // [!code ++]
	}

	public bool TryAbortAutoCombat(bool immediate = true)
```

## SpatialManager

[`public void Remove(Spatial s)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/SpatialManager.cs#L45-L55)
```cs:line-numbers=45
		listDestryoed.Add(s);
	}

	public T Find<T>(Func<T, bool> func) where T : Zone // [!code --]
	public T Find<T>(Func<T, bool> func = null) where T : Zone // [!code ++]
	{
		foreach (Spatial value in map.Values)
		{
			if (value is T val && func(val)) // [!code --]
			if (value is T val && (func == null || func(val))) // [!code ++]
			{
				return val;
			}
```

## Trait

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Trait.cs#L1795-L1800)
```cs:line-numbers=1795
				Add("diary_lady", 1, 0);
				Add("1165", 1, 0).SetNum(5);
				AddThing(ThingGen.CreateScroll(9160).SetNum(5));
				Add("1282", 1, 0).SetNum(5); // [!code ++]
				Add("monsterball", 1, 0).SetNum(3).SetLv(20);
				Add("monsterball", 1, 0).SetNum(3).SetLv(40);
				Add("bill_tax", 1, 0).c_bill = 1;
```

## WindowChara

[`public void RefreshProfile()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/WindowChara.cs#L382-L388)
```cs:line-numbers=382
	string text = "deepestLv2".lang((chara.IsPCFaction ? EClass.player.stats.deepest : chara.LV).ToString() ?? "");
	if (chara.IsPCFaction && EClass.player.CountKeyItem("license_void") > 0)
	{
		text = text + " " + "deepestLv3".lang(Mathf.Abs(EClass.game.spatials.Find("void").GetDeepestLv()).ToString() ?? ""); // [!code --]
		text = text + " " + "deepestLv3".lang(EClass.player.stats.deepestVoid.ToString() ?? ""); // [!code ++]
	}
	textDeepest.text = text;
	textAssets.text = (chara.IsPC ? "tGameTime".lang(EClass.player.stats.days.ToFormat(), EClass.player.stats.turns.ToFormat()) : "???");
```

## Zone

[`public virtual bool AllowInvest`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Zone.cs#L271-L279)
```cs:line-numbers=271

	public virtual bool CanUnlockExit => !LockExit;

	public virtual int MaxLv => 99999; // [!code --]
	public virtual int MaxLv => 99999999; // [!code ++]

	public virtual int MinLv => -99999; // [!code --]
	public virtual int MinLv => -99999999; // [!code ++]

	public virtual bool AddPrefix => false;

```

[`public int GetSortVal()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Zone.cs#L3207-L3217)
```cs:line-numbers=3207
{
	if (IsPCFaction)
	{
		return -100000 + base.uid; // [!code --]
		return -10000000 + base.uid; // [!code ++]
	} // [!code ++]
	if (this is Zone_SubTown) // [!code ++]
	{ // [!code ++]
		return -8000000 + base.uid; // [!code ++]
	} // [!code ++]
	if (this is Zone_Town) // [!code ++]
	{ // [!code ++]
		return -9000000 + base.uid; // [!code ++]
	}
	if (this is Zone_Civilized)
	{
		return -90000 + base.uid; // [!code --]
		return -7000000 + base.uid; // [!code ++]
	} // [!code ++]
	if (this is Zone_RandomDungeon) // [!code ++]
	{ // [!code ++]
		return 1000000 + base.uid; // [!code ++]
	}
	return base.uid;
}
```

## Zone_Void

[`public override string TextWidgetDate`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/b3d1f486b2c477484fa571d2dc39e480852aa7f5/Elin/Zone_Void.cs#L24-L31)
```cs:line-numbers=24
		}
	}

	public override int MinLv => -10000; // [!code --]
 // [!code --]
	public override ZoneScaleType ScaleType => ZoneScaleType.Void;

	public override bool LockExit => IsBossLV;
```

---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 17 files modified. 1 new file created.
version: EA 23.102 Nightly
changes: Card/CardRenderer/Chara/CoreDebug/DramaManager/ENC/FACTION/FEAT/FOOD/LayerDrama/MUTATION/POLICY/Player/SKILL/TraitDrinkMilkMother/TraitFoodEggFertilized/+TraitStoryBookHome/UIInventory
---

# EA 23.102 Nightly

March 13, 2025

17 files modified. 1 new file created.

## Important Changes

**None.**
## Card

[`@@ -3076,6 +3076,8 @@ public void RemoveThing(Thing thing)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/Card.cs#L3076-L3081)
```cs:line-numbers=3076
			}
			EClass.player.RefreshCurrentHotItem();
			ActionMode.AdvOrRegion.updatePlans = true;
			LayerInventory.SetDirty(thing); // [!code ++]
			Debug.Log(thing); // [!code ++]
		}
		RecalculateFOV();
	}
```

## CardRenderer

[`@@ -375,6 +375,7 @@ public SourcePref GetPref()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CardRenderer.cs#L375-L380)
```cs:line-numbers=375
			case 2625:
				return EClass.core.refs.prefs.sonwputit1;
			case 2320:
			case 2611: // [!code ++]
			case 2620:
			case 2622:
			case 2624:
```

## Chara

[`@@ -1714,7 +1714,7 @@ public void RefreshSpeed(Element.BonusInfo info = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/Chara.cs#L1714-L1720)
```cs:line-numbers=1714
			info?.AddFix(EClass.player.lastEmptyAlly * 10 - 10, "exceedParty".lang());
		}
	}
	else if (base.LV >= 1000 && !EClass.game.principal.disableVoidBlessing) // [!code --]
	else if (base.LV >= 1000 && !EClass.game.principal.disableVoidBlessing && !base.IsPCFactionOrMinion) // [!code ++]
	{
		num += EClass.curve((base.LV - 900) / 100 * 10, 500, 100);
		info?.AddFix(EClass.curve((base.LV - 900) / 100 * 10, 500, 100), "enemySpeedBuff".lang());
```

[`@@ -2953,7 +2953,7 @@ public void TryPush(Point point)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/Chara.cs#L2953-L2959)
```cs:line-numbers=2953
					c.PlayEffect("push");
				}
				c.MoveByForce(newPoint, this, checkWall: true);
				if (!c.IsPC && c.trait is TraitRogue && EClass.rnd(3) == 0 && GetCurrency() > 20) // [!code --]
				if (!c.IsPC && c.trait is TraitRogue && EClass.rnd(3) == 0 && GetCurrency() > 20 && !HasElement(426)) // [!code ++]
				{
					int num = EClass.rndHalf(10 + Mathf.Min(GetCurrency() / 100, 1000));
					c.Talk("pushed");
```

[`@@ -2973,7 +2973,7 @@ public void TryPush(Point point)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/Chara.cs#L2973-L2979)
```cs:line-numbers=2973

	public bool CanReplace(Chara c)
	{
		if (c.IsMultisize || !c.trait.CanBePushed || c.noMove || IsHostile(c) || IsMinion || (EClass._zone.IsRegion && !c.IsPCFactionOrMinion)) // [!code --]
		if (c.IsMultisize || !c.trait.CanBePushed || c.isRestrained || c.noMove || IsHostile(c) || IsMinion || (EClass._zone.IsRegion && !c.IsPCFactionOrMinion)) // [!code ++]
		{
			return false;
		}
```

[`@@ -4519,6 +4519,7 @@ public void RestockInventory(bool onCreate)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/Chara.cs#L4519-L4524)
```cs:line-numbers=4519
		break;
	case "farris":
		Restock("lute", 1);
		Restock("book_story_home", 1); // [!code ++]
		break;
	case "begger":
		break;
```

[`@@ -7173,7 +7174,7 @@ public void ModAffinity(Chara c, int a, bool show = true, bool showOnlyEmo = fal`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/Chara.cs#L7173-L7179)
```cs:line-numbers=7173
		c.ModAffinity(EClass.pc, a, show);
		return;
	}
	int num = StatsHygiene.GetAffinityMod(EClass.pc.hygiene.GetPhase()); // [!code --]
	int num = StatsHygiene.GetAffinityMod(EClass.pc.hygiene.GetPhase()) + (HasElement(417) ? 20 : 0); // [!code ++]
	if (IsPCFaction && homeBranch != null)
	{
		num += (int)Mathf.Sqrt(homeBranch.Evalue(2117)) * 5;
```

## CoreDebug

[`@@ -443,8 +443,9 @@ public void QuickStart()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CoreDebug.cs#L443-L450)
```cs:line-numbers=443
		thing = ThingGen.Create("pouch");
		for (int k = 0; k < 30; k++)
		{
			thing.AddCard(ThingGen.Create("mathammer", MATERIAL.GetRandomMaterial(100).alias)); // [!code --]
			thing.AddCard(ThingGen.Create("mathammer", MATERIAL.GetRandomMaterial(100).alias)).SetNum(10); // [!code ++]
		}
		thing.AddCard(ThingGen.Create("mathammer", 102)).SetNum(10); // [!code ++]
		EClass.pc.AddCard(thing);
		thing = ThingGen.Create("pouch");
		for (int l = 0; l < 30; l++)
```

[`@@ -519,7 +520,6 @@ public void QuickStart()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CoreDebug.cs#L519-L525)
```cs:line-numbers=519
		thing.AddCard(ThingGen.Create("gem").SetNum(99).ChangeMaterial("rubinus"));
		thing.AddCard(ThingGen.Create("flower_white").SetNum(99));
		thing.AddCard(ThingGen.Create("bait").SetNum(10));
		thing.AddCard(ThingGen.Create("seed").SetNum(99)); // [!code --]
		EClass.pc.AddCard(thing);
		thing.Dye("rubinus");
		Thing thing6 = ThingGen.Create("quiver");
```

[`@@ -542,7 +542,7 @@ public void QuickStart()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CoreDebug.cs#L542-L548)
```cs:line-numbers=542
		{
			if (row3.tag.Contains("seed"))
			{
				Thing c = TraitSeed.MakeSeed(row3).SetNum(100); // [!code --]
				Thing c = TraitSeed.MakeSeed(row3).SetNum(10); // [!code ++]
				thing.AddCard(c);
			}
		}
```

[`@@ -583,6 +583,7 @@ public void QuickStart()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CoreDebug.cs#L583-L588)
```cs:line-numbers=583
		EClass.pc.AddThing("record");
		EClass.pc.AddThing("deed").SetNum(5);
		EClass.pc.AddThing("book_story");
		EClass.pc.AddThing("book_story_home"); // [!code ++]
		EClass.pc.AddThing("book_tutorial");
		EClass.pc.AddThing("water").SetNum(20).SetBlessedState(BlessedState.Blessed);
		EClass.pc.AddThing("water").SetNum(20).SetBlessedState(BlessedState.Cursed);
```

[`@@ -647,6 +648,13 @@ public void QuickStart()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CoreDebug.cs#L647-L652)
```cs:line-numbers=647
		EClass.game.quests.Add("quru_past1");
		EClass.game.quests.Add("quru_past2");
		EClass.game.quests.Add("pre_debt");
		EClass.game.quests.Add("exile_meet"); // [!code ++]
		EClass.game.quests.Add("exile_quru"); // [!code ++]
		EClass.game.quests.Add("exile_kettle"); // [!code ++]
		EClass.game.quests.Add("exile_whisper"); // [!code ++]
		EClass.game.quests.Add("exile_voice"); // [!code ++]
		EClass.game.quests.Add("into_darkness"); // [!code ++]
		EClass.game.quests.Add("demitas_spellwriter"); // [!code ++]
	}
	static Thing AddAbility(string id)
	{
```

[`@@ -914,25 +922,31 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CoreDebug.cs#L914-L938)
```cs:line-numbers=914
	}
	if (Input.GetKeyDown(KeyCode.F2))
	{
		for (int i = 0; i < 20; i++) // [!code --]
		Chara targetChara = EClass.scene.mouseTarget.TargetChara; // [!code ++]
		if (targetChara != null) // [!code ++]
		{
			Debug.Log(Rand.Range(0, 2)); // [!code --]
			EClass.pc.Pick(targetChara.MakeMilk()); // [!code ++]
			EClass.pc.Pick(targetChara.MakeGene()); // [!code ++]
			EClass.pc.Pick(targetChara.MakeBraineCell()); // [!code ++]
			EClass.pc.Pick(targetChara.MakeEgg(effect: true, 10)); // [!code ++]
		}
		EClass.player.recipes.Add("b32"); // [!code --]
		if (EScriptable.rnd(2) == 0) // [!code --]
		if (EClass.game.quests.Get<QuestDebt>() == null) // [!code ++]
		{
			EClass.player.recipes.Add("b118"); // [!code --]
		} // [!code --]
		else // [!code --]
		{ // [!code --]
			EClass.player.recipes.Add("b118-p"); // [!code --]
			Chara chara = CharaGen.Create("loytel"); // [!code ++]
			EClass._zone.AddCard(chara, EClass.pc.pos); // [!code ++]
			chara.SetGlobal(); // [!code ++]
			Quest q = EClass.game.quests.Add("debt", "loytel"); // [!code ++]
			EClass.game.quests.Start(q); // [!code ++]
			EClass.pc.party.RemoveMember(chara); // [!code ++]
			Hostility hostility2 = (chara.c_originalHostility = Hostility.Ally); // [!code ++]
			chara.hostility = hostility2; // [!code ++]
		}
		return;
	}
	if (Input.GetKeyDown(KeyCode.F3))
	{
		EClass.pc.AddCondition<ConDisease>();
		for (int j = 0; j < 10; j++) // [!code --]
		for (int i = 0; i < 10; i++) // [!code ++]
		{
			Thing thing = ThingGen.Create("egg_fertilized");
			thing.TryMakeRandomItem(40);
```

[`@@ -954,9 +968,9 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CoreDebug.cs#L954-L962)
```cs:line-numbers=954
		{
			EClass.Branch.ModExp(EClass.Branch.GetNextExp());
		}
		foreach (Chara chara in EClass._map.charas) // [!code --]
		foreach (Chara chara2 in EClass._map.charas) // [!code ++]
		{
			chara.AddExp(chara.ExpToNext); // [!code --]
			chara2.AddExp(chara2.ExpToNext); // [!code ++]
		}
		EClass.pc.PlayEffect("boost");
		EClass.pc.PlaySound("boost");
```

[`@@ -1034,7 +1048,7 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/CoreDebug.cs#L1034-L1040)
```cs:line-numbers=1034
		if (Input.GetKey(KeyCode.F9))
		{
			EClass.scene.paused = false;
			for (int k = 0; k < advanceMin; k++) // [!code --]
			for (int j = 0; j < advanceMin; j++) // [!code ++]
			{
				EClass.game.updater.FixedUpdate();
			}
```

## DramaManager

[`@@ -275,6 +275,10 @@ public void ParseLine(Dictionary<string, string> item)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/DramaManager.cs#L275-L280)
```cs:line-numbers=275
		}
		return;
	}
	if (LayerDrama.fromBook && action == "editPlaylist") // [!code ++]
	{ // [!code ++]
		action = "BGM"; // [!code ++]
	} // [!code ++]
	switch (action)
	{
	case "disableFullPortrait":
```

[`@@ -309,8 +313,8 @@ public void ParseLine(Dictionary<string, string> item)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/DramaManager.cs#L309-L316)
```cs:line-numbers=309
		{
			if (p2.StartsWith("*"))
			{
				Quest quest = EMono.game.quests.Get(p2.TrimStart('*')); // [!code --]
				quest?.ChangePhase(p3.ToInt(quest.GetType())); // [!code --]
				Quest quest3 = EMono.game.quests.Get(p2.TrimStart('*')); // [!code ++]
				quest3?.ChangePhase(p3.ToInt(quest3.GetType())); // [!code ++]
			}
			else
			{
```

[`@@ -413,6 +417,10 @@ public void ParseLine(Dictionary<string, string> item)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/DramaManager.cs#L413-L418)
```cs:line-numbers=413
		break;
	}
	case "invoke":
		if (LayerDrama.fromBook) // [!code ++]
		{ // [!code ++]
			break; // [!code ++]
		} // [!code ++]
		if (jump.IsEmpty())
		{
			AddEvent(delegate
```

[`@@ -657,28 +665,32 @@ public void ParseLine(Dictionary<string, string> item)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/DramaManager.cs#L657-L684)
```cs:line-numbers=657
		AddEvent(new DramaEventExit());
		break;
	case "acceptQuest":
		if (LayerDrama.fromBook) // [!code ++]
		{ // [!code ++]
			break; // [!code ++]
		} // [!code ++]
		AddEvent(delegate
		{
			Quest quest2 = EMono.game.quests.globalList.Where((Quest a) => a.source.id == p2).First(); // [!code --]
			EMono.game.quests.globalList.Remove(quest2); // [!code --]
			EMono.game.quests.Start(quest2); // [!code --]
			Quest quest = EMono.game.quests.globalList.Where((Quest a) => a.source.id == p2).First(); // [!code ++]
			EMono.game.quests.globalList.Remove(quest); // [!code ++]
			EMono.game.quests.Start(quest); // [!code ++]
		});
		break;
	case "startQuest":
		AddEvent(delegate
		{
			Quest quest3 = Quest.Create(p2); // [!code --]
			if (!quest3.HasDLC) // [!code --]
			Quest quest2 = Quest.Create(p2); // [!code ++]
			if (!quest2.HasDLC) // [!code ++]
			{
				Msg.Say("(Failed DLC check)");
			}
			else
			{
				EMono.game.quests.Start(quest3); // [!code --]
				LayerDrama.currentQuest = quest3; // [!code --]
				EMono.game.quests.Start(quest2); // [!code ++]
				LayerDrama.currentQuest = quest2; // [!code ++]
				if (tg != null && tg.chara != null)
				{
					Debug.Log("Starting Quest:" + quest3?.ToString() + "/" + tg.chara.quest?.ToString() + "/" + (quest3 == tg.chara.quest)); // [!code --]
					Debug.Log("Starting Quest:" + quest2?.ToString() + "/" + tg.chara.quest?.ToString() + "/" + (quest2 == tg.chara.quest)); // [!code ++]
				}
			}
		});
```

[`@@ -699,32 +711,44 @@ public void ParseLine(Dictionary<string, string> item)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/DramaManager.cs#L699-L730)
```cs:line-numbers=699
		});
		break;
	case "addKeyItem":
		AddEvent(delegate // [!code --]
		if (!LayerDrama.fromBook) // [!code ++]
		{
			EMono.player.ModKeyItem(p2); // [!code --]
		}); // [!code --]
			AddEvent(delegate // [!code ++]
			{ // [!code ++]
				EMono.player.ModKeyItem(p2); // [!code ++]
			}); // [!code ++]
		} // [!code ++]
		break;
	case "drop":
		AddEvent(delegate // [!code --]
		if (!LayerDrama.fromBook) // [!code ++]
		{
			Msg.Say("dropReward"); // [!code --]
			CardBlueprint.SetNormalRarity(); // [!code --]
			Thing t = ThingGen.Create(p2); // [!code --]
			EMono._zone.AddCard(t, EMono.pc.pos); // [!code --]
		}); // [!code --]
			AddEvent(delegate // [!code ++]
			{ // [!code ++]
				Msg.Say("dropReward"); // [!code ++]
				CardBlueprint.SetNormalRarity(); // [!code ++]
				Thing t = ThingGen.Create(p2); // [!code ++]
				EMono._zone.AddCard(t, EMono.pc.pos); // [!code ++]
			}); // [!code ++]
		} // [!code ++]
		break;
	case "completeQuest":
		AddEvent(delegate // [!code --]
		if (!LayerDrama.fromBook) // [!code ++]
		{
			EMono.game.quests.Complete(p2.IsEmpty() ? LayerDrama.currentQuest : EMono.game.quests.Get(p2)); // [!code --]
			LayerDrama.currentQuest = null; // [!code --]
		}); // [!code --]
			AddEvent(delegate // [!code ++]
			{ // [!code ++]
				EMono.game.quests.Complete(p2.IsEmpty() ? LayerDrama.currentQuest : EMono.game.quests.Get(p2)); // [!code ++]
				LayerDrama.currentQuest = null; // [!code ++]
			}); // [!code ++]
		} // [!code ++]
		break;
	case "nextPhase":
		AddEvent(delegate // [!code --]
		if (!LayerDrama.fromBook) // [!code ++]
		{
			EMono.game.quests.Get(p2).NextPhase(); // [!code --]
		}); // [!code --]
			AddEvent(delegate // [!code ++]
			{ // [!code ++]
				EMono.game.quests.Get(p2).NextPhase(); // [!code ++]
			}); // [!code ++]
		} // [!code ++]
		break;
	case "addResource":
		AddEvent(delegate
```

[`@@ -1011,6 +1035,10 @@ public bool CheckIF(string IF)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/DramaManager.cs#L1011-L1016)
```cs:line-numbers=1011
	string[] array = IF.Split(',');
	switch (array[0])
	{
	case "fromBook": // [!code ++]
		return LayerDrama.fromBook; // [!code ++]
	case "!fromBook": // [!code ++]
		return !LayerDrama.fromBook; // [!code ++]
	case "WindRest":
		return EMono._zone is Zone_WindRest;
	case "guild_promote":
```

## ENC

[`@@ -54,12 +54,10 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/ENC.cs#L54-L65)
```cs:line-numbers=54

	public const int mod_scatter = 607;

	public const int slowCorruption = 412; // [!code --]
	public const int bane_animal = 463; // [!code ++]

	public const int mod_precision = 605;

	public const int breathing = 429; // [!code --]
 // [!code --]
	public const int allNeckHunt = 428;

	public const int negateNeckHunt = 427;
```

[`@@ -72,19 +70,21 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/ENC.cs#L72-L90)
```cs:line-numbers=72

	public const int negateFear = 423;

	public const int negateParalysis = 422; // [!code --]
 // [!code --]
	public const int negateBlind = 421;

	public const int negatePoison = 420;

	public const int loving = 417; // [!code ++]
 // [!code ++]
	public const int seeInvisible = 416;

	public const int invisibility = 415;

	public const int encHit = 414;

	public const int encSpell = 411; // [!code --]
	public const int breathing = 429; // [!code ++]
 // [!code ++]
	public const int slowCorruption = 412; // [!code ++]

	public const int throwReturn = 410;

```

[`@@ -94,7 +94,7 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/ENC.cs#L94-L100)
```cs:line-numbers=94

	public const int travelSpeed = 407;

	public const int mod_drill = 606; // [!code --]
	public const int resMutation = 406; // [!code ++]

	public const int slowDecay = 405;

```

[`@@ -108,20 +108,24 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/ENC.cs#L108-L127)
```cs:line-numbers=108

	public const int negateTeleport = 400;

	public const int sustain_STR = 440; // [!code --]
	public const int mod_drill = 606; // [!code ++]

	public const int sustain_END = 441; // [!code --]
	public const int encSpell = 411; // [!code ++]

	public const int resMutation = 406; // [!code --]
	public const int sustain_STR = 440; // [!code ++]
 // [!code ++]
	public const int negateParalysis = 422; // [!code ++]

	public const int slot_rune = 484;

	public const int mod_ammo_knockback = 603; // [!code ++]
 // [!code ++]
	public const int mod_rapid = 602; // [!code ++]
 // [!code ++]
	public const int mod_reload = 601;

	public const int mod_ammo = 600;

	public const int mod_ammo_recover = 604; // [!code --]
 // [!code --]
	public const int optimizeMana = 483;

	public const int force_weapon = 482;
```

[`@@ -136,15 +140,11 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/ENC.cs#L136-L150)
```cs:line-numbers=136

	public const int bane_god = 466;

	public const int bane_machine = 465; // [!code --]
 // [!code --]
	public const int mod_rapid = 602; // [!code --]
 // [!code --]
	public const int bane_man = 464;

	public const int bane_fairy = 462;

	public const int bane_undead = 461; // [!code --]
	public const int bane_machine = 465; // [!code ++]

	public const int bane_dragon = 460;

```

[`@@ -156,24 +156,26 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/ENC.cs#L156-L179)
```cs:line-numbers=156

	public const int sustain_LER = 444;

	public const int bane_undead = 461; // [!code ++]
 // [!code ++]
	public const int sustain_PER = 443;

	public const int sustain_DEX = 442;

	public const int bane_animal = 463; // [!code --]
	public const int sustain_END = 441; // [!code ++]

	public const int mod_ammo_knockback = 603; // [!code --]
	public const int mod_ammo_recover = 604; // [!code ++]

	public static readonly int[] IDS = new int[82] // [!code --]
	public static readonly int[] IDS = new int[83] // [!code ++]
	{
		652, 651, 650, 641, 640, 621, 620, 623, 622, 653,
		624, 654, 851, 656, 660, 661, 662, 663, 664, 665,
		666, 850, 608, 865, 852, 655, 607, 412, 605, 429, // [!code --]
		428, 427, 426, 425, 424, 423, 422, 421, 420, 416, // [!code --]
		415, 414, 411, 410, 409, 408, 407, 606, 405, 404, // [!code --]
		403, 402, 401, 400, 440, 441, 406, 484, 601, 600, // [!code --]
		604, 483, 482, 481, 480, 468, 467, 466, 465, 602, // [!code --]
		464, 462, 461, 460, 447, 446, 445, 444, 443, 442, // [!code --]
		463, 603 // [!code --]
		666, 850, 608, 865, 852, 655, 607, 463, 605, 428, // [!code ++]
		427, 426, 425, 424, 423, 421, 420, 417, 416, 415, // [!code ++]
		414, 429, 412, 410, 409, 408, 407, 406, 405, 404, // [!code ++]
		403, 402, 401, 400, 606, 411, 440, 422, 484, 603, // [!code ++]
		602, 601, 600, 483, 482, 481, 480, 468, 467, 466, // [!code ++]
		464, 462, 465, 460, 447, 446, 445, 444, 461, 443, // [!code ++]
		442, 441, 604 // [!code ++]
	};
}
```

## FACTION

[`@@ -4,31 +4,29 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FACTION.cs#L4-L34)
```cs:line-numbers=4

public class FACTION
{
	public const int bfHill = 3603; // [!code --]
 // [!code --]
	public const int bfSnow = 3602; // [!code --]
	public const int bfBeach = 3604; // [!code ++]

	public const int bfForest = 3601; // [!code --]
	public const int bfCave = 3500; // [!code ++]

	public const int bfPlain = 3600;

	public const int bfSea = 3605; // [!code --]
 // [!code --]
	public const int bfCave = 3500; // [!code --]
	public const int bfForest = 3601; // [!code ++]

	public const int bfFertile = 3700; // [!code --]
	public const int bfSnow = 3602; // [!code ++]

	public const int bfGeyser = 3701; // [!code --]
	public const int bfHill = 3603; // [!code ++]

	public const int bfRuin = 3702; // [!code --]
	public const int bfFertile = 3700; // [!code ++]

	public const int bfBeach = 3604; // [!code --]
	public const int bfSea = 3605; // [!code ++]

	public const int fRation = 2207;

	public const int actBuildRecipe = 4005; // [!code --]
	public const int bfGeyser = 3701; // [!code ++]

	public const int fSafety = 2205; // [!code --]
	public const int fAttraction = 2206; // [!code ++]
 // [!code ++]
	public const int fEducation = 2116; // [!code ++]

	public const int fFood = 2204;

```

[`@@ -40,35 +38,41 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FACTION.cs#L40-L74)
```cs:line-numbers=40

	public const int fSoil = 2200;

	public const int bfTranquil = 3703; // [!code --]
 // [!code --]
	public const int fHeirloom = 2120;

	public const int fLoyal = 2117; // [!code ++]
 // [!code ++]
	public const int fConstruction = 2003; // [!code ++]
 // [!code ++]
	public const int bfRuin = 3702; // [!code ++]
 // [!code ++]
	public const int fTaxEvasion = 2119;

	public const int fLuck = 2118;

	public const int fLoyal = 2117; // [!code --]
 // [!code --]
	public const int fAttraction = 2206; // [!code --]
	public const int fAdmin = 2115; // [!code ++]

	public const int bfVolcano = 3704; // [!code --]
	public const int fSafety = 2205; // [!code ++]

	public const int bfMushroom = 3801; // [!code --]
	public const int bfTranquil = 3703; // [!code ++]

	public const int bfFish = 3706;

	public const int bfHunt = 3705; // [!code ++]
 // [!code ++]
	public const int actBuildInspect = 4006;

	public const int actBuildRecipe = 4005; // [!code ++]
 // [!code ++]
	public const int actBuildCollect = 4004; // [!code ++]
 // [!code ++]
	public const int actBuildAnywhere = 4003;

	public const int actBuildTerrain = 4002;

	public const int fEducation = 2116; // [!code --]
 // [!code --]
	public const int actBuildMine = 4001;

	public const int actBuildCut = 4000; // [!code --]
	public const int bfVolcano = 3704; // [!code ++]

	public const int bfStart = 3900;

```

[`@@ -78,44 +82,40 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FACTION.cs#L78-L121)
```cs:line-numbers=78

	public const int bfGum = 3803;

	public const int bfHunt = 3705; // [!code --]
 // [!code --]
	public const int bfSilica = 3802; // [!code --]
	public const int actBuildCut = 4000; // [!code ++]

	public const int bfCoal = 3800; // [!code --]
	public const int bfMushroom = 3801; // [!code ++]

	public const int bfLandmark5 = 3784; // [!code --]
	public const int bfSilica = 3802; // [!code ++]

	public const int bfLandmark4 = 3783; // [!code --]
	public const int bfFreshAir = 3708; // [!code ++]

	public const int bfLandmark3 = 3782; // [!code --]
	public const int bfBasin = 3709; // [!code ++]

	public const int bfLandmark2 = 3781; // [!code --]
	public const int bfBreed = 3710; // [!code ++]

	public const int bfLandmark1 = 3780;

	public const int bfBreed = 3710; // [!code --]
 // [!code --]
	public const int bfBasin = 3709; // [!code --]
	public const int bfMonster = 3707; // [!code ++]

	public const int bfFreshAir = 3708; // [!code --]
	public const int bfLandmark3 = 3782; // [!code ++]

	public const int bfMonster = 3707; // [!code --]
	public const int bfLandmark4 = 3783; // [!code ++]

	public const int actBuildCollect = 4004; // [!code --]
	public const int bfLandmark5 = 3784; // [!code ++]

	public const int fAdmin = 2115; // [!code --]
	public const int bfCoal = 3800; // [!code ++]

	public const int fConstruction = 2003; // [!code --]
	public const int bfLandmark2 = 3781; // [!code ++]

	public static readonly int[] IDS = new int[52]
	{
		3603, 3602, 3601, 3600, 3605, 3500, 3700, 3701, 3702, 3604, // [!code --]
		2207, 4005, 2205, 2204, 2203, 2202, 2201, 2200, 3703, 2120, // [!code --]
		2119, 2118, 2117, 2206, 3704, 3801, 3706, 4006, 4003, 4002, // [!code --]
		2116, 4001, 4000, 3900, 3805, 3804, 3803, 3705, 3802, 3800, // [!code --]
		3784, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707, 4004, // [!code --]
		2115, 2003 // [!code --]
		3604, 3500, 3600, 3601, 3602, 3603, 3700, 3605, 2207, 3701, // [!code ++]
		2206, 2116, 2204, 2203, 2202, 2201, 2200, 2120, 2117, 2003, // [!code ++]
		3702, 2119, 2118, 2115, 2205, 3703, 3706, 3705, 4006, 4005, // [!code ++]
		4004, 4003, 4002, 4001, 3704, 3900, 3805, 3804, 3803, 4000, // [!code ++]
		3801, 3802, 3708, 3709, 3710, 3780, 3707, 3782, 3783, 3784, // [!code ++]
		3800, 3781 // [!code ++]
	};
}
public class Faction : EClass
```

## FEAT

[`@@ -3,34 +3,16 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FEAT.cs#L3-L36)
```cs:line-numbers=3

public class FEAT
{
	public const int featSnail = 1211; // [!code --]
 // [!code --]
	public const int featFaith = 1636; // [!code --]
 // [!code --]
	public const int featMartial = 1635; // [!code --]
 // [!code --]
	public const int featNegotiate = 1634; // [!code --]
 // [!code --]
	public const int featSpotting = 1633; // [!code --]
 // [!code --]
	public const int featEvade = 1632; // [!code --]
 // [!code --]
	public const int featDefense = 1631; // [!code --]
 // [!code --]
	public const int featHardy = 1630; // [!code --]
 // [!code --]
	public const int featSPD = 1629; // [!code --]
 // [!code --]
	public const int featLuck = 1628;

	public const int featCHA = 1627;

	public const int featWIL = 1626;

	public const int featAnimalLover = 1640; // [!code --]
 // [!code --]
	public const int featMAG = 1625;

	public const int featLER = 1624; // [!code ++]
 // [!code ++]
	public const int featPER = 1623;

	public const int featEND = 1622;
```

[`@@ -41,7 +23,7 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FEAT.cs#L41-L47)
```cs:line-numbers=41

	public const int featStamina = 1612;

	public const int featMana = 1611; // [!code --]
	public const int featLuckyCat = 1412; // [!code ++]

	public const int featLife = 1610;

```

[`@@ -53,37 +35,29 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FEAT.cs#L53-L89)
```cs:line-numbers=53

	public const int featSwordsage = 1418;

	public const int featLER = 1624; // [!code --]
 // [!code --]
	public const int featResCurse = 1641; // [!code --]
 // [!code --]
	public const int featSleeper = 1642; // [!code --]
 // [!code --]
	public const int featSorter = 1643; // [!code --]
 // [!code --]
	public const int featUndead = 1210; // [!code --]
	public const int featWitch = 1417; // [!code ++]

	public const int featSlowFood = 1200; // [!code --]
	public const int featInquisitor = 1416; // [!code ++]

	public const int featManaBond = 1201; // [!code --]
	public const int featFoxMaid = 1415; // [!code ++]

	public const int featFastLearner = 1202; // [!code --]
	public const int featWhiteVixen = 1414; // [!code ++]

	public const int featGrowParts = 1203; // [!code --]
	public const int featFairysan = 1413; // [!code ++]

	public const int featFairyWeak = 1204; // [!code --]
	public const int featSPD = 1629; // [!code ++]

	public const int featCannibalism = 1205; // [!code --]
	public const int featMana = 1611; // [!code ++]

	public const int featMelilithCurse = 1206; // [!code --]
	public const int featHardy = 1630; // [!code ++]

	public const int featFoxBless = 1207; // [!code --]
	public const int featParty = 1645; // [!code ++]

	public const int featFoxLearn = 1208; // [!code --]
	public const int featEvade = 1632; // [!code ++]

	public const int featFluffyTail = 1209; // [!code --]
	public const int featEarthStrength = 1411; // [!code ++]

	public const int featChef = 1658; // [!code --]
	public const int featManaCost = 1657; // [!code ++]

	public const int featScavenger = 1656;

```

[`@@ -101,23 +75,55 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FEAT.cs#L101-L123)
```cs:line-numbers=101

	public const int featDefender = 1649;

	public const int featDefense = 1631; // [!code ++]
 // [!code ++]
	public const int featRapidMagic = 1648;

	public const int featLonelySoul = 1646; // [!code ++]
 // [!code ++]
	public const int featBodyParts = 1644; // [!code ++]
 // [!code ++]
	public const int featSorter = 1643; // [!code ++]
 // [!code ++]
	public const int featSleeper = 1642; // [!code ++]
 // [!code ++]
	public const int featResCurse = 1641; // [!code ++]
 // [!code ++]
	public const int featAnimalLover = 1640; // [!code ++]
 // [!code ++]
	public const int featFaith = 1636; // [!code ++]
 // [!code ++]
	public const int featMartial = 1635; // [!code ++]
 // [!code ++]
	public const int featNegotiate = 1634; // [!code ++]
 // [!code ++]
	public const int featSpotting = 1633; // [!code ++]
 // [!code ++]
	public const int featSummoner = 1647;

	public const int featLonelySoul = 1646; // [!code --]
	public const int featReboot = 1410; // [!code ++]

	public const int featParty = 1645; // [!code --]
	public const int featChef = 1658; // [!code ++]

	public const int featBodyParts = 1644; // [!code --]
	public const int featPaladin2 = 1408; // [!code ++]

	public const int featWitch = 1417; // [!code --]
	public const int featLoyal = 1225; // [!code ++]

	public const int featInquisitor = 1416; // [!code --]
	public const int featUnderground = 1226; // [!code ++]

	public const int featManaCost = 1657; // [!code --]
	public const int featServant = 1227; // [!code ++]

	public const int featWhiteVixen = 1414; // [!code --]
	public const int featDemigod = 1228; // [!code ++]
 // [!code ++]
	public const int featLittleOne = 1229; // [!code ++]
 // [!code ++]
	public const int featAdam = 1230; // [!code ++]
 // [!code ++]
	public const int featNirvana = 1231; // [!code ++]
 // [!code ++]
	public const int featBaby = 1232; // [!code ++]
 // [!code ++]
	public const int featHeavyEater = 1234; // [!code ++]

	public const int featLightEater = 1235;

```

[`@@ -133,41 +139,51 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FEAT.cs#L133-L173)
```cs:line-numbers=133

	public const int featGod_earth1 = 1305;

	public const int featGod_wind1 = 1310; // [!code ++]
 // [!code ++]
	public const int featGod_machine1 = 1315;

	public const int featGod_healing1 = 1320;

	public const int featHeavyEater = 1234; // [!code --]
 // [!code --]
	public const int featGod_harvest1 = 1325;

	public const int featGod_harmony1 = 1335; // [!code --]
	public const int featGod_luck1 = 1330; // [!code ++]

	public const int featGod_oblivion1 = 1340; // [!code --]
	public const int featShiva = 1224; // [!code ++]

	public const int featGod_trickery1 = 1345; // [!code --]
	public const int featAcidBody = 1223; // [!code ++]

	public const int featGod_moonshadow1 = 1350; // [!code --]
	public const int featSplit = 1222; // [!code ++]

	public const int featGod_strife1 = 1355; // [!code --]
	public const int featSpike = 1221; // [!code ++]

	public const int featWarrior = 1400; // [!code --]
	public const int featBoost = 1409; // [!code ++]

	public const int featThief = 1401; // [!code --]
	public const int featSlowFood = 1200; // [!code ++]

	public const int featWizard = 1402; // [!code --]
	public const int featManaBond = 1201; // [!code ++]

	public const int featFarmer = 1403; // [!code --]
	public const int featFastLearner = 1202; // [!code ++]

	public const int featGod_luck1 = 1330; // [!code --]
	public const int featGrowParts = 1203; // [!code ++]

	public const int featArcher = 1404; // [!code --]
	public const int featFairyWeak = 1204; // [!code ++]

	public const int featCosmicHorror = 1233; // [!code --]
	public const int featCannibalism = 1205; // [!code ++]

	public const int featNirvana = 1231; // [!code --]
	public const int featMelilithCurse = 1206; // [!code ++]

	public const int featFoxMaid = 1415; // [!code --]
	public const int featFoxBless = 1207; // [!code ++]
 // [!code ++]
	public const int featFoxLearn = 1208; // [!code ++]
 // [!code ++]
	public const int featGod_harmony1 = 1335; // [!code ++]
 // [!code ++]
	public const int featFluffyTail = 1209; // [!code ++]
 // [!code ++]
	public const int featSnail = 1211; // [!code ++]
 // [!code ++]
	public const int featFairyResist = 1212; // [!code ++]

	public const int featElea = 1213;

```

[`@@ -185,64 +201,48 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FEAT.cs#L185-L248)
```cs:line-numbers=185

	public const int featFate = 1220;

	public const int featBaby = 1232; // [!code --]
 // [!code --]
	public const int featSpike = 1221; // [!code --]
 // [!code --]
	public const int featAcidBody = 1223; // [!code --]
	public const int featUndead = 1210; // [!code ++]

	public const int featFairyResist = 1212; // [!code --]
	public const int featGod_oblivion1 = 1340; // [!code ++]

	public const int featShiva = 1224; // [!code --]
	public const int featCosmicHorror = 1233; // [!code ++]

	public const int featLoyal = 1225; // [!code --]
	public const int featGod_moonshadow1 = 1350; // [!code ++]

	public const int featUnderground = 1226; // [!code --]
	public const int featGod_trickery1 = 1345; // [!code ++]

	public const int featServant = 1227; // [!code --]
	public const int featGod_strife1 = 1355; // [!code ++]

	public const int featDemigod = 1228; // [!code --]
	public const int featWarrior = 1400; // [!code ++]

	public const int featLittleOne = 1229; // [!code --]
	public const int featThief = 1401; // [!code ++]

	public const int featAdam = 1230; // [!code --]
	public const int featFarmer = 1403; // [!code ++]

	public const int featSplit = 1222; // [!code --]
	public const int featArcher = 1404; // [!code ++]

	public const int featPianist = 1405;

	public const int featGod_wind1 = 1310; // [!code --]
 // [!code --]
	public const int featPaladin = 1407; // [!code --]
 // [!code --]
	public const int featTourist = 1406;

	public const int featBoost = 1409; // [!code --]
 // [!code --]
	public const int featEarthStrength = 1411; // [!code --]
 // [!code --]
	public const int featLuckyCat = 1412; // [!code --]
 // [!code --]
	public const int featReboot = 1410; // [!code --]
 // [!code --]
	public const int featFairysan = 1413; // [!code --]
	public const int featWizard = 1402; // [!code ++]

	public const int featPaladin2 = 1408; // [!code --]
	public const int featPaladin = 1407; // [!code ++]

	public static readonly int[] IDS = new int[113]
	{
		1211, 1636, 1635, 1634, 1633, 1632, 1631, 1630, 1629, 1628, // [!code --]
		1627, 1626, 1640, 1625, 1623, 1622, 1621, 1620, 1612, 1611, // [!code --]
		1610, 1421, 1420, 1419, 1418, 1624, 1641, 1642, 1643, 1210, // [!code --]
		1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208, 1209, // [!code --]
		1658, 1656, 1655, 1654, 1653, 1652, 1651, 1650, 1649, 1648, // [!code --]
		1647, 1646, 1645, 1644, 1417, 1416, 1657, 1414, 1235, 1236, // [!code --]
		1237, 1238, 1239, 1300, 1305, 1315, 1320, 1234, 1325, 1335, // [!code --]
		1340, 1345, 1350, 1355, 1400, 1401, 1402, 1403, 1330, 1404, // [!code --]
		1233, 1231, 1415, 1213, 1214, 1215, 1216, 1217, 1218, 1219, // [!code --]
		1220, 1232, 1221, 1223, 1212, 1224, 1225, 1226, 1227, 1228, // [!code --]
		1229, 1230, 1222, 1405, 1310, 1407, 1406, 1409, 1411, 1412, // [!code --]
		1410, 1413, 1408 // [!code --]
		1628, 1627, 1626, 1625, 1624, 1623, 1622, 1621, 1620, 1612, // [!code ++]
		1412, 1610, 1421, 1420, 1419, 1418, 1417, 1416, 1415, 1414, // [!code ++]
		1413, 1629, 1611, 1630, 1645, 1632, 1411, 1657, 1656, 1655, // [!code ++]
		1654, 1653, 1652, 1651, 1650, 1649, 1631, 1648, 1646, 1644, // [!code ++]
		1643, 1642, 1641, 1640, 1636, 1635, 1634, 1633, 1647, 1410, // [!code ++]
		1658, 1408, 1225, 1226, 1227, 1228, 1229, 1230, 1231, 1232, // [!code ++]
		1234, 1235, 1236, 1237, 1238, 1239, 1300, 1305, 1310, 1315, // [!code ++]
		1320, 1325, 1330, 1224, 1223, 1222, 1221, 1409, 1200, 1201, // [!code ++]
		1202, 1203, 1204, 1205, 1206, 1207, 1208, 1335, 1209, 1211, // [!code ++]
		1212, 1213, 1214, 1215, 1216, 1217, 1218, 1219, 1220, 1210, // [!code ++]
		1340, 1233, 1350, 1345, 1355, 1400, 1401, 1403, 1404, 1405, // [!code ++]
		1406, 1402, 1407 // [!code ++]
	};
}
public class Feat : Element
```

## FOOD

[`@@ -1,22 +1,22 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/FOOD.cs#L1-L22)
```cs:line-numbers=1
public class FOOD
{
	public const int gainWeight = 705; // [!code --]
	public const int food_CHA = 700; // [!code ++]

	public const int food_bug = 704; // [!code --]
	public const int food_cat = 701; // [!code ++]

	public const int food_love = 703; // [!code --]
	public const int food_god = 758; // [!code ++]
 // [!code ++]
	public const int justcooked = 757; // [!code ++]

	public const int food_poison = 702;

	public const int food_cat = 701; // [!code --]
	public const int gainWeight = 705; // [!code ++]

	public const int justcooked = 757; // [!code --]
	public const int food_bug = 704; // [!code ++]

	public const int food_god = 758; // [!code --]
	public const int food_love = 703; // [!code ++]

	public const int loseWeight = 706;

	public const int food_CHA = 700; // [!code --]
 // [!code --]
	public static readonly int[] IDS = new int[9] { 705, 704, 703, 702, 701, 757, 758, 706, 700 }; // [!code --]
	public static readonly int[] IDS = new int[9] { 700, 701, 758, 757, 702, 705, 704, 703, 706 }; // [!code ++]
}
```

## LayerDrama

[`@@ -13,6 +13,8 @@ public class LayerDrama : ELayer`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/LayerDrama.cs#L13-L18)
```cs:line-numbers=13

	public static bool maxBGMVolume;

	public static bool fromBook; // [!code ++]
 // [!code ++]
	public static string forceJump;

	public static LayerDrama Instance;
```

[`@@ -114,6 +116,7 @@ public override void OnKill()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/LayerDrama.cs#L114-L119)
```cs:line-numbers=114
	ELayer.ui.Show();
	keepBGM = false;
	haltPlaylist = false;
	fromBook = false; // [!code ++]
	SoundManager.current.haltUpdate = false;
	SoundManager.forceBGM = false;
	ELayer.ui.hud.hint.cg.alpha = 1f;
```

## MUTATION

[`@@ -1,40 +1,32 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/MUTATION.cs#L1-L40)
```cs:line-numbers=1
public class MUTATION
{
	public const int mutationSpeedN = 1519; // [!code --]
 // [!code --]
	public const int mutationSpeed = 1518; // [!code --]
	public const int mutationRegen = 1516; // [!code ++]

	public const int mutationRegenN = 1517; // [!code --]
	public const int etherPoisonHand = 1565; // [!code ++]

	public const int mutationRegen = 1516; // [!code --]
	public const int mutationSkin = 1510; // [!code ++]

	public const int mutationSkinN = 1511;

	public const int mutationDex = 1514; // [!code --]
 // [!code --]
	public const int mutationEye = 1512;

	public const int mutationSkin = 1510; // [!code --]
	public const int mutationEyeN = 1513; // [!code ++]

	public const int mutationStr = 1520; // [!code --]
	public const int mutationDex = 1514; // [!code ++]

	public const int mutationDexN = 1515;

	public const int mutationStrN = 1521; // [!code --]
 // [!code --]
	public const int mutationEyeN = 1513; // [!code --]
 // [!code --]
	public const int mutationChaN = 1523; // [!code --]
	public const int mutationRegenN = 1517; // [!code ++]

	public const int etherPoisonHand = 1565; // [!code --]
	public const int etherManaBattery = 1564; // [!code ++]

	public const int mutationCha = 1522; // [!code --]
	public const int mutationSpeedN = 1519; // [!code ++]

	public const int etherProvoke = 1563;

	public const int etherArmor = 1562;

	public const int etherStupid = 1561; // [!code --]
	public const int mutationSpeed = 1518; // [!code ++]

	public const int etherWeak = 1560;

```

[`@@ -50,38 +42,46 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/MUTATION.cs#L50-L87)
```cs:line-numbers=50

	public const int etherWing = 1554;

	public const int etherManaBattery = 1564; // [!code --]
 // [!code --]
	public const int etherEye = 1553;

	public const int mutationBrain = 1524; // [!code --]
	public const int etherFeet = 1552; // [!code ++]

	public const int mutationCold = 1526; // [!code --]
	public const int etherUgly = 1551; // [!code ++]

	public const int mutationColdN = 1527; // [!code --]
	public const int etherStupid = 1561; // [!code ++]

	public const int mutationLightning = 1528; // [!code --]
	public const int etherGravity = 1550; // [!code ++]

	public const int mutationLightningN = 1529; // [!code --]
	public const int mutationStr = 1520; // [!code ++]
 // [!code ++]
	public const int mutationCha = 1522; // [!code ++]
 // [!code ++]
	public const int mutationChaN = 1523; // [!code ++]
 // [!code ++]
	public const int mutationBrain = 1524; // [!code ++]

	public const int mutationBrainN = 1525;

	public const int mutationBodyN = 1531; // [!code --]
	public const int mutationStrN = 1521; // [!code ++]

	public const int etherGravity = 1550; // [!code --]
	public const int mutationColdN = 1527; // [!code ++]

	public const int etherUgly = 1551; // [!code --]
	public const int mutationLightning = 1528; // [!code ++]

	public const int etherFeet = 1552; // [!code --]
	public const int mutationLightningN = 1529; // [!code ++]

	public const int mutationBody = 1530;

	public const int mutationBodyN = 1531; // [!code ++]
 // [!code ++]
	public const int mutationCold = 1526; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[38]
	{
		1519, 1518, 1517, 1516, 1511, 1514, 1512, 1510, 1520, 1515, // [!code --]
		1521, 1513, 1523, 1565, 1522, 1563, 1562, 1561, 1560, 1559, // [!code --]
		1558, 1557, 1556, 1555, 1554, 1564, 1553, 1524, 1526, 1527, // [!code --]
		1528, 1529, 1525, 1531, 1550, 1551, 1552, 1530 // [!code --]
		1516, 1565, 1510, 1511, 1512, 1513, 1514, 1515, 1517, 1564, // [!code ++]
		1519, 1563, 1562, 1518, 1560, 1559, 1558, 1557, 1556, 1555, // [!code ++]
		1554, 1553, 1552, 1551, 1561, 1550, 1520, 1522, 1523, 1524, // [!code ++]
		1525, 1521, 1527, 1528, 1529, 1530, 1531, 1526 // [!code ++]
	};
}
public class Mutation : Feat
```

## POLICY

[`@@ -23,7 +23,7 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/POLICY.cs#L23-L29)
```cs:line-numbers=23

	public const int store_premium = 2817;

	public const int celeb = 2822; // [!code --]
	public const int license_stolen = 2824; // [!code ++]

	public const int license_furniture = 2819;

```

[`@@ -31,11 +31,11 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/POLICY.cs#L31-L41)
```cs:line-numbers=31

	public const int legendary_heirloom = 2821;

	public const int forcePanty = 2712; // [!code --]
	public const int celeb = 2822; // [!code ++]

	public const int legendary_exhibition = 2823;

	public const int license_stolen = 2824; // [!code --]
	public const int forcePanty = 2712; // [!code ++]

	public const int milk_fan = 2825;

```

[`@@ -49,53 +49,51 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/POLICY.cs#L49-L101)
```cs:line-numbers=49

	public const int incomeTransfer = 2711;

	public const int self_sufficient = 2511; // [!code --]
	public const int nocturnal_life = 2508; // [!code ++]

	public const int noAnimal = 2709;

	public const int noMother = 2710; // [!code --]
 // [!code --]
	public const int wealth_tax = 2500;

	public const int prohibition = 2503; // [!code --]
	public const int faith_tax = 2501; // [!code ++]

	public const int food_for_people = 2502;

	public const int faith_tax = 2501; // [!code --]
	public const int prohibition = 2503; // [!code ++]

	public const int impressment = 2504; // [!code --]
	public const int noMother = 2710; // [!code ++]

	public const int legal_drug = 2505;

	public const int inquisition = 2507; // [!code --]
	public const int human_right = 2506; // [!code ++]

	public const int nocturnal_life = 2508; // [!code --]
	public const int inquisition = 2507; // [!code ++]

	public const int vaccination = 2509;

	public const int ban_radio = 2510;

	public const int self_sufficient = 2511; // [!code ++]
 // [!code ++]
	public const int resident_tax = 2512;

	public const int human_right = 2506; // [!code --]
	public const int impressment = 2504; // [!code ++]

	public const int taxfree = 2514;

	public const int auto_farm = 2707; // [!code --]
	public const int noDM = 2708; // [!code ++]

	public const int resident_wanted = 2513;

	public const int demon_invocation = 2706; // [!code --]
 // [!code --]
	public const int taxTransfer = 2705;

	public const int noDM = 2708; // [!code --]
 // [!code --]
	public const int weed_no = 2703;

	public const int border_watch = 2704; // [!code --]
	public const int trash_no = 2702; // [!code ++]

	public const int trash_sort = 2701; // [!code --]
	public const int demon_invocation = 2706; // [!code ++]
 // [!code ++]
	public const int auto_farm = 2707; // [!code ++]

	public const int energy_conservation = 2700;

```

[`@@ -103,16 +101,18 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/POLICY.cs#L103-L118)
```cs:line-numbers=103

	public const int stop_growth = 2515;

	public const int trash_no = 2702; // [!code --]
	public const int trash_sort = 2701; // [!code ++]
 // [!code ++]
	public const int border_watch = 2704; // [!code ++]

	public static readonly int[] IDS = new int[51]
	{
		2816, 2715, 2800, 2810, 2811, 2812, 2813, 2814, 2815, 2817,
		2822, 2819, 2820, 2821, 2712, 2823, 2824, 2825, 2826, 2827, // [!code --]
		2828, 2818, 2711, 2511, 2709, 2710, 2500, 2503, 2502, 2501, // [!code --]
		2504, 2505, 2507, 2508, 2509, 2510, 2512, 2506, 2514, 2707, // [!code --]
		2513, 2706, 2705, 2708, 2703, 2704, 2701, 2700, 2516, 2515, // [!code --]
		2702 // [!code --]
		2824, 2819, 2820, 2821, 2822, 2823, 2712, 2825, 2826, 2827, // [!code ++]
		2828, 2818, 2711, 2508, 2709, 2500, 2501, 2502, 2503, 2710, // [!code ++]
		2505, 2506, 2507, 2509, 2510, 2511, 2512, 2504, 2514, 2708, // [!code ++]
		2513, 2705, 2703, 2702, 2706, 2707, 2700, 2516, 2515, 2701, // [!code ++]
		2704 // [!code ++]
	};
}
public class Policy : EClass
```

## Player

[`@@ -608,6 +608,7 @@ public bool PlayStory(string idBook, int id, bool fromBook = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/Player.cs#L608-L613)
```cs:line-numbers=608
		}
		Dictionary<string, string> storyRow = GetStoryRow(idBook, id);
		SoundManager.ForceBGM();
		LayerDrama.fromBook = fromBook; // [!code ++]
		LayerDrama.Activate(idBook, storyRow["sheet"], storyRow["step"]);
		if (!fromBook && !playedStories.Contains(id))
		{
```

## SKILL

[`@@ -1,6 +1,6 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/SKILL.cs#L1-L6)
```cs:line-numbers=1
public class SKILL
{
	public const int twowield = 131; // [!code --]
	public const int armorLight = 120; // [!code ++]

	public const int twohand = 130;

```

[`@@ -8,8 +8,6 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/SKILL.cs#L8-L15)
```cs:line-numbers=8

	public const int armorHeavy = 122;

	public const int armorLight = 120; // [!code --]
 // [!code --]
	public const int acidproof = 51;

	public const int weaponScythe = 110;
```

[`@@ -18,17 +16,17 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/SKILL.cs#L18-L34)
```cs:line-numbers=18

	public const int fireproof = 50;

	public const int PDR = 55; // [!code --]
	public const int twowield = 131; // [!code ++]

	public const int tactics = 132; // [!code --]
	public const int PDR = 55; // [!code ++]

	public const int weaponBlunt = 111;

	public const int marksman = 133; // [!code --]
	public const int tactics = 132; // [!code ++]

	public const int riding = 226; // [!code --]
	public const int evasion = 150; // [!code ++]

	public const int strategy = 135; // [!code --]
	public const int eyeofmind = 134; // [!code ++]

	public const int climbing = 242;

```

[`@@ -44,11 +42,13 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/SKILL.cs#L44-L54)
```cs:line-numbers=44

	public const int parasite = 227;

	public const int lumberjack = 225; // [!code --]
	public const int marksman = 133; // [!code ++]
 // [!code ++]
	public const int riding = 226; // [!code ++]

	public const int mining = 220;

	public const int fishing = 245; // [!code --]
	public const int spotting = 210; // [!code ++]

	public const int weightlifting = 207;

```

[`@@ -58,16 +58,18 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/SKILL.cs#L58-L73)
```cs:line-numbers=58

	public const int evasionPlus = 151;

	public const int evasion = 150; // [!code --]
	public const int strategy = 135; // [!code ++]

	public const int eyeofmind = 134; // [!code --]
	public const int lumberjack = 225; // [!code ++]

	public const int EDR = 56;

	public const int weaponSword = 101; // [!code --]
 // [!code --]
	public const int throwing = 108;

	public const int weaponDagger = 107; // [!code ++]
 // [!code ++]
	public const int fishing = 245; // [!code ++]
 // [!code ++]
	public const int life = 60;

	public const int mana = 61;
```

[`@@ -94,11 +96,11 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/SKILL.cs#L94-L104)
```cs:line-numbers=94

	public const int LER = 74;

	public const int WIL = 75; // [!code --]
 // [!code --]
	public const int evasionPerfect = 57;

	public const int MAG = 76; // [!code --]
	public const int WIL = 75; // [!code ++]
 // [!code ++]
	public const int CHA = 77; // [!code ++]

	public const int LUC = 78;

```

[`@@ -126,13 +128,11 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/SKILL.cs#L126-L138)
```cs:line-numbers=126

	public const int weaponPolearm = 106;

	public const int weaponDagger = 107; // [!code --]
 // [!code --]
	public const int CHA = 77; // [!code --]
	public const int MAG = 76; // [!code ++]

	public const int gathering = 250;

	public const int spotting = 210; // [!code --]
	public const int weaponSword = 101; // [!code ++]

	public const int blacksmith = 256;

```

[`@@ -268,13 +268,13 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/SKILL.cs#L268-L280)
```cs:line-numbers=268

	public static readonly int[] IDS = new int[133]
	{
		131, 130, 123, 122, 120, 51, 110, 109, 50, 55, // [!code --]
		132, 111, 133, 226, 135, 242, 241, 240, 237, 235, // [!code --]
		230, 227, 225, 220, 245, 207, 200, 152, 151, 150, // [!code --]
		134, 56, 101, 108, 60, 61, 62, 64, 65, 66, // [!code --]
		67, 68, 70, 71, 72, 73, 74, 75, 57, 76, // [!code --]
		78, 79, 80, 90, 91, 92, 93, 100, 102, 103, // [!code --]
		104, 105, 106, 107, 77, 250, 210, 256, 916, 917, // [!code --]
		120, 130, 123, 122, 51, 110, 109, 50, 131, 55, // [!code ++]
		111, 132, 150, 134, 242, 241, 240, 237, 235, 230, // [!code ++]
		227, 133, 226, 220, 210, 207, 200, 152, 151, 135, // [!code ++]
		225, 56, 108, 107, 245, 60, 61, 62, 64, 65, // [!code ++]
		66, 67, 68, 70, 71, 72, 73, 74, 57, 75, // [!code ++]
		77, 78, 79, 80, 90, 91, 92, 93, 100, 102, // [!code ++]
		103, 104, 105, 106, 76, 250, 101, 256, 916, 917, // [!code ++]
		918, 919, 920, 921, 922, 923, 924, 925, 926, 950,
		951, 952, 915, 953, 955, 956, 957, 958, 959, 960,
		961, 962, 963, 964, 965, 970, 972, 255, 954, 914,
```

## TraitDrinkMilkMother

[`@@ -64,17 +64,25 @@ public override void OnDrink(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/TraitDrinkMilkMother.cs#L64-L80)
```cs:line-numbers=64
			c.Say("grow_adult", c);
			c.PlaySound("mutation");
			c.PlayEffect("mutation");
			string id = c.id; // [!code --]
			if (!(id == "putty_snow")) // [!code --]
			switch (c.id) // [!code ++]
			{
				if (id == "putty_snow_gold" && c.idSkin >= 1) // [!code --]
			case "putty_snow": // [!code ++]
				if (c.idSkin >= 4) // [!code ++]
				{ // [!code ++]
					c.idSkin = (c.idSkin - 4) / 2; // [!code ++]
				} // [!code ++]
				break; // [!code ++]
			case "putty_snow_gold": // [!code ++]
				if (c.idSkin >= 1) // [!code ++]
				{
					c.idSkin = 0;
				}
			} // [!code --]
			else if (c.idSkin >= 4) // [!code --]
			{ // [!code --]
				c.idSkin = (c.idSkin - 4) / 2; // [!code --]
				break; // [!code ++]
			case "chicken": // [!code ++]
			case "duck": // [!code ++]
			case "shamo": // [!code ++]
				c.idSkin = 0; // [!code ++]
				break; // [!code ++]
			}
		}
		else
```

## TraitFoodEggFertilized

[`@@ -64,17 +64,25 @@ public static Chara Incubate(Thing egg, Point pos, Card incubator = null)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/TraitFoodEggFertilized.cs#L64-L80)
```cs:line-numbers=64
	public static void MakeBaby(Chara c, int baby)
	{
		c.SetFeat(1232, baby, msg: true);
		string id = c.id; // [!code --]
		if (!(id == "putty_snow")) // [!code --]
		switch (c.id) // [!code ++]
		{
			if (id == "putty_snow_gold" && c.idSkin == 0) // [!code --]
		case "putty_snow": // [!code ++]
			if (c.idSkin <= 3) // [!code ++]
			{ // [!code ++]
				c.idSkin = 4 + c.idSkin * 2 + EClass.rnd(2); // [!code ++]
			} // [!code ++]
			break; // [!code ++]
		case "putty_snow_gold": // [!code ++]
			if (c.idSkin == 0) // [!code ++]
			{
				c.idSkin = 1 + EClass.rnd(2);
			}
		} // [!code --]
		else if (c.idSkin <= 3) // [!code --]
		{ // [!code --]
			c.idSkin = 4 + c.idSkin * 2 + EClass.rnd(2); // [!code --]
			break; // [!code ++]
		case "shamo": // [!code ++]
		case "chicken": // [!code ++]
		case "duck": // [!code ++]
			c.idSkin = 1; // [!code ++]
			break; // [!code ++]
		}
	}

```

## +TraitStoryBookHome

::: details File Created
```cs
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;

public class TraitStoryBookHome : TraitScroll
{
	public override void OnRead(Chara c)
	{
		List<SourceQuest.Row> list = EClass.sources.quests.rows.Where((SourceQuest.Row q) => IsAvailable(q)).ToList();
		EClass.ui.AddLayer<LayerList>().SetSize().SetList2(list, (SourceQuest.Row a) => GetTitle(a), delegate(SourceQuest.Row a, ItemGeneral b)
		{
			LayerDrama.fromBook = true;
			string text3 = a.drama[0];
			string idStep = "quest_" + a.id;
			if (a.id == "pre_debt_runaway")
			{
				idStep = "loytelEscaped";
			}
			LayerDrama.Activate(text3, text3, idStep, GetChara(text3));
		}, delegate
		{
		}, autoClose: false);
		static Chara GetChara(string id)
		{
			return EClass.game.cards.globalCharas.Find(id);
		}
		static string GetTitle(SourceQuest.Row r)
		{
			string name = r.GetName();
			string text = Regex.Replace(r.id, "([0-9]*$)", "");
			string str = r.id.Replace(text, "");
			int num = 1;
			if (!str.IsEmpty())
			{
				num = 1 + str.ToInt();
			}
			if (name.IsEmpty())
			{
				r = EClass.sources.quests.map.TryGetValue(text);
				if (r != null)
				{
					name = r.GetName();
				}
			}
			return name + " " + num;
		}
		static bool IsAvailable(SourceQuest.Row r)
		{
			if (r.drama.IsEmpty() || GetChara(r.drama[0]) == null)
			{
				return false;
			}
			if (!EClass.debug.showExtra && r.tags.Contains("debug"))
			{
				return false;
			}
			string text2 = Regex.Replace(r.id, "([0-9]*$)", "");
			if (EClass.game.quests.completedIDs.Contains(r.id) || EClass.game.quests.completedIDs.Contains(text2))
			{
				return true;
			}
			string str2 = r.id.Replace(text2, "");
			int num2 = 0;
			if (!str2.IsEmpty())
			{
				num2 = str2.ToInt();
			}
			Quest quest = EClass.game.quests.Get(text2);
			if (quest != null && num2 <= quest.phase)
			{
				return true;
			}
			return EClass.debug.showExtra;
		}
	}
}
```

:::
## UIInventory

[`@@ -1110,7 +1110,6 @@ public void RefreshList()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/UIInventory.cs#L1110-L1116)
```cs:line-numbers=1110
		},
		onInstantiate = delegate(Thing a, ButtonGrid b)
		{
			dirty = false; // [!code --]
			_ = a.Name;
			bool flag = mode == Mode.Buy || mode == Mode.Sell || mode == Mode.Identify;
			int num2 = ((destNum != -1) ? 1 : a.Num);
```

[`@@ -1138,6 +1137,7 @@ public void RefreshList()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/UIInventory.cs#L1138-L1143)
```cs:line-numbers=1138
		},
		onList = delegate
		{
			dirty = false; // [!code ++]
			List<Thing> list = new List<Thing>();
			foreach (Thing thing in owner.Things)
			{
```

[`@@ -1211,7 +1211,6 @@ public void RefreshGrid()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/23a00f0f572328fc23121a2cc8c77669087bdda4/Elin/UIInventory.cs#L1211-L1217)
```cs:line-numbers=1211
	{
		onRedraw = delegate(Thing a, ButtonGrid b, int i)
		{
			dirty = false; // [!code --]
			b.index = i;
			bool flag4 = i >= owner.Things.Count;
			if (IsMagicChest)
```

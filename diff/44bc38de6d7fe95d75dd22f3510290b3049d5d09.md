---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 11 files modified. 1 new file created.
version: EA 23.217 Nightly
changes: ActRanged/AttackProcess/Card/CardBlueprint/CardRenderer/Chara/CoreDebug/ElementContainer/+QuestCurry/Trait/TraitAmmoRocket/Zone_CurryRuinDungeon
---

# EA 23.217 Nightly

October 11, 2025

11 files modified. 1 new file created.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [CardBlueprint (1)](#cardblueprint)
```cs:no-line-numbers
public static void Set(CardBlueprint _bp) // [!code --]
public static void Set(CardBlueprint _bp = null) // [!code ++]
```
## ActRanged

[`public override bool Perform()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/ActRanged.cs#L221-L229)
```cs:line-numbers=221
			if (!item2.Equals(obj))
			{
				Chara firstChara = item2.FirstChara;
				if ((firstChara == null || firstChara.IsHostile(Act.CC)) && (firstChara != null || scatter != 0)) // [!code --]
				if ((firstChara == null || firstChara.IsHostile(Act.CC)) && (firstChara != null || scatter != 0) && (scatter <= 0 || EClass.rnd(EClass.rnd(100) + 1) <= scatter)) // [!code ++]
				{
					Shoot(item2.FirstChara, item2); // [!code --]
					Shoot(item2.FirstChara ?? item2.FindThing<TraitTrainingDummy>()?.owner, item2); // [!code ++]
				}
			}
		}
```

## AttackProcess

[`public void PlayRangedAnime(int numFire, float delay = 0f)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/AttackProcess.cs#L411-L435)
```cs:line-numbers=411
		{
			if (EClass.core.IsGameStarted && _CC.IsAliveInCurrentZone && _zone == _CC.currentZone)
			{
				string id = _weapon.id; // [!code --]
				if (!(id == "gun_rail")) // [!code --]
				switch (_weapon.id) // [!code ++]
				{
					if (id == "gun_laser") // [!code --]
					{ // [!code --]
						_CC.PlayEffect("laser").GetComponent<SpriteBasedLaser>().Play(_TP.PositionCenter()); // [!code --]
					} // [!code --]
					else // [!code --]
				case "gun_rail": // [!code ++]
					_CC.PlayEffect("laser_rail").GetComponent<SpriteBasedLaser>().Play(_TP.PositionCenter()); // [!code ++]
					break; // [!code ++]
				case "gun_laser": // [!code ++]
					_CC.PlayEffect("laser").GetComponent<SpriteBasedLaser>().Play(_TP.PositionCenter()); // [!code ++]
					break; // [!code ++]
				case "gun_laser_assault": // [!code ++]
					Effect.Get("ranged_laser")._Play(_CC.pos, _CC.isSynced ? _CC.renderer.position : _CC.pos.Position(), 0f, _TP, data.sprite); // [!code ++]
					break; // [!code ++]
				default: // [!code ++]
				{ // [!code ++]
					Effect effect = Effect.Get("ranged_arrow")._Play(_CC.pos, _CC.isSynced ? _CC.renderer.position : _CC.pos.Position(), 0f, _TP, data.sprite); // [!code ++]
					if (isCane) // [!code ++]
					{
						Effect effect = Effect.Get("ranged_arrow")._Play(_CC.pos, _CC.isSynced ? _CC.renderer.position : _CC.pos.Position(), 0f, _TP, data.sprite); // [!code --]
						if (isCane) // [!code --]
						{ // [!code --]
							effect.sr.color = effColor; // [!code --]
						} // [!code --]
						effect.sr.color = effColor; // [!code ++]
					}
					break; // [!code ++]
				}
				else // [!code --]
				{ // [!code --]
					_CC.PlayEffect("laser_rail").GetComponent<SpriteBasedLaser>().Play(_TP.PositionCenter()); // [!code --]
				}
				if (data.eject)
				{
```

## Card

[`public void SpawnLoot(Card origin)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/Card.cs#L5130-L5142)
```cs:line-numbers=5130
		}
		if (Chara.IsMachine)
		{
			bool flag3 = Chara.HasElement(1248); // [!code ++]
			if (chance(20))
			{
				list.Add(ThingGen.Create("microchip")); // [!code --]
				list.Add(ThingGen.Create(flag3 ? "scrap" : "microchip")); // [!code ++]
			}
			if (chance(15))
			{
				list.Add(ThingGen.Create("battery")); // [!code --]
				list.Add(ThingGen.Create(flag3 ? "bolt" : "battery")); // [!code ++]
			}
		}
		else
```

## CardBlueprint

[`public static CardBlueprint Chara(int lv, Rarity rarity = Rarity.Normal)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/CardBlueprint.cs#L43-L51)
```cs:line-numbers=43
		};
	}

	public static void Set(CardBlueprint _bp) // [!code --]
	public static void Set(CardBlueprint _bp = null) // [!code ++]
	{
		current = _bp; // [!code --]
		current = _bp ?? _Default; // [!code ++]
	}

	public static void SetNormalRarity(bool fixedMat = false)
```

## CardRenderer

[`public override void Draw(RenderParam p, ref Vector3 v, bool drawShadow)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/CardRenderer.cs#L247-L271)
```cs:line-numbers=247
					drawShadow = traitFigure.ShowShadow;
					pref = row.pref;
				}
				if (renderData.pass != null && EClass.pc.held == owner) // [!code --]
				p.x += pref.x * (float)((owner.dir % 2 == 0) ? 1 : (-1)); // [!code ++]
				p.y += pref.y; // [!code ++]
				p.z += pref.z; // [!code ++]
				if (owner.noShadow || !owner.IsInstalled) // [!code ++]
				{
					int num = (int)renderData.pass.pmesh.tiling.x; // [!code --]
					string id = renderData.pass.name; // [!code --]
					if (!(id == "pass charaL")) // [!code --]
					{ // [!code --]
						if (id == "pass charaLW") // [!code --]
						{ // [!code --]
							if (p.tile < 0f) // [!code --]
							{ // [!code --]
								p.tile *= -1f; // [!code --]
							} // [!code --]
							p.tile = (int)p.tile / num * num * 4 + (int)p.tile % num * 2; // [!code --]
						} // [!code --]
					} // [!code --]
					else // [!code --]
					{ // [!code --]
						p.tile = (int)p.tile / num * num * 2 + (int)p.tile % num; // [!code --]
					} // [!code --]
					drawShadow = false; // [!code ++]
				}
			}
			else
```

[`public override void Draw(RenderParam p, ref Vector3 v, bool drawShadow)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/CardRenderer.cs#L361-L369)
```cs:line-numbers=361
	{
		RenderObject.tempV = position;
		RenderObject.tempV.y += data.offset.y + data.size.y;
		for (int num2 = listTC.Count - 1; num2 >= 0; num2--) // [!code --]
		for (int num = listTC.Count - 1; num >= 0; num--) // [!code ++]
		{
			listTC[num2].OnDraw(ref RenderObject.tempV); // [!code --]
			listTC[num].OnDraw(ref RenderObject.tempV); // [!code ++]
		}
	}
	if (owner.trait.RenderExtra)
```

## Chara

[`public bool CanDuplicate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/Chara.cs#L1752-L1757)
```cs:line-numbers=1752
	{
		return false;
	}
	if (CurrentGeneSlot != 0) // [!code ++]
	{ // [!code ++]
		return false; // [!code ++]
	} // [!code ++]
	if (id == "mech_scarab" && (isSynced || pos.cell.light > 0 || (!EClass._map.IsIndoor && !pos.cell.HasRoof && !EClass.world.date.IsNight)))
	{
		return false;
```

[`public Chara Duplicate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/Chara.cs#L1776-L1781)
```cs:line-numbers=1776
	chara.RefreshFaithElement();
	chara.hp = (int)Mathf.Clamp((float)chara.MaxHP * ((float)base.hp / (float)MaxHP) * 0.99f, 0f, chara.MaxHP);
	chara.isCopy = true;
	chara.isScaled = base.isScaled; // [!code ++]
	if (HaveFur())
	{
		chara.c_fur = -1;
```

[`public void RestockEquip(bool onCreate)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/Chara.cs#L4758-L4763)
```cs:line-numbers=4758
	case "mech_angel":
		if (onCreate)
		{
			CardBlueprint.Set(); // [!code ++]
			Thing thing = ThingGen.Create("pole_holy");
			thing.SetReplica(on: true);
			thing.rarity = Rarity.Normal;
```

[`public void TryDropBossLoot()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/Chara.cs#L5556-L5561)
```cs:line-numbers=5556
		EClass.Sound.StopBGM(3f);
		EClass._zone.SetBGM(1, refresh: false);
		break;
	case "doga": // [!code ++]
	{ // [!code ++]
		QuestCurry questCurry = EClass.game.quests.Get<QuestCurry>(); // [!code ++]
		if (questCurry != null) // [!code ++]
		{ // [!code ++]
			num = 5; // [!code ++]
			flag = (flag2 = true); // [!code ++]
			EClass.Sound.StopBGM(3f); // [!code ++]
			EClass._zone.SetBGM(1, refresh: false); // [!code ++]
			questCurry.NextPhase(); // [!code ++]
		} // [!code ++]
		break; // [!code ++]
	} // [!code ++]
	case "fairy_raina":
	case "fairy_poina":
	{
```

## CoreDebug

[`public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/CoreDebug.cs#L864-L869)
```cs:line-numbers=864
	bool key3 = Input.GetKey(KeyCode.LeftControl);
	TraitStairs traitStairs = null;
	if (Input.GetKeyDown(KeyCode.KeypadPlus) || (EInput.isShiftDown && Input.GetKeyDown(KeyCode.Period)))
	{ // [!code ++]
		TraitStairsLocked traitStairsLocked = EClass._map.FindThing<TraitStairsLocked>(); // [!code ++]
		if (traitStairsLocked != null && EClass._zone.CanUnlockExit) // [!code ++]
		{ // [!code ++]
			traitStairsLocked.OnUse(EClass.pc); // [!code ++]
		} // [!code ++]
	} // [!code ++]
	if (Input.GetKeyDown(KeyCode.KeypadPlus) || (EInput.isShiftDown && Input.GetKeyDown(KeyCode.Period))) // [!code ++]
	{
		traitStairs = EClass._map.FindThing<TraitStairsDown>();
	}
```

## ElementContainer

[`void AddElements(ElementContainer container, bool isGlobal)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/ElementContainer.cs#L614-L627)
```cs:line-numbers=614
	public List<Element> ListBestAttributes()
	{
		List<Element> obj = ListElements((Element a) => a.HasTag("primary"));
		obj.Sort((Element a, Element b) => (b.ValueWithoutLink - a.ValueWithoutLink) * 100000 + a.id - b.id); // [!code --]
		obj.Sort((Element a, Element b) => (int)((long)(b.ValueWithoutLink - a.ValueWithoutLink) * 100000L + a.id - b.id)); // [!code ++]
		return obj;
	}

	public List<Element> ListBestSkills()
	{
		List<Element> obj = ListElements((Element a) => a.source.category == "skill");
		obj.Sort((Element a, Element b) => (b.ValueWithoutLink - a.ValueWithoutLink) * 100000 + a.id - b.id); // [!code --]
		obj.Sort((Element a, Element b) => (int)((long)(b.ValueWithoutLink - a.ValueWithoutLink) * 100000L + a.id - b.id)); // [!code ++]
		return obj;
	}

```

## +QuestCurry

::: details File Created
```cs
public class QuestCurry : QuestSequence
{
	public override void OnComplete()
	{
	}
}
```

:::
## Trait

[`public void OnBarter()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/Trait.cs#L1776-L1781)
```cs:line-numbers=1776
			case ShopType.Medal:
				NoRestockId("sword_dragon");
				Add("sword_dragon", 1, 0).SetReplica(on: true);
				NoRestockId("point_stick"); // [!code ++]
				Add("point_stick", 1, 0).SetReplica(on: true); // [!code ++]
				NoRestockId("blunt_bonehammer");
				Add("blunt_bonehammer", 1, 0).SetReplica(on: true);
				NoRestockId("pole_gunlance");
```

## TraitAmmoRocket

[`public class TraitAmmoRocket : TraitAmmo`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/TraitAmmoRocket.cs#L1-L3)
```cs:line-numbers=1
public class TraitAmmoRocket : TraitAmmo
{
	public override int DefaultStock => 10 + EClass.rnd(50); // [!code ++]
 // [!code ++]
	public override int CraftNum => 20; // [!code ++]
}
```

## Zone_CurryRuinDungeon

[`public class Zone_CurryRuinDungeon : Zone_QuestDungeon`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/Zone_CurryRuinDungeon.cs#L10-L15)
```cs:line-numbers=10

	public override bool LockExit => base.lv <= -1;

	public override bool CanUnlockExit => EClass.game.quests.IsStarted<QuestCurry>(); // [!code ++]
 // [!code ++]
	public override string idExport
	{
		get
```

[`public override string idExport`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/44bc38de6d7fe95d75dd22f3510290b3049d5d09/Elin/Zone_CurryRuinDungeon.cs#L18-L24)
```cs:line-numbers=18
			{
				return base.idExport;
			}
			return "vernis_mine_boss"; // [!code --]
			return "curry_boss"; // [!code ++]
		}
	}

```

---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 17 files modified.
version: EA 23.272 Nightly
changes: AI_Idle/AI_PlayMusic/ActDreamBug/ActSlime/CINT/Chara/DNA/ID_Achievement/LayerAbility/OBJ/QuestFiamaLock/Steam/Trait/TraitFakeBlock/TraitFakeObj/TraitFakeTile/Zone
---

# EA 23.272 Nightly

February 20, 2026

17 files modified.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [TraitFakeTile (1)](#traitfaketile)
```cs:no-line-numbers
public override SourcePref GetPref() // [!code --]

```
## AI_Idle

[`public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/AI_Idle.cs#L134-L166)
```cs:line-numbers=134
			}
			if (EClass.rnd(3) == 0 && owner.mana.value > 0)
			{
				Act act = null; // [!code --]
				Act actHeal = null; // [!code ++]
				Act actRevive = null;
				foreach (ActList.Item item in owner.ability.list.items)
				{
					Act act2 = item.act; // [!code --]
					if (act2.id == 8430) // [!code --]
					Act act = item.act; // [!code ++]
					if (act.id == 8430) // [!code ++]
					{
						actRevive = act2; // [!code --]
						actRevive = act; // [!code ++]
					}
					string[] abilityType = act2.source.abilityType; // [!code --]
					string[] abilityType = act.source.abilityType; // [!code ++]
					if (!abilityType.IsEmpty() && (abilityType[0] == "heal" || abilityType[0] == "hot"))
					{
						act = item.act; // [!code --]
						actHeal = item.act; // [!code ++]
					}
				}
				if (act != null) // [!code --]
				if (actHeal != null) // [!code ++]
				{
					List<Chara> list = (owner.IsPCParty ? EClass.pc.party.members : new List<Chara> { owner });
					foreach (Chara item2 in list)
					{
						if (!((float)item2.hp > (float)item2.MaxHP * 0.75f) && owner.CanSeeLos(item2) && (!(act.source.abilityType[0] == "hot") || !item2.HasCondition<ConHOT>())) // [!code --]
						if (!((float)item2.hp > (float)item2.MaxHP * 0.75f) && owner.CanSeeLos(item2) && (!(actHeal.source.abilityType[0] == "hot") || !item2.HasCondition<ConHOT>())) // [!code ++]
						{
							owner.UseAbility(act, item2); // [!code --]
							owner.UseAbility(actHeal, item2); // [!code ++]
							yield return KeepRunning();
							break;
						}
					}
					if (owner.id == "priest" && !owner.IsPCParty && owner.Dist(EClass.pc) <= 4) // [!code ++]
					{ // [!code ++]
						if (EClass.pc.hp < EClass.pc.MaxHP) // [!code ++]
						{ // [!code ++]
							if (owner.UseAbility(actHeal, EClass.pc, null, pt: true)) // [!code ++]
							{ // [!code ++]
								owner.AddCooldown(actHeal.id, 5); // [!code ++]
								owner.Talk("no_problem"); // [!code ++]
							} // [!code ++]
						} // [!code ++]
						else if (!EClass.pc.HasCondition<ConHolyVeil>() && owner.UseAbility(8500, EClass.pc, null, pt: true)) // [!code ++]
						{ // [!code ++]
							owner.AddCooldown(8500, 30); // [!code ++]
							owner.Talk("no_problem"); // [!code ++]
						} // [!code ++]
					} // [!code ++]
				}
				if (actRevive != null && owner.IsPCFaction && EClass.game.cards.globalCharas.Where((KeyValuePair<int, Chara> a) => a.Value.isDead && a.Value.faction == EClass.pc.faction && !a.Value.isSummon && a.Value.c_wasInPcParty).ToList().Count > 0 && owner.UseAbility(actRevive.source.alias, owner))
				{
```

## AI_PlayMusic

[`public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/AI_PlayMusic.cs#L107-L112)
```cs:line-numbers=107
		case "guitar_ash":
			idSong = "guitar_caccini";
			break;
		case "ocarina": // [!code ++]
			idSong = "ocarina_lulu"; // [!code ++]
			break; // [!code ++]
		case "guitar_efrond":
			idSong = "guitar_dusk";
			break;
```

## ActDreamBug

[`public class ActDreamBug : Ability`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/ActDreamBug.cs#L1-L5)
```cs:line-numbers=1
public class ActDreamBug : Ability
{
	public override bool CanPerform() // [!code ++]
	{ // [!code ++]
		if (Act.CC.HasElement(1216)) // [!code ++]
		{ // [!code ++]
			return base.CanPerform(); // [!code ++]
		} // [!code ++]
		return false; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public override bool Perform()
	{
		if (!Act.TC.isChara || (!Act.TC.IsPC && Act.TC.things.IsFull()))
```

## ActSlime

[`public class ActSlime : ActNTR`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/ActSlime.cs#L4-L10)
```cs:line-numbers=4

	public override bool CanPerform()
	{
		if (Act.TC == null || Act.TC == Act.CC) // [!code --]
		if (Act.TC == null || !Act.TC.isChara || Act.TC == Act.CC) // [!code ++]
		{
			return false;
		}
```

## CINT

[`public class CINT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/CINT.cs#L164-L169)
```cs:line-numbers=164

	public const int isDisableLoyal = 126;

	public const int isFiamaChest = 127; // [!code ++]
 // [!code ++]
	public const int dateDeathLock = 130;

	public const int fixedValue = 131;
```

## Chara

[`public bool UseAbility(Act a, Card tc = null, Point pos = null, bool pt = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Chara.cs#L5967-L5973)
```cs:line-numbers=5967
				EInput.Consume();
				return false;
			}
			if (num4 > 0 && a.vPotential >= i * 2) // [!code --]
			if (num4 > 0 && (a.vPotential >= i * 2 || ability.Has(a.id))) // [!code ++]
			{
				a.vPotential -= i * 2;
				num6 = num6 * (100 - num4 * 20) / 100;
```

## DNA

[`public bool CanRemove(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/DNA.cs#L259-L265)
```cs:line-numbers=259
			return false;
		case 1228:
		case 1414:
			return !c.IsPC; // [!code --]
			if (c != null) // [!code ++]
			{ // [!code ++]
				return !c.IsPC; // [!code ++]
			} // [!code ++]
			return true; // [!code ++]
		}
	}
	return true;
```

## ID_Achievement

[`public enum ID_Achievement`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/ID_Achievement.cs#L2-L6)
```cs:line-numbers=2
{
	TEST,
	LOMIAS,
	LOMIAS2 // [!code --]
	LOMIAS2, // [!code ++]
	FIAMA_CHEST // [!code ++]
}
```

## LayerAbility

[`public void SelectGroup(string id)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/LayerAbility.cs#L210-L216)
```cs:line-numbers=210
			foreach (Element value in ELayer.pc.elements.dict.Values)
			{
				string categorySub = value.source.categorySub;
				if (value.Value != 0 && (!config.hideDepletedSpell || !value.PotentialAsStock || value.vPotential > 0)) // [!code --]
				if (value.Value != 0 && (!config.hideDepletedSpell || !value.PotentialAsStock || value.vPotential > 0) && (value.id != 6020 || ELayer.pc.HasElement(1216))) // [!code ++]
				{
					if (id == "favAbility" && ELayer.player.favAbility.Contains(value.id))
					{
```

## OBJ

[`public class OBJ : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/OBJ.cs#L1-L5)
```cs:line-numbers=1
public class OBJ : EClass
{
	public const int nulu = 0; // [!code ++]
 // [!code ++]
	public const int rainbow_fruit = 90;

	public const int feywood = 118;
```

## QuestFiamaLock

[`public override void OnStart()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/QuestFiamaLock.cs#L15-L20)
```cs:line-numbers=15
	thing.things.DestroyAll();
	thing.AddCard(ThingGen.Create("1172"));
	thing.AddCard(ThingGen.Create("amulet_begger"));
	thing.SetBool(127, enable: true); // [!code ++]
	Card card = thing.AddCard(ThingGen.Create("_meat").MakeFoodFrom("begger"));
	card.decay = card.MaxDecay + 1;
	thing.Install();
```

## Steam

[`public static void GetAchievement(ID_Achievement id)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Steam.cs#L56-L61)
```cs:line-numbers=56
			{
				achievement.Unlock();
				EClass.ui.Say("sys_acv".lang(achievement.Name), Resources.Load<Sprite>("Media/Graphics/Icon/Achievement/acv_" + id));
				SE.Play("achievement"); // [!code ++]
				achievement.Store(); // [!code ++]
			}
			return;
		}
```

## Trait

[`public virtual LockOpenState TryOpenLock(Chara cc, bool msgFail = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Trait.cs#L958-L963)
```cs:line-numbers=958
			EClass.player.ModKarma(-8);
		}
		owner.isLostProperty = false;
		if (owner.GetBool(127)) // [!code ++]
		{ // [!code ++]
			Steam.GetAchievement(ID_Achievement.FIAMA_CHEST); // [!code ++]
		} // [!code ++]
		return LockOpenState.Success;
	}
	cc.PlaySound("lock");
```

## TraitFakeBlock

[`public class TraitFakeBlock : TraitFakeTile`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/TraitFakeBlock.cs#L1-L3)
```cs:line-numbers=1
public class TraitFakeBlock : TraitFakeTile
{
	public SourceBlock.Row block => EClass.sources.blocks.map.TryGetValue(owner.refVal, 1); // [!code ++]
 // [!code ++]
	public override SourcePref GetPref() // [!code ++]
	{ // [!code ++]
		TileType tileType = block.tileType; // [!code ++]
		if (!(tileType is TileTypePillar)) // [!code ++]
		{ // [!code ++]
			if (!(tileType is TileTypeFence)) // [!code ++]
			{ // [!code ++]
				if (!(tileType is TileTypeStairs)) // [!code ++]
				{ // [!code ++]
					if (!(tileType is TileTypeWall)) // [!code ++]
					{ // [!code ++]
						if (tileType is TileTypeSlope) // [!code ++]
						{ // [!code ++]
							return EClass.core.refs.prefs.blockStairs; // [!code ++]
						} // [!code ++]
						return null; // [!code ++]
					} // [!code ++]
					return EClass.core.refs.prefs.blockWall; // [!code ++]
				} // [!code ++]
				return EClass.core.refs.prefs.blockStairs; // [!code ++]
			} // [!code ++]
			return EClass.core.refs.prefs.blockFence; // [!code ++]
		} // [!code ++]
		return EClass.core.refs.prefs.blockPillar; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public override string GetName() // [!code ++]
	{ // [!code ++]
		if (owner.refVal != 0) // [!code ++]
		{ // [!code ++]
			return "_fakeblock".lang(block.GetName().ToLower()); // [!code ++]
		} // [!code ++]
		return base.GetName(); // [!code ++]
	} // [!code ++]
}
```

## TraitFakeObj

[`public GrowSystem growth`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/TraitFakeObj.cs#L18-L24)
```cs:line-numbers=18
		}
	}

	public SourceObj.Row obj => EClass.sources.objs.map[owner.refVal]; // [!code --]
	public SourceObj.Row obj => EClass.sources.objs.map.TryGetValue(owner.refVal, 0); // [!code ++]

	public override TileMode tileMode => TileMode.FakeObj;

```

[`public int GetMaxDir()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/TraitFakeObj.cs#L40-L43)
```cs:line-numbers=40
		}
		return obj._tiles.Length;
	}
 // [!code ++]
	public override string GetName() // [!code ++]
	{ // [!code ++]
		if (owner.refVal != 0) // [!code ++]
		{ // [!code ++]
			return "_fakeblock".lang(obj.GetName().ToLower()); // [!code ++]
		} // [!code ++]
		return base.GetName(); // [!code ++]
	} // [!code ++]
}
```

## TraitFakeTile

[`public override RenderData GetRenderData()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/TraitFakeTile.cs#L9-L40)
```cs:line-numbers=9
		return EClass.sources.blocks.map[owner.refVal].renderData;
	}

	public override SourcePref GetPref() // [!code --]
	{ // [!code --]
		TileType tileType = EClass.sources.blocks.map[owner.refVal].tileType; // [!code --]
		if (!(tileType is TileTypePillar)) // [!code --]
		{ // [!code --]
			if (!(tileType is TileTypeFence)) // [!code --]
			{ // [!code --]
				if (!(tileType is TileTypeStairs)) // [!code --]
				{ // [!code --]
					if (!(tileType is TileTypeWall)) // [!code --]
					{ // [!code --]
						if (tileType is TileTypeSlope) // [!code --]
						{ // [!code --]
							return EClass.core.refs.prefs.blockStairs; // [!code --]
						} // [!code --]
						return null; // [!code --]
					} // [!code --]
					return EClass.core.refs.prefs.blockWall; // [!code --]
				} // [!code --]
				return EClass.core.refs.prefs.blockStairs; // [!code --]
			} // [!code --]
			return EClass.core.refs.prefs.blockFence; // [!code --]
		} // [!code --]
		return EClass.core.refs.prefs.blockPillar; // [!code --]
	} // [!code --]
 // [!code --]
	public override void OnCrafted(Recipe recipe, List<Thing> ings)
	{
		owner.refVal = 0;
```

## Zone

[`public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Zone.cs#L2383-L2389)
```cs:line-numbers=2383
	}
	map.SetZone(this);
	Zone_Field zone_Field = this as Zone_Field;
	if (IdBiome == "Sand" || IdBiome == "Water" || IsUnderwater) // [!code --]
	bool flag = IdBiome == "Sand" || IdBiome == "Water" || IsUnderwater; // [!code ++]
	if (flag) // [!code ++]
	{
		int num = 1 + EClass.rnd((IdBiome == "Water") ? 3 : 2);
		for (int i = 0; i < num; i++)
```

[`public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Zone.cs#L2421-L2427)
```cs:line-numbers=2421
		}
		Crawler crawler = Crawler.Create("pasture");
		int num2 = (EClass.debug.enable ? 3 : EClass.rnd(EClass.rnd(EClass.rnd(EClass.rnd(5) + 1) + 1) + 1));
		bool flag = this is Zone_Field; // [!code --]
		bool flag2 = this is Zone_Field; // [!code ++]
		Thing seed = null;
		if (IsNefia)
		{
```

[`public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Zone.cs#L2435-L2441)
```cs:line-numbers=2435
				seed.elements.SetBase(2, EClass.curve(seed.encLV, 50, 10, 80));
			}
		}
		crawler.CrawlUntil(EClass._map, () => EClass._map.GetRandomPoint(), num2 + (flag ? 4 : 0), delegate(Crawler.Result r) // [!code --]
		crawler.CrawlUntil(EClass._map, () => EClass._map.GetRandomPoint(), num2 + (flag2 ? 4 : 0), delegate(Crawler.Result r) // [!code ++]
		{
			int num6 = 137;
			foreach (Point point in r.points)
```

[`public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Zone.cs#L2453-L2459)
```cs:line-numbers=2453
			}
			return false;
		});
		crawler.CrawlUntil(tries: EClass.rnd(EClass.rnd(5) + 1) + 1 + (flag ? 20 : 0), map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r) // [!code --]
		crawler.CrawlUntil(tries: EClass.rnd(EClass.rnd(5) + 1) + 1 + (flag2 ? 20 : 0), map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r) // [!code ++]
		{
			int num5 = 136;
			foreach (Point point2 in r.points)
```

[`public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Zone.cs#L2465-L2471)
```cs:line-numbers=2465
			}
			return false;
		});
		crawler.CrawlUntil(tries: EClass.rnd(EClass.rnd(10) + 1) + 3 + (flag ? 40 : 0), map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r) // [!code --]
		crawler.CrawlUntil(tries: EClass.rnd(EClass.rnd(10) + 1) + 3 + (flag2 ? 40 : 0), map: EClass._map, onStart: () => EClass._map.GetRandomPoint(), canComplete: delegate(Crawler.Result r) // [!code ++]
		{
			int idFloor = 121;
			foreach (Point point3 in r.points)
```

[`public void Generate()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/1cb55a2dc10e77774faeb335134f6a4d9555fb85/Elin/Zone.cs#L2495-L2500)
```cs:line-numbers=2495
			SpawnAltar();
		}
		TrySpawnFollower();
		if (!flag && EClass.rnd(EClass.debug.enable ? 1 : 10) == 0) // [!code ++]
		{ // [!code ++]
			Point randomSurface5 = EClass._map.bounds.GetRandomSurface(); // [!code ++]
			if (randomSurface5.IsValid) // [!code ++]
			{ // [!code ++]
				EClass._zone.AddCard(CharaGen.Create("priest"), randomSurface5); // [!code ++]
			} // [!code ++]
		} // [!code ++]
	}
	map.plDay = CreatePlaylist(ref map._plDay, EClass.Sound.GetPlaylist(IDPlayList) ?? EClass.Sound.GetPlaylist("Day"));
}
```

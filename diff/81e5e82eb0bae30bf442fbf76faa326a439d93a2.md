---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 39 files modified. 3 new files created.
version: EA 23.78 Nightly
changes: ABILITY/AI_Craft_Snowman/ActEffect/ActMelee/AnimeID/AttackProcess/AttackSource/BaseGameScreen/BaseListPeople/Card/CardManager/Chara/CharaAbility/+ConSupress/CoreDebug/ELEMENT/ENC/FACTION/FEAT/FOOD/GoalCombat/GrowSystem/HitSummary/Hobby/ListPeopleCallReserve/MUTATION/POLICY/Religion/RenderRow/SKILL/SourceElement/SourceFood/SourceThingV/+StanceFury/+StanceIai/Task/TaskBuild/Thing/Trait/TraitAltar/TraitMannequin/WidgetSearch
---

# EA 23.78 Nightly

January 18, 2025

39 files modified. 3 new files created.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [AttackProcess (1)](#attackprocess)
```cs:no-line-numbers
public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll = false) // [!code --]
public int GetRawDamage(float dmgMulti, bool crit, bool maxRoll) // [!code ++]
```
### [CoreDebug (1)](#coredebug)
```cs:no-line-numbers
public static string RemoveDemitas() // [!code --]

```
### [Religion (1)](#religion)
```cs:no-line-numbers
public static void Reforge(string id, Point pos = null, bool first = true) // [!code --]
public static Thing Reforge(string id, Point pos = null, bool first = true) // [!code ++]
```
### [Task (1)](#task)
```cs:no-line-numbers
public void TryLayer(int min = 30) // [!code --]
public void TryLater(int min = 30) // [!code ++]
```
## ABILITY

[`@@ -2,7 +2,7 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ABILITY.cs#L2-L8)
```cs:line-numbers=2

public class ABILITY
{
	public const int AI_Drink = 5045; // [!code --]
	public const int ActChat = 5044; // [!code ++]

	public const int ActNoItem = 5037;

```

[`@@ -18,7 +18,7 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ABILITY.cs#L18-L24)
```cs:line-numbers=18

	public const int AI_TendAnimal = 5043;

	public const int ActChat = 5044; // [!code --]
	public const int AI_Drink = 5045; // [!code ++]

	public const int ActInstall = 5046;

```

[`@@ -184,10 +184,10 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ABILITY.cs#L184-L193)
```cs:line-numbers=184

	public const int ActLulwyTrick = 6902;

	public const int Melee = 5002; // [!code --]
 // [!code --]
	public const int ActJureHeal = 6901;

	public const int Melee = 5002; // [!code ++]
 // [!code ++]
	public const int ActGazeMutation = 6622;

	public const int ActNTR = 6603;
```

[`@@ -234,7 +234,7 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ABILITY.cs#L234-L240)
```cs:line-numbers=234

	public static readonly int[] IDS = new int[115]
	{
		5045, 5037, 5038, 5039, 5040, 5041, 5042, 5043, 5044, 5046, // [!code --]
		5044, 5037, 5038, 5039, 5040, 5041, 5042, 5043, 5045, 5046, // [!code ++]
		5047, 5048, 5049, 5050, 5051, 5036, 5052, 5054, 5055, 6001,
		6003, 6011, 6012, 6013, 6015, 6018, 6019, 6020, 6050, 6400,
		6410, 5053, 6420, 5035, 5033, 5003, 5004, 5005, 5006, 5007,
```

[`@@ -243,7 +243,7 @@ public class ABILITY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ABILITY.cs#L243-L249)
```cs:line-numbers=243
	5028, 5029, 5030, 5031, 5032, 5018, 6500, 6450, 50204, 6903,
	6904, 7000, 50200, 50201, 50202, 50203, 6600, 50205, 50206, 50207,
	50208, 50209, 50210, 50211, 50212, 50213, 50214, 50215, 5001, 5000,
	6902, 5002, 6901, 6622, 6603, 6610, 6611, 6612, 6620, 6621, // [!code --]
	6902, 6901, 5002, 6622, 6603, 6610, 6611, 6612, 6620, 6621, // [!code ++]
	6900, 6623, 6602, 6626, 6631, 6640, 6641, 6642, 6650, 6660,
	6661, 6700, 6720, 6630, 6601
};
```

## AI_Craft_Snowman

[`@@ -23,6 +23,10 @@ public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AI_Craft_Snowman.cs#L23-L28)
```cs:line-numbers=23
			owner.PlayAnime(AnimeID.Jump);
			pos.TalkWitnesses(EClass.pc, (EClass.rnd(2) == 0) ? "nice_statue" : "ding_other", 5);
			EClass.pc.ModExp(258, 50);
			if (EClass.rnd(3) != 0) // [!code ++]
			{ // [!code ++]
				EClass.pc.stamina.Mod(-1); // [!code ++]
			} // [!code ++]
		}
	}.SetDuration(25, 5);
	yield return Do(seq);
```

## ActEffect

[`@@ -588,7 +588,7 @@ public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ActEffect.cs#L588-L594)
```cs:line-numbers=588
	}
	case EffectId.Funnel:
	{
		if (EClass._zone.CountMinions(CC) > CC.MaxSummon || CC.c_uidMaster != 0) // [!code --]
		if (EClass._zone.CountMinions(CC) >= CC.MaxSummon || CC.c_uidMaster != 0) // [!code ++]
		{
			CC.Say("summon_ally_fail", CC);
			return;
```

[`@@ -810,7 +810,7 @@ public static bool DamageEle(Card CC, EffectId id, int power, Element e, List<Po`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ActEffect.cs#L810-L816)
```cs:line-numbers=810
	case EffectId.Duplicate:
	{
		Point randomPoint = CC.pos.GetRandomPoint(2, requireLos: false, allowChara: false, allowBlocked: false, 200);
		if (randomPoint == null || randomPoint.Equals(CC.pos) || !randomPoint.IsValid || EClass._zone.IsRegion || CC.HasCondition<ConPoison>() || CC.HasCondition<ConConfuse>() || CC.HasCondition<ConDim>() || CC.HasCondition<ConParalyze>() || CC.HasCondition<ConSleep>() || CC.HasCondition<ConBurning>() || CC.HasCondition<ConFreeze>() || CC.HasCondition<ConMiasma>()) // [!code --]
		if (randomPoint == null || randomPoint.Equals(CC.pos) || !randomPoint.IsValid || EClass._zone.IsRegion || CC.HasCondition<ConPoison>() || CC.HasCondition<ConConfuse>() || CC.HasCondition<ConDim>() || CC.HasCondition<ConParalyze>() || CC.HasCondition<ConSleep>() || CC.HasCondition<ConBurning>() || CC.HasCondition<ConFreeze>() || CC.HasCondition<ConMiasma>() || CC.corruption >= 100) // [!code ++]
		{
			CC.Say("split_fail", CC);
			return;
```

## ActMelee

[`@@ -141,25 +141,26 @@ public bool Attack(float dmgMulti = 1f, bool maxRoll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ActMelee.cs#L141-L165)
```cs:line-numbers=141
		{
			ActRanged.TryReload(w);
		}
		int num2 = ((w != null) ? w.Evalue(606) : 0); // [!code --]
		int scatter = ((w != null) ? w.Evalue(607) : 0); // [!code --]
		int chaser = ((w != null) ? w.Evalue(620) : 0); // [!code --]
		if (Act.CC.IsPCFaction) // [!code --]
		{ // [!code --]
			chaser += EClass.pc.faction.charaElements.Value(620); // [!code --]
		} // [!code --]
		List<Point> list = EClass._map.ListPointsInLine(Act.CC.pos, Act.TC.pos, num2 / 10 + ((num2 % 10 > EClass.rnd(10)) ? 1 : 0) + 1); // [!code --]
		Attack(Act.TC, Act.TP, 1f); // [!code --]
		int num2 = GetWeaponEnc(606); // [!code ++]
		int scatter = GetWeaponEnc(607); // [!code ++]
		int splash = GetWeaponEnc(608); // [!code ++]
		int chaser = GetWeaponEnc(620); // [!code ++]
		int flurry = GetWeaponEnc(621); // [!code ++]
		int frustration = GetWeaponEnc(624); // [!code ++]
		int num3 = GetWeaponEnc(622); // [!code ++]
		int feint = GetWeaponEnc(623); // [!code ++]
		List<Point> list2 = EClass._map.ListPointsInLine(Act.CC.pos, Act.TC.pos, num2 / 10 + ((num2 % 10 > EClass.rnd(10)) ? 1 : 0) + 1); // [!code ++]
		AttackWithFlurry(Act.TC, Act.TP, 1f, subAttack: false); // [!code ++]
		if (num2 > 0)
		{
			foreach (Point item in list) // [!code --]
			foreach (Point item in list2) // [!code ++]
			{
				if (!item.Equals(orgPos))
				{
					Chara firstChara = item.FirstChara;
					if (firstChara != null && firstChara.IsHostile(Act.CC))
					{
						Attack(firstChara, item, 1f); // [!code --]
						AttackWithFlurry(firstChara, item, 1f, subAttack: false); // [!code ++]
					}
				}
			}
```

[`@@ -173,38 +174,74 @@ public bool Attack(float dmgMulti = 1f, bool maxRoll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ActMelee.cs#L173-L210)
```cs:line-numbers=173
					Chara firstChara2 = p.FirstChara;
					if (firstChara2 != null && firstChara2.IsHostile(Act.CC))
					{
						Attack(firstChara2, p, Mathf.Min(0.5f + 0.05f * Mathf.Sqrt(scatter), 1f + 0.01f * Mathf.Sqrt(scatter))); // [!code --]
						AttackWithFlurry(firstChara2, p, Mathf.Min(0.5f + 0.05f * Mathf.Sqrt(scatter), 1f + 0.01f * Mathf.Sqrt(scatter)), subAttack: true); // [!code ++]
					}
				}
			});
		}
		int num3 = count; // [!code --]
		count = num3 + 1; // [!code --]
		void Attack(Card _tc, Point _tp, float mtp) // [!code --]
		else if (num3 > 0) // [!code ++]
		{ // [!code ++]
			List<Point> list = new List<Point>(); // [!code ++]
			Act.TP.ForeachNeighbor(delegate(Point p) // [!code ++]
			{ // [!code ++]
				list.Add(p.Copy()); // [!code ++]
			}); // [!code ++]
			list.Shuffle(); // [!code ++]
			int num4 = 0; // [!code ++]
			for (int i = 0; i < 9 && num3 > EClass.rnd(10 + (int)Mathf.Pow(3f, i + 2)); i++) // [!code ++]
			{ // [!code ++]
				num4++; // [!code ++]
			} // [!code ++]
			foreach (Point item2 in list) // [!code ++]
			{ // [!code ++]
				foreach (Card item3 in item2.ListCards()) // [!code ++]
				{ // [!code ++]
					if (num4 <= 0 || !Act.CC.IsAliveInCurrentZone) // [!code ++]
					{ // [!code ++]
						break; // [!code ++]
					} // [!code ++]
					if (item3.trait.CanBeAttacked || (item3.isChara && item3.Chara.IsHostile(Act.CC))) // [!code ++]
					{ // [!code ++]
						Act.CC.Say("attack_cleave"); // [!code ++]
						AttackWithFlurry(item3, item2, 1f, subAttack: true); // [!code ++]
						num4--; // [!code ++]
					} // [!code ++]
				} // [!code ++]
			} // [!code ++]
		} // [!code ++]
		int num5 = count; // [!code ++]
		count = num5 + 1; // [!code ++]
		void Attack(Card _tc, Point _tp, float mtp, bool subAttack) // [!code ++]
		{
			Act.TC = _tc;
			Act.TP = _tp;
			AttackProcess.Current.Prepare(Act.CC, w, Act.TC, Act.TP, count);
			int num4 = 1; // [!code --]
			int num6 = 1; // [!code ++]
			if (chaser > 0)
			{
				for (int i = 0; i < 10; i++) // [!code --]
				for (int j = 0; j < 10; j++) // [!code ++]
				{
					if (chaser > EClass.rnd((int)Mathf.Pow(4f, i + 2))) // [!code --]
					if (chaser > EClass.rnd(4 + (int)Mathf.Pow(4f, j + 2))) // [!code ++]
					{
						num4++; // [!code --]
						num6++; // [!code ++]
					}
				}
			}
			bool flag2 = false;
			for (int j = 0; j < num4; j++) // [!code --]
			for (int k = 0; k < num6; k++) // [!code ++]
			{
				if (j > 0) // [!code --]
				if (k > 0) // [!code ++]
				{ // [!code ++]
					Act.CC.Say("attack_chaser"); // [!code ++]
				} // [!code ++]
				flag2 = AttackProcess.Current.Perform(count, hasHit, dmgMulti * mtp, maxRoll, subAttack); // [!code ++]
				if (!flag2 && frustration > 0 && 10f + 2f * Mathf.Sqrt(frustration) > (float)EClass.rnd(100)) // [!code ++]
				{
					Msg.Say("attack_chaser"); // [!code --]
					AttackProcess.Current.critFury = true; // [!code ++]
					flag2 = AttackProcess.Current.Perform(count, hasHit, dmgMulti * mtp, maxRoll, subAttack); // [!code ++]
					AttackProcess.Current.critFury = false; // [!code ++]
				}
				flag2 = AttackProcess.Current.Perform(count, hasHit, dmgMulti * mtp, maxRoll); // [!code --]
				if (flag2) // [!code --]
				if (flag2 || !Act.CC.IsAliveInCurrentZone || !Act.TC.IsAliveInCurrentZone) // [!code ++]
				{
					break;
				}
```

[`@@ -250,7 +287,66 @@ void Attack(Card _tc, Point _tp, float mtp)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ActMelee.cs#L250-L256)
```cs:line-numbers=250
				}
			}
			Act.TC = _tc;
			Act.CC.DoHostileAction(Act.TC); // [!code --]
			if (Act.TC.IsAliveInCurrentZone && Act.TC.isChara) // [!code ++]
			{ // [!code ++]
				Act.CC.DoHostileAction(Act.TC); // [!code ++]
				if (feint > 0 && 10f + 4f * Mathf.Sqrt(feint) > (float)EClass.rnd(100)) // [!code ++]
				{ // [!code ++]
					Act.TC.Chara.AddCondition<ConSupress>(100 + 5 * (int)Mathf.Sqrt(feint)); // [!code ++]
				} // [!code ++]
			} // [!code ++]
			if (splash > 0) // [!code ++]
			{ // [!code ++]
				Act.TP.ForeachNeighbor(delegate(Point p) // [!code ++]
				{ // [!code ++]
					if (p.Equals(Act.TP) || p.Equals(Act.CC.pos)) // [!code ++]
					{ // [!code ++]
						return; // [!code ++]
					} // [!code ++]
					p.PlayEffect("smoke_shockwave"); // [!code ++]
					p.Copy().Animate(AnimeID.QuakeMini, animeBlock: true); // [!code ++]
					foreach (Card item4 in p.ListCards()) // [!code ++]
					{ // [!code ++]
						if (item4.trait.CanBeAttacked || (item4.isChara && item4.Chara.IsHostile(Act.CC))) // [!code ++]
						{ // [!code ++]
							int rawDamage = AttackProcess.Current.GetRawDamage(0.1f + 0.05f * Mathf.Sqrt(splash), crit: false, maxRoll: false); // [!code ++]
							rawDamage = item4.ApplyProtection(rawDamage); // [!code ++]
							item4.DamageHP(rawDamage, 0, 100, AttackSource.Shockwave, Act.CC); // [!code ++]
						} // [!code ++]
					} // [!code ++]
				}); // [!code ++]
			} // [!code ++]
		} // [!code ++]
		void AttackWithFlurry(Card _tc, Point _tp, float mtp, bool subAttack) // [!code ++]
		{ // [!code ++]
			int num7 = 1; // [!code ++]
			if (flurry > 0) // [!code ++]
			{ // [!code ++]
				for (int l = 0; l < 10 && flurry > EClass.rnd(25 + (int)Mathf.Pow(5f, l + 2)); l++) // [!code ++]
				{ // [!code ++]
					num7++; // [!code ++]
				} // [!code ++]
			} // [!code ++]
			for (int m = 0; m < num7; m++) // [!code ++]
			{ // [!code ++]
				if (!Act.CC.IsAliveInCurrentZone) // [!code ++]
				{ // [!code ++]
					break; // [!code ++]
				} // [!code ++]
				if (!_tc.IsAliveInCurrentZone) // [!code ++]
				{ // [!code ++]
					break; // [!code ++]
				} // [!code ++]
				if (m > 0) // [!code ++]
				{ // [!code ++]
					Act.CC.Say("attack_flurry"); // [!code ++]
				} // [!code ++]
				Attack(_tc, _tp, mtp, subAttack); // [!code ++]
			} // [!code ++]
		} // [!code ++]
		int GetWeaponEnc(int ele) // [!code ++]
		{ // [!code ++]
			return ((w != null) ? w.Evalue(ele) : 0) + EClass.pc.faction.charaElements.Value(ele); // [!code ++]
		}
	}
	if (!flag)
```

## AnimeID

[`@@ -23,5 +23,6 @@ public enum AnimeID`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AnimeID.cs#L23-L27)
```cs:line-numbers=23
	Hop,
	Ride,
	Truck,
	PlayMusic // [!code --]
	PlayMusic, // [!code ++]
	QuakeMini // [!code ++]
}
```

## AttackProcess

[`@@ -41,6 +41,8 @@ public class AttackProcess : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L41-L46)
```cs:line-numbers=41

	public bool crit;

	public bool critFury; // [!code ++]
 // [!code ++]
	public bool hit;

	public bool evadePlus;
```

[`@@ -125,7 +127,7 @@ public void Prepare(Chara _CC, Thing _weapon, Card _TC = null, Point _TP = null,`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L125-L131)
```cs:line-numbers=125
	isThrow = _isThrow;
	weapon = _weapon;
	ammo = _weapon?.ammoData;
	hit = (crit = (evadePlus = false)); // [!code --]
	hit = (crit = (critFury = (evadePlus = false))); // [!code ++]
	toolRange = weapon?.trait as TraitToolRange;
	attackType = AttackType.Slash;
	attackStyle = AttackStyle.Default;
```

[`@@ -300,7 +302,7 @@ public void Prepare(Chara _CC, Thing _weapon, Card _TC = null, Point _TP = null,`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L300-L306)
```cs:line-numbers=300
	}
	else if (attackStyle == AttackStyle.TwoWield && toHit > 0)
	{
		toHit = toHit * 100 / (115 + attackIndex * 15 + attackIndex * Mathf.Clamp(2000 / (20 + CC.Evalue(131)), 0, 100)); // [!code --]
		toHit = toHit * 100 / (115 + attackIndex * 15 + attackIndex * Mathf.Clamp(2000 / (20 + CC.EvalueMax(131, -10)), 0, 100)); // [!code ++]
	}
	if (CC.isBlind)
	{
```

[`@@ -391,10 +393,9 @@ public void PlayRangedAnime(int numFire)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L391-L400)
```cs:line-numbers=391
		}
	}

	public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll = false) // [!code --]
	public int GetRawDamage(float dmgMulti, bool crit, bool maxRoll) // [!code ++]
	{
		bool flag = CC.HasCondition<ConReload>();
		hit = CalcHit(); // [!code --]
		int num = Dice.Roll(dNum, dDim, dBonus, CC);
		if (ammo != null && !flag)
		{
```

[`@@ -424,7 +425,14 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L424-L430)
```cs:line-numbers=424
		}
		num = Mathf.Clamp(num, 0, 9999999);
		num = (int)(dMulti * (float)num * dmgMulti);
		num = Mathf.Clamp(num, 0, 9999999); // [!code --]
		return Mathf.Clamp(num, 0, 9999999); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll = false, bool subAttack = false) // [!code ++]
	{ // [!code ++]
		bool flag = CC.HasCondition<ConReload>(); // [!code ++]
		hit = CalcHit(); // [!code ++]
		int num = GetRawDamage(dmgMulti, crit, maxRoll); // [!code ++]
		if (IsRanged && count >= numFireWithoutDamageLoss)
		{
			num = num * 100 / (100 + (count - numFireWithoutDamageLoss + 1) * 30);
```

[`@@ -434,8 +442,8 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L434-L441)
```cs:line-numbers=434
		num /= 2;
	}
	List<Element> list2 = new List<Element>();
	int num3 = CC.Evalue(91); // [!code --]
	int num4 = 0; // [!code --]
	int num2 = CC.Evalue(91); // [!code ++]
	int num3 = 0; // [!code ++]
	if (weapon != null)
	{
		list2 = weapon.elements.dict.Values.ToList();
```

[`@@ -445,9 +453,9 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L445-L453)
```cs:line-numbers=445
		}
		if (IsRanged || isThrow)
		{
			num3 += weapon.Evalue(91); // [!code --]
			num2 += weapon.Evalue(91); // [!code ++]
		}
		num4 += weapon.Evalue(603); // [!code --]
		num3 += weapon.Evalue(603); // [!code ++]
	}
	else if (CC.id == "rabbit_vopal")
	{
```

[`@@ -485,15 +493,18 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L485-L499)
```cs:line-numbers=485
			}
		}
	}
	if (hit && num3 > EClass.rnd(100)) // [!code --]
	if (hit && num2 > EClass.rnd(100)) // [!code ++]
	{
		CC.Say("vopal");
		penetration = 100;
	}
	if (crit && CC.IsPC) // [!code --]
	if (crit) // [!code ++]
	{
		CC.Say("critical"); // [!code --]
		CC.PlaySound("critical"); // [!code --]
		CC.Say((critFury ? "fury_" : "") + (CC.IsHostile() ? "critical_enemy" : "critical")); // [!code ++]
		if (CC.IsPC) // [!code ++]
		{ // [!code ++]
			CC.PlaySound("critical"); // [!code ++]
		} // [!code ++]
	}
	if (CC.isSynced || (TC != null && TC.isSynced))
	{
```

[`@@ -539,9 +550,9 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L539-L547)
```cs:line-numbers=539
		CC.Say("attackMelee", CC, TC, GetAttackText(attackType, 0));
	}
	bool showEffect = true;
	int num4 = 0; // [!code ++]
	int num5 = 0;
	int num6 = 0;
	int num7 = 0; // [!code --]
	ConWeapon conWeapon = null;
	if (weapon != null)
	{
```

[`@@ -549,40 +560,40 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L549-L588)
```cs:line-numbers=549
		{
			if (value2.source.categorySub == "eleConvert")
			{
				num5 = EClass.sources.elements.alias[value2.source.aliasRef].id; // [!code --]
				num6 = 50 + value2.Value * 2; // [!code --]
				num7 = Mathf.Min(value2.Value, 100); // [!code --]
				num4 = EClass.sources.elements.alias[value2.source.aliasRef].id; // [!code ++]
				num5 = 50 + value2.Value * 2; // [!code ++]
				num6 = Mathf.Min(value2.Value, 100); // [!code ++]
				break;
			}
		}
	}
	if (num5 == 0) // [!code --]
	if (num4 == 0) // [!code ++]
	{
		if (CC.HasCondition<ConWeapon>())
		{
			conWeapon = CC.GetCondition<ConWeapon>();
			num5 = conWeapon.sourceElement.id; // [!code --]
			num6 = conWeapon.power / 2; // [!code --]
			num7 = 40 + (int)Mathf.Min(MathF.Sqrt(conWeapon.power), 80f); // [!code --]
			num4 = conWeapon.sourceElement.id; // [!code ++]
			num5 = conWeapon.power / 2; // [!code ++]
			num6 = 40 + (int)Mathf.Min(MathF.Sqrt(conWeapon.power), 80f); // [!code ++]
		}
		if (conWeapon == null && weapon == null && (CC.MainElement != Element.Void || CC.HasElement(1565)))
		{
			num5 = (CC.HasElement(1565) ? 915 : CC.MainElement.id); // [!code --]
			num6 = CC.Power / 3 + EClass.rnd(CC.Power / 2); // [!code --]
			num4 = (CC.HasElement(1565) ? 915 : CC.MainElement.id); // [!code ++]
			num5 = CC.Power / 3 + EClass.rnd(CC.Power / 2); // [!code ++]
			if (CC.MainElement != Element.Void)
			{
				num6 += CC.MainElement.Value; // [!code --]
				num5 += CC.MainElement.Value; // [!code ++]
			}
			showEffect = false;
			num7 = 50; // [!code --]
			num6 = 50; // [!code ++]
		}
		if (conWeapon == null && weapon != null && weapon.trait is TraitToolRangeCane)
		{
			IEnumerable<Element> enumerable = weapon.elements.dict.Values.Where((Element e) => e.source.categorySub == "eleAttack");
			if (enumerable.Count() > 0)
			{
				num5 = enumerable.RandomItem().id; // [!code --]
				num6 = num5 switch // [!code --]
				num4 = enumerable.RandomItem().id; // [!code ++]
				num5 = num4 switch // [!code ++]
				{
					920 => 30, 
					914 => 50, 
```

[`@@ -590,32 +601,35 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L590-L621)
```cs:line-numbers=590
					_ => 100, 
				};
			}
			num7 = 50; // [!code --]
			num6 = 50; // [!code ++]
		}
	}
	int num8 = num; // [!code --]
	int num9 = num * num7 / 100; // [!code --]
	int num7 = num; // [!code ++]
	int num8 = num * num6 / 100; // [!code ++]
	num -= num8; // [!code ++]
	int num9 = num * penetration / 100; // [!code ++]
	num -= num9;
	int num10 = num * penetration / 100; // [!code --]
	num -= num10; // [!code --]
	num = TC.ApplyProtection(num) + num10 + num9; // [!code --]
	TC.DamageHP(num, num5, num6, (!IsRanged && !isThrow) ? AttackSource.Melee : AttackSource.Range, CC, showEffect); // [!code --]
	num = TC.ApplyProtection(num) + num9 + num8; // [!code ++]
	TC.DamageHP(num, num4, num5, (!IsRanged && !isThrow) ? AttackSource.Melee : AttackSource.Range, CC, showEffect); // [!code ++]
	conWeapon?.Mod(-1);
	bool flag2 = IsCane || (weapon != null && weapon.Evalue(482) > 0);
	int attackStyleElement = CC.body.GetAttackStyleElement(attackStyle);
	int mod2 = 100 / (count + 1); // [!code --]
	if (!IsRanged || count == 0) // [!code --]
	{ // [!code --]
		ModExpAtk(weaponSkill.id, mod2); // [!code --]
		ModExpAtk(flag2 ? 304 : (IsRanged ? 133 : 132), mod2); // [!code --]
	} // [!code --]
	if (crit) // [!code --]
	{ // [!code --]
		ModExpAtk(134, 50); // [!code --]
	} // [!code --]
	if (count == 0 && attackStyleElement != 0) // [!code --]
	if (!subAttack) // [!code ++]
	{
		ModExpAtk(attackStyleElement, 100); // [!code --]
		int mod2 = 100 / (count + 1); // [!code ++]
		if (!IsRanged || count == 0) // [!code ++]
		{ // [!code ++]
			ModExpAtk(weaponSkill.id, mod2); // [!code ++]
			ModExpAtk(flag2 ? 304 : (IsRanged ? 133 : 132), mod2); // [!code ++]
		} // [!code ++]
		if (crit) // [!code ++]
		{ // [!code ++]
			ModExpAtk(134, 50); // [!code ++]
		} // [!code ++]
		if (count == 0 && attackStyleElement != 0) // [!code ++]
		{ // [!code ++]
			ModExpAtk(attackStyleElement, 100); // [!code ++]
		} // [!code ++]
	}
	if (!CC.IsAliveInCurrentZone || !TC.IsAliveInCurrentZone)
	{
```

[`@@ -637,13 +651,13 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L637-L649)
```cs:line-numbers=637
			}
			if (item.source.categorySub == "eleAttack")
			{
				int num11 = 25; // [!code --]
				int num10 = 25; // [!code ++]
				int dmg = EClass.rnd(num * (100 + item.Value * 10) / 500 + 5);
				if (conWeapon == null && weapon != null && weapon.trait is TraitToolRangeCane)
				{
					num11 = 0; // [!code --]
					num10 = 0; // [!code ++]
				}
				if (num11 >= EClass.rnd(100)) // [!code --]
				if (num10 >= EClass.rnd(100)) // [!code ++]
				{
					TC.DamageHP(dmg, item.id, isThrow ? (100 + item.Value * 5) : (30 + item.Value), AttackSource.WeaponEnchant, CC);
				}
```

[`@@ -657,12 +671,12 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L657-L668)
```cs:line-numbers=657
	}
	if (!IsRanged && attackStyle == AttackStyle.Shield)
	{
		int num12 = CC.Evalue(123); // [!code --]
		if (CC.elements.ValueWithoutLink(123) >= 10 && Mathf.Clamp(Mathf.Sqrt(num12) - 2f, 8f, 12f) > (float)EClass.rnd(100)) // [!code --]
		int num11 = CC.Evalue(123); // [!code ++]
		if (CC.elements.ValueWithoutLink(123) >= 10 && Mathf.Clamp(Mathf.Sqrt(num11) - 2f, 8f, 12f) > (float)EClass.rnd(100)) // [!code ++]
		{
			num = num8 * Mathf.Min(50 + num12, 200) / 100; // [!code --]
			num = num7 * Mathf.Min(50 + num11, 200) / 100; // [!code ++]
			num = TC.ApplyProtection(num);
			Debug.Log("Bash:" + num + "/" + num8); // [!code --]
			Debug.Log("Bash:" + num + "/" + num7); // [!code ++]
			CC.PlaySound("shield_bash");
			CC.Say("shield_bash", CC, TC);
			TC.DamageHP(num, AttackSource.None, CC);
```

[`@@ -670,7 +684,7 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L670-L676)
```cs:line-numbers=670
			{
				if (EClass.rnd(2) == 0)
				{
					TC.Chara.AddCondition<ConDim>(50 + (int)Mathf.Sqrt(num12) * 10); // [!code --]
					TC.Chara.AddCondition<ConDim>(50 + (int)Mathf.Sqrt(num11) * 10); // [!code ++]
				}
				TC.Chara.AddCondition<ConParalyze>(EClass.rnd(2), force: true);
			}
```

[`@@ -680,7 +694,7 @@ public bool Perform(int count, bool hasHit, float dmgMulti = 1f, bool maxRoll =`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L680-L686)
```cs:line-numbers=680
	{
		return true;
	}
	if (TC.isChara && num4 > 0 && num4 * 2 + 15 > EClass.rnd(100) && !TC.isRestrained && TC.Chara.TryMoveFrom(CC.pos) == Card.MoveResult.Success) // [!code --]
	if (TC.isChara && num3 > 0 && num3 * 2 + 15 > EClass.rnd(100) && !TC.isRestrained && TC.Chara.TryMoveFrom(CC.pos) == Card.MoveResult.Success) // [!code ++]
	{
		TC.pos.PlayEffect("vanish");
		TC.PlaySound("push", 1.5f);
```

[`@@ -786,14 +800,15 @@ void Proc(List<Element> list)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L786-L799)
```cs:line-numbers=786
		{
			if (item2 is Ability)
			{
				int num13 = 10 + item2.Value / 5; // [!code --]
				int num12 = 10 + item2.Value / 5; // [!code ++]
				int power = EClass.curve((100 + item2.Value * 10) * (100 + weaponSkill.Value) / 100, 400, 100);
				if (num13 >= EClass.rnd(100)) // [!code --]
				if (num12 >= EClass.rnd(100)) // [!code ++]
				{
					Act obj = item2 as Act;
					Card card = (obj.TargetType.CanSelectSelf ? CC : TC);
					string text = ((item2.source.proc.Length >= 2) ? item2.source.proc[1] : "");
					switch (obj.source.abilityType.TryGet(0)) // [!code --]
					string text2 = obj.source.abilityType.TryGet(0); // [!code ++]
					switch (text2) // [!code ++]
					{
					case "buff":
						if (CC.HasCondition(text))
```

[`@@ -808,6 +823,21 @@ void Proc(List<Element> list)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L808-L813)
```cs:line-numbers=808
						card = TC;
						break;
					}
					if (subAttack) // [!code ++]
					{ // [!code ++]
						if (card == CC) // [!code ++]
						{ // [!code ++]
							continue; // [!code ++]
						} // [!code ++]
						switch (text2) // [!code ++]
						{ // [!code ++]
						case "attackArea": // [!code ++]
						case "summon": // [!code ++]
						case "teleport": // [!code ++]
						case "suicide": // [!code ++]
							continue; // [!code ++]
						} // [!code ++]
					} // [!code ++]
					if (card.IsAliveInCurrentZone)
					{
						Card tC = TC;
```

[`@@ -839,6 +869,11 @@ private bool EvadePlus()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackProcess.cs#L839-L844)
```cs:line-numbers=839

	public bool CalcHit()
	{
		if (critFury) // [!code ++]
		{ // [!code ++]
			crit = true; // [!code ++]
			return true; // [!code ++]
		} // [!code ++]
		if (TC != null)
		{
			if (TC.HasCondition<ConDim>() && EClass.rnd(4) == 0)
```

## AttackSource

[`@@ -17,5 +17,6 @@ public enum AttackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/AttackSource.cs#L17-L21)
```cs:line-numbers=17
	Hang,
	Wrath,
	ManaBackfire,
	DeathSentense // [!code --]
	DeathSentense, // [!code ++]
	Shockwave // [!code ++]
}
```

## BaseGameScreen

[`@@ -641,7 +641,12 @@ public virtual void RefreshWeather()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseGameScreen.cs#L641-L647)
```cs:line-numbers=641
	EMono.scene.rain.SetActive(enable: true);
	EMono.scene.ether.SetActive(enable: true);
	EMono.scene.blossom.SetActive(enable: true);
	float num = ((EMono._zone.lv <= -2) ? 0f : ((EMono._zone.lv <= -1) ? 0.3f : ((flag && !flag2) ? 0.6f : 1f))); // [!code --]
	Zone zone = EMono._zone; // [!code ++]
	if (EMono._zone is Zone_Tent) // [!code ++]
	{ // [!code ++]
		zone = (EMono._zone.parent as Zone) ?? EMono._zone; // [!code ++]
	} // [!code ++]
	float num = ((zone.lv <= -2) ? 0f : ((zone.lv <= -1) ? 0.3f : ((flag && !flag2) ? 0.6f : 1f))); // [!code ++]
	EMono.scene.sfxRain.SetVolume(weather.IsRaining ? num : 0f);
	EMono.scene.sfxSea.SetVolume(EMono._zone.VolumeSea * num);
	EMono.scene.camSupport.grading.profile.fog = EMono.setting.render.fogs[EMono._map.config.fog];
```

## BaseListPeople

[`@@ -65,25 +65,6 @@ public override void OnInstantiate(Chara a, ItemGeneral b)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseListPeople.cs#L65-L89)
```cs:line-numbers=65
	SetSubText(a, b);
	if (ShowHome)
	{
		BaseArea roomWork = null; // [!code --]
		bool flag = false; // [!code --]
		foreach (Hobby item in a.ListWorks()) // [!code --]
		{ // [!code --]
			AIWork aI = item.GetAI(a); // [!code --]
			flag = aI.SetDestination(); // [!code --]
			if (flag) // [!code --]
			{ // [!code --]
				if (aI.destArea != null) // [!code --]
				{ // [!code --]
					roomWork = aI.destArea; // [!code --]
				} // [!code --]
				else if (aI.destThing != null) // [!code --]
				{ // [!code --]
					roomWork = aI.destThing.pos.cell.room; // [!code --]
				} // [!code --]
				break; // [!code --]
			} // [!code --]
		} // [!code --]
		if (a.IsPCFaction)
		{
			Sprite icon = a.affinity.GetIcon();
```

[`@@ -92,32 +73,7 @@ public override void OnInstantiate(Chara a, ItemGeneral b)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseListPeople.cs#L92-L123)
```cs:line-numbers=92
				Util.Instantiate<UIItem>("UI/Element/Grid/Attach/affinity", b).image1.sprite = icon;
			}
		}
		b.AddSubButton(EClass.core.refs.icons.work, delegate // [!code --]
		{ // [!code --]
			if (roomWork == null) // [!code --]
			{ // [!code --]
				SE.BeepSmall(); // [!code --]
			} // [!code --]
			else // [!code --]
			{ // [!code --]
				EClass.pc.SetAI(new AI_Goto(roomWork.GetRandomFreePos(), 1)); // [!code --]
				layer.Close(); // [!code --]
			} // [!code --]
		}, null, delegate(UITooltip t) // [!code --]
		{ // [!code --]
			t.note.Clear(); // [!code --]
			t.note.AddHeader("infoWork".lang((roomWork != null) ? roomWork.Name : "none".lang())); // [!code --]
			foreach (Hobby item2 in a.ListWorks()) // [!code --]
			{ // [!code --]
				AddText(item2, "work", a.source.works.Contains(item2.source.alias)); // [!code --]
			} // [!code --]
			foreach (Hobby item3 in a.ListHobbies()) // [!code --]
			{ // [!code --]
				AddText(item3, "hobby", a.source.hobbies.Contains(item3.source.alias)); // [!code --]
			} // [!code --]
			t.note.Build(); // [!code --]
			_ = roomWork; // [!code --]
		}).icon.SetAlpha(flag ? 1f : 0.4f); // [!code --]
		AddSubButtonWork(b, a); // [!code ++]
		Room room = a.FindRoom();
		TraitBed bed = a.FindBed();
		if (a.memberType == FactionMemberType.Default)
```

[`@@ -145,7 +101,7 @@ public override void OnInstantiate(Chara a, ItemGeneral b)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseListPeople.cs#L145-L151)
```cs:line-numbers=145
					{
					});
				}
			}).icon.SetAlpha((room != null) ? 1f : 0.4f); // [!code --]
			}).icon.SetAlpha((bed != null) ? 1f : 0.4f); // [!code ++]
		}
	}
	if (ShowCharaSheet && EClass.debug.showExtra)
```

[`@@ -162,6 +118,71 @@ public override void OnInstantiate(Chara a, ItemGeneral b)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseListPeople.cs#L162-L167)
```cs:line-numbers=162
		{
			b.gameObject.AddComponent<CanvasGroup>().alpha = 0.6f;
		}
	} // [!code ++]
 // [!code ++]
	public void AddSubButtonWork(ItemGeneral b, Chara a) // [!code ++]
	{ // [!code ++]
		BaseArea roomWork = null; // [!code ++]
		bool flag = true; // [!code ++]
		foreach (Hobby item in a.ListWorks()) // [!code ++]
		{ // [!code ++]
			AIWork aI = item.GetAI(a); // [!code ++]
			if (aI.SetDestination()) // [!code ++]
			{ // [!code ++]
				if (aI.destArea != null) // [!code ++]
				{ // [!code ++]
					roomWork = aI.destArea; // [!code ++]
				} // [!code ++]
				else if (aI.destThing != null) // [!code ++]
				{ // [!code ++]
					roomWork = aI.destThing.pos.cell.room; // [!code ++]
				} // [!code ++]
				break; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		foreach (Hobby item2 in a.ListWorks().Concat(a.ListHobbies())) // [!code ++]
		{ // [!code ++]
			if (item2.GetEfficiency(a) <= 0) // [!code ++]
			{ // [!code ++]
				flag = false; // [!code ++]
				break; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		b.AddSubButton(EClass.core.refs.icons.work, delegate // [!code ++]
		{ // [!code ++]
			if (roomWork == null) // [!code ++]
			{ // [!code ++]
				SE.BeepSmall(); // [!code ++]
			} // [!code ++]
			else // [!code ++]
			{ // [!code ++]
				EClass.pc.SetAI(new AI_Goto(roomWork.GetRandomFreePos(), 1)); // [!code ++]
				layer.Close(); // [!code ++]
			} // [!code ++]
		}, null, delegate(UITooltip t) // [!code ++]
		{ // [!code ++]
			WriteHobbies(t, a, roomWork); // [!code ++]
		}).icon.SetAlpha(flag ? 1f : 0.4f); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public void WriteHobbies(UITooltip t, Chara a, BaseArea roomWork) // [!code ++]
	{ // [!code ++]
		t.note.Clear(); // [!code ++]
		t.note.AddHeader("infoWork".lang((roomWork != null) ? roomWork.Name : "none".lang())); // [!code ++]
		foreach (Hobby item in a.ListWorks()) // [!code ++]
		{ // [!code ++]
			AddText(item, "work", a.source.works.Contains(item.source.alias)); // [!code ++]
		} // [!code ++]
		foreach (Hobby item2 in a.ListHobbies()) // [!code ++]
		{ // [!code ++]
			AddText(item2, "hobby", a.source.hobbies.Contains(item2.source.alias)); // [!code ++]
		} // [!code ++]
		if (a.IsPCParty) // [!code ++]
		{ // [!code ++]
			t.note.Space(8); // [!code ++]
			t.note.AddText("workNotActive_party".lang(), FontColor.Warning); // [!code ++]
		} // [!code ++]
		t.note.Build(); // [!code ++]
		void AddText(Hobby h, string lang, bool fix)
		{
			int efficiency = h.GetEfficiency(a);
```

[`@@ -173,18 +194,18 @@ void AddText(Hobby h, string lang, bool fix)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseListPeople.cs#L173-L190)
```cs:line-numbers=173
		text = text.TagColor((efficiency == 0) ? FontColor.Warning : FontColor.Good);
		string[] array = Lang.GetList("work_lv");
		string text2 = array[Mathf.Clamp(efficiency / 50, (efficiency != 0) ? 1 : 0, array.Length - 1)];
		P_3.t.note.AddTopic("TopicLeft", lang.lang(), text + " (" + text2 + ")"); // [!code --]
		t.note.AddTopic("TopicLeft", lang.lang(), text + " (" + text2 + ")"); // [!code ++]
		if (!h.source.destTrait.IsEmpty())
		{
			bool flag2 = EClass._map.FindThing(Type.GetType("Trait" + h.source.destTrait + ", Elin"), a) != null; // [!code --]
			bool flag = EClass._map.FindThing(Type.GetType("Trait" + h.source.destTrait + ", Elin"), a) != null; // [!code ++]
			List<CardRow> obj = EClass.sources.cards.rows.Where((CardRow t) => t.trait.Length != 0 && Type.GetType("Trait" + h.source.destTrait).IsAssignableFrom(Type.GetType("Trait" + t.trait[0]))).ToList();
			obj.Sort((CardRow a, CardRow b) => a.LV - b.LV);
			CardRow cardRow = obj[0];
			P_3.t.note.AddText("NoteText_small", "・ " + "workDestTrait".lang(cardRow.GetName().ToTitleCase().TagColor(flag2 ? FontColor.Good : FontColor.Warning))); // [!code --]
			t.note.AddText("NoteText_small", "・ " + "workDestTrait".lang(cardRow.GetName().ToTitleCase().TagColor(flag ? FontColor.Good : FontColor.Warning))); // [!code ++]
		}
		if (efficiency == 0)
		{
			P_3.t.note.AddText("NoteText_small", "・ " + "workNotActive".lang()); // [!code --]
			t.note.AddText("NoteText_small", "・ " + "workNotActive".lang()); // [!code ++]
		}
		else
		{
```

[`@@ -193,7 +214,7 @@ void AddText(Hobby h, string lang, bool fix)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseListPeople.cs#L193-L199)
```cs:line-numbers=193
				int num = Mathf.Max(1, h.source.things[i + 1].ToInt() * efficiency * a.homeBranch.GetProductBonus(a) / 100 / 1000);
				string text3 = h.source.things[i];
				string s = (text3.StartsWith("#") ? EClass.sources.categories.map[text3.Replace("#", "")].GetName() : EClass.sources.cards.map[h.source.things[i]].GetName());
				P_3.t.note.AddText("NoteText_small", "・ " + "work_produce".lang(s.ToTitleCase(), num.ToString() ?? "")); // [!code --]
				t.note.AddText("NoteText_small", "・ " + "work_produce".lang(s.ToTitleCase(), num.ToString() ?? "")); // [!code ++]
			}
			if (!h.source.elements.IsEmpty())
			{
```

[`@@ -202,7 +223,7 @@ void AddText(Hobby h, string lang, bool fix)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseListPeople.cs#L202-L208)
```cs:line-numbers=202
					SourceElement.Row row = EClass.sources.elements.map[h.source.elements[j]];
					int num2 = h.source.elements[j + 1];
					int num3 = ((num2 < 0 || row.id == 2115 || row.id == 2207) ? (num2 / 10) : Mathf.Max(0, num2 * h.GetEfficiency(a) * a.homeBranch.efficiency / 100 / 1000));
					P_3.t.note.AddText("NoteText_small", "・ " + "workBonus_skill".lang(row.GetName().ToTitleCase(), ((num2 > 0) ? "+" : "") + num3) + ((row.id == 2115 || row.id == 2207) ? (" " + "fixedFactionSkill".lang()) : ""), (num2 >= 0) ? FontColor.Default : FontColor.Bad); // [!code --]
					t.note.AddText("NoteText_small", "・ " + "workBonus_skill".lang(row.GetName().ToTitleCase(), ((num2 > 0) ? "+" : "") + num3) + ((row.id == 2115 || row.id == 2207) ? (" " + "fixedFactionSkill".lang()) : ""), (num2 >= 0) ? FontColor.Default : FontColor.Bad); // [!code ++]
				}
			}
			string[] array2 = h.source.GetDetail().SplitNewline();
```

[`@@ -210,11 +231,11 @@ void AddText(Hobby h, string lang, bool fix)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/BaseListPeople.cs#L210-L220)
```cs:line-numbers=210
				{
					if (!text4.IsEmpty())
					{
						P_3.t.note.AddText("NoteText_small", "・ " + text4); // [!code --]
						t.note.AddText("NoteText_small", "・ " + text4); // [!code ++]
					}
				}
			}
			P_3.t.note.Space(1); // [!code --]
			t.note.Space(1); // [!code ++]
		}
	}

```

## Card

[`@@ -3621,6 +3621,10 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L3621-L3626)
```cs:line-numbers=3621
		}
		}
	}
	if (origin != null && origin.isChara && origin.Chara.HasCondition<ConSupress>()) // [!code ++]
	{ // [!code ++]
		dmg = dmg * 2 / 3; // [!code ++]
	} // [!code ++]
	if (attackSource != AttackSource.Finish)
	{
		if (!IsPCFaction && LV > 50)
```

[`@@ -3821,7 +3825,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L3821-L3827)
```cs:line-numbers=3821
					if (EClass.player.invlunerable)
					{
						EvadeDeath();
						goto IL_09ad; // [!code --]
						goto IL_09fc; // [!code ++]
					}
				}
				if (IsPC && Evalue(1220) > 0 && Chara.stamina.value >= Chara.stamina.max / 2)
```

[`@@ -3833,8 +3837,8 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L3833-L3840)
```cs:line-numbers=3833
			}
		}
	}
	goto IL_09ad; // [!code --]
	IL_09ad: // [!code --]
	goto IL_09fc; // [!code ++]
	IL_09fc: // [!code ++]
	if (trait.CanBeAttacked)
	{
		renderer.PlayAnime(AnimeID.HitObj);
```

[`@@ -3924,6 +3928,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L3924-L3929)
```cs:line-numbers=3924
		if (!isDestroyed)
		{
			Die(e, origin, attackSource);
			ProcAbsorb(); // [!code ++]
			if (EClass.pc.Evalue(1355) > 0 && (IsPCFactionOrMinion || (origin != null && origin.IsPCParty)))
			{
				ConStrife conStrife = (EClass.pc.AddCondition<ConStrife>() as ConStrife) ?? EClass.pc.GetCondition<ConStrife>();
```

[`@@ -4006,33 +4011,7 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L4006-L4038)
```cs:line-numbers=4006
				origin.DamageHP(Mathf.Clamp(dmg / 20, 1, MaxHP / 20), ele3, Power * 2, AttackSource.Condition);
			}
		}
		if (origin.HasElement(662) && attackSource == AttackSource.Melee && origin.isChara && Chara.IsHostile(origin as Chara)) // [!code --]
		{ // [!code --]
			int num9 = EClass.rnd(3 + Mathf.Clamp(dmg / 100, 0, origin.Evalue(662) / 10)); // [!code --]
			origin.Chara.stamina.Mod(num9); // [!code --]
			if (IsAliveInCurrentZone) // [!code --]
			{ // [!code --]
				Chara.stamina.Mod(-num9); // [!code --]
			} // [!code --]
		} // [!code --]
		if (origin.HasElement(1350) && attackSource == AttackSource.Melee) // [!code --]
		{ // [!code --]
			int num10 = EClass.rndHalf(2 + Mathf.Clamp(dmg / 10, 0, origin.Chara.GetPietyValue() + 10)); // [!code --]
			origin.Chara.mana.Mod(num10); // [!code --]
			if (IsAliveInCurrentZone) // [!code --]
			{ // [!code --]
				Chara.mana.Mod(-num10); // [!code --]
			} // [!code --]
		} // [!code --]
		if (origin.HasElement(661) && attackSource == AttackSource.Melee) // [!code --]
		{ // [!code --]
			int num11 = EClass.rnd(2 + Mathf.Clamp(dmg / 10, 0, origin.Evalue(661) + 10)); // [!code --]
			origin.Chara.mana.Mod(num11); // [!code --]
			if (IsAliveInCurrentZone) // [!code --]
			{ // [!code --]
				Chara.mana.Mod(-num11); // [!code --]
			} // [!code --]
		} // [!code --]
		ProcAbsorb(); // [!code ++]
	}
	if (hp < 0 || !isChara)
	{
```

[`@@ -4048,15 +4027,15 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L4048-L4062)
```cs:line-numbers=4048
			elements.ModExp(123, a3);
		}
	}
	int num12 = ((EClass.rnd(2) == 0) ? 1 : 0); // [!code --]
	int num9 = ((EClass.rnd(2) == 0) ? 1 : 0); // [!code ++]
	if (attackSource == AttackSource.Condition)
	{
		num12 = 1 + EClass.rnd(2); // [!code --]
		num9 = 1 + EClass.rnd(2); // [!code ++]
	}
	if (num12 > 0) // [!code --]
	if (num9 > 0) // [!code ++]
	{
		bool flag = Chara.HasCondition<ConPoison>() || ((e.id == 915 || e.id == 923) && ResistLv(Evalue(955)) < 4);
		AddBlood(num12, flag ? 6 : (-1)); // [!code --]
		AddBlood(num9, flag ? 6 : (-1)); // [!code ++]
	}
	bool flag2 = true;
	switch (e.id)
```

[`@@ -4208,14 +4187,14 @@ public void DamageHP(int dmg, int ele, int eleP = 100, AttackSource attackSource`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L4208-L4221)
```cs:line-numbers=4208
	}
	if (IsPC)
	{
		float num13 = (float)hp / (float)MaxHP; // [!code --]
		float num10 = (float)hp / (float)MaxHP; // [!code ++]
		if (Evalue(1421) > 0)
		{
			num13 = (float)Chara.mana.value / (float)Chara.mana.max; // [!code --]
			num10 = (float)Chara.mana.value / (float)Chara.mana.max; // [!code ++]
		}
		if (num13 < 0.3f) // [!code --]
		if (num10 < 0.3f) // [!code ++]
		{
			PlaySound("heartbeat", 1f - num13 * 2f); // [!code --]
			PlaySound("heartbeat", 1f - num10 * 2f); // [!code ++]
		}
	}
	if (!IsPC && hp < MaxHP / 5 && Evalue(423) <= 0 && dmg * 100 / MaxHP + 10 > EClass.rnd(IsPowerful ? 400 : 150) && !HasCondition<ConFear>())
```

[`@@ -4280,6 +4259,39 @@ void Heal()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L4280-L4285)
```cs:line-numbers=4280
				member.Cure(CureType.Death);
			}
		}
		void ProcAbsorb() // [!code ++]
		{ // [!code ++]
			if (origin != null && origin.isChara && isChara) // [!code ++]
			{ // [!code ++]
				if (origin.HasElement(662) && attackSource == AttackSource.Melee && origin.isChara && Chara.IsHostile(origin as Chara)) // [!code ++]
				{ // [!code ++]
					int num11 = EClass.rnd(3 + Mathf.Clamp(dmg / 100, 0, origin.Evalue(662) / 10)); // [!code ++]
					origin.Chara.stamina.Mod(num11); // [!code ++]
					if (IsAliveInCurrentZone) // [!code ++]
					{ // [!code ++]
						Chara.stamina.Mod(-num11); // [!code ++]
					} // [!code ++]
				} // [!code ++]
				if (origin.HasElement(1350) && attackSource == AttackSource.Melee) // [!code ++]
				{ // [!code ++]
					int num12 = EClass.rndHalf(2 + Mathf.Clamp(dmg / 10, 0, origin.Chara.GetPietyValue() + 10)); // [!code ++]
					origin.Chara.mana.Mod(num12); // [!code ++]
					if (IsAliveInCurrentZone) // [!code ++]
					{ // [!code ++]
						Chara.mana.Mod(-num12); // [!code ++]
					} // [!code ++]
				} // [!code ++]
				if (origin.HasElement(661) && attackSource == AttackSource.Melee) // [!code ++]
				{ // [!code ++]
					int num13 = EClass.rnd(2 + Mathf.Clamp(dmg / 10, 0, origin.Evalue(661) + 10)); // [!code ++]
					origin.Chara.mana.Mod(num13); // [!code ++]
					if (IsAliveInCurrentZone) // [!code ++]
					{ // [!code ++]
						Chara.mana.Mod(-num13); // [!code ++]
					} // [!code ++]
				} // [!code ++]
			} // [!code ++]
		} // [!code ++]
	}

	public virtual void Die(Element e = null, Card origin = null, AttackSource attackSource = AttackSource.None)
```

[`@@ -4742,6 +4754,10 @@ public Card MakeFoodFrom(Card c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L4742-L4747)
```cs:line-numbers=4742
	}
	if (flag2)
	{
		if (c.IsPCFaction && c.IsUnique) // [!code ++]
		{ // [!code ++]
			num = -100; // [!code ++]
		} // [!code ++]
		elements.SetBase(70, race.STR * race.STR / 5 * num / 100 - 10 + num / 10);
		if (flag)
		{
```

[`@@ -4797,6 +4813,10 @@ public Card MakeFoodFrom(Card c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Card.cs#L4797-L4802)
```cs:line-numbers=4797
	{
		num3 += 60;
	}
	if (flag2 && c.IsPCFaction && c.IsUnique) // [!code ++]
	{ // [!code ++]
		num3 = 0; // [!code ++]
	} // [!code ++]
	if (num3 > 0)
	{
		elements.ModBase(2, num3);
```

## CardManager

[`@@ -77,6 +77,13 @@ private void OnDeserialized(StreamingContext context)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/CardManager.cs#L77-L82)
```cs:line-numbers=77

	public void AssignUID(Card c)
	{
		if (globalCharas.ContainsKey(uidNext)) // [!code ++]
		{ // [!code ++]
			while (globalCharas.ContainsKey(uidNext)) // [!code ++]
			{ // [!code ++]
				uidNext++; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		c.uid = uidNext;
		uidNext++;
	}
```

## Chara

[`@@ -6045,6 +6045,7 @@ public override string GetHoverText2()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Chara.cs#L6045-L6050)
```cs:line-numbers=6045
		text2 = text2 + "Global:" + IsGlobal + "  AI:" + ai?.ToString() + " " + source.tactics.IsEmpty(EClass.sources.tactics.map.TryGetValue(id)?.id ?? EClass.sources.tactics.map.TryGetValue(job.id)?.id ?? "predator");
		text2 += Environment.NewLine;
		text2 = text2 + base.uid + IsMinion + "/" + base.c_uidMaster + "/" + master;
		text2 = text2 + " dir:" + base.dir + " skin:" + base.idSkin; // [!code ++]
	}
	string text3 = "";
	IEnumerable<BaseStats> enumerable = conditions.Concat((!IsPCFaction) ? new BaseStats[0] : new BaseStats[2] { hunger, stamina });
```

[`@@ -6093,6 +6094,15 @@ public override string GetHoverText2()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Chara.cs#L6093-L6098)
```cs:line-numbers=6093
				text3 = text3.TrimEnd(", ".ToCharArray()) + "</size>";
			}
		}
		if (EClass.debug.showExtra) // [!code ++]
		{ // [!code ++]
			text3 += Environment.NewLine; // [!code ++]
			foreach (ActList.Item item2 in ability.list.items) // [!code ++]
			{ // [!code ++]
				text3 = text3 + item2.act.Name + ", "; // [!code ++]
			} // [!code ++]
			text3 = text3.TrimEnd(", ".ToCharArray()); // [!code ++]
		} // [!code ++]
		return text + text2 + text3;
	}

```

## CharaAbility

[`@@ -5,10 +5,66 @@ public class CharaAbility : EClass`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/CharaAbility.cs#L5-L14)
```cs:line-numbers=5
{
	public static List<SourceElement.Row> randomAbilities = new List<SourceElement.Row>();

	public static List<SourceElement.Row> randomAbilitiesAdv = new List<SourceElement.Row>(); // [!code ++]
 // [!code ++]
	public Chara owner;

	public ActList list = new ActList();

	public static List<SourceElement.Row> BuildRandomAbilityList(bool adv) // [!code ++]
	{ // [!code ++]
		List<SourceElement.Row> list = new List<SourceElement.Row>(); // [!code ++]
		foreach (SourceElement.Row row in EClass.sources.elements.rows) // [!code ++]
		{ // [!code ++]
			if (row.abilityType.Length == 0 || row.aliasRef == "mold") // [!code ++]
			{ // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			switch (row.id) // [!code ++]
			{ // [!code ++]
			case 5000: // [!code ++]
			case 5001: // [!code ++]
			case 5005: // [!code ++]
			case 5040: // [!code ++]
			case 5048: // [!code ++]
			case 6400: // [!code ++]
			case 6410: // [!code ++]
			case 8200: // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			if (row.idMold != 0 && !adv) // [!code ++]
			{ // [!code ++]
				switch (row.aliasRef) // [!code ++]
				{ // [!code ++]
				case "eleEther": // [!code ++]
				case "eleAcid": // [!code ++]
				case "eleCut": // [!code ++]
				case "eleImpact": // [!code ++]
					continue; // [!code ++]
				} // [!code ++]
			} // [!code ++]
			list.Add(row); // [!code ++]
		} // [!code ++]
		return list; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public List<SourceElement.Row> GetRandomAbilityList() // [!code ++]
	{ // [!code ++]
		if (randomAbilities.Count == 0) // [!code ++]
		{ // [!code ++]
			randomAbilities = BuildRandomAbilityList(adv: false); // [!code ++]
		} // [!code ++]
		if (randomAbilitiesAdv.Count == 0) // [!code ++]
		{ // [!code ++]
			randomAbilitiesAdv = BuildRandomAbilityList(adv: true); // [!code ++]
		} // [!code ++]
		if (!(owner.trait is TraitAdventurer)) // [!code ++]
		{ // [!code ++]
			return randomAbilities; // [!code ++]
		} // [!code ++]
		return randomAbilitiesAdv; // [!code ++]
	} // [!code ++]
 // [!code ++]
	public CharaAbility(Chara _owner)
	{
		owner = _owner;
```

[`@@ -34,14 +90,10 @@ public void Refresh()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/CharaAbility.cs#L34-L47)
```cs:line-numbers=34
		int num = owner.trait.MaxRandomAbility + EClass.rnd(2) - list.items.Count;
		if (num > 1)
		{
			if (randomAbilities.Count == 0) // [!code --]
			{ // [!code --]
				BuildRandomAbilityList(); // [!code --]
			} // [!code --]
			owner._listAbility = new List<int>();
			for (int j = 0; j < num; j++)
			{
				owner._listAbility.Add(randomAbilities.RandomItemWeighted((SourceElement.Row e) => e.chance).id); // [!code --]
				owner._listAbility.Add(GetRandomAbilityList().RandomItemWeighted((SourceElement.Row e) => e.chance).id); // [!code ++]
			}
		}
	}
```

[`@@ -77,22 +129,34 @@ public void BuildRandomAbilityList()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/CharaAbility.cs#L77-L98)
```cs:line-numbers=77
	{
		foreach (SourceElement.Row row in EClass.sources.elements.rows)
		{
			if (row.abilityType.Length != 0 && !(row.aliasRef == "mold")) // [!code --]
			if (row.abilityType.Length == 0 || row.aliasRef == "mold") // [!code ++]
			{ // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			switch (row.id) // [!code ++]
			{ // [!code ++]
			case 5000: // [!code ++]
			case 5001: // [!code ++]
			case 5005: // [!code ++]
			case 5040: // [!code ++]
			case 5048: // [!code ++]
			case 6400: // [!code ++]
			case 6410: // [!code ++]
			case 8200: // [!code ++]
				continue; // [!code ++]
			} // [!code ++]
			if (row.idMold != 0 && !(owner.trait is TraitAdventurer)) // [!code ++]
			{
				switch (row.id) // [!code --]
				switch (row.aliasRef) // [!code ++]
				{
				case 5000: // [!code --]
				case 5001: // [!code --]
				case 5005: // [!code --]
				case 5040: // [!code --]
				case 5048: // [!code --]
				case 6400: // [!code --]
				case 6410: // [!code --]
				case 8200: // [!code --]
				case "eleEther": // [!code ++]
				case "eleAcid": // [!code ++]
				case "eleCut": // [!code ++]
				case "eleImpact": // [!code ++]
					continue;
				}
				randomAbilities.Add(row); // [!code --]
			}
			randomAbilities.Add(row); // [!code ++]
		}
	}

```

[`@@ -112,11 +176,7 @@ public void AddRandom()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/CharaAbility.cs#L112-L122)
```cs:line-numbers=112
		{
			owner._listAbility = new List<int>();
		}
		if (randomAbilities.Count == 0) // [!code --]
		{ // [!code --]
			BuildRandomAbilityList(); // [!code --]
		} // [!code --]
		owner._listAbility.Add(randomAbilities.RandomItemWeighted((SourceElement.Row e) => e.chance).id); // [!code --]
		owner._listAbility.Add(GetRandomAbilityList().RandomItemWeighted((SourceElement.Row e) => e.chance).id); // [!code ++]
		Refresh();
	}

```

## +ConSupress

::: details File Created
```cs
public class ConSupress : BaseDebuff
{
}
```

:::
## CoreDebug

[`@@ -905,7 +905,14 @@ public void UpdateInput()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/CoreDebug.cs#L905-L911)
```cs:line-numbers=905
	}
	if (Input.GetKeyDown(KeyCode.F2))
	{
		EClass.pc.ModCorruption(1); // [!code --]
		Chara targetChara = EClass.scene.mouseTarget.TargetChara; // [!code ++]
		if (targetChara != null) // [!code ++]
		{ // [!code ++]
			EClass.pc.Pick(targetChara.MakeMilk()); // [!code ++]
			EClass.pc.Pick(targetChara.MakeGene()); // [!code ++]
			EClass.pc.Pick(targetChara.MakeBraineCell()); // [!code ++]
			EClass.pc.Pick(targetChara.MakeEgg(effect: true, 10)); // [!code ++]
		} // [!code ++]
		return;
	}
	if (Input.GetKeyDown(KeyCode.F3))
```

[`@@ -1803,6 +1810,49 @@ public static string Fix_EtherDisease()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/CoreDebug.cs#L1803-L1808)
```cs:line-numbers=1803
		return text + "Fixed!";
	}

	[ConsoleCommand("")] // [!code ++]
	public static string Fix_LostCore() // [!code ++]
	{ // [!code ++]
		if (!EClass._zone.IsPCFaction) // [!code ++]
		{ // [!code ++]
			return "Not in base."; // [!code ++]
		} // [!code ++]
		foreach (Thing thing in EClass._map.things) // [!code ++]
		{ // [!code ++]
			if (thing.trait is TraitCoreZone) // [!code ++]
			{ // [!code ++]
				return "Base already has core."; // [!code ++]
			} // [!code ++]
		} // [!code ++]
		if (EClass.pc.things.Find((Thing t) => t.trait is TraitCoreZone) != null) // [!code ++]
		{ // [!code ++]
			return "Player has core."; // [!code ++]
		} // [!code ++]
		EClass._zone.AddCard(ThingGen.Create("core_zone"), EClass._zone.bounds.GetCenterPos().GetNearestPoint()); // [!code ++]
		return "Done."; // [!code ++]
	} // [!code ++]
 // [!code ++]
	[ConsoleCommand("")] // [!code ++]
	public static string Fix_RemoveDemitas() // [!code ++]
	{ // [!code ++]
		List<Chara> list = new List<Chara>(); // [!code ++]
		foreach (Chara value in EClass.game.cards.globalCharas.Values) // [!code ++]
		{ // [!code ++]
			if (value.id == "demitas" && value.currentZone == EClass._zone) // [!code ++]
			{ // [!code ++]
				list.Add(value); // [!code ++]
			} // [!code ++]
		} // [!code ++]
		if (list.Count > 1) // [!code ++]
		{ // [!code ++]
			Chara chara = list[1]; // [!code ++]
			chara.homeBranch.BanishMember(chara); // [!code ++]
			chara.Destroy(); // [!code ++]
			return "Demitas Removed!"; // [!code ++]
		} // [!code ++]
		return "Not enough Demitas!"; // [!code ++]
	} // [!code ++]
 // [!code ++]
	[ConsoleCommand("")]
	public static string ListChara()
	{
```

[`@@ -1980,27 +2030,6 @@ public static string FlyMode()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/CoreDebug.cs#L1980-L2006)
```cs:line-numbers=1980
		return "I can fly!";
	}

	[ConsoleCommand("")] // [!code --]
	public static string RemoveDemitas() // [!code --]
	{ // [!code --]
		List<Chara> list = new List<Chara>(); // [!code --]
		foreach (Chara value in EClass.game.cards.globalCharas.Values) // [!code --]
		{ // [!code --]
			if (value.id == "demitas" && value.currentZone == EClass._zone) // [!code --]
			{ // [!code --]
				list.Add(value); // [!code --]
			} // [!code --]
		} // [!code --]
		if (list.Count > 1) // [!code --]
		{ // [!code --]
			Chara chara = list[1]; // [!code --]
			chara.homeBranch.BanishMember(chara); // [!code --]
			chara.Destroy(); // [!code --]
			return "Demitas Removed!"; // [!code --]
		} // [!code --]
		return "Not enough Demitas!"; // [!code --]
	} // [!code --]
 // [!code --]
	[ConsoleCommand("")]
	public static string ChangeRace(string id = "?")
	{
```

## ELEMENT

[`@@ -21,14 +21,14 @@ public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ELEMENT.cs#L21-L34)
```cs:line-numbers=21

	public const int _void = 0;

	public const int socket = 5; // [!code --]
	public const int quality = 2; // [!code ++]

	public const int lv = 1;

	public const int quality = 2; // [!code --]
 // [!code --]
	public const int d = 3;

	public const int socket = 5; // [!code ++]
 // [!code ++]
	public const int nutrition = 10;

	public const int weight = 11;
```

[`@@ -67,8 +67,8 @@ public class ELEMENT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ELEMENT.cs#L67-L74)
```cs:line-numbers=67

	public static readonly int[] IDS = new int[30]
	{
		753, 755, 751, 750, 756, 754, 752, 0, 5, 1, // [!code --]
		2, 3, 10, 11, 12, 13, 14, 16, 17, 18, // [!code --]
		753, 755, 751, 750, 756, 754, 752, 0, 2, 1, // [!code ++]
		3, 5, 10, 11, 12, 13, 14, 16, 17, 18, // [!code ++]
		15, 21, 22, 23, 24, 25, 26, 29, 85, 20
	};
}
```

[`@@ -923,9 +923,10 @@ public static int GetResistDamage(int dmg, int v, int power = 0)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ELEMENT.cs#L923-L931)
```cs:line-numbers=923
			3 => dmg / 4, 
			2 => dmg / 3, 
			1 => dmg / 2, 
			0 => dmg,  // [!code ++]
			-1 => dmg * 3 / 2, 
			-2 => dmg * 2, 
			_ => dmg,  // [!code --]
			_ => dmg * 2,  // [!code ++]
		};
	}
}
```

## ENC

[`@@ -1,29 +1,35 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ENC.cs#L1-L29)
```cs:line-numbers=1
public class ENC
{
	public const int noDamage = 654; // [!code --]
 // [!code --]
	public const int living = 653; // [!code --]
 // [!code --]
	public const int eco = 652;

	public const int r_PV = 651;

	public const int r_DV = 650; // [!code ++]
 // [!code ++]
	public const int r_mana = 641;

	public const int mod_scatter = 607; // [!code --]
	public const int r_life = 640; // [!code ++]
 // [!code ++]
	public const int mod_flurry = 621; // [!code ++]

	public const int mod_chaser = 620;

	public const int r_life = 640; // [!code --]
	public const int mod_feint = 623; // [!code ++]

	public const int onlyPet = 655; // [!code --]
	public const int mod_cleave = 622; // [!code ++]

	public const int r_DV = 650; // [!code --]
	public const int living = 653; // [!code ++]

	public const int permaCurse = 656; // [!code --]
	public const int mod_frustration = 624; // [!code ++]
 // [!code ++]
	public const int noDamage = 654; // [!code ++]

	public const int convertCold = 851;

	public const int permaCurse = 656; // [!code ++]
 // [!code ++]
	public const int absorbHP = 660; // [!code ++]
 // [!code ++]
	public const int absorbMP = 661;

	public const int absorbSP = 662;
```

[`@@ -38,19 +44,19 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ENC.cs#L38-L56)
```cs:line-numbers=38

	public const int convertFire = 850;

	public const int mod_drill = 606; // [!code --]
	public const int mod_splash = 608; // [!code ++]

	public const int convertImpact = 865;

	public const int convertLightning = 852;

	public const int absorbHP = 660; // [!code --]
	public const int onlyPet = 655; // [!code ++]

	public const int mod_precision = 605; // [!code --]
	public const int mod_scatter = 607; // [!code ++]

	public const int resWeather = 408; // [!code --]
	public const int bane_animal = 463; // [!code ++]

	public const int mod_ammo_knockback = 603; // [!code --]
	public const int mod_precision = 605; // [!code ++]

	public const int breathing = 429;

```

[`@@ -62,7 +68,7 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ENC.cs#L62-L68)
```cs:line-numbers=62

	public const int negateConfusion = 425;

	public const int negateSleep = 424; // [!code --]
	public const int mod_drill = 606; // [!code ++]

	public const int negateFear = 423;

```

[`@@ -74,21 +80,23 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ENC.cs#L74-L94)
```cs:line-numbers=74

	public const int seeInvisible = 416;

	public const int sustain_STR = 440; // [!code --]
 // [!code --]
	public const int invisibility = 415;

	public const int slowCorruption = 412; // [!code ++]
 // [!code ++]
	public const int encSpell = 411;

	public const int throwReturn = 410;

	public const int corruption = 409;

	public const int resWeather = 408; // [!code ++]
 // [!code ++]
	public const int travelSpeed = 407;

	public const int resMutation = 406;

	public const int mod_ammo_recover = 604; // [!code --]
	public const int slowDecay = 405; // [!code ++]

	public const int weightMod = 404;

```

[`@@ -100,22 +108,26 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ENC.cs#L100-L121)
```cs:line-numbers=100

	public const int negateTeleport = 400;

	public const int slowCorruption = 412; // [!code --]
	public const int sustain_STR = 440; // [!code ++]

	public const int sustain_END = 441;

	public const int slowDecay = 405; // [!code --]
	public const int negateSleep = 424; // [!code ++]

	public const int force_weapon = 482; // [!code --]
	public const int mod_ammo = 600; // [!code ++]
 // [!code ++]
	public const int mod_ammo_recover = 604; // [!code ++]
 // [!code ++]
	public const int mod_ammo_knockback = 603; // [!code ++]

	public const int mod_rapid = 602;

	public const int mod_reload = 601;

	public const int mod_ammo = 600; // [!code --]
 // [!code --]
	public const int optimizeMana = 483;

	public const int force_weapon = 482; // [!code ++]
 // [!code ++]
	public const int revealFaith = 481;

	public const int strongStomach = 480;
```

[`@@ -124,15 +136,13 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ENC.cs#L124-L138)
```cs:line-numbers=124

	public const int bane_fish = 467;

	public const int bane_god = 466; // [!code --]
	public const int bane_machine = 465; // [!code ++]

	public const int bane_man = 464;

	public const int bane_animal = 463; // [!code --]
 // [!code --]
	public const int bane_fairy = 462; // [!code --]
	public const int bane_god = 466; // [!code ++]

	public const int bane_machine = 465; // [!code --]
	public const int bane_undead = 461; // [!code ++]

	public const int bane_dragon = 460;

```

[`@@ -144,21 +154,21 @@ public class ENC`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ENC.cs#L144-L164)
```cs:line-numbers=144

	public const int sustain_LER = 444;

	public const int bane_undead = 461; // [!code --]
	public const int bane_fairy = 462; // [!code ++]

	public const int sustain_PER = 443;

	public const int sustain_DEX = 442;

	public static readonly int[] IDS = new int[75] // [!code --]
	public static readonly int[] IDS = new int[80] // [!code ++]
	{
		654, 653, 652, 651, 641, 607, 620, 640, 655, 650, // [!code --]
		656, 851, 661, 662, 663, 664, 665, 666, 850, 606, // [!code --]
		865, 852, 660, 605, 408, 603, 429, 428, 427, 426, // [!code --]
		425, 424, 423, 422, 421, 420, 416, 440, 415, 411, // [!code --]
		410, 409, 407, 406, 604, 404, 403, 402, 401, 400, // [!code --]
		412, 441, 405, 482, 602, 601, 600, 483, 481, 480, // [!code --]
		468, 467, 466, 464, 463, 462, 465, 460, 447, 446, // [!code --]
		445, 444, 461, 443, 442 // [!code --]
		652, 651, 650, 641, 640, 621, 620, 623, 622, 653, // [!code ++]
		624, 654, 851, 656, 660, 661, 662, 663, 664, 665, // [!code ++]
		666, 850, 608, 865, 852, 655, 607, 463, 605, 429, // [!code ++]
		428, 427, 426, 425, 606, 423, 422, 421, 420, 416, // [!code ++]
		415, 412, 411, 410, 409, 408, 407, 406, 405, 404, // [!code ++]
		403, 402, 401, 400, 440, 441, 424, 600, 604, 603, // [!code ++]
		602, 601, 483, 482, 481, 480, 468, 467, 465, 464, // [!code ++]
		466, 461, 460, 447, 446, 445, 444, 462, 443, 442 // [!code ++]
	};
}
```

## FACTION

[`@@ -4,31 +4,31 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FACTION.cs#L4-L34)
```cs:line-numbers=4

public class FACTION
{
	public const int bfBeach = 3604; // [!code ++]
 // [!code ++]
	public const int bfCave = 3500; // [!code ++]
 // [!code ++]
	public const int bfPlain = 3600;

	public const int bfForest = 3601;

	public const int bfSnow = 3602;

	public const int bfRuin = 3702; // [!code --]
 // [!code --]
	public const int bfHill = 3603;

	public const int bfGeyser = 3701; // [!code ++]
 // [!code ++]
	public const int bfFertile = 3700;

	public const int bfSea = 3605;

	public const int bfBeach = 3604; // [!code --]
 // [!code --]
	public const int bfCave = 3500; // [!code --]
 // [!code --]
	public const int bfGeyser = 3701; // [!code --]
 // [!code --]
	public const int fRation = 2207;

	public const int actBuildCollect = 4004; // [!code --]
	public const int bfRuin = 3702; // [!code ++]

	public const int fSafety = 2205; // [!code --]
	public const int fAttraction = 2206; // [!code ++]
 // [!code ++]
	public const int fLoyal = 2117; // [!code ++]

	public const int fFood = 2204;

```

[`@@ -38,37 +38,41 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FACTION.cs#L38-L74)
```cs:line-numbers=38

	public const int fElec = 2201;

	public const int bfTranquil = 3703; // [!code --]
 // [!code --]
	public const int fSoil = 2200;

	public const int fLuck = 2118; // [!code ++]
 // [!code ++]
	public const int fConstruction = 2003; // [!code ++]
 // [!code ++]
	public const int fHeirloom = 2120;

	public const int fTaxEvasion = 2119;

	public const int fLuck = 2118; // [!code --]
	public const int fAdmin = 2115; // [!code ++]

	public const int fLoyal = 2117; // [!code --]
	public const int fEducation = 2116; // [!code ++]

	public const int fAttraction = 2206; // [!code --]
	public const int fSafety = 2205; // [!code ++]

	public const int bfVolcano = 3704; // [!code --]
	public const int bfTranquil = 3703; // [!code ++]

	public const int bfLandmark5 = 3784; // [!code --]
	public const int bfHunt = 3705; // [!code ++]

	public const int bfFish = 3706;

	public const int actBuildInspect = 4006; // [!code ++]
 // [!code ++]
	public const int actBuildRecipe = 4005;

	public const int actBuildInspect = 4006; // [!code --]
	public const int actBuildCollect = 4004; // [!code ++]
 // [!code ++]
	public const int actBuildAnywhere = 4003; // [!code ++]

	public const int actBuildTerrain = 4002;

	public const int actBuildMine = 4001;

	public const int fEducation = 2116; // [!code --]
 // [!code --]
	public const int actBuildCut = 4000; // [!code --]
	public const int bfVolcano = 3704; // [!code ++]

	public const int bfStart = 3900;

```

[`@@ -78,44 +82,40 @@ public class FACTION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FACTION.cs#L78-L121)
```cs:line-numbers=78

	public const int bfGum = 3803;

	public const int bfHunt = 3705; // [!code --]
 // [!code --]
	public const int bfSilica = 3802; // [!code --]
	public const int actBuildCut = 4000; // [!code ++]

	public const int bfCoal = 3800; // [!code --]
	public const int bfMushroom = 3801; // [!code ++]

	public const int actBuildAnywhere = 4003; // [!code --]
	public const int bfSilica = 3802; // [!code ++]

	public const int bfLandmark4 = 3783; // [!code --]
	public const int bfFreshAir = 3708; // [!code ++]

	public const int bfLandmark3 = 3782; // [!code --]
	public const int bfBasin = 3709; // [!code ++]

	public const int bfLandmark2 = 3781; // [!code --]
	public const int bfBreed = 3710; // [!code ++]

	public const int bfLandmark1 = 3780;

	public const int bfBreed = 3710; // [!code --]
 // [!code --]
	public const int bfBasin = 3709; // [!code --]
	public const int bfMonster = 3707; // [!code ++]

	public const int bfFreshAir = 3708; // [!code --]
	public const int bfLandmark3 = 3782; // [!code ++]

	public const int bfMonster = 3707; // [!code --]
	public const int bfLandmark4 = 3783; // [!code ++]

	public const int bfMushroom = 3801; // [!code --]
	public const int bfLandmark5 = 3784; // [!code ++]

	public const int fAdmin = 2115; // [!code --]
	public const int bfCoal = 3800; // [!code ++]

	public const int fConstruction = 2003; // [!code --]
	public const int bfLandmark2 = 3781; // [!code ++]

	public static readonly int[] IDS = new int[52]
	{
		3600, 3601, 3602, 3702, 3603, 3700, 3605, 3604, 3500, 3701, // [!code --]
		2207, 4004, 2205, 2204, 2203, 2202, 2201, 3703, 2200, 2120, // [!code --]
		2119, 2118, 2117, 2206, 3704, 3784, 3706, 4005, 4006, 4002, // [!code --]
		4001, 2116, 4000, 3900, 3805, 3804, 3803, 3705, 3802, 3800, // [!code --]
		4003, 3783, 3782, 3781, 3780, 3710, 3709, 3708, 3707, 3801, // [!code --]
		2115, 2003 // [!code --]
		3604, 3500, 3600, 3601, 3602, 3603, 3701, 3700, 3605, 2207, // [!code ++]
		3702, 2206, 2117, 2204, 2203, 2202, 2201, 2200, 2118, 2003, // [!code ++]
		2120, 2119, 2115, 2116, 2205, 3703, 3705, 3706, 4006, 4005, // [!code ++]
		4004, 4003, 4002, 4001, 3704, 3900, 3805, 3804, 3803, 4000, // [!code ++]
		3801, 3802, 3708, 3709, 3710, 3780, 3707, 3782, 3783, 3784, // [!code ++]
		3800, 3781 // [!code ++]
	};
}
public class Faction : EClass
```

## FEAT

[`@@ -3,34 +3,16 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FEAT.cs#L3-L36)
```cs:line-numbers=3

public class FEAT
{
	public const int featSnail = 1211; // [!code --]
 // [!code --]
	public const int featFaith = 1636; // [!code --]
 // [!code --]
	public const int featMartial = 1635; // [!code --]
 // [!code --]
	public const int featNegotiate = 1634; // [!code --]
 // [!code --]
	public const int featSpotting = 1633; // [!code --]
 // [!code --]
	public const int featEvade = 1632; // [!code --]
 // [!code --]
	public const int featDefense = 1631; // [!code --]
 // [!code --]
	public const int featHardy = 1630; // [!code --]
 // [!code --]
	public const int featSPD = 1629; // [!code --]
 // [!code --]
	public const int featLuck = 1628;

	public const int featCHA = 1627;

	public const int featWIL = 1626;

	public const int featAnimalLover = 1640; // [!code --]
 // [!code --]
	public const int featMAG = 1625;

	public const int featLER = 1624; // [!code ++]
 // [!code ++]
	public const int featPER = 1623;

	public const int featEND = 1622;
```

[`@@ -41,7 +23,7 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FEAT.cs#L41-L47)
```cs:line-numbers=41

	public const int featStamina = 1612;

	public const int featMana = 1611; // [!code --]
	public const int featLuckyCat = 1412; // [!code ++]

	public const int featLife = 1610;

```

[`@@ -53,39 +35,31 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FEAT.cs#L53-L91)
```cs:line-numbers=53

	public const int featSwordsage = 1418;

	public const int featLER = 1624; // [!code --]
 // [!code --]
	public const int featResCurse = 1641; // [!code --]
 // [!code --]
	public const int featSleeper = 1642; // [!code --]
 // [!code --]
	public const int featSorter = 1643; // [!code --]
 // [!code --]
	public const int featUndead = 1210; // [!code --]
	public const int featWitch = 1417; // [!code ++]

	public const int featSlowFood = 1200; // [!code --]
	public const int featInquisitor = 1416; // [!code ++]

	public const int featManaBond = 1201; // [!code --]
	public const int featFoxMaid = 1415; // [!code ++]

	public const int featFastLearner = 1202; // [!code --]
	public const int featWhiteVixen = 1414; // [!code ++]

	public const int featGrowParts = 1203; // [!code --]
	public const int featFairysan = 1413; // [!code ++]

	public const int featFairyWeak = 1204; // [!code --]
	public const int featSPD = 1629; // [!code ++]

	public const int featCannibalism = 1205; // [!code --]
	public const int featMana = 1611; // [!code ++]

	public const int featMelilithCurse = 1206; // [!code --]
	public const int featHardy = 1630; // [!code ++]

	public const int featFoxBless = 1207; // [!code --]
	public const int featParty = 1645; // [!code ++]

	public const int featFoxLearn = 1208; // [!code --]
	public const int featEvade = 1632; // [!code ++]

	public const int featFluffyTail = 1209; // [!code --]
	public const int featEarthStrength = 1411; // [!code ++]

	public const int featChef = 1658;

	public const int featScavenger = 1656; // [!code --]
	public const int featManaCost = 1657; // [!code ++]

	public const int featModelBeliever = 1655;

```

[`@@ -101,23 +75,57 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FEAT.cs#L101-L123)
```cs:line-numbers=101

	public const int featDefender = 1649;

	public const int featDefense = 1631; // [!code ++]
 // [!code ++]
	public const int featRapidMagic = 1648;

	public const int featLonelySoul = 1646; // [!code ++]
 // [!code ++]
	public const int featBodyParts = 1644; // [!code ++]
 // [!code ++]
	public const int featSorter = 1643; // [!code ++]
 // [!code ++]
	public const int featSleeper = 1642; // [!code ++]
 // [!code ++]
	public const int featResCurse = 1641; // [!code ++]
 // [!code ++]
	public const int featAnimalLover = 1640; // [!code ++]
 // [!code ++]
	public const int featFaith = 1636; // [!code ++]
 // [!code ++]
	public const int featMartial = 1635; // [!code ++]
 // [!code ++]
	public const int featNegotiate = 1634; // [!code ++]
 // [!code ++]
	public const int featSpotting = 1633; // [!code ++]
 // [!code ++]
	public const int featSummoner = 1647;

	public const int featLonelySoul = 1646; // [!code --]
	public const int featReboot = 1410; // [!code ++]

	public const int featParty = 1645; // [!code --]
	public const int featScavenger = 1656; // [!code ++]

	public const int featBodyParts = 1644; // [!code --]
	public const int featPaladin2 = 1408; // [!code ++]

	public const int featWitch = 1417; // [!code --]
	public const int featShiva = 1224; // [!code ++]

	public const int featInquisitor = 1416; // [!code --]
	public const int featLoyal = 1225; // [!code ++]

	public const int featManaCost = 1657; // [!code --]
	public const int featUnderground = 1226; // [!code ++]

	public const int featWhiteVixen = 1414; // [!code --]
	public const int featServant = 1227; // [!code ++]
 // [!code ++]
	public const int featDemigod = 1228; // [!code ++]
 // [!code ++]
	public const int featLittleOne = 1229; // [!code ++]
 // [!code ++]
	public const int featAdam = 1230; // [!code ++]
 // [!code ++]
	public const int featNirvana = 1231; // [!code ++]
 // [!code ++]
	public const int featCosmicHorror = 1233; // [!code ++]
 // [!code ++]
	public const int featHeavyEater = 1234; // [!code ++]

	public const int featLightEater = 1235;

```

[`@@ -131,6 +139,8 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FEAT.cs#L131-L136)
```cs:line-numbers=131

	public const int featGod_earth1 = 1305;

	public const int featGod_wind1 = 1310; // [!code ++]
 // [!code ++]
	public const int featGod_machine1 = 1315;

	public const int featGod_healing1 = 1320;
```

[`@@ -139,33 +149,41 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FEAT.cs#L139-L171)
```cs:line-numbers=139

	public const int featGod_luck1 = 1330;

	public const int featAcidBody = 1223; // [!code ++]
 // [!code ++]
	public const int featGod_harmony1 = 1335;

	public const int featGod_oblivion1 = 1340; // [!code --]
	public const int featSplit = 1222; // [!code ++]

	public const int featGod_trickery1 = 1345; // [!code --]
	public const int featFate = 1220; // [!code ++]

	public const int featGod_moonshadow1 = 1350; // [!code --]
	public const int featBoost = 1409; // [!code ++]

	public const int featGod_strife1 = 1355; // [!code --]
	public const int featSlowFood = 1200; // [!code ++]

	public const int featWarrior = 1400; // [!code --]
	public const int featManaBond = 1201; // [!code ++]

	public const int featThief = 1401; // [!code --]
	public const int featFastLearner = 1202; // [!code ++]

	public const int featWizard = 1402; // [!code --]
	public const int featGrowParts = 1203; // [!code ++]

	public const int featFarmer = 1403; // [!code --]
	public const int featFairyWeak = 1204; // [!code ++]

	public const int featHeavyEater = 1234; // [!code --]
	public const int featCannibalism = 1205; // [!code ++]

	public const int featCosmicHorror = 1233; // [!code --]
	public const int featMelilithCurse = 1206; // [!code ++]

	public const int featBaby = 1232; // [!code --]
	public const int featFoxBless = 1207; // [!code ++]

	public const int featNirvana = 1231; // [!code --]
	public const int featFoxLearn = 1208; // [!code ++]

	public const int featFoxMaid = 1415; // [!code --]
	public const int featFluffyTail = 1209; // [!code ++]
 // [!code ++]
	public const int featUndead = 1210; // [!code ++]
 // [!code ++]
	public const int featSnail = 1211; // [!code ++]
 // [!code ++]
	public const int featFairyResist = 1212; // [!code ++]

	public const int featElea = 1213;

```

[`@@ -181,66 +199,48 @@ public class FEAT`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FEAT.cs#L181-L246)
```cs:line-numbers=181

	public const int featElderCrab = 1219;

	public const int featFate = 1220; // [!code --]
 // [!code --]
	public const int featArcher = 1404; // [!code --]
 // [!code --]
	public const int featSpike = 1221;

	public const int featAcidBody = 1223; // [!code --]
 // [!code --]
	public const int featFairyResist = 1212; // [!code --]
	public const int featGod_oblivion1 = 1340; // [!code ++]

	public const int featShiva = 1224; // [!code --]
	public const int featBaby = 1232; // [!code ++]

	public const int featLoyal = 1225; // [!code --]
	public const int featGod_moonshadow1 = 1350; // [!code ++]

	public const int featUnderground = 1226; // [!code --]
	public const int featGod_trickery1 = 1345; // [!code ++]

	public const int featServant = 1227; // [!code --]
	public const int featGod_strife1 = 1355; // [!code ++]

	public const int featDemigod = 1228; // [!code --]
	public const int featWarrior = 1400; // [!code ++]

	public const int featLittleOne = 1229; // [!code --]
	public const int featThief = 1401; // [!code ++]

	public const int featAdam = 1230; // [!code --]
	public const int featFarmer = 1403; // [!code ++]

	public const int featSplit = 1222; // [!code --]
	public const int featArcher = 1404; // [!code ++]

	public const int featPianist = 1405;

	public const int featGod_wind1 = 1310; // [!code --]
 // [!code --]
	public const int featPaladin = 1407; // [!code --]
 // [!code --]
	public const int featTourist = 1406;

	public const int featEarthStrength = 1411; // [!code --]
 // [!code --]
	public const int featLuckyCat = 1412; // [!code --]
 // [!code --]
	public const int featReboot = 1410; // [!code --]
 // [!code --]
	public const int featFairysan = 1413; // [!code --]
 // [!code --]
	public const int featBoost = 1409; // [!code --]
	public const int featWizard = 1402; // [!code ++]

	public const int featPaladin2 = 1408; // [!code --]
	public const int featPaladin = 1407; // [!code ++]

	public static readonly int[] IDS = new int[112]
	{
		1211, 1636, 1635, 1634, 1633, 1632, 1631, 1630, 1629, 1628, // [!code --]
		1627, 1626, 1640, 1625, 1623, 1622, 1621, 1620, 1612, 1611, // [!code --]
		1610, 1421, 1420, 1419, 1418, 1624, 1641, 1642, 1643, 1210, // [!code --]
		1200, 1201, 1202, 1203, 1204, 1205, 1206, 1207, 1208, 1209, // [!code --]
		1658, 1656, 1655, 1654, 1653, 1652, 1651, 1650, 1649, 1648, // [!code --]
		1647, 1646, 1645, 1644, 1417, 1416, 1657, 1414, 1235, 1236, // [!code --]
		1237, 1238, 1300, 1305, 1315, 1320, 1325, 1330, 1335, 1340, // [!code --]
		1345, 1350, 1355, 1400, 1401, 1402, 1403, 1234, 1233, 1232, // [!code --]
		1231, 1415, 1213, 1214, 1215, 1216, 1217, 1218, 1219, 1220, // [!code --]
		1404, 1221, 1223, 1212, 1224, 1225, 1226, 1227, 1228, 1229, // [!code --]
		1230, 1222, 1405, 1310, 1407, 1406, 1411, 1412, 1410, 1413, // [!code --]
		1409, 1408 // [!code --]
		1628, 1627, 1626, 1625, 1624, 1623, 1622, 1621, 1620, 1612, // [!code ++]
		1412, 1610, 1421, 1420, 1419, 1418, 1417, 1416, 1415, 1414, // [!code ++]
		1413, 1629, 1611, 1630, 1645, 1632, 1411, 1658, 1657, 1655, // [!code ++]
		1654, 1653, 1652, 1651, 1650, 1649, 1631, 1648, 1646, 1644, // [!code ++]
		1643, 1642, 1641, 1640, 1636, 1635, 1634, 1633, 1647, 1410, // [!code ++]
		1656, 1408, 1224, 1225, 1226, 1227, 1228, 1229, 1230, 1231, // [!code ++]
		1233, 1234, 1235, 1236, 1237, 1238, 1300, 1305, 1310, 1315, // [!code ++]
		1320, 1325, 1330, 1223, 1335, 1222, 1220, 1409, 1200, 1201, // [!code ++]
		1202, 1203, 1204, 1205, 1206, 1207, 1208, 1209, 1210, 1211, // [!code ++]
		1212, 1213, 1214, 1215, 1216, 1217, 1218, 1219, 1221, 1340, // [!code ++]
		1232, 1350, 1345, 1355, 1400, 1401, 1403, 1404, 1405, 1406, // [!code ++]
		1402, 1407 // [!code ++]
	};
}
public class Feat : Element
```

## FOOD

[`@@ -1,22 +1,22 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/FOOD.cs#L1-L22)
```cs:line-numbers=1
public class FOOD
{
	public const int justcooked = 757; // [!code --]
 // [!code --]
	public const int loseWeight = 706; // [!code --]
	public const int food_poison = 702; // [!code ++]

	public const int gainWeight = 705; // [!code --]
	public const int food_love = 703; // [!code ++]

	public const int food_bug = 704;

	public const int food_love = 703; // [!code --]
	public const int gainWeight = 705; // [!code ++]

	public const int food_poison = 702; // [!code --]
	public const int loseWeight = 706; // [!code ++]

	public const int food_cat = 701; // [!code --]
	public const int justcooked = 757; // [!code ++]

	public const int food_god = 758;

	public const int food_cat = 701; // [!code ++]
 // [!code ++]
	public const int food_CHA = 700;

	public static readonly int[] IDS = new int[9] { 757, 706, 705, 704, 703, 702, 701, 758, 700 }; // [!code --]
	public static readonly int[] IDS = new int[9] { 702, 703, 704, 705, 706, 757, 758, 701, 700 }; // [!code ++]
}
```

## GoalCombat

[`@@ -461,6 +461,7 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/GoalCombat.cs#L461-L466)
```cs:line-numbers=461
	bool flag3 = owner.HasCondition<ConFear>();
	bool isConfused = owner.isConfused;
	bool flag4 = owner.HasCondition<ConDim>();
	bool flag5 = owner.HasCondition<ConSupress>(); // [!code ++]
	foreach (ItemAbility ability in abilities)
	{
		Act act = ability.act;
```

[`@@ -478,7 +479,7 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/GoalCombat.cs#L478-L484)
```cs:line-numbers=478
			continue;
		}
		string text = s.abilityType[0];
		if (id == 6602 && (dist <= 1 || tc.HasCondition<ConEntangle>())) // [!code --]
		if ((flag5 && !(text == "melee") && !(text == "range") && EClass.rnd(2) == 0) || (id == 6602 && (dist <= 1 || tc.HasCondition<ConEntangle>()))) // [!code ++]
		{
			continue;
		}
```

[`@@ -497,9 +498,9 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/GoalCombat.cs#L497-L505)
```cs:line-numbers=497
			break;
		case "taunt":
		{
			bool flag6 = owner.HasCondition<StanceTaunt>(); // [!code --]
			bool flag7 = tactics.source.taunt != -1 && 100 * owner.hp / owner.MaxHP >= tactics.source.taunt; // [!code --]
			num = ((flag6 && !flag7) ? 100 : ((!flag6 && flag7) ? 100 : 0)); // [!code --]
			bool flag7 = owner.HasCondition<StanceTaunt>(); // [!code ++]
			bool flag8 = tactics.source.taunt != -1 && 100 * owner.hp / owner.MaxHP >= tactics.source.taunt; // [!code ++]
			num = ((flag7 && !flag8) ? 100 : ((!flag7 && flag8) ? 100 : 0)); // [!code ++]
			break;
		}
		case "melee":
```

[`@@ -578,13 +579,13 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/GoalCombat.cs#L578-L590)
```cs:line-numbers=578
			{
				continue;
			}
			bool flag8 = text == "dot"; // [!code --]
			if (flag8 && (owner.isRestrained || (tc != null && tc.IsRestrainedResident))) // [!code --]
			bool flag9 = text == "dot"; // [!code ++]
			if (flag9 && (owner.isRestrained || (tc != null && tc.IsRestrainedResident))) // [!code ++]
			{
				continue;
			}
			num = ((text == "attackMelee") ? tactics.P_Melee : tactics.P_Spell) + GetAttackMod(act);
			if (num > 0 && flag8) // [!code --]
			if (num > 0 && flag9) // [!code ++]
			{
				num += 10;
			}
```

[`@@ -596,13 +597,13 @@ public virtual bool TryUseAbility(int dist, bool beforeMove = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/GoalCombat.cs#L596-L608)
```cs:line-numbers=596
			{
				continue;
			}
			bool flag5 = ability.act is ActBolt; // [!code --]
			bool flag6 = ability.act is ActBolt; // [!code ++]
			if (!flag || (owner.IsPCParty && (EClass._zone.IsTown || EClass._zone.IsPCFaction)) || (act.id == 9150 && EClass._zone.IsPCFaction && owner.IsNeutralOrAbove()))
			{
				continue;
			}
			GetNumEnemy(flag5 ? 6 : 5); // [!code --]
			if (numEnemy == 0 || (owner.IsPCFactionOrMinion && GetNumNeutral(flag5 ? 6 : 5) > 0)) // [!code --]
			GetNumEnemy(flag6 ? 6 : 5); // [!code ++]
			if (numEnemy == 0 || (owner.IsPCFactionOrMinion && GetNumNeutral(flag6 ? 6 : 5) > 0)) // [!code ++]
			{
				continue;
			}
```

## GrowSystem

[`@@ -614,7 +614,7 @@ public void PopHarvest(Chara c, Thing t = null, int num = -1)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/GrowSystem.cs#L614-L620)
```cs:line-numbers=614
		{
			if (!EClass.player.isAutoFarming)
			{
				c.Say("cropSpoiled", c, cell.GetObjName()); // [!code --]
				c?.Say("cropSpoiled", c, cell.GetObjName()); // [!code ++]
			}
			return;
		}
```

## HitSummary

[`@@ -59,15 +59,34 @@ public bool CanExecute()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/HitSummary.cs#L59-L73)
```cs:line-numbers=59
	{
		if (!recipe.UseStock)
		{
			Dictionary<Thing, int> dictionary = new Dictionary<Thing, int>(); // [!code ++]
			foreach (Recipe.Ingredient ingredient in recipe.ingredients)
			{
				if (!ingredient.optional) // [!code --]
				if (ingredient.thing != null) // [!code ++]
				{
					if (ingredient.thing == null) // [!code --]
					if (!dictionary.ContainsKey(ingredient.thing)) // [!code ++]
					{ // [!code ++]
						dictionary.Add(ingredient.thing, 0); // [!code ++]
					} // [!code ++]
					dictionary[ingredient.thing] += ingredient.req * countValid; // [!code ++]
				} // [!code ++]
			} // [!code ++]
			foreach (KeyValuePair<Thing, int> item in dictionary) // [!code ++]
			{ // [!code ++]
				if (item.Key.Num < item.Value) // [!code ++]
				{ // [!code ++]
					return false; // [!code ++]
				} // [!code ++]
			} // [!code ++]
			foreach (Recipe.Ingredient ingredient2 in recipe.ingredients) // [!code ++]
			{ // [!code ++]
				if (!ingredient2.optional) // [!code ++]
				{ // [!code ++]
					if (ingredient2.thing == null) // [!code ++]
					{
						return false;
					}
					if (ingredient.thing.Num < ingredient.req * countValid) // [!code --]
					if (ingredient2.thing.Num < ingredient2.req * countValid) // [!code ++]
					{
						return false;
					}
```

## Hobby

[`@@ -30,17 +30,18 @@ public int GetLv(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Hobby.cs#L30-L46)
```cs:line-numbers=30
public int GetEfficiency(Chara c)
{
	int num = 50;
	if (c.homeBranch == null || c.currentZone != c.homeBranch.owner) // [!code --]
	FactionBranch factionBranch = ((c.currentZone == null) ? EClass._zone.branch : c.homeBranch); // [!code ++]
	if (factionBranch == null || (c.currentZone != null && c.currentZone != factionBranch.owner)) // [!code ++]
	{
		return 0;
	}
	if (c.currentZone == EClass._zone) // [!code --]
	if (c.currentZone == null || c.currentZone == EClass._zone) // [!code ++]
	{
		if ((!source.destTrait.IsEmpty() || !source.workTag.IsEmpty()) && !GetAI(c).SetDestination())
		{
			return 0;
		}
		if (c.noMove && c.pos.FindThing<TraitGeneratorWheel>() != null) // [!code --]
		if (c.noMove && c.pos != null && c.pos.FindThing<TraitGeneratorWheel>() != null) // [!code ++]
		{
			return 0;
		}
```

[`@@ -62,7 +63,7 @@ public int GetEfficiency(Chara c)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Hobby.cs#L62-L68)
```cs:line-numbers=62
	{
		num += c.affinity.value;
	}
	num = num * (100 + c.homeBranch.Evalue(3708) * 10) / 100; // [!code --]
	num = num * (100 + factionBranch.Evalue(3708) * 10) / 100; // [!code ++]
	if (num >= 0)
	{
		return num;
```

## ListPeopleCallReserve

[`@@ -8,40 +8,40 @@ public class ListPeopleCallReserve : BaseListPeople`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/ListPeopleCallReserve.cs#L8-L47)
```cs:line-numbers=8
	public override void OnInstantiate(Chara a, ItemGeneral b)
	{
		b.SetSubText(a.job.GetName().ToTitleCase(), 280);
		if (!a.trait.CanBeBanished) // [!code --]
		if (a.trait.CanBeBanished) // [!code ++]
		{
			return; // [!code --]
		} // [!code --]
		b.AddSubButton(EClass.core.refs.icons.trash, delegate // [!code --]
		{ // [!code --]
			Action func = delegate // [!code --]
			{ // [!code --]
				EClass.Home.RemoveReserve(a); // [!code --]
				a.OnBanish(); // [!code --]
				list.List(); // [!code --]
				SE.Trash(); // [!code --]
			}; // [!code --]
			if (skipDialog) // [!code --]
			b.AddSubButton(EClass.core.refs.icons.trash, delegate // [!code ++]
			{
				func(); // [!code --]
			} // [!code --]
			else // [!code --]
			{ // [!code --]
				Dialog.Choice("dialogDeleteRecruit", delegate(Dialog d) // [!code --]
				Action func = delegate // [!code ++]
				{
					d.AddButton("yes".lang(), delegate // [!code --]
					{ // [!code --]
						func(); // [!code --]
					}); // [!code --]
					d.AddButton("yesAndSkip".lang(), delegate // [!code --]
					EClass.Home.RemoveReserve(a); // [!code ++]
					a.OnBanish(); // [!code ++]
					list.List(); // [!code ++]
					SE.Trash(); // [!code ++]
				}; // [!code ++]
				if (skipDialog) // [!code ++]
				{ // [!code ++]
					func(); // [!code ++]
				} // [!code ++]
				else // [!code ++]
				{ // [!code ++]
					Dialog.Choice("dialogDeleteRecruit", delegate(Dialog d) // [!code ++]
					{
						func(); // [!code --]
						skipDialog = true; // [!code --]
						d.AddButton("yes".lang(), delegate // [!code ++]
						{ // [!code ++]
							func(); // [!code ++]
						}); // [!code ++]
						d.AddButton("yesAndSkip".lang(), delegate // [!code ++]
						{ // [!code ++]
							func(); // [!code ++]
							skipDialog = true; // [!code ++]
						}); // [!code ++]
						d.AddButton("no".lang()); // [!code ++]
					});
					d.AddButton("no".lang()); // [!code --]
				}); // [!code --]
			} // [!code --]
		}); // [!code --]
				} // [!code ++]
			}); // [!code ++]
		} // [!code ++]
		AddSubButtonWork(b, a); // [!code ++]
	}

	public override void OnClick(Chara c, ItemGeneral i)
```

## MUTATION

[`@@ -1,40 +1,32 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/MUTATION.cs#L1-L40)
```cs:line-numbers=1
public class MUTATION
{
	public const int mutationStr = 1520; // [!code --]
 // [!code --]
	public const int mutationSpeedN = 1519; // [!code --]
 // [!code --]
	public const int mutationSpeed = 1518; // [!code --]
 // [!code --]
	public const int mutationRegenN = 1517; // [!code --]
 // [!code --]
	public const int mutationSkinN = 1511; // [!code --]
	public const int mutationRegen = 1516; // [!code ++]

	public const int mutationDexN = 1515;

	public const int mutationEyeN = 1513; // [!code --]
 // [!code --]
	public const int mutationEye = 1512; // [!code --]
	public const int mutationDex = 1514; // [!code ++]

	public const int mutationSkin = 1510;

	public const int mutationStrN = 1521; // [!code --]
	public const int mutationEye = 1512; // [!code ++]

	public const int mutationRegen = 1516; // [!code --]
	public const int mutationSkinN = 1511; // [!code ++]

	public const int mutationCha = 1522; // [!code --]
	public const int mutationRegenN = 1517; // [!code ++]

	public const int mutationDex = 1514; // [!code --]
	public const int mutationEyeN = 1513; // [!code ++]

	public const int mutationBrain = 1524; // [!code --]
	public const int mutationSpeed = 1518; // [!code ++]

	public const int etherPoisonHand = 1565;

	public const int mutationChaN = 1523; // [!code --]
	public const int mutationStr = 1520; // [!code ++]
 // [!code ++]
	public const int etherManaBattery = 1564; // [!code ++]

	public const int etherProvoke = 1563;

	public const int etherArmor = 1562; // [!code --]
	public const int mutationSpeedN = 1519; // [!code ++]

	public const int etherStupid = 1561;

```

[`@@ -52,36 +44,44 @@ public class MUTATION`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/MUTATION.cs#L52-L87)
```cs:line-numbers=52

	public const int etherWing = 1554;

	public const int etherManaBattery = 1564; // [!code --]
 // [!code --]
	public const int etherEye = 1553;

	public const int etherFeet = 1552;

	public const int etherUgly = 1551; // [!code --]
	public const int etherArmor = 1562; // [!code ++]

	public const int etherGravity = 1550; // [!code --]
	public const int mutationCha = 1522; // [!code ++]

	public const int mutationBodyN = 1531; // [!code --]
	public const int mutationStrN = 1521; // [!code ++]

	public const int mutationBody = 1530; // [!code --]
	public const int mutationChaN = 1523; // [!code ++]

	public const int mutationLightningN = 1529; // [!code --]
	public const int mutationBrain = 1524; // [!code ++]

	public const int mutationLightning = 1528; // [!code --]
	public const int mutationCold = 1526; // [!code ++]

	public const int mutationColdN = 1527;

	public const int mutationCold = 1526; // [!code --]
 // [!code --]
	public const int mutationBrainN = 1525;

	public const int mutationLightningN = 1529; // [!code ++]
 // [!code ++]
	public const int mutationBody = 1530; // [!code ++]
 // [!code ++]
	public const int mutationBodyN = 1531; // [!code ++]
 // [!code ++]
	public const int etherGravity = 1550; // [!code ++]
 // [!code ++]
	public const int mutationLightning = 1528; // [!code ++]
 // [!code ++]
	public const int etherUgly = 1551; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[38]
	{
		1520, 1519, 1518, 1517, 1511, 1515, 1513, 1512, 1510, 1521, // [!code --]
		1516, 1522, 1514, 1524, 1565, 1523, 1563, 1562, 1561, 1560, // [!code --]
		1559, 1558, 1557, 1556, 1555, 1554, 1564, 1553, 1552, 1551, // [!code --]
		1550, 1531, 1530, 1529, 1528, 1527, 1526, 1525 // [!code --]
		1516, 1515, 1514, 1510, 1512, 1511, 1517, 1513, 1518, 1565, // [!code ++]
		1520, 1564, 1563, 1519, 1561, 1560, 1559, 1558, 1557, 1556, // [!code ++]
		1555, 1554, 1553, 1552, 1562, 1522, 1521, 1523, 1524, 1526, // [!code ++]
		1527, 1525, 1529, 1530, 1531, 1550, 1528, 1551 // [!code ++]
	};
}
public class Mutation : Feat
```

## POLICY

[`@@ -3,27 +3,29 @@`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/POLICY.cs#L3-L29)
```cs:line-numbers=3

public class POLICY
{
	public const int bed_quality = 2812; // [!code ++]
 // [!code ++]
	public const int platinum_ticket = 2815;

	public const int mass_exhibition = 2814;

	public const int suite_room = 2813;

	public const int livestock_priv = 2715; // [!code --]
 // [!code --]
	public const int tourist_safety = 2811; // [!code --]
	public const int forcePanty = 2712; // [!code ++]

	public const int open_business = 2810;

	public const int home_discount = 2800;

	public const int livestock_priv = 2715; // [!code ++]
 // [!code ++]
	public const int store_ripoff = 2816;

	public const int bed_quality = 2812; // [!code --]
	public const int tourist_safety = 2811; // [!code ++]

	public const int store_premium = 2817;

	public const int celeb = 2822; // [!code --]
	public const int license_stolen = 2824; // [!code ++]

	public const int license_furniture = 2819;

```

[`@@ -31,12 +33,10 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/POLICY.cs#L31-L42)
```cs:line-numbers=31

	public const int legendary_heirloom = 2821;

	public const int forcePanty = 2712; // [!code --]
	public const int celeb = 2822; // [!code ++]

	public const int legendary_exhibition = 2823;

	public const int license_stolen = 2824; // [!code --]
 // [!code --]
	public const int milk_fan = 2825;

	public const int egg_fan = 2826;
```

[`@@ -49,7 +49,7 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/POLICY.cs#L49-L55)
```cs:line-numbers=49

	public const int incomeTransfer = 2711;

	public const int self_sufficient = 2511; // [!code --]
	public const int nocturnal_life = 2508; // [!code ++]

	public const int noAnimal = 2709;

```

[`@@ -57,39 +57,37 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/POLICY.cs#L57-L95)
```cs:line-numbers=57

	public const int wealth_tax = 2500;

	public const int impressment = 2504; // [!code ++]
 // [!code ++]
	public const int prohibition = 2503;

	public const int food_for_people = 2502;

	public const int faith_tax = 2501; // [!code --]
 // [!code --]
	public const int impressment = 2504; // [!code --]
 // [!code --]
	public const int legal_drug = 2505;

	public const int inquisition = 2507; // [!code --]
	public const int human_right = 2506; // [!code ++]

	public const int nocturnal_life = 2508; // [!code --]
	public const int faith_tax = 2501; // [!code ++]

	public const int vaccination = 2509;

	public const int ban_radio = 2510;

	public const int self_sufficient = 2511; // [!code ++]
 // [!code ++]
	public const int resident_tax = 2512;

	public const int human_right = 2506; // [!code --]
	public const int inquisition = 2507; // [!code ++]

	public const int taxfree = 2514;

	public const int auto_farm = 2707;

	public const int resident_wanted = 2513; // [!code --]
 // [!code --]
	public const int demon_invocation = 2706;

	public const int taxTransfer = 2705; // [!code --]
	public const int resident_wanted = 2513; // [!code ++]

	public const int noDM = 2708; // [!code --]
	public const int taxTransfer = 2705; // [!code ++]

	public const int weed_no = 2703;

```

[`@@ -105,14 +103,16 @@ public class POLICY`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/POLICY.cs#L105-L118)
```cs:line-numbers=105

	public const int trash_no = 2702;

	public const int noDM = 2708; // [!code ++]
 // [!code ++]
	public static readonly int[] IDS = new int[51]
	{
		2815, 2814, 2813, 2715, 2811, 2810, 2800, 2816, 2812, 2817, // [!code --]
		2822, 2819, 2820, 2821, 2712, 2823, 2824, 2825, 2826, 2827, // [!code --]
		2828, 2818, 2711, 2511, 2709, 2710, 2500, 2503, 2502, 2501, // [!code --]
		2504, 2505, 2507, 2508, 2509, 2510, 2512, 2506, 2514, 2707, // [!code --]
		2513, 2706, 2705, 2708, 2703, 2704, 2701, 2700, 2516, 2515, // [!code --]
		2702 // [!code --]
		2812, 2815, 2814, 2813, 2712, 2810, 2800, 2715, 2816, 2811, // [!code ++]
		2817, 2824, 2819, 2820, 2821, 2822, 2823, 2825, 2826, 2827, // [!code ++]
		2828, 2818, 2711, 2508, 2709, 2710, 2500, 2504, 2503, 2502, // [!code ++]
		2505, 2506, 2501, 2509, 2510, 2511, 2512, 2507, 2514, 2707, // [!code ++]
		2706, 2513, 2705, 2703, 2704, 2701, 2700, 2516, 2515, 2702, // [!code ++]
		2708 // [!code ++]
	};
}
public class Policy : EClass
```

## Religion

[`@@ -276,7 +276,7 @@ public bool IsValidArtifact(string id)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Religion.cs#L276-L282)
```cs:line-numbers=276
		};
	}

	public static void Reforge(string id, Point pos = null, bool first = true) // [!code --]
	public static Thing Reforge(string id, Point pos = null, bool first = true) // [!code ++]
	{
		if (pos == null)
		{
```

[`@@ -376,6 +376,7 @@ public static void Reforge(string id, Point pos = null, bool first = true)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Religion.cs#L376-L381)
```cs:line-numbers=376
		{
			pos.PlaySound("godbless");
		}
		return thing; // [!code ++]
	}

	public virtual void OnBecomeBranchFaith()
```

## RenderRow

[`@@ -273,6 +273,10 @@ public Sprite GetSprite(int dir = 0, int skin = 0, bool snow = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/RenderRow.cs#L273-L278)
```cs:line-numbers=273
	{
		skin = 0;
	}
	if (dir < 0) // [!code ++]
	{ // [!code ++]
		dir *= -1; // [!code ++]
	} // [!code ++]
	if (dir >= array.Length)
	{
		dir = 0;
```

## SKILL

[`@@ -2,19 +2,19 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SKILL.cs#L2-L20)
```cs:line-numbers=2
{
	public const int twowield = 131;

	public const int armorHeavy = 122; // [!code ++]
 // [!code ++]
	public const int twohand = 130;

	public const int shield = 123;

	public const int armorHeavy = 122; // [!code --]
 // [!code --]
	public const int fireproof = 50; // [!code --]
	public const int weaponCrossbow = 109; // [!code ++]

	public const int weaponBlunt = 111;

	public const int weaponScythe = 110;

	public const int weaponCrossbow = 109; // [!code --]
	public const int fireproof = 50; // [!code ++]

	public const int acidproof = 51;

```

[`@@ -24,7 +24,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SKILL.cs#L24-L30)
```cs:line-numbers=24

	public const int marksman = 133;

	public const int fishing = 245; // [!code --]
	public const int riding = 226; // [!code ++]

	public const int strategy = 135;

```

[`@@ -40,7 +40,7 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SKILL.cs#L40-L46)
```cs:line-numbers=40

	public const int digging = 230;

	public const int riding = 226; // [!code --]
	public const int parasite = 227; // [!code ++]

	public const int lumberjack = 225;

```

[`@@ -66,6 +66,8 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SKILL.cs#L66-L71)
```cs:line-numbers=66

	public const int evasionPerfect = 57;

	public const int fishing = 245; // [!code ++]
 // [!code ++]
	public const int life = 60;

	public const int mana = 61;
```

[`@@ -92,11 +94,11 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SKILL.cs#L92-L102)
```cs:line-numbers=92

	public const int LER = 74;

	public const int WIL = 75; // [!code --]
 // [!code --]
	public const int EDR = 56;

	public const int MAG = 76; // [!code --]
	public const int WIL = 75; // [!code ++]
 // [!code ++]
	public const int CHA = 77; // [!code ++]

	public const int LUC = 78;

```

[`@@ -118,19 +120,17 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SKILL.cs#L118-L136)
```cs:line-numbers=118

	public const int weaponBow = 104;

	public const int weaponGun = 105; // [!code --]
 // [!code --]
	public const int weaponPolearm = 106;

	public const int weaponDagger = 107;

	public const int throwing = 108;

	public const int CHA = 77; // [!code --]
	public const int MAG = 76; // [!code ++]

	public const int gathering = 250;

	public const int parasite = 227; // [!code --]
	public const int weaponGun = 105; // [!code ++]

	public const int blacksmith = 256;

```

[`@@ -264,13 +264,13 @@ public class SKILL`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SKILL.cs#L264-L276)
```cs:line-numbers=264

	public static readonly int[] IDS = new int[131]
	{
		131, 130, 123, 122, 50, 111, 110, 109, 51, 132, // [!code --]
		120, 133, 245, 135, 242, 241, 240, 237, 235, 230, // [!code --]
		226, 225, 220, 210, 207, 200, 152, 151, 150, 134, // [!code --]
		55, 101, 57, 60, 61, 62, 64, 65, 66, 67, // [!code --]
		68, 70, 71, 72, 73, 74, 75, 56, 76, 78, // [!code --]
		79, 80, 90, 91, 92, 100, 102, 103, 104, 105, // [!code --]
		106, 107, 108, 77, 250, 227, 256, 916, 917, 918, // [!code --]
		131, 122, 130, 123, 109, 111, 110, 50, 51, 132, // [!code ++]
		120, 133, 226, 135, 242, 241, 240, 237, 235, 230, // [!code ++]
		227, 225, 220, 210, 207, 200, 152, 151, 150, 134, // [!code ++]
		55, 101, 57, 245, 60, 61, 62, 64, 65, 66, // [!code ++]
		67, 68, 70, 71, 72, 73, 74, 56, 75, 77, // [!code ++]
		78, 79, 80, 90, 91, 92, 100, 102, 103, 104, // [!code ++]
		106, 107, 108, 76, 250, 105, 256, 916, 917, 918, // [!code ++]
		919, 920, 921, 922, 923, 924, 925, 950, 951, 952,
		953, 954, 955, 956, 957, 958, 959, 960, 961, 962,
		963, 964, 965, 971, 972, 255, 915, 914, 970, 912,
```

## SourceElement

[`@@ -386,7 +386,7 @@ public void AddRow(Row ele, int id, string idOrg)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SourceElement.cs#L386-L392)
```cs:line-numbers=386
	row2.alias = row.alias + ele.alias.Remove(0, 3);
	row2.aliasRef = ele.alias;
	row2.aliasParent = ele.aliasParent;
	row2.chance = row.chance; // [!code --]
	row2.chance = row.chance * ele.chance / 100; // [!code ++]
	row2.LV = row.LV;
	row2.OnImportData(EClass.sources.elements);
	rows.Add(row2);
```

## SourceFood

[`@@ -105,6 +105,12 @@ public override void SetRow(Row r)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SourceFood.cs#L105-L110)
```cs:line-numbers=105
		map[r.id] = r;
	}

	public override void Reset() // [!code ++]
	{ // [!code ++]
		base.Reset(); // [!code ++]
		EClass.sources.things.Reset(); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public override void OnImportRow(Row _r, SourceThing.Row c)
	{
		List<int> list = new List<int>(c.elements);
```

## SourceThingV

[`@@ -87,6 +87,12 @@ public override void ValidatePref()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/SourceThingV.cs#L87-L92)
```cs:line-numbers=87
		}
	}

	public override void Reset() // [!code ++]
	{ // [!code ++]
		base.Reset(); // [!code ++]
		EClass.sources.things.Reset(); // [!code ++]
	} // [!code ++]
 // [!code ++]
	public override void OnAfterImportData()
	{
		Dictionary<string, SourceThing.Row> dictionary = new Dictionary<string, SourceThing.Row>();
```

## +StanceFury

::: details File Created
```cs
public class StanceFury : BaseStance
{
}
```

:::
## +StanceIai

::: details File Created
```cs
public class StanceIai : BaseStance
{
}
```

:::
## Task

[`@@ -23,7 +23,7 @@ public override void OnSuccess()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Task.cs#L23-L29)
```cs:line-numbers=23
		Destroy();
	}

	public void TryLayer(int min = 30) // [!code --]
	public void TryLater(int min = 30) // [!code ++]
	{
		nextTry = EClass.game.sessionMin + min;
	}
```

[`@@ -53,7 +53,7 @@ public virtual void OnDestroy()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Task.cs#L53-L59)
```cs:line-numbers=53

	public override Status Cancel()
	{
		TryLayer(); // [!code --]
		TryLater(); // [!code ++]
		return base.Cancel();
	}

```

## TaskBuild

[`@@ -127,7 +127,7 @@ public override bool _CanPerformTask(Chara chara, int radius)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/TaskBuild.cs#L127-L133)
```cs:line-numbers=127
		ingredient.thing = EClass._map.Stocked.Find(ingredient.id, ingredient.mat, ingredient.refVal);
		if (ingredient.thing == null)
		{
			TryLayer(); // [!code --]
			TryLater(); // [!code ++]
			return false;
		}
	}
```

## Thing

[`@@ -1514,7 +1514,7 @@ public override void SetRenderParam(RenderParam p)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Thing.cs#L1514-L1520)
```cs:line-numbers=1514
public override SubPassData GetSubPassData()
{
	Chara chara = GetRootCard() as Chara;
	if ((!trait.ShowAsTool || (chara == EClass.pc && HotItemHeld.disableTool)) && (chara?.held == this || (placeState != PlaceState.installed && renderer.data.subCrate.enable && parent is Zone))) // [!code --]
	if ((!trait.ShowAsTool || (chara == EClass.pc && HotItemHeld.disableTool)) && (chara?.held == this || (!base.isRoofItem && placeState != PlaceState.installed && renderer.data.subCrate.enable && parent is Zone))) // [!code ++]
	{
		if (!renderer.data.subCrate.enable)
		{
```

## Trait

[`@@ -204,6 +204,18 @@ public virtual InvGridSize InvGridSize`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/Trait.cs#L204-L209)
```cs:line-numbers=204

	public virtual bool IsContainer => false;

	public virtual bool CanSearchContent // [!code ++]
	{ // [!code ++]
		get // [!code ++]
		{ // [!code ++]
			if (IsContainer) // [!code ++]
			{ // [!code ++]
				return owner.c_lockLv == 0; // [!code ++]
			} // [!code ++]
			return false; // [!code ++]
		} // [!code ++]
	} // [!code ++]
 // [!code ++]
	public virtual bool CanOpenContainer
	{
		get
```

## TraitAltar

[`@@ -153,8 +153,10 @@ public void OnOffer(Chara c, Thing t)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/TraitAltar.cs#L153-L160)
```cs:line-numbers=153
	{
		if (t.HasTag(CTAG.godArtifact) && t.c_idDeity == Deity.id)
		{
			int encLV = t.encLV; // [!code ++]
			t.Destroy();
			Religion.Reforge(t.id);
			t.SetEncLv(encLV); // [!code ++]
			return;
		}
		if (EClass.pc.IsEyth)
```

## TraitMannequin

[`@@ -4,6 +4,8 @@ public class TraitMannequin : TraitItem`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/TraitMannequin.cs#L4-L9)
```cs:line-numbers=4
{
	public override bool CanStack => false;

	public override bool CanSearchContent => true; // [!code ++]
 // [!code ++]
	public override bool UseAltTiles => owner.things.Count > 0;

	public override bool CanUseFromInventory => false;
```

## WidgetSearch

[`@@ -136,7 +136,7 @@ public override void Search(string s)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/81e5e82eb0bae30bf442fbf76faa326a439d93a2/Elin/WidgetSearch.cs#L136-L142)
```cs:line-numbers=136
			}
			foreach (Card item in EMono._map.props.stocked.all)
			{
				if (!(item.parent is Thing { c_lockLv: <=0, IsContainer: not false })) // [!code --]
				if (!(item.parent is Thing thing) || !thing.trait.CanSearchContent) // [!code ++]
				{
					continue;
				}
```

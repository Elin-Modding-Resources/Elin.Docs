---
exclude: true
aside: false
pageClass: diff-single-page
footer: false
editLink: false
lastUpdated: false
description: 7 files modified. 1 new file created.
version: EA 23.240 Nightly
changes: AI_PlayMusic/ActThrow/BaseListPeople/EClass/LayerShippingResult/Trait/TraitFoodEggFertilized/+TraitGeneratorHamster
---

# EA 23.240 Nightly

November 28, 2025

7 files modified. 1 new file created.

## Important Changes

Possible breaking changes. Click the filename to view the chunk.
### [EClass (1)](#eclass)
```cs:no-line-numbers
public static int curve(int a, int start, int step, int rate = 75) // [!code --]
public static int curve(int _a, int start, int step, int rate = 75) // [!code ++]
```
## AI_PlayMusic

[`public override IEnumerable<Status> Run()`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ec91592eb126fa0902e8675c0b696a5c5be8da37/Elin/AI_PlayMusic.cs#L141-L146)
```cs:line-numbers=141
		case "cello":
			idSong = "cello_prelude";
			break;
		case "koto": // [!code ++]
			idSong = "koto"; // [!code ++]
			break; // [!code ++]
		case "instrument_violin":
		case "panty":
			idSong = "violin_chaconne";
```

## ActThrow

[`public static EffectIRenderer Throw(Card c, Point p, Card target, Thing t, Throw`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ec91592eb126fa0902e8675c0b696a5c5be8da37/Elin/ActThrow.cs#L310-L325)
```cs:line-numbers=310
			Chara chara4 = Act.TC.Chara;
			if (traitMonsterBall.IsSilvercatBall)
			{
				if (chara4.id != "cat_silver" || chara4.IsPCFactionOrMinion || EClass._zone.id == "startVillage2" || EClass._zone.IsUserZone) // [!code --]
				if (chara4.id != "cat_silver" || chara4.IsPCFactionOrMinion || EClass._zone.id == "startVillage2" || EClass._zone.IsUserZone || EClass._zone.Boss == chara4 || chara4.c_bossType != 0) // [!code ++]
				{
					Msg.Say("monsterball_invalid");
					break;
				}
				if (chara4.LV > 10) // [!code --]
				{ // [!code --]
					Msg.Say("monsterball_lv"); // [!code --]
					break; // [!code --]
				} // [!code --]
			}
			else if (traitMonsterBall.IsDuponneBall)
			{
```

## BaseListPeople

[`public override void OnClick(Chara c, ItemGeneral i)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ec91592eb126fa0902e8675c0b696a5c5be8da37/Elin/BaseListPeople.cs#L302-L308)
```cs:line-numbers=302
		});
		if (c != EClass.pc)
		{
			if (c.sourceCard.idActor.IsEmpty() && c.host == null) // [!code --]
			if (c.sourceCard.idActor.IsEmpty()) // [!code ++]
			{
				if (c.pccData == null)
				{
```

## EClass

[`using Newtonsoft.Json;`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ec91592eb126fa0902e8675c0b696a5c5be8da37/Elin/EClass.cs#L1-L4)
```cs:line-numbers=1
using Newtonsoft.Json;
using UnityEngine; // [!code ++]

[JsonObject(MemberSerialization.OptIn)]
public class EClass
```

[`public static int rnd(int a)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ec91592eb126fa0902e8675c0b696a5c5be8da37/Elin/EClass.cs#L65-L87)
```cs:line-numbers=65
		return Rand.rnd(a);
	}

	public static int curve(int a, int start, int step, int rate = 75) // [!code --]
	public static int curve(int _a, int start, int step, int rate = 75) // [!code ++]
	{
		if (a <= start) // [!code --]
		if (_a <= start) // [!code ++]
		{
			return a; // [!code --]
			return _a; // [!code ++]
		}
		long num = _a; // [!code ++]
		for (int i = 0; i < 10; i++)
		{
			int num = start + i * step; // [!code --]
			if (a > num) // [!code --]
			int num2 = start + i * step; // [!code ++]
			if (num <= num2) // [!code ++]
			{
				a = num + (a - num) * rate / 100; // [!code --]
				continue; // [!code --]
				break; // [!code ++]
			}
			return a; // [!code --]
			num = num2 + (num - num2) * rate / 100; // [!code ++]
		}
		return a; // [!code --]
		return (int)Mathf.Clamp(num, -2.1474836E+09f, 2.1474836E+09f); // [!code ++]
	}

	public static int rndHalf(int a)
```

## LayerShippingResult

[`public class LayerShippingResult : ELayer`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ec91592eb126fa0902e8675c0b696a5c5be8da37/Elin/LayerShippingResult.cs#L62-L67)
```cs:line-numbers=62
	{
		num = 0;
	}
	if (num == 3 && ELayer.game.cards.globalCharas.Find("farris") == null) // [!code ++]
	{ // [!code ++]
		num = 0; // [!code ++]
	} // [!code ++]
	imageBG.sprite = spriteBG[num];
	Rand.SetSeed();
	base.Awake();
```

## Trait

[`public void OnBarter(bool reroll = false)`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ec91592eb126fa0902e8675c0b696a5c5be8da37/Elin/Trait.cs#L1893-L1899)
```cs:line-numbers=1893
				break;
			case ShopType.Moyer:
			{
				for (int num12 = 1; num12 <= 12; num12++) // [!code --]
				for (int num12 = 1; num12 <= 13; num12++) // [!code ++]
				{
					AddAdvWeek(num12);
				}
```

## TraitFoodEggFertilized

[`public class TraitFoodEggFertilized : TraitFoodEgg`](https://github.com/Elin-Modding-Resources/Elin-Decompiled/blob/ec91592eb126fa0902e8675c0b696a5c5be8da37/Elin/TraitFoodEggFertilized.cs#L7-L31)
```cs:line-numbers=7
public static Chara Incubate(Thing egg, Point pos, Card incubator = null)
{
	egg.SetSale(sale: false);
	string text = ""; // [!code --]
	string str = ""; // [!code ++]
	CardRow refCard = egg.refCard;
	if (refCard != null)
	{
		text = refCard.id; // [!code --]
		str = refCard.id; // [!code ++]
		if (refCard.id == "chara" || refCard.quality == 4)
		{
			text = ""; // [!code --]
			str = ""; // [!code ++]
		}
	}
	if (egg.IsDecayed)
	{
		text = "zombie"; // [!code --]
		str = "zombie"; // [!code ++]
	}
	if (text == "cat_silver") // [!code --]
	{ // [!code --]
		text = "cat"; // [!code --]
	} // [!code --]
	Chara chara = CharaGen.Create(text.IsEmpty("chicken")); // [!code --]
	Chara chara = CharaGen.Create(str.IsEmpty("chicken")); // [!code ++]
	EClass._zone.AddCard(chara, pos.GetNearestPoint(allowBlock: false, allowChara: false) ?? EClass.pc.pos);
	chara.SetLv(1);
	chara.SetMainElement(egg.c_idMainElement, 10, elemental: true);
```

## +TraitGeneratorHamster

::: details File Created
```cs
public class TraitGeneratorHamster : TraitGenerator
{
	public override bool UseExtra => owner.isOn;

	public override bool IsAnimeOn => owner.isOn;

	public override string IdSoundToggleOn => "switch_on_spin";

	public override string IdSoundToggleOff => "switch_off_spin";

	public override ToggleType ToggleType => ToggleType.Custom;

	public override bool IsOn => owner.isOn;

	public override bool Waterproof => true;

	public override bool CanUse(Chara c)
	{
		return owner.IsInstalled;
	}

	public override bool OnUse(Chara c)
	{
		Toggle(!owner.isOn);
		return true;
	}
}
```

:::